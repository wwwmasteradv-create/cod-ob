
================================================================================
–§–ê–ô–õ: update_categories.py
================================================================================
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π —É—Å–ª—É–≥ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
–Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π
"""

import sys
import os

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

from app import create_app, db
from models.service import Service

def extract_category_from_name(name):
    """–ò–∑–≤–ª–µ–∫–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è —É—Å–ª—É–≥–∏"""
    if not name:
        return '–ú–∞—Å—Å–∞–∂–∏'
    
    name_lower = name.lower()
    
    if any(word in name_lower for word in ['–¥–µ—Ç—Å–∫', '—Ä–µ–±–µ–Ω–æ–∫', '–º–ª–∞–¥–µ–Ω–µ—Ü', '1-12', '1-5', '6-12', '13-16']):
        return '–î–µ—Ç—Å–∫–∏–π –º–∞—Å—Å–∞–∂'
    elif any(word in name_lower for word in ['–æ–±—â–∏–π', '–ª–µ—á–µ–±–Ω—ã–π', '—Ä–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–π', '–ª–∏–º—Ñ–æ–¥—Ä–µ–Ω–∞–∂–Ω—ã–π', '—Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π']):
        return '–û–±—â–∏–π –º–∞—Å—Å–∞–∂'
    elif any(word in name_lower for word in ['–∞–ø–ø–∞—Ä–∞—Ç', 'lpg', '–∫–∞–≤–∏—Ç–∞—Ü', 'rf', '–≤–∞–∫—É—É–º', '–≤–∏–±—Ä–æ–º–∞—Å—Å–∞–∂']):
        return '–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã'
    elif any(word in name_lower for word in ['—Å–ø–∞', '–±–æ—á–∫–∞', '–ø–∏–ª–∏–Ω–≥', '–æ–±–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ', '–∫–µ–¥—Ä–æ–≤']):
        return '–°–ü–ê-–ø—Ä–æ—Ü–µ–¥—É—Ä—ã'
    elif any(word in name_lower for word in ['–æ–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å', '–∏—Å—Ü–µ–ª—è—é—â', '–æ–º–æ–ª–æ–∂–µ–Ω', '–∫–æ—Ä—Ä–µ–∫—Ü', '–∂–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç', '—É—Å–ø–µ—à–Ω–æ—Å—Ç', '–∞–∫—Å–µ—Å—Å']):
        return '–û–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏'
    elif '–∫–æ–º–ø–ª–µ–∫—Å' in name_lower:
        return '–ö–æ–º–ø–ª–µ–∫—Å—ã'
    else:
        return '–ú–∞—Å—Å–∞–∂–∏'

def update_service_categories():
    """–û–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥ –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–∑–≤–∞–Ω–∏–π"""
    app = create_app()
    
    with app.app_context():
        services = Service.query.all()
        updated_count = 0
        
        print(f"–ù–∞–π–¥–µ–Ω–æ —É—Å–ª—É–≥: {len(services)}")
        print("-" * 60)
        
        for service in services:
            old_category = service.category
            service_name = service.name or service.service_name or ''
            new_category = extract_category_from_name(service_name)
            
            if old_category != new_category:
                print(f"–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: {service_name}")
                print(f"  –°—Ç–∞—Ä–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è: {old_category}")
                print(f"  –ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è: {new_category}")
                print()
                
                service.category = new_category
                updated_count += 1
        
        if updated_count > 0:
            try:
                db.session.commit()
                print(f"‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ {updated_count} —É—Å–ª—É–≥")
            except Exception as e:
                print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏: {e}")
                db.session.rollback()
        else:
            print("‚úÖ –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É–∂–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã")

if __name__ == '__main__':
    update_service_categories()










================================================================================
–§–ê–ô–õ: config.py
================================================================================
# -*- coding: utf-8 -*-
"""
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Flask

PROD: –í—Å–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏ –¥–æ–ª–∂–Ω—ã —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.
"""

import os
from dotenv import load_dotenv

# ==================================================
# üîß –ó–ê–ì–†–£–ó–ö–ê –ü–ï–†–ï–ú–ï–ù–ù–´–• –û–ö–†–£–ñ–ï–ù–ò–Ø
# ==================================================

# NOTE: load_dotenv() –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env —Ñ–∞–π–ª–∞ –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
# PROD: –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∞ –Ω–µ .env —Ñ–∞–π–ª
load_dotenv()


class Config:
    """
    –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Flask.
    
    NOTE: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∫–ª–∞—Å—Å—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥.
    –í—Å–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞—é—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.
    """
    
    # ==================================================
    # üîê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ –ò –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–Ø
    # ==================================================
    
    # FIXME: –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ–±–µ–∑–æ–ø–∞—Å–µ–Ω –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
    # PROD: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SECRET_KEY –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
    SECRET_KEY = os.environ.get('SECRET_KEY') or 'xDID59by3Iha77j6pqrTTjlZ-QtV7QYMROyi18YFiBjeH_y9ey4rv5rH5NXLh8RLnsI'
    
    # ==================================================
    # üóÑÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò –ë–ê–ó–´ –î–ê–ù–ù–´–•
    # ==================================================
    
    # NOTE: SQLAlchemy URI –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ –°–£–ë–î: PostgreSQL, MySQL, SQLite
    # PROD: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PostgreSQL –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    SQLALCHEMY_DATABASE_URI = os.environ.get('DATABASE_URL') or 'sqlite:///massage_salon.db'
    
    # NOTE: –û—Ç–∫–ª—é—á–∞–µ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏
    SQLALCHEMY_TRACK_MODIFICATIONS = False
    
    # ==================================================
    # üìÅ –ù–ê–°–¢–†–û–ô–ö–ò –ó–ê–ì–†–£–ó–ö–ò –§–ê–ô–õ–û–í
    # ==================================================
    
    # PROD: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
    UPLOAD_FOLDER = 'static/img/uploads'
    
    # NOTE: 16MB –ª–∏–º–∏—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –º–∞—Å—Å–∞–∂–∞ –∏ –∞–≤–∞—Ç–∞—Ä–æ–≤
    MAX_CONTENT_LENGTH = 16 * 1024 * 1024
    
    # NOTE: –ë–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    ALLOWED_EXTENSIONS = {'png', 'jpg', 'jpeg', 'gif', 'svg'}
    
    # ==================================================
    # üìß –ù–ê–°–¢–†–û–ô–ö–ò EMAIL (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)
    # ==================================================
    
    # PROD: –î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∑–∞–ø–∏—Å—è—Ö –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ SMTP —Å–µ—Ä–≤–µ—Ä
    MAIL_SERVER = os.environ.get('MAIL_SERVER')
    MAIL_PORT = int(os.environ.get('MAIL_PORT') or 587)
    
    # NOTE: –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Å—Ç—Ä–æ–∫—É –≤ boolean –¥–ª—è MAIL_USE_TLS
    MAIL_USE_TLS = os.environ.get('MAIL_USE_TLS', 'true').lower() in ['true', 'on', '1']
    MAIL_USERNAME = os.environ.get('MAIL_USERNAME')
    MAIL_PASSWORD = os.environ.get('MAIL_PASSWORD')
    
    # ==================================================
    # üîó –ù–ê–°–¢–†–û–ô–ö–ò API –ò –õ–ò–ú–ò–¢–´
    # ==================================================
    
    # NOTE: –ó–∞—â–∏—Ç–∞ –æ—Ç DDoS –∞—Ç–∞–∫ —á–µ—Ä–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
    API_RATE_LIMIT = '100 per hour'
    
    # ==================================================
    # üìû –ö–û–ù–¢–ê–ö–¢–ù–´–ï –î–ê–ù–ù–´–ï –°–ê–õ–û–ù–ê
    # ==================================================
    
    # PROD: –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∞—à–µ–≥–æ —Å–∞–ª–æ–Ω–∞
    CONTACT_PHONE = os.environ.get('CONTACT_PHONE') or '+7 (917) 922-57-20'
    CONTACT_EMAIL = os.environ.get('CONTACT_EMAIL') or 'massage.enliven@gmail.com'
    CONTACT_ADDRESS = os.environ.get('CONTACT_ADDRESS') or '—É–ª. –õ–µ–Ω–∏–Ω–∞, –≥.–ê–ª—å–º–µ—Ç—å–µ–≤—Å–∫'
    
    # ==================================================
    # ü§ñ –ù–ê–°–¢–†–û–ô–ö–ò TELEGRAM –ë–û–¢–ê
    # ==================================================
    
    # PROD: –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç BotFather –∏ ID —á–∞—Ç–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    TELEGRAM_BOT_TOKEN = os.environ.get('TELEGRAM_BOT_TOKEN')
    TELEGRAM_CHAT_ID = os.environ.get('TELEGRAM_CHAT_ID')


class DevelopmentConfig(Config):
    """
    –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Å—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
    
    NOTE: –í–∫–ª—é—á–∞–µ—Ç –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π —Ä–µ–∂–∏–º –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é SQLite –ë–î.
    """
    DEBUG = True
    
    # NOTE: –û—Ç–¥–µ–ª—å–Ω–∞—è –ë–î –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —á—Ç–æ–±—ã –Ω–µ –ø–æ—Ä—Ç–∏—Ç—å –ø—Ä–æ–¥–∞–∫—à–µ–Ω –¥–∞–Ω–Ω—ã–µ
    SQLALCHEMY_DATABASE_URI = 'sqlite:///massage_salon_dev.db'


class ProductionConfig(Config):
    """
    –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω —Å—Ä–µ–¥—ã.
    
    PROD: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º.
    """
    DEBUG = False
    TESTING = False
    
    # PROD: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PostgreSQL –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
    SQLALCHEMY_DATABASE_URI = os.environ.get('DATABASE_URL') or 'sqlite:///massage_salon.db'
    
    # PROD: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å - –ø—Ä–æ–≤–µ—Ä–∫–∞ SECRET_KEY
    if not os.environ.get('SECRET_KEY'):
        raise ValueError("SECRET_KEY must be set in production environment!")
    
    # PROD: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è production
    SESSION_COOKIE_SECURE = True  # –¢–æ–ª—å–∫–æ HTTPS
    SESSION_COOKIE_HTTPONLY = True  # –ó–∞—â–∏—Ç–∞ –æ—Ç XSS
    SESSION_COOKIE_SAMESITE = 'Lax'  # –ó–∞—â–∏—Ç–∞ –æ—Ç CSRF
    
    # PROD: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
    LOG_LEVEL = os.environ.get('LOG_LEVEL', 'INFO')
    
    # PROD: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
    MAX_CONTENT_LENGTH = 16 * 1024 * 1024  # 16MB


class TestingConfig(Config):
    """
    –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥—ã.
    
    NOTE: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç in-memory SQLite –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤.
    """
    TESTING = True
    SQLALCHEMY_DATABASE_URI = 'sqlite:///:memory:'
    
    # NOTE: –û—Ç–∫–ª—é—á–∞–µ–º CSRF –∑–∞—â–∏—Ç—É –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–æ—Ä–º
    WTF_CSRF_ENABLED = False


# ==================================================
# üéØ –°–õ–û–í–ê–†–¨ –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ô
# ==================================================

config = {
    'development': DevelopmentConfig,
    'production': ProductionConfig, 
    'testing': TestingConfig,
    'default': DevelopmentConfig  # NOTE: –ö–æ–Ω—Ñ–∏–≥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
}





================================================================================
–§–ê–ô–õ: add_services.py
================================================================================
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É—Å–ª—É–≥ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
"""

import sys
import os

# –î–æ–±–∞–≤–ª—è–µ–º –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞ –≤ –ø—É—Ç—å
sys.path.insert(0, os.path.dirname(os.path.abspath(__file__)))

from app import create_app
from models import db, Service
from datetime import datetime

def parse_duration(duration_str):
    """
    –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å—Ç—Ä–æ–∫—É –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ –º–∏–Ω—É—Ç—ã.
    –ü—Ä–∏–º–µ—Ä—ã:
    - "1,5 —á–∞—Å–∞" -> 90
    - "2 —á–∞—Å–∞" -> 120
    - "30 –º–∏–Ω" -> 30
    - "2,5 —á–∞—Å–∞" -> 150
    """
    duration_str = duration_str.strip().lower()
    
    if '—á–∞—Å' in duration_str or '—á–∞—Å–∞' in duration_str or '—á–∞—Å–æ–≤' in duration_str:
        # –ò–∑–≤–ª–µ–∫–∞–µ–º —á–∏—Å–ª–æ (–º–æ–∂–µ—Ç –±—ã—Ç—å —Å –∑–∞–ø—è—Ç–æ–π)
        number_str = duration_str.replace('—á–∞—Å', '').replace('–∞', '').replace('–æ–≤', '').strip()
        number_str = number_str.replace(',', '.')
        try:
            hours = float(number_str)
            return int(hours * 60)
        except ValueError:
            print(f"–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: {duration_str}")
            return 60
    elif '–º–∏–Ω' in duration_str:
        # –ò–∑–≤–ª–µ–∫–∞–µ–º —á–∏—Å–ª–æ
        number_str = duration_str.replace('–º–∏–Ω', '').strip()
        try:
            return int(number_str)
        except ValueError:
            print(f"–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: {duration_str}")
            return 30
    else:
        print(f"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: {duration_str}")
        return 60

def add_services():
    """–î–æ–±–∞–≤–ª—è–µ—Ç —É—Å–ª—É–≥–∏ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö"""
    
    # –°–æ–∑–¥–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Flask
    app = create_app()
    
    with app.app_context():
        # –î–∞–Ω–Ω—ã–µ —É—Å–ª—É–≥
        services_data = [
            {
                'name': '–†–∞—Å–∫—Ä—ã—Ç–∏–µ –∂–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏',
                'duration_str': '1,5 —á–∞—Å–∞',
                'price': 5000
            },
            {
                'name': '–û–±—â–∏–π –ª–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂ + –∏—Å—Ü–µ–ª—è—é—â–∞—è —Å–µ—Å—Å–∏—è',
                'duration_str': '1,5 —á–∞—Å–∞',
                'price': 7000
            },
            {
                'name': '–û–º–æ–ª–æ–∂–µ–Ω–∏–µ –ª–∏—Ü–∞ –∏ —Ç–µ–ª–∞',
                'duration_str': '2 —á–∞—Å–∞',
                'price': 7000
            },
            {
                'name': '–ú–∞—Å—Å–∞–∂ —Å–ø–∏–Ω—ã + –∏—Å—Ü–µ–ª—è—é—â–∞—è —Å–µ—Å—Å–∏—è',
                'duration_str': '1 —á–∞—Å',
                'price': 3500
            },
            {
                'name': '–ú–∞—Å—Å–∞–∂ –Ω–æ–≥ + –∏—Å—Ü–µ–ª—è—é—â–∞—è —Å–µ—Å—Å–∏—è',
                'duration_str': '1 —á–∞—Å',
                'price': 3500
            },
            {
                'name': '–õ–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂ + –∫–µ–¥—Ä–æ–≤–∞—è –±–æ—á–∫–∞',
                'duration_str': '1,5 —á–∞—Å–∞',
                'price': 3500
            },
            {
                'name': '–ú–∞—Å—Å–∞–∂ —Å–ø–∏–Ω—ã',
                'duration_str': '30 –º–∏–Ω',
                'price': 1500
            },
            {
                'name': '–ú–∞—Å—Å–∞–∂ –Ω–æ–≥',
                'duration_str': '30 –º–∏–Ω',
                'price': 1500
            },
            {
                'name': '–ú–∞—Å—Å–∞–∂ –ª–∏—Ü–∞',
                'duration_str': '30 –º–∏–Ω',
                'price': 1100
            },
            {
                'name': 'LPG –º–∞—Å—Å–∞–∂ —Ç–µ–ª–∞ –ø–æ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–º—É –∫–æ—Å—Ç—é–º—É',
                'duration_str': '30 –º–∏–Ω',
                'price': 1500
            },
            {
                'name': '–í–∞–∫—É—É–º–Ω—ã–π –º–∞—Å—Å–∞–∂',
                'duration_str': '30 –º–∏–Ω',
                'price': 1500  # –ò—Å–ø–æ–ª—å–∑—É–µ–º 1500, —Ç–∞–∫ –∫–∞–∫ —Ü–µ–Ω–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞ –≤ –∏—Å—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            },
            {
                'name': '–°–ø–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ ¬´–®–æ–∫–æ–ª–∞–¥–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ¬ª',
                'duration_str': '2,5 —á–∞—Å–∞',
                'price': 5500
            }
        ]
        
        added_count = 0
        skipped_count = 0
        
        for service_data in services_data:
            name = service_data['name']
            duration_str = service_data['duration_str']
            price = service_data['price']
            
            # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∏–Ω—É—Ç—ã
            duration_minutes = parse_duration(duration_str)
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —Ç–∞–∫–∞—è —É—Å–ª—É–≥–∞
            existing_service = Service.query.filter_by(name=name).first()
            if existing_service:
                print(f"‚ö†Ô∏è  –£—Å–ª—É–≥–∞ '{name}' —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (ID: {existing_service.id}), –ø—Ä–æ–ø—É—Å–∫–∞–µ–º")
                skipped_count += 1
                continue
            
            # –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é —É—Å–ª—É–≥—É
            service = Service(
                name=name,
                base_duration=duration_minutes,
                duration_prices={str(duration_minutes): price},
                category='massage',
                is_active=True,
                description=f'–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {duration_str}'
            )
            
            db.session.add(service)
            added_count += 1
            print(f"‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —É—Å–ª—É–≥–∞: {name} ({duration_str}, {price} —Ä—É–±.)")
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
        try:
            db.session.commit()
            print(f"\n‚úÖ –£—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ —É—Å–ª—É–≥: {added_count}")
            if skipped_count > 0:
                print(f"‚ö†Ô∏è  –ü—Ä–æ–ø—É—â–µ–Ω–æ —É—Å–ª—É–≥ (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç): {skipped_count}")
        except Exception as e:
            db.session.rollback()
            print(f"\n‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏: {e}")
            raise

if __name__ == '__main__':
    print("=" * 60)
    print("–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö")
    print("=" * 60)
    try:
        add_services()
        print("=" * 60)
        print("‚úÖ –ì–æ—Ç–æ–≤–æ!")
        print("=" * 60)
    except Exception as e:
        print("=" * 60)
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")
        print("=" * 60)
        import traceback
        traceback.print_exc()
        sys.exit(1)












================================================================================
–§–ê–ô–õ: update_services_json.py
================================================================================
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è services.json –Ω–∞ –æ—Å–Ω–æ–≤–µ —É—Å–ª—É–≥ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
"""

import sys
import os
import json

sys.path.insert(0, os.path.dirname(os.path.abspath(__file__)))

from app import create_app
from models import db, Service

# –û–ø–∏—Å–∞–Ω–∏—è —É—Å–ª—É–≥
SERVICE_DESCRIPTIONS = {
    "–†–∞—Å–∫—Ä—ã—Ç–∏–µ –∂–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏": {
        "short_description": "–°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –∂–µ–Ω—Å–∫–æ–π —ç–Ω–µ—Ä–≥–∏–∏ –∏ –≥–∞—Ä–º–æ–Ω–∏–∏",
        "full_description": "–£–Ω–∏–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞, —Å–æ—á–µ—Ç–∞—é—â–∞—è –º–∞—Å—Å–∞–∂–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏, —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ —Ä–∞–±–æ—Ç—É —Å —Ç–µ–ª–æ–º –¥–ª—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –∂–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, –ø–æ–≤—ã—à–µ–Ω–∏—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ —Å–µ–±–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –≥–∞—Ä–º–æ–Ω–∏–∏.",
        "category": "–†–µ–ª–∞–∫—Å–∞—Ü–∏—è –∏ SPA",
        "benefits": [
            "–†–∞—Å–∫—Ä—ã—Ç–∏–µ –∂–µ–Ω—Å–∫–æ–π —ç–Ω–µ—Ä–≥–∏–∏",
            "–ü–æ–≤—ã—à–µ–Ω–∏–µ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ —Å–µ–±–µ",
            "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –≥–∞—Ä–º–æ–Ω–∏–∏",
            "–°–Ω—è—Ç–∏–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –±–ª–æ–∫–æ–≤",
            "–£–ª—É—á—à–µ–Ω–∏–µ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—è"
        ],
        "contraindications": [
            "–û—Å—Ç—Ä—ã–µ –≤–æ—Å–ø–∞–ª–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã",
            "–ë–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å (–ø–µ—Ä–≤—ã–π —Ç—Ä–∏–º–µ—Å—Ç—Ä)",
            "–ü—Å–∏—Ö–∏—á–µ—Å–∫–∏–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è –≤ —Å—Ç–∞–¥–∏–∏ –æ–±–æ—Å—Ç—Ä–µ–Ω–∏—è"
        ],
        "tags": ["–∂–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å", "—ç–Ω–µ—Ä–≥–∏—è", "–≥–∞—Ä–º–æ–Ω–∏—è", "—Ä–µ–ª–∞–∫—Å–∞—Ü–∏—è"]
    },
    "–û–±—â–∏–π –ª–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂ + –∏—Å—Ü–µ–ª—è—é—â–∞—è —Å–µ—Å—Å–∏—è": {
        "short_description": "–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ª–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂ —Å —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π",
        "full_description": "–°–æ—á–µ—Ç–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ –ª–µ—á–µ–±–Ω–æ–≥–æ –º–∞—Å—Å–∞–∂–∞ –≤—Å–µ–≥–æ —Ç–µ–ª–∞ —Å –∏—Å—Ü–µ–ª—è—é—â–µ–π —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–µ–π. –ü–æ–º–æ–≥–∞–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ —Å–Ω—è—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, –Ω–æ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π –±–∞–ª–∞–Ω—Å –æ—Ä–≥–∞–Ω–∏–∑–º–∞.",
        "category": "–õ–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂",
        "benefits": [
            "–õ–µ—á–µ–Ω–∏–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π –æ–ø–æ—Ä–Ω–æ-–¥–≤–∏–≥–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∞–ø–ø–∞—Ä–∞—Ç–∞",
            "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞",
            "–°–Ω—è—Ç–∏–µ –º—ã—à–µ—á–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è",
            "–£–ª—É—á—à–µ–Ω–∏–µ –æ–±—â–µ–≥–æ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—è",
            "–ì–ª—É–±–æ–∫–æ–µ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ"
        ],
        "contraindications": [
            "–û—Å—Ç—Ä—ã–π –ø–µ—Ä–∏–æ–¥ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è",
            "–ü–æ–≤—ã—à–µ–Ω–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Ç–µ–ª–∞",
            "–û–Ω–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è",
            "–°–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç—ã–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è –≤ —Å—Ç–∞–¥–∏–∏ –¥–µ–∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏"
        ],
        "tags": ["–ª–µ—á–µ–Ω–∏–µ", "—ç–Ω–µ—Ä–≥–∏—è", "–∏—Å—Ü–µ–ª–µ–Ω–∏–µ", "–º–∞—Å—Å–∞–∂"]
    },
    "–û–º–æ–ª–æ–∂–µ–Ω–∏–µ –ª–∏—Ü–∞ –∏ —Ç–µ–ª–∞": {
        "short_description": "–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –æ–º–æ–ª–æ–∂–µ–Ω–∏—è –ª–∏—Ü–∞ –∏ —Ç–µ–ª–∞",
        "full_description": "–°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞, –≤–∫–ª—é—á–∞—é—â–∞—è –º–∞—Å—Å–∞–∂ –ª–∏—Ü–∞, —à–µ–∏, –¥–µ–∫–æ–ª—å—Ç–µ –∏ —Ç–µ–ª–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ–º–æ–ª–∞–∂–∏–≤–∞—é—â–∏—Ö —Ç–µ—Ö–Ω–∏–∫ –∏ —Å—Ä–µ–¥—Å—Ç–≤. –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ —É–ª—É—á—à–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–∂–∏, —Ä–∞–∑–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –º–æ—Ä—â–∏–Ω –∏ –ø–æ–≤—ã—à–µ–Ω–∏–µ —Ç–æ–Ω—É—Å–∞.",
        "category": "–ö–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∞–∂",
        "benefits": [
            "–û–º–æ–ª–æ–∂–µ–Ω–∏–µ –∫–æ–∂–∏ –ª–∏—Ü–∞ –∏ —Ç–µ–ª–∞",
            "–†–∞–∑–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –º–æ—Ä—â–∏–Ω",
            "–ü–æ–≤—ã—à–µ–Ω–∏–µ —É–ø—Ä—É–≥–æ—Å—Ç–∏ –∫–æ–∂–∏",
            "–£–ª—É—á—à–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –ª–∏—Ü–∞",
            "–ü–æ–¥—Ç—è–∂–∫–∞ –∫–æ–Ω—Ç—É—Ä–æ–≤"
        ],
        "contraindications": [
            "–í–æ—Å–ø–∞–ª–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è –∫–æ–∂–∏",
            "–ö—É–ø–µ—Ä–æ–∑ –≤ –æ—Å—Ç—Ä–æ–π —Å—Ç–∞–¥–∏–∏",
            "–ù–µ–¥–∞–≤–Ω–∏–µ –∫–æ—Å–º–µ—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã",
            "–ê–ª–ª–µ—Ä–≥–∏—è –Ω–∞ –∫–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ä–µ–¥—Å—Ç–≤–∞"
        ],
        "tags": ["–æ–º–æ–ª–æ–∂–µ–Ω–∏–µ", "–ª–∏—Ü–æ", "—Ç–µ–ª–æ", "–∫—Ä–∞—Å–æ—Ç–∞", "–∞–Ω—Ç–∏–≤–æ–∑—Ä–∞—Å—Ç"]
    },
    "–ú–∞—Å—Å–∞–∂ —Å–ø–∏–Ω—ã + –∏—Å—Ü–µ–ª—è—é—â–∞—è —Å–µ—Å—Å–∏—è": {
        "short_description": "–ú–∞—Å—Å–∞–∂ —Å–ø–∏–Ω—ã —Å —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π",
        "full_description": "–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∞–∂ —Å–ø–∏–Ω—ã, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –Ω–∞ —Å–Ω—è—Ç–∏–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –≤ –º—ã—à—Ü–∞—Ö, —É–ª—É—á—à–µ–Ω–∏–µ –æ—Å–∞–Ω–∫–∏ –∏ —Ä–∞–±–æ—Ç—É —Å –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫–æ–º, –¥–æ–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –∏—Å—Ü–µ–ª—è—é—â–µ–π —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–µ–π –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—è.",
        "category": "–õ–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂",
        "benefits": [
            "–°–Ω—è—Ç–∏–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –≤ –º—ã—à—Ü–∞—Ö —Å–ø–∏–Ω—ã",
            "–£–ª—É—á—à–µ–Ω–∏–µ –æ—Å–∞–Ω–∫–∏",
            "–õ–µ—á–µ–Ω–∏–µ –æ—Å—Ç–µ–æ—Ö–æ–Ω–¥—Ä–æ–∑–∞",
            "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞",
            "–°–Ω—è—Ç–∏–µ –±–æ–ª–µ–π –≤ —Å–ø–∏–Ω–µ"
        ],
        "contraindications": [
            "–û—Å—Ç—Ä—ã–π –ø–µ—Ä–∏–æ–¥ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫–∞",
            "–ì—Ä—ã–∂–∏ –≤ —Å—Ç–∞–¥–∏–∏ –æ–±–æ—Å—Ç—Ä–µ–Ω–∏—è",
            "–û–Ω–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è",
            "–¢—Ä–∞–≤–º—ã –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫–∞"
        ],
        "tags": ["—Å–ø–∏–Ω–∞", "–ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫", "–ª–µ—á–µ–Ω–∏–µ", "—ç–Ω–µ—Ä–≥–∏—è"]
    },
    "–ú–∞—Å—Å–∞–∂ –Ω–æ–≥ + –∏—Å—Ü–µ–ª—è—é—â–∞—è —Å–µ—Å—Å–∏—è": {
        "short_description": "–ú–∞—Å—Å–∞–∂ –Ω–æ–≥ —Å —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π",
        "full_description": "–†–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–π –º–∞—Å—Å–∞–∂ –Ω–æ–≥, –≤–∫–ª—é—á–∞—é—â–∏–π —Ä–∞–±–æ—Ç—É —Å —Å—Ç–æ–ø–∞–º–∏, –∏–∫—Ä–∞–º–∏ –∏ –±–µ–¥—Ä–∞–º–∏, –¥–æ–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –∏—Å—Ü–µ–ª—è—é—â–µ–π —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–µ–π. –ü–æ–º–æ–≥–∞–µ—Ç —Å–Ω—è—Ç—å —É—Å—Ç–∞–ª–æ—Å—Ç—å, —É–ª—É—á—à–∏—Ç—å –∫—Ä–æ–≤–æ–æ–±—Ä–∞—â–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é.",
        "category": "–†–µ–ª–∞–∫—Å–∞—Ü–∏—è –∏ SPA",
        "benefits": [
            "–°–Ω—è—Ç–∏–µ —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –Ω–æ–≥",
            "–£–ª—É—á—à–µ–Ω–∏–µ –∫—Ä–æ–≤–æ–æ–±—Ä–∞—â–µ–Ω–∏—è",
            "–°–Ω—è—Ç–∏–µ –æ—Ç–µ–∫–æ–≤",
            "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏",
            "–†–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ"
        ],
        "contraindications": [
            "–í–∞—Ä–∏–∫–æ–∑–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤–µ–Ω –≤ –æ—Å—Ç—Ä–æ–π —Å—Ç–∞–¥–∏–∏",
            "–¢—Ä–æ–º–±–æ—Ñ–ª–µ–±–∏—Ç",
            "–¢—Ä–∞–≤–º—ã –Ω–æ–≥",
            "–í–æ—Å–ø–∞–ª–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã"
        ],
        "tags": ["–Ω–æ–≥–∏", "—Ä–µ–ª–∞–∫—Å–∞—Ü–∏—è", "—ç–Ω–µ—Ä–≥–∏—è", "—É—Å—Ç–∞–ª–æ—Å—Ç—å"]
    },
    "–õ–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂ + –∫–µ–¥—Ä–æ–≤–∞—è –±–æ—á–∫–∞": {
        "short_description": "–õ–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂ —Å –ø–æ—Å–µ—â–µ–Ω–∏–µ–º –∫–µ–¥—Ä–æ–≤–æ–π –±–æ—á–∫–∏",
        "full_description": "–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞, –≤–∫–ª—é—á–∞—é—â–∞—è –ª–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂ –∏ –ø–æ—Å–µ—â–µ–Ω–∏–µ –∫–µ–¥—Ä–æ–≤–æ–π –±–æ—á–∫–∏ (—Ñ–∏—Ç–æ–±–æ—á–∫–∏). –°–æ—á–µ—Ç–∞–Ω–∏–µ –º–∞—Å—Å–∞–∂–∞ –∏ –∞—Ä–æ–º–∞—Ç–µ—Ä–∞–ø–∏–∏ –∫–µ–¥—Ä–∞ —Å–ø–æ—Å–æ–±—Å—Ç–≤—É–µ—Ç –≥–ª—É–±–æ–∫–æ–º—É —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—é, –¥–µ—Ç–æ–∫—Å–∏–∫–∞—Ü–∏–∏ –∏ –æ–∑–¥–æ—Ä–æ–≤–ª–µ–Ω–∏—é –æ—Ä–≥–∞–Ω–∏–∑–º–∞.",
        "category": "–†–µ–ª–∞–∫—Å–∞—Ü–∏—è –∏ SPA",
        "benefits": [
            "–õ–µ—á–µ–±–Ω–æ–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞ –æ—Ä–≥–∞–Ω–∏–∑–º",
            "–î–µ—Ç–æ–∫—Å–∏–∫–∞—Ü–∏—è",
            "–£–ª—É—á—à–µ–Ω–∏–µ –∫—Ä–æ–≤–æ–æ–±—Ä–∞—â–µ–Ω–∏—è",
            "–ê—Ä–æ–º–∞—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–∏–π —ç—Ñ—Ñ–µ–∫—Ç",
            "–ì–ª—É–±–æ–∫–æ–µ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ"
        ],
        "contraindications": [
            "–ü–æ–≤—ã—à–µ–Ω–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Ç–µ–ª–∞",
            "–°–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç—ã–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è",
            "–ë–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å",
            "–û–Ω–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è",
            "–û—Å—Ç—Ä—ã–µ –≤–æ—Å–ø–∞–ª–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã"
        ],
        "tags": ["–ª–µ—á–µ–Ω–∏–µ", "–∫–µ–¥—Ä–æ–≤–∞—è –±–æ—á–∫–∞", "–¥–µ—Ç–æ–∫—Å", "–∞—Ä–æ–º–∞—Ç–µ—Ä–∞–ø–∏—è"]
    },
    "–ú–∞—Å—Å–∞–∂ —Å–ø–∏–Ω—ã": {
        "short_description": "–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∞–∂ —Å–ø–∏–Ω—ã –∏ –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫–∞",
        "full_description": "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∞–∂ —Å–ø–∏–Ω—ã, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –Ω–∞ —Å–Ω—è—Ç–∏–µ –º—ã—à–µ—á–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è, —É–ª—É—á—à–µ–Ω–∏–µ –æ—Å–∞–Ω–∫–∏, –ª–µ—á–µ–Ω–∏–µ –æ—Å—Ç–µ–æ—Ö–æ–Ω–¥—Ä–æ–∑–∞ –∏ –¥—Ä—É–≥–∏—Ö –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫–∞. –í–∫–ª—é—á–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å –º—ã—à—Ü–∞–º–∏ —Å–ø–∏–Ω—ã, —à–µ–∏ –∏ –ø–ª–µ—á–µ–≤–æ–≥–æ –ø–æ—è—Å–∞.",
        "category": "–õ–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂",
        "benefits": [
            "–°–Ω—è—Ç–∏–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –≤ –º—ã—à—Ü–∞—Ö —Å–ø–∏–Ω—ã",
            "–£–ª—É—á—à–µ–Ω–∏–µ –æ—Å–∞–Ω–∫–∏",
            "–õ–µ—á–µ–Ω–∏–µ –æ—Å—Ç–µ–æ—Ö–æ–Ω–¥—Ä–æ–∑–∞",
            "–°–Ω—è—Ç–∏–µ –±–æ–ª–µ–π –≤ —Å–ø–∏–Ω–µ",
            "–£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–¥–≤–∏–∂–Ω–æ—Å—Ç–∏ –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫–∞"
        ],
        "contraindications": [
            "–û—Å—Ç—Ä—ã–π –ø–µ—Ä–∏–æ–¥ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫–∞",
            "–ì—Ä—ã–∂–∏ –≤ —Å—Ç–∞–¥–∏–∏ –æ–±–æ—Å—Ç—Ä–µ–Ω–∏—è",
            "–¢—Ä–∞–≤–º—ã –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫–∞",
            "–û–Ω–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è"
        ],
        "tags": ["—Å–ø–∏–Ω–∞", "–ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫", "–ª–µ—á–µ–Ω–∏–µ", "–æ—Å–∞–Ω–∫–∞"]
    },
    "–ú–∞—Å—Å–∞–∂ –Ω–æ–≥": {
        "short_description": "–†–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–π –º–∞—Å—Å–∞–∂ –Ω–æ–≥ –∏ —Å—Ç–æ–ø",
        "full_description": "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∞–∂ –Ω–æ–≥, –≤–∫–ª—é—á–∞—é—â–∏–π —Ä–∞–±–æ—Ç—É —Å–æ —Å—Ç–æ–ø–∞–º–∏, –∏–∫—Ä–∞–º–∏ –∏ –±–µ–¥—Ä–∞–º–∏. –ü–æ–º–æ–≥–∞–µ—Ç —Å–Ω—è—Ç—å —É—Å—Ç–∞–ª–æ—Å—Ç—å, —É–ª—É—á—à–∏—Ç—å –∫—Ä–æ–≤–æ–æ–±—Ä–∞—â–µ–Ω–∏–µ, —É–º–µ–Ω—å—à–∏—Ç—å –æ—Ç–µ–∫–∏ –∏ —Ä–∞—Å—Å–ª–∞–±–∏—Ç—å –º—ã—à—Ü—ã –Ω–æ–≥.",
        "category": "–†–µ–ª–∞–∫—Å–∞—Ü–∏—è –∏ SPA",
        "benefits": [
            "–°–Ω—è—Ç–∏–µ —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –Ω–æ–≥",
            "–£–ª—É—á—à–µ–Ω–∏–µ –∫—Ä–æ–≤–æ–æ–±—Ä–∞—â–µ–Ω–∏—è",
            "–°–Ω—è—Ç–∏–µ –æ—Ç–µ–∫–æ–≤",
            "–†–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ –º—ã—à—Ü",
            "–£–ª—É—á—à–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å—Ç–æ–ø"
        ],
        "contraindications": [
            "–í–∞—Ä–∏–∫–æ–∑–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤–µ–Ω –≤ –æ—Å—Ç—Ä–æ–π —Å—Ç–∞–¥–∏–∏",
            "–¢—Ä–æ–º–±–æ—Ñ–ª–µ–±–∏—Ç",
            "–¢—Ä–∞–≤–º—ã –Ω–æ–≥",
            "–í–æ—Å–ø–∞–ª–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã",
            "–û—Ç–∫—Ä—ã—Ç—ã–µ —Ä–∞–Ω—ã"
        ],
        "tags": ["–Ω–æ–≥–∏", "—Å—Ç–æ–ø—ã", "—Ä–µ–ª–∞–∫—Å–∞—Ü–∏—è", "—É—Å—Ç–∞–ª–æ—Å—Ç—å"]
    },
    "–ú–∞—Å—Å–∞–∂ –ª–∏—Ü–∞": {
        "short_description": "–û–º–æ–ª–∞–∂–∏–≤–∞—é—â–∏–π –º–∞—Å—Å–∞–∂ –ª–∏—Ü–∞ –∏ —à–µ–∏",
        "full_description": "–î–µ–ª–∏–∫–∞—Ç–Ω—ã–π –º–∞—Å—Å–∞–∂ –ª–∏—Ü–∞, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –Ω–∞ —É–ª—É—á—à–µ–Ω–∏–µ –∫—Ä–æ–≤–æ–æ–±—Ä–∞—â–µ–Ω–∏—è, –ø–æ–≤—ã—à–µ–Ω–∏–µ —Ç–æ–Ω—É—Å–∞ –∫–æ–∂–∏, —Ä–∞–∑–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –º–æ—Ä—â–∏–Ω –∏ —É–ª—É—á—à–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –ª–∏—Ü–∞. –í–∫–ª—é—á–∞–µ—Ç –º–∞—Å—Å–∞–∂ –ª–∏—Ü–∞, —à–µ–∏ –∏ –¥–µ–∫–æ–ª—å—Ç–µ.",
        "category": "–ö–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∞–∂",
        "benefits": [
            "–£–ª—É—á—à–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –ª–∏—Ü–∞",
            "–†–∞–∑–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –º–æ—Ä—â–∏–Ω",
            "–ü–æ–≤—ã—à–µ–Ω–∏–µ —Ç–æ–Ω—É—Å–∞ –∫–æ–∂–∏",
            "–°–Ω—è—Ç–∏–µ –æ—Ç–µ–∫–æ–≤",
            "–û–º–æ–ª–∞–∂–∏–≤–∞—é—â–∏–π —ç—Ñ—Ñ–µ–∫—Ç"
        ],
        "contraindications": [
            "–í–æ—Å–ø–∞–ª–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è –∫–æ–∂–∏",
            "–ö—É–ø–µ—Ä–æ–∑ –≤ –æ—Å—Ç—Ä–æ–π —Å—Ç–∞–¥–∏–∏",
            "–ù–µ–¥–∞–≤–Ω–∏–µ –∫–æ—Å–º–µ—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã",
            "–ê–ª–ª–µ—Ä–≥–∏—è –Ω–∞ –∫–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ä–µ–¥—Å—Ç–≤–∞"
        ],
        "tags": ["–ª–∏—Ü–æ", "–æ–º–æ–ª–æ–∂–µ–Ω–∏–µ", "–∫—Ä–∞—Å–æ—Ç–∞", "–∫–æ–∂–∞"]
    },
    "LPG –º–∞—Å—Å–∞–∂ —Ç–µ–ª–∞ –ø–æ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–º—É –∫–æ—Å—Ç—é–º—É": {
        "short_description": "–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–π LPG –º–∞—Å—Å–∞–∂ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ —Ñ–∏–≥—É—Ä—ã",
        "full_description": "–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞–ø–ø–∞—Ä–∞—Ç–Ω–∞—è –º–µ—Ç–æ–¥–∏–∫–∞ LPG –º–∞—Å—Å–∞–∂–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –∫–æ—Å—Ç—é–º–∞. –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ü–∏—é —Ñ–∏–≥—É—Ä—ã, —É–º–µ–Ω—å—à–µ–Ω–∏–µ —Ü–µ–ª–ª—é–ª–∏—Ç–∞, –ø–æ–¥—Ç—è–∂–∫—É –∫–æ–∂–∏ –∏ —É–ª—É—á—à–µ–Ω–∏–µ –∫–æ–Ω—Ç—É—Ä–æ–≤ —Ç–µ–ª–∞.",
        "category": "–ö–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∞–∂",
        "benefits": [
            "–ö–æ—Ä—Ä–µ–∫—Ü–∏—è —Ñ–∏–≥—É—Ä—ã",
            "–£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ü–µ–ª–ª—é–ª–∏—Ç–∞",
            "–ü–æ–¥—Ç—è–∂–∫–∞ –∫–æ–∂–∏",
            "–£–ª—É—á—à–µ–Ω–∏–µ –∫–æ–Ω—Ç—É—Ä–æ–≤ —Ç–µ–ª–∞",
            "–°—Ç–∏–º—É–ª—è—Ü–∏—è –≤—ã—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–ª–ª–∞–≥–µ–Ω–∞"
        ],
        "contraindications": [
            "–í–∞—Ä–∏–∫–æ–∑–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤–µ–Ω",
            "–¢—Ä–æ–º–±–æ—Ñ–ª–µ–±–∏—Ç",
            "–ë–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å –∏ –ª–∞–∫—Ç–∞—Ü–∏—è",
            "–û–Ω–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è",
            "–ö–æ–∂–Ω—ã–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è"
        ],
        "tags": ["LPG", "–∫–æ—Ä—Ä–µ–∫—Ü–∏—è —Ñ–∏–≥—É—Ä—ã", "—Ü–µ–ª–ª—é–ª–∏—Ç", "–∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π –º–∞—Å—Å–∞–∂"]
    },
    "–í–∞–∫—É—É–º–Ω—ã–π –º–∞—Å—Å–∞–∂": {
        "short_description": "–í–∞–∫—É—É–º–Ω—ã–π –º–∞—Å—Å–∞–∂ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ —Ñ–∏–≥—É—Ä—ã –∏ —É–ª—É—á—à–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–∂–∏",
        "full_description": "–í–∞–∫—É—É–º–Ω—ã–π –º–∞—Å—Å–∞–∂ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –±–∞–Ω–æ–∫ —Å–æ–∑–¥–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç –ª–∏–º—Ñ–æ–¥—Ä–µ–Ω–∞–∂–∞, —É–ª—É—á—à–∞–µ—Ç –∫—Ä–æ–≤–æ–æ–±—Ä–∞—â–µ–Ω–∏–µ, —Å–ø–æ—Å–æ–±—Å—Ç–≤—É–µ—Ç —É–º–µ–Ω—å—à–µ–Ω–∏—é —Ü–µ–ª–ª—é–ª–∏—Ç–∞ –∏ —É–ª—É—á—à–µ–Ω–∏—é —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–∂–∏.",
        "category": "–ö–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∞–∂",
        "benefits": [
            "–£–ª—É—á—à–µ–Ω–∏–µ –∫—Ä–æ–≤–æ–æ–±—Ä–∞—â–µ–Ω–∏—è",
            "–£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ü–µ–ª–ª—é–ª–∏—Ç–∞",
            "–õ–∏–º—Ñ–æ–¥—Ä–µ–Ω–∞–∂–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç",
            "–£–ª—É—á—à–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–∂–∏",
            "–ö–æ—Ä—Ä–µ–∫—Ü–∏—è —Ñ–∏–≥—É—Ä—ã"
        ],
        "contraindications": [
            "–í–∞—Ä–∏–∫–æ–∑–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤–µ–Ω",
            "–¢—Ä–æ–º–±–æ—Ñ–ª–µ–±–∏—Ç",
            "–ë–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å –∏ –ª–∞–∫—Ç–∞—Ü–∏—è",
            "–ö–æ–∂–Ω—ã–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è",
            "–ì–∏–ø–µ—Ä—Ç–æ–Ω–∏—è"
        ],
        "tags": ["–≤–∞–∫—É—É–º–Ω—ã–π", "—Ü–µ–ª–ª—é–ª–∏—Ç", "–ª–∏–º—Ñ–æ–¥—Ä–µ–Ω–∞–∂", "–∫–æ—Ä—Ä–µ–∫—Ü–∏—è —Ñ–∏–≥—É—Ä—ã"]
    },
    "–°–ø–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ ¬´–®–æ–∫–æ–ª–∞–¥–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ¬ª": {
        "short_description": "–†–æ—Å–∫–æ—à–Ω–∞—è —Å–ø–∞-–ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å —à–æ–∫–æ–ª–∞–¥–Ω—ã–º–∏ –æ–±–µ—Ä—Ç—ã–≤–∞–Ω–∏—è–º–∏",
        "full_description": "–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω–∞—è —Å–ø–∞-–ø—Ä–æ–≥—Ä–∞–º–º–∞, –≤–∫–ª—é—á–∞—é—â–∞—è –º–∞—Å—Å–∞–∂ –≤—Å–µ–≥–æ —Ç–µ–ª–∞, —à–æ–∫–æ–ª–∞–¥–Ω–æ–µ –æ–±–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ —É—Ö–æ–¥–æ–≤—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã. –°–æ–∑–¥–∞–µ—Ç –æ—â—É—â–µ–Ω–∏–µ —Ä–æ—Å–∫–æ—à–∏, —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—è –∏ –∑–∞–±–æ—Ç—ã –æ —Å–µ–±–µ. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –æ—Å–æ–±—ã—Ö —Å–ª—É—á–∞–µ–≤ –∏ –ø–æ–¥–∞—Ä–∫–∞.",
        "category": "–†–µ–ª–∞–∫—Å–∞—Ü–∏—è –∏ SPA",
        "benefits": [
            "–ì–ª—É–±–æ–∫–æ–µ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ",
            "–£–≤–ª–∞–∂–Ω–µ–Ω–∏–µ –∏ –ø–∏—Ç–∞–Ω–∏–µ –∫–æ–∂–∏",
            "–ê–Ω—Ç–∏–æ–∫—Å–∏–¥–∞–Ω—Ç–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç",
            "–£–ª—É—á—à–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è",
            "–†–æ—Å–∫–æ—à–Ω—ã–π —É—Ö–æ–¥"
        ],
        "contraindications": [
            "–ê–ª–ª–µ—Ä–≥–∏—è –Ω–∞ —à–æ–∫–æ–ª–∞–¥ –∏ –∫–∞–∫–∞–æ",
            "–ö–æ–∂–Ω—ã–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è",
            "–ë–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å (–ø–µ—Ä–≤—ã–π —Ç—Ä–∏–º–µ—Å—Ç—Ä)",
            "–û—Ç–∫—Ä—ã—Ç—ã–µ —Ä–∞–Ω—ã"
        ],
        "tags": ["—Å–ø–∞", "—à–æ–∫–æ–ª–∞–¥", "–æ–±–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ", "—Ä–æ—Å–∫–æ—à—å", "–ø–æ–¥–∞—Ä–æ–∫"]
    }
}

def get_image_for_service(service_name):
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é –¥–ª—è —É—Å–ª—É–≥–∏"""
    image_mapping = {
        "–ú–∞—Å—Å–∞–∂ —Å–ø–∏–Ω—ã": "img/services/classic-massage.jpg",
        "–ú–∞—Å—Å–∞–∂ –Ω–æ–≥": "img/services/classic-massage.jpg",
        "–ú–∞—Å—Å–∞–∂ –ª–∏—Ü–∞": "img/services/lico.jpg",
        "LPG –º–∞—Å—Å–∞–∂ —Ç–µ–ª–∞ –ø–æ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–º—É –∫–æ—Å—Ç—é–º—É": "img/services/anti.jpg",
        "–í–∞–∫—É—É–º–Ω—ã–π –º–∞—Å—Å–∞–∂": "img/services/anti.jpg",
        "–û–º–æ–ª–æ–∂–µ–Ω–∏–µ –ª–∏—Ü–∞ –∏ —Ç–µ–ª–∞": "img/services/lico.jpg",
        "–†–∞—Å–∫—Ä—ã—Ç–∏–µ –∂–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏": "img/services/relax.jpg",
        "–û–±—â–∏–π –ª–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂ + –∏—Å—Ü–µ–ª—è—é—â–∞—è —Å–µ—Å—Å–∏—è": "img/services/therapeutic-massage.jpg",
        "–ú–∞—Å—Å–∞–∂ —Å–ø–∏–Ω—ã + –∏—Å—Ü–µ–ª—è—é—â–∞—è —Å–µ—Å—Å–∏—è": "img/services/therapeutic-massage.jpg",
        "–ú–∞—Å—Å–∞–∂ –Ω–æ–≥ + –∏—Å—Ü–µ–ª—è—é—â–∞—è —Å–µ—Å—Å–∏—è": "img/services/relax.jpg",
        "–õ–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂ + –∫–µ–¥—Ä–æ–≤–∞—è –±–æ—á–∫–∞": "img/services/relax.jpg",
        "–°–ø–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ ¬´–®–æ–∫–æ–ª–∞–¥–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ¬ª": "img/services/relax.jpg"
    }
    return image_mapping.get(service_name, "img/services/classic-massage.jpg")

def update_services_json():
    """–û–±–Ω–æ–≤–ª—è–µ—Ç services.json –Ω–∞ –æ—Å–Ω–æ–≤–µ —É—Å–ª—É–≥ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"""
    app = create_app()
    
    with app.app_context():
        # –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π JSON
        json_path = os.path.join(os.path.dirname(__file__), 'data', 'services.json')
        existing_services = []
        max_id = 0
        
        if os.path.exists(json_path):
            with open(json_path, 'r', encoding='utf-8') as f:
                data = json.load(f)
                existing_services = data.get('services', [])
                categories = data.get('categories', [])
                # –ù–∞—Ö–æ–¥–∏–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π ID
                for service in existing_services:
                    if service.get('id', 0) > max_id:
                        max_id = service.get('id', 0)
        else:
            categories = []
        
        # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —É—Å–ª—É–≥–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        db_services = Service.query.filter_by(is_active=True).all()
        
        # –°–æ–∑–¥–∞–µ–º —Å–ª–æ–≤–∞—Ä—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —É—Å–ª—É–≥ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
        existing_by_name = {s.get('name'): s for s in existing_services}
        
        # –û–±–Ω–æ–≤–ª—è–µ–º –∏–ª–∏ –¥–æ–±–∞–≤–ª—è–µ–º —É—Å–ª—É–≥–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        updated_count = 0
        added_count = 0
        
        for db_service in db_services:
            service_name = db_service.name
            duration_prices = db_service.duration_prices if isinstance(db_service.duration_prices, dict) else {}
            base_duration = db_service.base_duration
            
            # –ü–æ–ª—É—á–∞–µ–º —Ü–µ–Ω—É –¥–ª—è –±–∞–∑–æ–≤–æ–π –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            price = duration_prices.get(str(base_duration), 0) if duration_prices else 0
            
            # –ü–æ–ª—É—á–∞–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑ —Å–ª–æ–≤–∞—Ä—è
            description_data = SERVICE_DESCRIPTIONS.get(service_name, {})
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —Ç–∞–∫–∞—è —É—Å–ª—É–≥–∞
            if service_name in existing_by_name:
                # –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —É—Å–ª—É–≥—É
                existing_service = existing_by_name[service_name]
                existing_service['duration'] = base_duration
                existing_service['price'] = price
                # –û–±–Ω–æ–≤–ª—è–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç –∏–ª–∏ –æ–Ω–æ –ø—É—Å—Ç–æ–µ
                if not existing_service.get('short_description'):
                    existing_service['short_description'] = description_data.get('short_description', '')
                if not existing_service.get('full_description'):
                    existing_service['full_description'] = description_data.get('full_description', '')
                updated_count += 1
            else:
                # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é —É—Å–ª—É–≥—É
                max_id += 1
                new_service = {
                    "id": max_id,
                    "name": service_name,
                    "category": description_data.get('category', 'massage'),
                    "short_description": description_data.get('short_description', ''),
                    "full_description": description_data.get('full_description', ''),
                    "duration": base_duration,
                    "price": price,
                    "image": f"/static/{get_image_for_service(service_name)}",
                    "benefits": description_data.get('benefits', []),
                    "contraindications": description_data.get('contraindications', []),
                    "preparation": [],
                    "featured": False,
                    "popular": False,
                    "available_masters": [],
                    "tags": description_data.get('tags', []),
                    "age_limit": "18+",
                    "gender": "unisex",
                    "rating": 4.5,
                    "reviews_count": 0
                }
                existing_services.append(new_service)
                added_count += 1
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π JSON
        output_data = {
            "services": existing_services,
            "categories": categories if categories else [
                {
                    "name": "–õ–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂",
                    "description": "–ú–∞—Å—Å–∞–∂ –¥–ª—è –ª–µ—á–µ–Ω–∏—è –∏ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π",
                    "icon": "medical-icon"
                },
                {
                    "name": "–†–µ–ª–∞–∫—Å–∞—Ü–∏—è –∏ SPA",
                    "description": "–†–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –¥–ª—è —Å–Ω—è—Ç–∏—è —Å—Ç—Ä–µ—Å—Å–∞",
                    "icon": "spa-icon"
                },
                {
                    "name": "–ö–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∞–∂",
                    "description": "–ú–∞—Å—Å–∞–∂ –¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã –∏ —É—Ö–æ–¥–∞ –∑–∞ –∫–æ–∂–µ–π",
                    "icon": "beauty-icon"
                }
            ]
        }
        
        with open(json_path, 'w', encoding='utf-8') as f:
            json.dump(output_data, f, ensure_ascii=False, indent=2)
        
        print(f"‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ —É—Å–ª—É–≥: {updated_count}")
        print(f"‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤—ã—Ö —É—Å–ª—É–≥: {added_count}")
        print(f"‚úÖ –í—Å–µ–≥–æ —É—Å–ª—É–≥ –≤ JSON: {len(existing_services)}")
        print(f"‚úÖ –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω: {json_path}")

if __name__ == '__main__':
    print("=" * 60)
    print("–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ services.json –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö")
    print("=" * 60)
    try:
        update_services_json()
        print("=" * 60)
        print("‚úÖ –ì–æ—Ç–æ–≤–æ!")
        print("=" * 60)
    except Exception as e:
        print("=" * 60)
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")
        print("=" * 60)
        import traceback
        traceback.print_exc()
        sys.exit(1)




================================================================================
–§–ê–ô–õ: extract_code.py
================================================================================
# -*- coding: utf-8 -*-

import os
import sys
import codecs
import io

# –î–ª—è Python 2.7: —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫
if sys.version_info[0] < 3:
    def safe_str(s):
        """–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –≤—ã–≤–æ–¥–∞ –≤ Python 2.7"""
        try:
            if isinstance(s, unicode):
                return s.encode('utf-8', errors='replace')
            elif isinstance(s, str):
                try:
                    # –ü—Ä–æ–±—É–µ–º –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ utf-8
                    s.decode('utf-8')
                    return s
                except UnicodeDecodeError:
                    # –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è, –ø—Ä–æ–±—É–µ–º –∫–∞–∫ latin-1
                    try:
                        return s.decode('latin-1').encode('utf-8', errors='replace')
                    except:
                        return s
            else:
                return str(s).encode('utf-8', errors='replace')
        except:
            try:
                return str(s).encode('utf-8', errors='replace')
            except:
                return '[–Ω–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å]'
else:
    def safe_str(s):
        return str(s)

def extract_code(root_path, output_file='extracted_code.txt'):
    """
    –ò–∑–≤–ª–µ–∫–∞–µ—Ç –≤–µ—Å—å –∫–æ–¥ –∏–∑ .py, .html, .css, .js —Ñ–∞–π–ª–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ.
    """
    extensions = ['.py', '.html', '.css', '.js']
    total_files = 0
    total_lines = 0
    
    # –ò–°–ö–õ–Æ–ß–ê–ï–ú –ø–∞–ø–∫–∏ –∏ —Ñ–∞–π–ª—ã
    exclude_dirs = set(['.venv', 'venv', '__pycache__', '.git', '.vscode', 'node_modules', 
                    'instance', 'backups', 'logs', '.pytest_cache', '.mypy_cache'])
    exclude_files = set(['.pyc', '.pyo', '.log', '.tmp', '.bak', '.swp', '.DS_Store'])
    
    print("üéØ –ù–∞—á–∏–Ω–∞–µ–º –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–¥–∞...")
    print("–ö–æ—Ä–Ω–µ–≤–∞—è –ø–∞–ø–∫–∞: " + root_path)
    
    if not os.path.exists(root_path):
        print("‚ùå –û—à–∏–±–∫–∞: –ø—É—Ç—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: " + root_path)
        return
    
    with codecs.open(output_file, 'w', encoding='utf-8') as out:
        for root, dirs, files in os.walk(root_path):
            # –ò–°–ö–õ–Æ–ß–ê–ï–ú —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞–ø–∫–∏
            dirs[:] = [d for d in dirs if d not in exclude_dirs and not d.startswith('.')]
            
            for file in files:
                file_ext = os.path.splitext(file)[1].lower()
                file_name = file.lower()
                
                # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Ñ–∞–π–ª—ã —Å –∏—Å–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏
                if file_ext in exclude_files or file_name in exclude_files:
                    continue
                
                if file_ext in extensions:
                    try:
                        file_path = os.path.join(root, file)
                        try:
                            rel_path = os.path.relpath(file_path, root_path)
                        except:
                            rel_path = file_path.replace(root_path, '').lstrip(os.sep)
                        
                        # –ü–†–û–ü–£–°–ö–ê–ï–ú —Ñ–∞–π–ª—ã –∏–∑ –∏—Å–∫–ª—é—á–µ–Ω–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
                        try:
                            path_parts = rel_path.split(os.sep)
                            if any(excluded in path_parts for excluded in exclude_dirs):
                                continue
                        except:
                            pass
                        
                        # –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—ã–≤–æ–¥ –ø—É—Ç–∏ –¥–ª—è Python 2.7
                        try:
                            rel_path_safe = safe_str(rel_path)
                            print("‚úÖ –ù–∞–π–¥–µ–Ω —Ñ–∞–π–ª: " + rel_path_safe)
                        except:
                            try:
                                print("‚úÖ –ù–∞–π–¥–µ–Ω —Ñ–∞–π–ª: " + file)
                            except:
                                print("‚úÖ –ù–∞–π–¥–µ–Ω —Ñ–∞–π–ª: [—Ñ–∞–π–ª]")
                        
                        # –ü—Ä–æ–±—É–µ–º —á–∏—Ç–∞—Ç—å —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∞–º–∏
                        content = None
                        encodings = ['utf-8', 'cp1251', 'latin-1', 'iso-8859-1']
                        
                        # –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª –≤ –±–∏–Ω–∞—Ä–Ω–æ–º —Ä–µ–∂–∏–º–µ –¥–ª—è Python 2.7
                        try:
                            with open(file_path, 'rb') as f:
                                raw_content = f.read()
                        except IOError as e:
                            print("   ‚ùå –û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞: " + safe_str(str(e)))
                            continue
                        
                        # –ü—Ä–æ–±—É–µ–º –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∞–º–∏
                        for encoding in encodings:
                            try:
                                content = raw_content.decode(encoding)
                                if encoding != 'utf-8':
                                    print("   üìñ –ü—Ä–æ—á–∏—Ç–∞–Ω —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π: " + encoding)
                                break
                            except (UnicodeDecodeError, UnicodeError):
                                continue
                        
                        # –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º latin-1 (–≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç)
                        if content is None:
                            try:
                                content = raw_content.decode('latin-1')
                                print("   ‚ö†Ô∏è  –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∞ latin-1 (–≤–æ–∑–º–æ–∂–Ω—ã –∏—Å–∫–∞–∂–µ–Ω–∏—è)")
                            except:
                                try:
                                    content = raw_content.decode('utf-8', errors='replace')
                                    print("   ‚ö†Ô∏è  –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∞ utf-8 —Å –∑–∞–º–µ–Ω–æ–π –æ—à–∏–±–æ–∫")
                                except:
                                    content = raw_content
                                    print("   ‚ö†Ô∏è  –§–∞–π–ª –ø—Ä–æ—á–∏—Ç–∞–Ω –∫–∞–∫ –±–∏–Ω–∞—Ä–Ω—ã–π")
                        
                        if content is None:
                            print("   ‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª")
                            continue
                        
                        # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –≤—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª
                        out.write("\n" + "="*80 + "\n")
                        try:
                            out.write("–§–ê–ô–õ: " + safe_str(rel_path) + "\n")
                        except:
                            out.write("–§–ê–ô–õ: " + rel_path.encode('utf-8', errors='replace') + "\n")
                        out.write("="*80 + "\n")
                        try:
                            if isinstance(content, unicode):
                                out.write(content.encode('utf-8'))
                            else:
                                out.write(content)
                        except:
                            out.write(str(content))
                        out.write("\n\n")
                        
                        total_files += 1
                        total_lines += len(content.splitlines())
                        
                        lines_count = len(content.splitlines())
                        try:
                            print("   üìù –£—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω: " + safe_str(rel_path) + " (" + str(lines_count) + " —Å—Ç—Ä–æ–∫)")
                        except:
                            print("   üìù –£—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω (" + str(lines_count) + " —Å—Ç—Ä–æ–∫)")
                        
                    except Exception as e:
                        try:
                            print("   ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ: " + safe_str(str(e)))
                        except:
                            print("   ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–∞–π–ª–∞")
                        continue

        if total_files == 0:
            print("\n‚ö†Ô∏è  –§–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã!")
        else:
            print("\n‚úÖ –ì–æ—Ç–æ–≤–æ! –ò–∑–≤–ª–µ—á–µ–Ω–æ " + str(total_files) + " —Ñ–∞–π–ª–æ–≤, " + str(total_lines) + " —Å—Ç—Ä–æ–∫.")
            print("üìÅ –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤: " + output_file)

if __name__ == "__main__":
    project_path = "/Users/user/Desktop/project/universal-templates/Production/massage_zuly"
    extract_code(project_path)


================================================================================
–§–ê–ô–õ: update_working_hours.py
================================================================================
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã –≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
    python3 update_working_hours.py 8 20
    python3 update_working_hours.py --start 8 --end 20
    python3 update_working_hours.py -s 9 -e 21

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
    start_hour: –ß–∞—Å –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã (0-23)
    end_hour: –ß–∞—Å –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã (0-23)
"""

import os
import re
import sys
import argparse
from pathlib import Path

# –§–∞–π–ª—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
FILES_TO_UPDATE = [
    'app.py',
    'utils/validators.py',
    'scripts/db_manager.py',
    'utils/calendar_service.py',
    'routes/calendar_api.py',
    'utils/performance_optimizer.py',
    'routes/main.py',
    'utils/helpers.py',
    'static/js/utils/config.js',
    'templates/partials/booking.html',
]

def update_file(file_path, start_hour, end_hour):
    """–û–±–Ω–æ–≤–∏—Ç—å –æ–¥–∏–Ω —Ñ–∞–π–ª."""
    if not os.path.exists(file_path):
        print(f"‚ö†Ô∏è  –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω: {file_path}")
        return False
    
    try:
        with open(file_path, 'r', encoding='utf-8') as f:
            content = f.read()
        
        original_content = content
        changes_count = 0
        
        # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –∑–∞–º–µ–Ω—ã
        start_str = f"{start_hour:02d}"
        end_str = f"{end_hour:02d}"
        start_str_no_zero = str(start_hour)
        end_str_no_zero = str(end_hour)
        
        # –°–ø–∏—Å–æ–∫ –∑–∞–º–µ–Ω (pattern, replacement)
        replacements = [
            # Python: work_start hour=9 ‚Üí hour=start_hour
            (r'(work_start[^=]*hour\s*=\s*)\d+', rf'\1{start_hour}'),
            # Python: work_end hour=21 ‚Üí hour=end_hour
            (r'(work_end[^=]*hour\s*=\s*)\d+', rf'\1{end_hour}'),
            
            # Python: hour=9 ‚Üí hour=start_hour (—Å –ø—Ä–æ–±–µ–ª–∞–º–∏)
            (r'(hour\s*=\s*)(\d+)(\s*#.*–Ω–∞—á–∞–ª–æ|–Ω–∞—á–∞–ª–æ)', rf'\1{start_hour}\3'),
            (r'(hour\s*=\s*)(\d+)(\s*#.*–∫–æ–Ω–µ—Ü|–∫–æ–Ω–µ—Ü)', rf'\1{end_hour}\3'),
            
            # Python: time(9, 0) ‚Üí time(start_hour, 0)
            (r'time\((\d+),\s*0\)', lambda m: f'time({start_hour}, 0)' if int(m.group(1)) < 12 else f'time({end_hour}, 0)'),
            
            # –°—Ç—Ä–æ–∫–∏ –≤—Ä–µ–º–µ–Ω–∏: 09:00 ‚Üí start_hour:00, 21:00 ‚Üí end_hour:00
            (r'(\d{1,2}):00', lambda m: f'{start_hour:02d}:00' if int(m.group(1).lstrip('0') or '0') < 12 else f'{end_hour:02d}:00'),
            
            # –ö–æ—Ä—Ç–µ–∂–∏: (9, 21) ‚Üí (start_hour, end_hour)
            (r'\((\d+),\s*(\d+)\)', lambda m: f'({start_hour}, {end_hour})' if int(m.group(1)) < int(m.group(2)) and int(m.group(1)) < 12 else m.group(0)),
            (r'\[(\d+),\s*(\d+)\]', lambda m: f'[{start_hour}, {end_hour}]' if int(m.group(1)) < int(m.group(2)) and int(m.group(1)) < 12 else m.group(0)),
            
            # –°—Ç—Ä–æ–∫–∏ —Å –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º: 9:00 - 21:00 ‚Üí start_hour:00 - end_hour:00
            (r'(\d{1,2}):00\s*-\s*(\d{1,2}):00', f'{start_hour:02d}:00 - {end_hour:02d}:00'),
            (r'(\d{1,2}):00-(\d{1,2}):00', f'{start_hour:02d}:00-{end_hour:02d}:00'),
            (r'–ï–∂–µ–¥–Ω–µ–≤–Ω–æ\s+(\d{1,2}):00\s*-\s*(\d{1,2}):00', f'–ï–∂–µ–¥–Ω–µ–≤–Ω–æ {start_hour:02d}:00 - {end_hour:02d}:00'),
            
            # –£—Å–ª–æ–≤–∏—è: hour < 21 ‚Üí hour < end_hour
            (r'hour\s*<\s*(\d+)', lambda m: f'hour < {end_hour}' if int(m.group(1)) >= 20 else m.group(0)),
            (r'hour\s*<=\s*(\d+)', lambda m: f'hour <= {end_hour}' if int(m.group(1)) >= 20 else m.group(0)),
            (r'hour\s*==\s*(\d+)', lambda m: f'hour == {end_hour}' if int(m.group(1)) == 21 else (f'hour == {start_hour}' if int(m.group(1)) == 9 else m.group(0))),
            (r'hour\s*>\s*(\d+)', lambda m: f'hour > {start_hour}' if int(m.group(1)) <= 9 else m.group(0)),
            (r'hour\s*>=\s*(\d+)', lambda m: f'hour >= {start_hour}' if int(m.group(1)) <= 9 else m.group(0)),
            
            # JavaScript: minBookingHour: 9 ‚Üí minBookingHour: start_hour
            (r'(minBookingHour:\s*)\d+', rf'\1{start_hour}'),
            (r'(maxBookingHour:\s*)\d+', rf'\1{end_hour}'),
            (r'(startHour:\s*)\d+', rf'\1{start_hour}'),
            (r'(endHour:\s*)\d+', rf'\1{end_hour}'),
            
            # JavaScript: for (let hour = 9; ‚Üí for (let hour = start_hour;
            (r'(for\s*\(\s*let\s+hour\s*=\s*)\d+', rf'\1{start_hour}'),
            (r'(hour\s*<=\s*)(\d+)(\s*;)', lambda m: f'{m.group(1)}{end_hour}{m.group(3)}' if int(m.group(2)) >= 20 else m.group(0)),
            (r'(hour\s*<\s*)(\d+)(\s*\|\|)', lambda m: f'{m.group(1)}{end_hour}{m.group(3)}' if int(m.group(2)) >= 20 else m.group(0)),
            (r'(hour\s*===\s*)(\d+)(\s*&&)', lambda m: f'{m.group(1)}{end_hour}{m.group(3)}' if int(m.group(2)) == 21 else m.group(0)),
            
            # –°—Ç—Ä–æ–∫–∏ –≤ –∫–∞–≤—ã—á–∫–∞—Ö: "09:00" ‚Üí "start_hour:00"
            (r'"(\d{2}):00"', lambda m: f'"{start_hour:02d}:00"' if int(m.group(1)) < 12 else f'"{end_hour:02d}:00"'),
            (r"'(\d{2}):00'", lambda m: f"'{start_hour:02d}:00'" if int(m.group(1)) < 12 else f"'{end_hour:02d}:00'"),
        ]
        
        # –ü—Ä–∏–º–µ–Ω—è–µ–º –≤—Å–µ –∑–∞–º–µ–Ω—ã
        for pattern, replacement in replacements:
            if callable(replacement):
                # –ï—Å–ª–∏ replacement - —Ñ—É–Ω–∫—Ü–∏—è
                def repl_func(match):
                    return replacement(match)
                new_content = re.sub(pattern, repl_func, content)
            else:
                # –û–±—ã—á–Ω–∞—è –∑–∞–º–µ–Ω–∞
                new_content = re.sub(pattern, replacement, content)
            
            if new_content != content:
                # –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–º–µ–Ω
                matches = len(re.findall(pattern, content))
                changes_count += matches
                content = new_content
        
        if content != original_content:
            with open(file_path, 'w', encoding='utf-8') as f:
                f.write(content)
            print(f"‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω: {file_path} ({changes_count} –∑–∞–º–µ–Ω)")
            return True
        else:
            print(f"‚ÑπÔ∏è  –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π: {file_path}")
            return False
            
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ {file_path}: {e}")
        import traceback
        traceback.print_exc()
        return False

def parse_arguments():
    """–ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏."""
    parser = argparse.ArgumentParser(
        description='–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã –≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞',
        formatter_class=argparse.RawDescriptionHelpFormatter,
        epilog="""
–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
  python3 update_working_hours.py 8 20
  python3 update_working_hours.py --start 8 --end 20
  python3 update_working_hours.py -s 9 -e 21
        """
    )
    
    parser.add_argument(
        'start_hour',
        type=int,
        nargs='?',
        help='–ß–∞—Å –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã (0-23)'
    )
    
    parser.add_argument(
        'end_hour',
        type=int,
        nargs='?',
        help='–ß–∞—Å –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã (0-23)'
    )
    
    parser.add_argument(
        '-s', '--start',
        type=int,
        dest='start_hour',
        help='–ß–∞—Å –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã (0-23)'
    )
    
    parser.add_argument(
        '-e', '--end',
        type=int,
        dest='end_hour',
        help='–ß–∞—Å –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã (0-23)'
    )
    
    return parser.parse_args()

def main():
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è."""
    args = parse_arguments()
    
    # –ï—Å–ª–∏ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω—ã, –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if args.start_hour is None:
        try:
            start_hour = int(input("–í–≤–µ–¥–∏—Ç–µ —á–∞—Å –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã (0-23): "))
        except (ValueError, KeyboardInterrupt):
            print("\n‚ùå –û—à–∏–±–∫–∞: –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —á–∏—Å–ª–æ")
            sys.exit(1)
    else:
        start_hour = args.start_hour
    
    if args.end_hour is None:
        try:
            end_hour = int(input("–í–≤–µ–¥–∏—Ç–µ —á–∞—Å –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã (0-23): "))
        except (ValueError, KeyboardInterrupt):
            print("\n‚ùå –û—à–∏–±–∫–∞: –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —á–∏—Å–ª–æ")
            sys.exit(1)
    else:
        end_hour = args.end_hour
    
    # –í–∞–ª–∏–¥–∞—Ü–∏—è
    if not (0 <= start_hour <= 23):
        print(f"‚ùå –û—à–∏–±–∫–∞: —á–∞—Å –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 0 –¥–æ 23, –ø–æ–ª—É—á–µ–Ω–æ: {start_hour}")
        sys.exit(1)
    
    if not (0 <= end_hour <= 23):
        print(f"‚ùå –û—à–∏–±–∫–∞: —á–∞—Å –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 0 –¥–æ 23, –ø–æ–ª—É—á–µ–Ω–æ: {end_hour}")
        sys.exit(1)
    
    if start_hour >= end_hour:
        print(f"‚ùå –û—à–∏–±–∫–∞: —á–∞—Å –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã ({start_hour}) –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–µ–Ω—å—à–µ —á–∞—Å–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è ({end_hour})")
        sys.exit(1)
    
    print(f"\nüîÑ –ù–∞—á–∏–Ω–∞—é –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã: {start_hour:02d}:00 - {end_hour:02d}:00\n")
    
    project_root = Path(__file__).parent
    updated_count = 0
    
    for file_path in FILES_TO_UPDATE:
        full_path = project_root / file_path
        if update_file(str(full_path), start_hour, end_hour):
            updated_count += 1
    
    print(f"\n‚úÖ –ì–æ—Ç–æ–≤–æ! –û–±–Ω–æ–≤–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: {updated_count}/{len(FILES_TO_UPDATE)}")
    print(f"\nüìù –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã:")
    print(f"   - –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞: {start_hour:02d}:00")
    print(f"   - –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è: {end_hour:02d}:00")
    print(f"\nüí° –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:")
    for file_path in FILES_TO_UPDATE:
        print(f"   - {file_path}")

if __name__ == '__main__':
    main()



================================================================================
–§–ê–ô–õ: gunicorn_config.py
================================================================================
# -*- coding: utf-8 -*-
"""
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Gunicorn –¥–ª—è production —Å–µ—Ä–≤–µ—Ä–∞

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
    gunicorn -c gunicorn_config.py wsgi:app
"""

import os
import multiprocessing

# ==================================================
# üöÄ –û–°–ù–û–í–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò
# ==================================================

# –ê–¥—Ä–µ—Å –∏ –ø–æ—Ä—Ç –¥–ª—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è
# –î–ª—è production —Å nginx –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Unix socket:
# bind = 'unix:massage_gulnara.sock'
# –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ TCP:
bind = os.environ.get('GUNICORN_BIND', '0.0.0.0:5000')

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ worker –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
# –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: (2 x CPU cores) + 1
# –î–ª—è production —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 1 worker
workers = int(os.environ.get('GUNICORN_WORKERS', 1))

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤ –Ω–∞ worker
threads = int(os.environ.get('GUNICORN_THREADS', 2))

# –¢–∏–ø worker –∫–ª–∞—Å—Å–∞
# 'sync' - —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
# 'gevent' - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π (—Ç—Ä–µ–±—É–µ—Ç gevent)
worker_class = os.environ.get('GUNICORN_WORKER_CLASS', 'sync')

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ worker
worker_connections = int(os.environ.get('GUNICORN_WORKER_CONNECTIONS', 1000))

# ==================================================
# ‚è±Ô∏è –¢–ê–ô–ú–ê–£–¢–´
# ==================================================

# –¢–∞–π–º–∞—É—Ç –¥–ª—è worker (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
timeout = int(os.environ.get('GUNICORN_TIMEOUT', 120))

# –¢–∞–π–º–∞—É—Ç –¥–ª—è graceful shutdown
graceful_timeout = int(os.environ.get('GUNICORN_GRACEFUL_TIMEOUT', 30))

# –¢–∞–π–º–∞—É—Ç –¥–ª—è keep-alive —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
keepalive = int(os.environ.get('GUNICORN_KEEPALIVE', 5))

# ==================================================
# üìä –õ–û–ì–ò–†–û–í–ê–ù–ò–ï
# ==================================================

# –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
loglevel = os.environ.get('GUNICORN_LOGLEVEL', 'info')

# –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –ª–æ–≥–æ–≤ –¥–æ—Å—Ç—É–ø–∞
accesslog = os.environ.get('GUNICORN_ACCESSLOG', 'logs/gunicorn_access.log')

# –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –ª–æ–≥–æ–≤ –æ—à–∏–±–æ–∫
errorlog = os.environ.get('GUNICORN_ERRORLOG', 'logs/gunicorn_error.log')

# –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤ –¥–æ—Å—Ç—É–ø–∞
access_log_format = '%(h)s %(l)s %(u)s %(t)s "%(r)s" %(s)s %(b)s "%(f)s" "%(a)s" %(D)s'

# ==================================================
# üîÑ –ü–ï–†–ï–ó–ê–ü–£–°–ö –ò –ú–û–ù–ò–¢–û–†–ò–ù–ì
# ==================================================

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º worker
max_requests = int(os.environ.get('GUNICORN_MAX_REQUESTS', 1000))

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –æ—à–∏–±–∫–∞–º–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º
max_requests_jitter = int(os.environ.get('GUNICORN_MAX_REQUESTS_JITTER', 50))

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ worker –ø–æ—Å–ª–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–µ–∫—É–Ω–¥
max_worker_memory = int(os.environ.get('GUNICORN_MAX_WORKER_MEMORY', 200 * 1024 * 1024))  # 200MB

# ==================================================
# üîê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨
# ==================================================

# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è –∑–∞–ø—É—Å–∫–∞ worker –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—Ç–æ–ª—å–∫–æ root –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å)
# user = 'www-data'
# group = 'www-data'

# PID —Ñ–∞–π–ª
pidfile = os.environ.get('GUNICORN_PIDFILE', 'gunicorn.pid')

# Daemon —Ä–µ–∂–∏–º (–∑–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ)
daemon = os.environ.get('GUNICORN_DAEMON', 'False').lower() == 'true'

# ==================================================
# üéØ –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨
# ==================================================

# –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
preload_app = os.environ.get('GUNICORN_PRELOAD_APP', 'True').lower() == 'true'

# –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤
reuse_port = True

# ==================================================
# üìù –ü–†–ò–ú–ï–ß–ê–ù–ò–Ø
# ==================================================
# 
# PROD: –î–ª—è production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
# 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å reverse proxy (nginx) –ø–µ—Ä–µ–¥ Gunicorn
# 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSL/TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
# 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å systemd –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–º
# 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
# 5. –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
# 
# –ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞:
#   gunicorn -c gunicorn_config.py wsgi:app
# 
# –° nginx:
#   upstream app_server {
#       server 127.0.0.1:5000 fail_timeout=0;
#   }
# 
#   server {
#       listen 80;
#       server_name your-domain.com;
#       
#       location / {
#           proxy_pass http://app_server;
#           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#           proxy_set_header Host $host;
#           proxy_redirect off;
#       }
#   }












================================================================================
–§–ê–ô–õ: test_vk.py
================================================================================
# test_vk.py
import os
import logging

# –í–∫–ª—é—á–∞–µ–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å
logging.basicConfig(level=logging.INFO)

os.environ['VK_API_TOKEN'] = 'vk1.a.OOxiC8Hki0xgn6VKZ8Pg0P_1f8mkprfo0jobZ5mwO4sByasTzzJtuqLHfY7lIhQKJp8vmqv-Nq1kwzk_1x8nfMTI9KNIRs-q_VWVJvnlIWNpbScmJEKBlNPAkTiExTInRh_Qo-NMMiwePSAU6GE2dFCR-13-UalQA3pS13Z0njuIIVX1ajFwzd5yfVT_VV_PegO9GpXDTYR9vZ3obirbyQ'
os.environ['VK_ADMIN_ID'] = '25776629'  # —á–∏—Å–ª–æ!

from notify.vk_bot import send_vk_notification

if __name__ == '__main__':
    print("üöÄ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ VK...")
    success = send_vk_notification("üß™ –¢–µ—Å—Ç –∏–∑ test_vk.py")
    if success:
        print("‚úÖ –£—Å–ø–µ—Ö!")
    else:
        print("‚ùå –ù–µ—É–¥–∞—á–∞. –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏.")


================================================================================
–§–ê–ô–õ: get_chat_id.py
================================================================================
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è Chat ID –≤ Telegram
"""

import os
import asyncio
from dotenv import load_dotenv

load_dotenv()

async def get_chat_id():
    """–ü–æ–ª—É—á–∞–µ—Ç Chat ID –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –±–æ—Ç–∞"""
    from aiogram import Bot
    from aiogram.client.default import DefaultBotProperties
    from aiogram.enums import ParseMode
    from aiogram.client.session.aiohttp import AiohttpSession
    
    token = os.environ.get('TELEGRAM_BOT_TOKEN')
    
    if not token:
        print("‚ùå TELEGRAM_BOT_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ .env")
        return
    
    print("=" * 60)
    print("üîç –ü–û–õ–£–ß–ï–ù–ò–ï CHAT ID")
    print("=" * 60)
    print()
    print("üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:")
    print("   1. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ @EnlivenSpaBot –≤ Telegram")
    print("   2. –ù–∞–∂–º–∏—Ç–µ /start –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É")
    print("   3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥...")
    print()
    
    bot = None
    try:
        session = AiohttpSession()
        bot = Bot(
            token=token,
            session=session,
            default=DefaultBotProperties(parse_mode=ParseMode.HTML)
        )
        
        # –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–æ—Ç–µ
        bot_info = await bot.get_me()
        print(f"‚úÖ –ë–æ—Ç –Ω–∞–π–¥–µ–Ω: @{bot_info.username}")
        print()
        
        # –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        print("üì• –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π...")
        updates = await bot.get_updates(limit=10)
        
        if not updates:
            print("‚ùå –û–±–Ω–æ–≤–ª–µ–Ω–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")
            print()
            print("üí° –†–µ—à–µ–Ω–∏–µ:")
            print("   1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É @EnlivenSpaBot")
            print("   2. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 5-10 —Å–µ–∫—É–Ω–¥")
            print("   3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Å–Ω–æ–≤–∞")
            return
        
        print(f"‚úÖ –ù–∞–π–¥–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π: {len(updates)}")
        print()
        print("üìã –ù–∞–π–¥–µ–Ω–Ω—ã–µ Chat ID:")
        print("-" * 60)
        
        chat_ids = set()
        for update in updates:
            if update.message:
                chat = update.message.chat
                chat_ids.add(chat.id)
                chat_type = "–ª–∏—á–Ω—ã–π —á–∞—Ç" if chat.type == "private" else f"{chat.type}"
                name = chat.first_name or chat.title or chat.username or "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"
                print(f"   Chat ID: {chat.id}")
                print(f"   –¢–∏–ø: {chat_type}")
                print(f"   –ò–º—è: {name}")
                print()
        
        if chat_ids:
            print("=" * 60)
            print("‚úÖ –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ô CHAT ID:")
            print(f"   {list(chat_ids)[0]}")
            print()
            print("üí° –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç ID –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ .env:")
            print(f"   TELEGRAM_CHAT_ID={list(chat_ids)[0]}")
            print("=" * 60)
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")
        import traceback
        traceback.print_exc()
    finally:
        if bot:
            try:
                session_obj = bot.session
                if session_obj:
                    if hasattr(session_obj, 'close') and not session_obj.closed:
                        await session_obj.close()
                    elif hasattr(session_obj, '_session') and session_obj._session:
                        await session_obj._session.close()
            except Exception:
                pass

if __name__ == "__main__":
    asyncio.run(get_chat_id())







================================================================================
–§–ê–ô–õ: app.py
================================================================================
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –º–∞—Å—Å–∞–∂–Ω–æ–≥–æ —Å–∞–ª–æ–Ω–∞ —Å Google Calendar –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
PROD: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π
–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥.
"""
from flask import Flask, render_template, request, redirect, url_for, flash, jsonify, make_response, session
from datetime import datetime, timedelta, date, time
import os
import logging
import re
import json
import traceback
from dotenv import load_dotenv
from models import db, Service, Client, Booking, Review

try:
    from data.site_config import SITE  # <-- –ò–∑–º–µ–Ω–∏–ª–∏ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É
except ImportError:
    logger.error("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å data.site_config")
    SITE = {} # –ó–∞–≥–ª—É—à–∫–∞, –µ—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω

try:
    # NOTE: –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–π –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
    from utils.logging_system import log_api_calls
except ImportError:
    # FIXME: –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äì –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–∞–≥–ª—É—à–∫—É –±–µ–∑ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    def log_api_calls(_logger):
        def decorator(func):
            return func
        return decorator

# ==================================================
# CONFIG –ù–ê–°–¢–†–û–ô–ö–ê –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø
# ==================================================
# –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–∞–∑–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)
logger = logging.getLogger(__name__)

# –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
load_dotenv()

# ==================================================
# DB –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –î–ê–ù–ù–´–• –ò –ë–ê–ó–´ –î–ê–ù–ù–´–•
# ==================================================
# –ò—Å–ø–æ–ª—å–∑—É–µ–º SQLite –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
DATABASE_AVAILABLE = True
MASTERS = [
    {'id': 1, 'name': '–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞', 'specialization': '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∞–∂'},
    {'id': 2, 'name': '–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞', 'specialization': '–õ–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂'},
    {'id': 3, 'name': '–ï–ª–µ–Ω–∞ –°–∏–¥–æ—Ä–æ–≤–∞', 'specialization': '–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∞–∂'}
]
SERVICES = [
    {
        'id': 1,
        'name': '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∞–∂',
        'durations': [
            {'minutes': 60, 'price': 3000, 'default': True},
            {'minutes': 90, 'price': 4500, 'default': False},
            {'minutes': 120, 'price': 8000, 'default': False}
        ]
    },
    {
        'id': 2,
        'name': '–õ–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂',
        'durations': [
            {'minutes': 60, 'price': 3500, 'default': True},
            {'minutes': 90, 'price': 5000, 'default': False},
            {'minutes': 120, 'price': 9000, 'default': False}
        ]
    },
    {
        'id': 3,
        'name': '–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∞–∂',
        'durations': [
            {'minutes': 60, 'price': 4000, 'default': True},
            {'minutes': 90, 'price': 5500, 'default': False},
            {'minutes': 120, 'price': 10000, 'default': False}
        ]
    },
    {
        'id': 4,
        'name': '–ê–Ω—Ç–∏—Ü–µ–ª–ª—é–ª–∏—Ç–Ω—ã–π –º–∞—Å—Å–∞–∂',
        'durations': [
            {'minutes': 60, 'price': 4500, 'default': True},
            {'minutes': 90, 'price': 6000, 'default': False},
            {'minutes': 120, 'price': 11000, 'default': False}
        ]
    }
]

# –°–ø–∏—Å–æ–∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –≤ –ø–∞–º—è—Ç–∏ (–¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥–≤–æ–π–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π)
BOOKINGS = []

# ==================================================
# üîó –ò–ú–ü–û–†–¢–´ –ò –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–ï–†–í–ò–°–û–í
# ==================================================
CALENDAR_AVAILABLE = False
calendar_service = None
calendar_bp = None
try:
    # NOTE: –ß–∏—Ç–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è Google Calendar –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
    GOOGLE_CREDENTIALS_PATH = os.environ.get('GOOGLE_CALENDAR_CREDENTIALS', 'credentials.json')
    GOOGLE_CALENDAR_ID = os.environ.get(
        'GOOGLE_CALENDAR_ID',
        '927386a71e5905eee5cfdaed9701d53cb43aea1d7d49a661b1175ea663d994fa@group.calendar.google.com'
    )
    from utils import calendar_service as calendar_module
    from utils.calendar_service import GoogleCalendarService
    # NOTE: –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä —Å–µ—Ä–≤–∏—Å–∞ —Å —É—á–µ—Ç–æ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
    calendar_service = GoogleCalendarService(
        credentials_path=GOOGLE_CREDENTIALS_PATH,
        calendar_id=GOOGLE_CALENDAR_ID
    )
    # NOTE: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä, —á—Ç–æ–±—ã Bluetooth –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    calendar_module.calendar_service = calendar_service
    CALENDAR_AVAILABLE = calendar_service.is_available()
    if CALENDAR_AVAILABLE:
        from routes.calendar_api import calendar_bp
    else:
        logger.warning("WARNING Google Calendar —Å–µ—Ä–≤–∏—Å –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω")
except Exception as calendar_error:
    logger.warning(f"WARNING Google Calendar –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω: {calendar_error}")
    CALENDAR_AVAILABLE = False
    calendar_service = None
    calendar_bp = None

# ==================================================
# ü§ñ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø TELEGRAM –ë–û–¢–ê
# ==================================================
TELEGRAM_AVAILABLE = False
TELEGRAM_BOT_TOKEN = None
TELEGRAM_CHAT_ID = None
try:
    from telegram_bot import init_telegram_bot
    from telegram_bot.telegram_bot_simple import start_telegram_bot_simple
    # PROD: –ü–æ–ª—É—á–∞–µ–º —Ç–æ–∫–µ–Ω –∏ chat_id –¢–û–õ–¨–ö–û –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–±–µ–∑ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    TELEGRAM_BOT_TOKEN = os.environ.get('TELEGRAM_BOT_TOKEN')
    TELEGRAM_CHAT_ID = os.environ.get('TELEGRAM_CHAT_ID')
    if TELEGRAM_BOT_TOKEN and TELEGRAM_CHAT_ID:
        TELEGRAM_AVAILABLE = init_telegram_bot(token=TELEGRAM_BOT_TOKEN, chat_id=TELEGRAM_CHAT_ID)
        if TELEGRAM_AVAILABLE:
            logger.info("‚úÖ Telegram –±–æ—Ç —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω")
            # –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç —Å SQLite –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —Ä–∞—Å—Å—ã–ª–∫–∞ –∏ –∑–∞—è–≤–∫–∏)
            # –≠—Ç–æ—Ç –±–æ—Ç —Å–æ–∑–¥–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—É—é SQLite-–±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å —Ç–∞–±–ª–∏—Ü–µ–π users
            # –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã /stats –∏ /broadcast, –∞ —Ç–∞–∫–∂–µ –∫–Ω–æ–ø–∫–∏ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –†–∞—Å—Å—ã–ª–∫–∞ –∏ –ó–∞—è–≤–∫–∏
            start_telegram_bot_simple(token=TELEGRAM_BOT_TOKEN, admin_chat_id=TELEGRAM_CHAT_ID)
            logger.info("‚úÖ Telegram –±–æ—Ç –∑–∞–ø—É—â–µ–Ω (telegram_bot_simple)")
        else:
            logger.warning("‚ö†Ô∏è Telegram –±–æ—Ç –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –∏ chat_id)")
    else:
        logger.warning("‚ö†Ô∏è TELEGRAM_BOT_TOKEN –∏–ª–∏ TELEGRAM_CHAT_ID –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
except Exception as telegram_error:
    logger.warning(f"‚ö†Ô∏è Telegram –±–æ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω: {telegram_error}")
    TELEGRAM_AVAILABLE = False


def create_calendar_booking(form_data):
    """
    –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ Google Calendar.
    Args:
        form_data: –î–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–æ—Ä–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    Returns:
        Tuple: (success, result_message)
    """
    try:
        logger.info(f"üìÖ –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ –¥–ª—è {form_data.get('name', 'Unknown')}")
        if not calendar_service:
            logger.warning("‚ö†Ô∏è calendar_service –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω")
            return False, "–°–µ—Ä–≤–∏—Å Google Calendar –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω"
        if not calendar_service.is_available():
            logger.warning("‚ö†Ô∏è –°–µ—Ä–≤–∏—Å Google Calendar –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω")
            return False, "–°–µ—Ä–≤–∏—Å Google Calendar –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
        # NOTE: –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å
        required_calendar_fields = ['name', 'phone', 'service_id', 'date', 'time']
        for field in required_calendar_fields:
            if not form_data.get(field):
                logger.error(f"‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ: {field}")
                return False, f"–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ: {field}"

        # NOTE: –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –Ω–∞–ª–∏—á–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –∏–Ω–∞—á–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç 60 –º–∏–Ω—É—Ç
        if not form_data.get('session_duration'):
            form_data['session_duration'] = 60
        else:
            try:
                form_data['session_duration'] = int(form_data['session_duration'])
            except (ValueError, TypeError):
                form_data['session_duration'] = 60
                logger.warning(f"‚ö†Ô∏è session_duration –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —á–∏—Å–ª–æ–º, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 60 –º–∏–Ω—É—Ç")

        logger.info(f"üìÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ: {form_data.get('name')} - {form_data.get('date')} {form_data.get('time')}")
        # –°–æ–∑–¥–∞–µ–º —Å–æ–±—ã—Ç–∏–µ
        calendar_link, error = calendar_service.create_booking_event(form_data)
        if calendar_link:
            logger.info(f"‚úÖ –°–æ–±—ã—Ç–∏–µ —Å–æ–∑–¥–∞–Ω–æ –¥–ª—è {form_data['name']}: {calendar_link}")
            return True, calendar_link
        else:
            logger.error(f"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è: {error}")
            return False, error
    except Exception as e:
        logger.error(f"–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏: {e}")
        return False, f"–°–∏—Å—Ç–µ–º–Ω–∞—è –æ—à–∏–±–∫–∞: {str(e)}"


def create_booking_from_form(form_data):
    """
    –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
    Args:
        form_data: –î–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–æ—Ä–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    Returns:
        Booking object or None
    """
    try:
        # –ù–∞—Ö–æ–¥–∏–º –∏–ª–∏ —Å–æ–∑–¥–∞–µ–º –∫–ª–∏–µ–Ω—Ç–∞
        client = Client.query.filter_by(phone=form_data['phone']).first()
        if not client:
            # –ü—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ telegram_chat_id –≤ –±–∞–∑–µ –±–æ—Ç–∞ –ø–æ –∏–º–µ–Ω–∏
            telegram_chat_id = None
            try:
                from telegram_bot.telegram_bot_simple import get_telegram_chat_id_by_name
                telegram_chat_id = get_telegram_chat_id_by_name(form_data['name'])
            except Exception as e:
                logger.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å telegram_chat_id: {e}")
            
            client = Client(
                name=form_data['name'],
                phone=form_data['phone'],
                telegram_chat_id=telegram_chat_id
            )
            db.session.add(client)
            db.session.flush()  # –ü–æ–ª—É—á–∞–µ–º ID –∫–ª–∏–µ–Ω—Ç–∞
        else:
            # –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ —É –Ω–µ–≥–æ –Ω–µ—Ç telegram_chat_id, –ø—ã—Ç–∞–µ–º—Å—è –µ–≥–æ –Ω–∞–π—Ç–∏
            if not client.telegram_chat_id:
                try:
                    from telegram_bot.telegram_bot_simple import get_telegram_chat_id_by_name
                    telegram_chat_id = get_telegram_chat_id_by_name(form_data['name'])
                    if telegram_chat_id:
                        client.telegram_chat_id = telegram_chat_id
                        db.session.commit()
                        logger.info(f"‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω telegram_chat_id –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ {client.name}: {telegram_chat_id}")
                except Exception as e:
                    logger.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å telegram_chat_id: {e}")

        # –ü–æ–ª—É—á–∞–µ–º —É—Å–ª—É–≥—É
        service_id = int(form_data['service_id'])
        service = Service.query.get(service_id)
        if not service:
            logger.error(f"–£—Å–ª—É–≥–∞ —Å ID {service_id} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
            return None

        # –ü–∞—Ä—Å–∏–º –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è
        booking_date = datetime.strptime(form_data['date'], '%Y-%m-%d').date()
        booking_time = datetime.strptime(form_data['time'], '%H:%M').time()
        duration_minutes = int(form_data.get('session_duration') or service.duration_minutes)

        # –°–æ–∑–¥–∞–µ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
        booking = Booking(
            client_id=client.id,
            service_id=service.id,
            booking_date=booking_date,
            booking_time=booking_time,
            duration_minutes=duration_minutes,
            status='confirmed',
            contraindications=form_data.get('contraindications', ''),
            preferences=form_data.get('preferences', '')
        )
        db.session.add(booking)
        db.session.commit()
        logger.info(f"‚úÖ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ –≤ –ë–î: ID {booking.id}")
        return booking
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –ë–î: {e}")
        db.session.rollback()
        return None


def validate_booking_form(form_data):
    """
    –ü—Ä–æ—Å—Ç–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.
    """
    try:
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
        required_fields = ['name', 'phone', 'service_id', 'date', 'time']
        missing_fields = [field for field in required_fields if not form_data.get(field)]
        if missing_fields:
            return False, f'–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: {", ".join(missing_fields)}'

        # –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–º–µ–Ω–∏
        name = form_data.get('name', '').strip()
        if len(name) < 2 or len(name) > 50:
            return False, '–ò–º—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—Ç 2 –¥–æ 50 —Å–∏–º–≤–æ–ª–æ–≤'

        # –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞
        phone = form_data.get('phone', '')
        if not validate_phone(phone):
            return False, '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞'

        # –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç—ã
        try:
            booking_date = datetime.strptime(form_data['date'], '%Y-%m-%d').date()
            today = datetime.now().date()
            max_date = today + timedelta(days=60)
            if booking_date < today:
                return False, '–ù–µ–ª—å–∑—è –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–æ—à–µ–¥—à—É—é –¥–∞—Ç—É'
            if booking_date > max_date:
                return False, f'–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: {max_date.strftime("%d.%m.%Y")}'
        except ValueError:
            return False, '–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã'

        # –í–∞–ª–∏–¥–∞—Ü–∏—è —É—Å–ª—É–≥–∏
        try:
            service_id = int(form_data['service_id'])
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –≤ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
            if DATABASE_AVAILABLE:
                try:
                    service = Service.query.get(service_id)
                    if not service or not service.is_active:
                        return False, '–í—ã–±—Ä–∞–Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∏–ª–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞—è —É—Å–ª—É–≥–∞'
                except Exception as e:
                    logger.warning(f"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Å–ª—É–≥–∏ –≤ –ë–î: {e}, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ")
                    if not any(s['id'] == service_id for s in SERVICES):
                        return False, '–í—ã–±—Ä–∞–Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —É—Å–ª—É–≥–∞'
            else:
                if not any(s['id'] == service_id for s in SERVICES):
                    return False, '–í—ã–±—Ä–∞–Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —É—Å–ª—É–≥–∞'
        except (ValueError, TypeError):
            return False, '–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö —É—Å–ª—É–≥–∏'

        return True, None
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º—ã: {e}")
        return False, '–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö'


def validate_phone(phone):
    """
    –ü—Ä–æ—Å—Ç–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞.
    """
    if not phone or len(phone.strip()) == 0:
        return False
    # –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞
    pattern = r'^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$'
    return bool(re.match(pattern, phone.strip()))


def check_time_conflict(date, time, duration_minutes, exclude_booking_id=None):
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç –≤—Ä–µ–º–µ–Ω–∏.
    Args:
        date: –î–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD
        time: –í—Ä–µ–º—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ HH:MM
        duration_minutes: –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ–∞–Ω—Å–∞ –≤ –º–∏–Ω—É—Ç–∞—Ö
        exclude_booking_id: ID –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ –∏—Å–∫–ª—é—á–∏—Ç—å –∏–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)
    Returns:
        Tuple: (has_conflict: bool, message: str or None)
    """
    try:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ duration_minutes –Ω–µ None –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ int
        if duration_minutes is None:
            duration_minutes = 60
        duration_minutes = int(duration_minutes)
        # –°–æ–∑–¥–∞–µ–º datetime –¥–ª—è –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞ –Ω–æ–≤–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
        booking_start = datetime.strptime(f"{date} {time}", "%Y-%m-%d %H:%M")
        booking_end = booking_start + timedelta(minutes=duration_minutes)
        booking_date_obj = datetime.strptime(date, "%Y-%m-%d").date()

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        if DATABASE_AVAILABLE:
            try:
                # –ü–æ–ª—É—á–∞–µ–º —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ) –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
                # –ò—Å–∫–ª—é—á–∞–µ–º –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ
                # –¢–∞–∫–∂–µ –∏—Å–∫–ª—é—á–∞–µ–º –ø—Ä–æ—à–µ–¥—à–∏–µ –∑–∞–ø–∏—Å–∏ (—Å—Ç–∞—Ä—à–µ —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏)
                now = datetime.now()
                query = Booking.query.filter_by(
                    booking_date=booking_date_obj
                ).filter(
                    Booking.status.in_(['confirmed', 'in_progress'])
                )
                # –ò—Å–∫–ª—é—á–∞–µ–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ)
                if exclude_booking_id is not None:
                    query = query.filter(Booking.id != exclude_booking_id)
                existing_bookings = query.all()

                # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è: –∏—Å–∫–ª—é—á–∞–µ–º –ø—Ä–æ—à–µ–¥—à–∏–µ –∑–∞–ø–∏—Å–∏
                active_bookings = []
                for booking in existing_bookings:
                    booking_datetime = datetime.combine(booking.booking_date, booking.booking_time)
                    booking_end_time = booking_datetime + timedelta(minutes=booking.duration_minutes)
                    # –í–∫–ª—é—á–∞–µ–º —Ç–æ–ª—å–∫–æ –±—É–¥—É—â–∏–µ –∏–ª–∏ —Ç–µ–∫—É—â–∏–µ –∑–∞–ø–∏—Å–∏
                    if booking_end_time > now:
                        active_bookings.append(booking)
                existing_bookings = active_bookings

                logger.info(f"üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏: –Ω–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ {date} {time} ({duration_minutes} –º–∏–Ω), –Ω–∞–π–¥–µ–Ω–æ {len(existing_bookings)} –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π")
                for booking in existing_bookings:
                    existing_start = datetime.combine(booking.booking_date, booking.booking_time)
                    existing_end = existing_start + timedelta(minutes=booking.duration_minutes)
                    logger.info(f"üîç –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –Ω–æ–≤–æ–µ [{booking_start.strftime('%H:%M')} - {booking_end.strftime('%H:%M')}] vs —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ ID={booking.id} [{existing_start.strftime('%H:%M')} - {existing_end.strftime('%H:%M')}]")

                    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
                    # –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è, –µ—Å–ª–∏:
                    # - –Ω–æ–≤–æ–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ò
                    # - –Ω–æ–≤–æ–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ
                    # –¢–æ –µ—Å—Ç—å: –ù–ï (–Ω–æ–≤–æ–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –¥–æ –Ω–∞—á–∞–ª–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ò–õ–ò –Ω–æ–≤–æ–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ)
                    intervals_overlap = not (booking_end <= existing_start or booking_start >= existing_end)
                    if intervals_overlap:
                        logger.warning(f"‚ö†Ô∏è –ö–æ–Ω—Ñ–ª–∏–∫—Ç –≤—Ä–µ–º–µ–Ω–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω: —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ID={booking.id} —Å {booking.booking_time.strftime('%H:%M')} –¥–æ {existing_end.strftime('%H:%M')}")
                        return True, f"–í—Ä–µ–º—è —É–∂–µ –∑–∞–Ω—è—Ç–æ —Å {booking.booking_time.strftime('%H:%M')} –¥–æ {existing_end.strftime('%H:%M')}"

                logger.info(f"‚úÖ –ö–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤—Ä–µ–º–µ–Ω–∏ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ")
            except Exception as e:
                logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –∏–∑ –ë–î: {e}")
                logger.error(f"‚ùå –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: {traceback.format_exc()}")
                # –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –Ω–æ –ª–æ–≥–∏—Ä—É–µ–º
        else:
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –ø–∞–º—è—Ç–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
            for booking in BOOKINGS:
                try:
                    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ —Ç–∞ –∂–µ –¥–∞—Ç–∞
                    if booking.get('date') != date:
                        continue
                    # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏
                    if booking.get('status') in ['cancelled', 'completed']:
                        continue
                    # –ü–æ–ª—É—á–∞–µ–º –≤—Ä–µ–º—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
                    existing_time = booking.get('time')
                    existing_duration = booking.get('session_duration') or 60
                    existing_duration = int(existing_duration)
                    existing_start = datetime.strptime(f"{date} {existing_time}", "%Y-%m-%d %H:%M")
                    existing_end = existing_start + timedelta(minutes=existing_duration)

                    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
                    intervals_overlap = not (booking_end <= existing_start or booking_start >= existing_end)
                    if intervals_overlap:
                        return True, f"–í—Ä–µ–º—è —É–∂–µ –∑–∞–Ω—è—Ç–æ —Å {existing_time} –¥–æ {existing_end.strftime('%H:%M')}"
                except (ValueError, KeyError, TypeError) as e:
                    logger.warning(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: {e}")
                    continue

        return False, None
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏: {e}")
        logger.error(f"‚ùå –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: {traceback.format_exc()}")
        # –í —Å–ª—É—á–∞–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
        return False, None


def get_available_time_slots(date, duration_minutes=None):
    """
    –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã –¥–ª—è –¥–∞—Ç—ã.
    Args:
        date: –î–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD
        duration_minutes: –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ–∞–Ω—Å–∞ –≤ –º–∏–Ω—É—Ç–∞—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 60)
    Returns:
        List[Dict]: –î–æ—Å—Ç—É–ø–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã
    """
    # NOTE: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    if duration_minutes is None:
        duration_minutes = 60
    else:
        try:
            duration_minutes = int(duration_minutes)
            if duration_minutes <= 0:
                duration_minutes = 60
        except (ValueError, TypeError):
            duration_minutes = 60
            logger.warning(f"‚ö†Ô∏è duration_minutes –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 60 –º–∏–Ω—É—Ç")

    try:
        def _parse_datetime(value: str, is_end: bool = False) -> datetime:
            """–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å—Ç—Ä–æ–∫—É ISO –≤ datetime –±–µ–∑ —É—á—ë—Ç–∞ —Ç–∞–π–º–∑–æ–Ω—ã."""
            if not value:
                return None
            cleaned = value.replace('Z', '+00:00')
            try:
                dt = datetime.fromisoformat(cleaned)
            except ValueError:
                if 'T' in cleaned:
                    cleaned = cleaned.split('+')[0]
                    dt = datetime.strptime(cleaned, "%Y-%m-%dT%H:%M:%S")
                else:
                    dt = datetime.strptime(cleaned, "%Y-%m-%d")
                    if is_end:
                        dt = dt + timedelta(hours=23, minutes=59)
            return dt.replace(tzinfo=None)

        busy_intervals = []
        # –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–Ω—è—Ç—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –∏–∑ Google Calendar
        if calendar_service and calendar_service.is_available():
            busy_result = calendar_service.get_busy_slots_for_master(date, None)
            if busy_result.get("success"):
                calendar_slots_count = len(busy_result.get("busy_slots", []))
                logger.info(f"INFO –ü–æ–ª—É—á–µ–Ω–æ {calendar_slots_count} –∑–∞–Ω—è—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤ –∏–∑ Google Calendar –Ω–∞ {date}")
                for slot in busy_result.get("busy_slots", []):
                    start_dt = _parse_datetime(slot.get('start'))
                    end_dt = _parse_datetime(slot.get('end'), is_end=True)
                    if start_dt and end_dt:
                        busy_intervals.append((start_dt, end_dt))
                        logger.debug(f"DEBUG –î–æ–±–∞–≤–ª–µ–Ω –∑–∞–Ω—è—Ç—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª: {start_dt} - {end_dt}")
            else:
                logger.warning(f"WARNING –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∑–∞–Ω—è—Ç—ã–µ —Å–ª–æ—Ç—ã: {busy_result.get('message')}")

        # –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–Ω—è—Ç—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        if DATABASE_AVAILABLE:
            try:
                booking_date_obj = datetime.strptime(date, "%Y-%m-%d").date()
                db_bookings = Booking.query.filter_by(
                    booking_date=booking_date_obj,
                    status='confirmed'
                ).all()
                for booking in db_bookings:
                    booking_start = datetime.combine(booking.booking_date, booking.booking_time)
                    booking_end = booking_start + timedelta(minutes=booking.duration_minutes)
                    busy_intervals.append((booking_start, booking_end))
                    logger.debug(f"DEBUG –î–æ–±–∞–≤–ª–µ–Ω–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ –ë–î: {booking.booking_time} ({booking.duration_minutes} –º–∏–Ω)")

                if len(db_bookings) > 0:
                    logger.info(f"INFO –î–æ–±–∞–≤–ª–µ–Ω–æ {len(db_bookings)} –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –∏–∑ –ë–î –Ω–∞ {date}")
            except Exception as e:
                logger.warning(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –∏–∑ –ë–î: {e}")

        # –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–Ω—è—Ç—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –∏–∑ —Å–ø–∏—Å–∫–∞ BOOKINGS (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
        bookings_count = 0
        for booking in BOOKINGS:
            try:
                if booking.get('date') == date:
                    booking_time = booking.get('time')
                    booking_duration = booking.get('session_duration') or 60
                    booking_duration = int(booking_duration)
                    booking_start = datetime.strptime(f"{date} {booking_time}", "%Y-%m-%d %H:%M")
                    booking_end = booking_start + timedelta(minutes=booking_duration)
                    busy_intervals.append((booking_start, booking_end))
                    bookings_count += 1
                    logger.debug(f"DEBUG –î–æ–±–∞–≤–ª–µ–Ω–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ –ø–∞–º—è—Ç–∏: {booking_time} ({booking_duration} –º–∏–Ω)")
            except (ValueError, KeyError, TypeError) as e:
                logger.warning(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Å–ª–æ—Ç–æ–≤: {e}")
                continue

        if bookings_count > 0:
            logger.info(f"INFO –î–æ–±–∞–≤–ª–µ–Ω–æ {bookings_count} –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –∏–∑ –ø–∞–º—è—Ç–∏ –Ω–∞ {date}")

        logger.info(f"INFO –í—Å–µ–≥–æ –∑–∞–Ω—è—Ç—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤: {len(busy_intervals)}")

        date_obj = datetime.strptime(date, "%Y-%m-%d")
        # –ò–°–ü–†–ê–í–õ–ï–ù–û: –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞–∫ —à–∞–≥ –¥–ª—è —Å–ª–æ—Ç–æ–≤
        # –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
        slot_length = timedelta(minutes=duration_minutes)
        work_start = date_obj.replace(hour=8, minute=0, second=0, microsecond=0)
        work_end = date_obj.replace(hour=20, minute=0, second=0, microsecond=0)

        # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ—à–µ–¥—à–∏—Ö —Å–ª–æ—Ç–æ–≤
        now = datetime.now()
        today = now.date()
        selected_date = date_obj.date()

        available_slots = []
        current_start = work_start
        # NOTE: –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–¥–∞–Ω–Ω—É—é –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
        # –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å duration_minutes –º–∏–Ω—É—Ç,
        # –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–µ—Å—å –∏–Ω—Ç–µ—Ä–≤–∞–ª [current_start, current_start + duration_minutes] —Å–≤–æ–±–æ–¥–µ–Ω
        booking_duration = timedelta(minutes=duration_minutes)

        # –°–æ–∑–¥–∞–µ–º –º–Ω–æ–∂–µ—Å—Ç–≤–æ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å—Ç–∞—Ä—Ç–æ–≤—ã—Ö —Ç–æ—á–µ–∫ —Å–ª–æ—Ç–æ–≤
        # –í–∫–ª—é—á–∞–µ–º –Ω–∞—á–∞–ª–æ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è –∏ –∫–æ–Ω—Ü—ã –≤—Å–µ—Ö –∑–∞–Ω—è—Ç—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
        potential_starts = {work_start}
        
        # –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ü—ã –≤—Å–µ—Ö –∑–∞–Ω—è—Ç—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –∫–∞–∫ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ —Ç–æ—á–∫–∏
        for busy_start, busy_end in busy_intervals:
            potential_starts.add(busy_end)
        
        # –¢–∞–∫–∂–µ –¥–æ–±–∞–≤–ª—è–µ–º —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ —Å–ª–æ—Ç—ã —Å —à–∞–≥–æ–º —Ä–∞–≤–Ω—ã–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        regular_slot = work_start
        while regular_slot < work_end:
            potential_starts.add(regular_slot)
            regular_slot = regular_slot + slot_length

        # –°–æ—Ä—Ç–∏—Ä—É–µ–º –≤—Å–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ —Ç–æ—á–∫–∏
        sorted_starts = sorted(potential_starts)

        for current_start in sorted_starts:
            # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—à–µ–¥—à–∏–µ —Å–ª–æ—Ç—ã, –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–Ω–∞—è –¥–∞—Ç–∞ - —Å–µ–≥–æ–¥–Ω—è
            if selected_date == today and current_start < now:
                continue

            # NOTE: –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å —É—á–µ—Ç–æ–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–æ–≤–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
            # –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å duration_minutes –º–∏–Ω—É—Ç,
            # –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–µ—Å—å –∏–Ω—Ç–µ—Ä–≤–∞–ª [current_start, current_start + duration_minutes] —Å–≤–æ–±–æ–¥–µ–Ω
            current_end = current_start + booking_duration

            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–æ–Ω–µ—Ü –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã
            if current_end > work_end:
                # –≠—Ç–æ—Ç —Å–ª–æ—Ç –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç, —Ç–∞–∫ –∫–∞–∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –ø–æ–º–µ—Å—Ç–∏—Ç—Å—è
                continue

            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å –∑–∞–Ω—è—Ç—ã–º–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏
            # –ö–æ–Ω—Ñ–ª–∏–∫—Ç –µ—Å—Ç—å, –µ—Å–ª–∏ –Ω–æ–≤—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è —Å –ª—é–±—ã–º –∑–∞–Ω—è—Ç—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º
            has_conflict = any(
                not (current_end <= busy_start or current_start >= busy_end)
                for busy_start, busy_end in busy_intervals
            )
            slot_time = current_start.strftime("%H:%M")

            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –¥–æ–±–∞–≤–∏–ª–∏ –ª–∏ –º—ã —É–∂–µ —ç—Ç–æ—Ç —Å–ª–æ—Ç
            if any(slot['time'] == slot_time for slot in available_slots):
                continue

            # –î–æ–±–∞–≤–ª—è–µ–º —Å–ª–æ—Ç –∏ —É–∫–∞–∑—ã–≤–∞–µ–º, —Å–≤–æ–±–æ–¥–µ–Ω –æ–Ω –∏–ª–∏ –∑–∞–Ω—è—Ç
            if has_conflict:
                available_slots.append({
                    'time': slot_time,
                    'display': f"{slot_time} - –∑–∞–Ω—è—Ç–æ",
                    'disabled': True
                })
            else:
                available_slots.append({
                    'time': slot_time,
                    'display': f"{slot_time} - —Å–≤–æ–±–æ–¥–Ω–æ",
                    'disabled': False
                })

        return available_slots
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª–æ—Ç–æ–≤: {e}")
        return []


# ==================================================
# STARTUP –°–û–ó–î–ê–ù–ò–ï FLASK –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
# ==================================================
def create_app():
    """–§–∞–±—Ä–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π Flask."""
    app = Flask(__name__)
    # SECURITY: –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
    secret_key = os.environ.get('SECRET_KEY')
    if not secret_key:
        # PROD: –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –ø–∞–¥–∞—Ç—å –±–µ–∑ SECRET_KEY
        if os.environ.get('FLASK_ENV') == 'production':
            raise ValueError("SECRET_KEY must be set in production environment")
        secret_key = 'dev-secret-key-change-in-production'
        logger.warning("WARNING –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è dev —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á! –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SECRET_KEY –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è")
    app.secret_key = secret_key

    # PROD: –î–æ–±–∞–≤—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ config.py
    app.config['WTF_CSRF_ENABLED'] = True

    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö SQLite
    basedir = os.path.abspath(os.path.dirname(__file__))
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –¥–ª—è SQLite
    db_path = os.path.join(basedir, 'instance', 'massage_salon.db')
    # –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –ø—É—Ç—å –¥–ª—è SQLite (–∑–∞–º–µ–Ω—è–µ–º –æ–±—Ä–∞—Ç–Ω—ã–µ —Å–ª–µ—à–∏ –Ω–∞ –ø—Ä—è–º—ã–µ)
    db_path = os.path.normpath(db_path).replace('\\', '/')
    # –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –ø—É—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—ã–π
    if not os.path.isabs(db_path):
        db_path = os.path.abspath(db_path)

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º DATABASE_URL –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
    database_uri = os.environ.get('DATABASE_URL')
    if database_uri:
        # –ï—Å–ª–∏ DATABASE_URL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞, –ø—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø—É—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º
        if database_uri.startswith('sqlite:///'):
            # –ò–∑–≤–ª–µ–∫–∞–µ–º –ø—É—Ç—å –∏–∑ URI
            uri_path = database_uri.replace('sqlite:///', '')
            # –ï—Å–ª–∏ –ø—É—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π, –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ –∞–±—Å–æ–ª—é—Ç–Ω—ã–π
            if not os.path.isabs(uri_path):
                uri_path = os.path.join(basedir, uri_path)
                uri_path = os.path.normpath(uri_path).replace('\\', '/')
                database_uri = f'sqlite:///{uri_path}'
    else:
        # –ï—Å–ª–∏ DATABASE_URL –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–π –ø—É—Ç—å
        database_uri = f'sqlite:///{db_path}'

    app.config['SQLALCHEMY_DATABASE_URI'] = database_uri
    logger.info(f"üîó –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: {db_path}")
    logger.info(f"üîó DATABASE_URI: {database_uri}")
    logger.info(f"üîç –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ñ–∞–π–ª: {os.path.exists(db_path)}")
    app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False

    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    db.init_app(app)

    # –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
    with app.app_context():
        try:
            # –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –ø–∞–ø–∫–∞ instance —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
            instance_dir = os.path.join(basedir, 'instance')
            if not os.path.exists(instance_dir):
                os.makedirs(instance_dir, exist_ok=True)
                logger.info(f"‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ø–∞–ø–∫–∞ instance: {instance_dir}")

            db.create_all()
            logger.info("‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞")

            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É—Å–ª—É–≥–∏, –µ—Å–ª–∏ –Ω–µ—Ç - –¥–æ–±–∞–≤–ª—è–µ–º –∏–∑ SERVICES
            if Service.query.count() == 0:
                logger.info("–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö...")
                for service_data in SERVICES:
                    try:
                        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ service_data - —ç—Ç–æ —Å–ª–æ–≤–∞—Ä—å
                        if isinstance(service_data, dict) and 'durations' in service_data:
                            # –ë–µ—Ä–µ–º –ø–µ—Ä–≤—É—é –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω—É—é
                            duration = service_data['durations'][0]['minutes']
                            price = service_data['durations'][0]['price']
                            
                            # –°–æ–∑–¥–∞–µ–º duration_prices —Å–ª–æ–≤–∞—Ä—å
                            duration_prices = {str(duration): float(price)}
                            
                            # –ü–æ–ª—É—á–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏–∑ service_data –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º 'massage' –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                            category_name = service_data.get('category', 'massage')
                            
                            service = Service(
                                name=service_data['name'],
                                category=category_name,
                                base_duration=duration,
                                duration_prices=duration_prices,
                                is_active=True
                            )
                            db.session.add(service)
                    except (KeyError, IndexError, TypeError) as e:
                        logger.warning(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —É—Å–ª—É–≥–∏ {service_data}: {e}")
                        continue
                try:
                    db.session.commit()
                    logger.info(f"‚úÖ –£—Å–ª—É–≥–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö")
                except Exception as e:
                    db.session.rollback()
                    logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —É—Å–ª—É–≥: {e}")
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: {e}")
            logger.error(f"–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: {traceback.format_exc()}")
            # –ü—Ä–æ–±—É–µ–º —Å–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –µ—â–µ —Ä–∞–∑ —Å —è–≤–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—É—Ç–∏
            try:
                db_path = os.path.join(basedir, 'instance', 'massage_salon.db')
                # –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –ø–∞–ø–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
                os.makedirs(os.path.dirname(db_path), exist_ok=True)
                # –°–æ–∑–¥–∞–µ–º –ø—É—Å—Ç–æ–π —Ñ–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
                open(db_path, 'a').close()
                # –ü—Ä–æ–±—É–µ–º —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –µ—â–µ —Ä–∞–∑
                db.create_all()
                logger.info("‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞ –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏")
            except Exception as e2:
                logger.error(f"–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö: {e2}")
                # –ù–µ –º–µ–Ω—è–µ–º DATABASE_AVAILABLE –≥–ª–æ–±–∞–ª—å–Ω–æ, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

    # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º Blueprint –¥–ª—è API –∫–∞–ª–µ–Ω–¥–∞—Ä—è –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω
    if CALENDAR_AVAILABLE and calendar_bp:
        app.register_blueprint(calendar_bp)
        logger.info("SUCCESS Blueprint –∫–∞–ª–µ–Ω–¥–∞—Ä—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω")
    else:
        logger.warning("WARNING Blueprint –∫–∞–ª–µ–Ω–¥–∞—Ä—è –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω")

    # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º Blueprint –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
    try:
        from routes.admin import admin_bp
        app.register_blueprint(admin_bp)
        logger.info("SUCCESS Blueprint –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω")
    except Exception as e:
        logger.warning(f"WARNING Blueprint –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: {e}")

    # ==================================================
    # MIDDLEWARE MIDDLEWARE –ò –ú–û–ù–ò–¢–û–†–ò–ù–ì
    # ==================================================
    # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Ç–∫–ª—é—á–µ–Ω –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è
    monitoring_system = None

    @app.before_request
    def log_request():
        """–ü—Ä–æ—Å—Ç–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤."""
        logger.info(f"{request.method} {request.path} - IP: {request.remote_addr}")

    # ==================================================
    # ROUTES –†–û–£–¢–´ –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
    # ==================================================
    @app.route('/')
    def index():
        """–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞."""
        # –ü–æ–ª—É—á–∞–µ–º —É—Å–ª—É–≥–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
        if DATABASE_AVAILABLE:
            try:
                services = [service.to_dict() for service in Service.query.filter_by(is_active=True).all()]
                # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —Ñ–æ—Ä–º–∞—Ç, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å–æ —Å—Ç–∞—Ä—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º
                services_formatted = []
                for s in services:
                    # –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
                    service_item = {
                        'id': s['id'],
                        'name': s['name'],
                        'description': s.get('description', ''),
                        'price': s.get('price', 0),
                        'duration_minutes': s.get('duration_minutes', s.get('base_duration', 60)),
                        'duration': s.get('duration', s.get('duration_minutes', s.get('base_duration', 60))),
                        'base_duration': s.get('base_duration', 60),
                        'duration_prices': s.get('duration_prices', {}),
                        'durations': s.get('durations', [{
                            'minutes': s.get('duration_minutes', s.get('base_duration', 60)),
                            'price': s.get('price', 0),
                            'default': True
                        }])
                    }
                    services_formatted.append(service_item)
                if not services_formatted:
                    # –ï—Å–ª–∏ –≤ –ë–î –Ω–µ—Ç —É—Å–ª—É–≥, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ
                    services_formatted = SERVICES
            except Exception as e:
                logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —É—Å–ª—É–≥ –∏–∑ –ë–î: {e}")
                logger.error(f"–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: {traceback.format_exc()}")
                services_formatted = SERVICES
        else:
            services_formatted = SERVICES

        # –ü–æ–ª—É—á–∞–µ–º –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–∑—ã–≤—ã –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        reviews = []
        if DATABASE_AVAILABLE:
            try:
                reviews = Review.query.filter_by(is_approved=True).order_by(Review.created_at.desc()).limit(10).all()
                # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã –≤ —à–∞–±–ª–æ–Ω–µ
                reviews = [review.to_dict() for review in reviews]
            except Exception as e:
                logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–∑—ã–≤–æ–≤: {e}")
                reviews = []

        # –ï—Å–ª–∏ –≤ –ë–î –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤ –∏–ª–∏ –∏—Ö –º–µ–Ω—å—à–µ 5, –∑–∞–≥—Ä—É–∂–∞–µ–º –∏–∑ JSON
        if len(reviews) < 5:
            try:
                json_path = os.path.join(os.path.dirname(__file__), 'data', 'reviews.json')
                if os.path.exists(json_path):
                    with open(json_path, 'r', encoding='utf-8') as f:
                        json_reviews = json.load(f)
                        # –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ –æ—Ç–∑—ã–≤—ã
                        json_reviews = [r for r in json_reviews if r.get('is_approved', True)]
                        # –ï—Å–ª–∏ –≤ –ë–î –µ—Å—Ç—å –æ—Ç–∑—ã–≤—ã, –¥–æ–±–∞–≤–ª—è–µ–º JSON –æ—Ç–∑—ã–≤—ã –∫ –Ω–∏–º, –∏–Ω–∞—á–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ JSON
                        if reviews:
                            # –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ –ë–î
                            existing_ids = {r.get('id') for r in reviews}
                            new_reviews = [r for r in json_reviews if r.get('id') not in existing_ids]
                            reviews.extend(new_reviews[:5 - len(reviews)])
                        else:
                            reviews = json_reviews[:5]
                        logger.info(f"–ó–∞–≥—Ä—É–∂–µ–Ω–æ {len(reviews)} –æ—Ç–∑—ã–≤–æ–≤ (–∏–∑ –ë–î –∏ JSON)")
            except Exception as e:
                logger.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –æ—Ç–∑—ã–≤—ã –∏–∑ JSON: {e}")

        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º created_at –¥–ª—è JSON –æ—Ç–∑—ã–≤–æ–≤ (–ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Å—Ç—Ä–æ–∫—É –≤ –æ–±—ä–µ–∫—Ç datetime –¥–ª—è —à–∞–±–ª–æ–Ω–∞)
        for review in reviews:
            if isinstance(review, dict) and isinstance(review.get('created_at'), str):
                try:
                    review['created_at'] = datetime.fromisoformat(review['created_at'].replace('Z', '+00:00'))
                except:
                    review['created_at'] = None

        # –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
        categories_with_stats = []
        try:
            json_path = os.path.join(os.path.dirname(__file__), 'data', 'services.json')
            if os.path.exists(json_path):
                with open(json_path, 'r', encoding='utf-8') as f:
                    services_json = json.load(f)
                    categories_list = services_json.get('categories', [])
                    services_list = services_json.get('services', [])
                    
                    # –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                    for cat in categories_list:
                        cat_name = cat.get('name', '')
                        cat_services = [s for s in services_list if s.get('category') == cat_name]
                        if cat_services:
                            prices = [s.get('price', 0) for s in cat_services if s.get('price', 0) > 0]
                            min_price = min(prices) if prices else 0
                            categories_with_stats.append({
                                'id': cat.get('id'),
                                'name': cat_name,
                                'description': cat.get('description', ''),
                                'icon': cat.get('icon', ''),
                                'order': cat.get('order', 999),
                                'services_count': len(cat_services),
                                'min_price': min_price
                            })
                    
                    # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ order
                    categories_with_stats = sorted(categories_with_stats, key=lambda x: x.get('order', 999))
                    logger.info(f"–ó–∞–≥—Ä—É–∂–µ–Ω–æ {len(categories_with_stats)} –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π")
        except Exception as e:
            logger.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ JSON: {e}")
            categories_with_stats = []
        
        # –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ —É—Å–ª—É–≥ –∏–∑ JSON –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
        services_data = []
        try:
            # –ü—Ä–æ–±—É–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—É—Ç–µ–π –∫ —Ñ–∞–π–ª—É
            from flask import current_app
            possible_paths = [
                os.path.join(os.path.dirname(__file__), 'data', 'services.json'),
                os.path.join(current_app.root_path, 'data', 'services.json') if current_app else None,
                'data/services.json',
                '/var/www/massage_gulnara/data/services.json'
            ]
            # –£–±–∏—Ä–∞–µ–º None –∑–Ω–∞—á–µ–Ω–∏—è
            possible_paths = [p for p in possible_paths if p]
            json_path = None
            for path in possible_paths:
                if os.path.exists(path):
                    json_path = path
                    break
            if json_path and os.path.exists(json_path):
                logger.info(f"–ó–∞–≥—Ä—É–∑–∫–∞ —É—Å–ª—É–≥ –∏–∑: {json_path}")
                with open(json_path, 'r', encoding='utf-8') as f:
                    services_json = json.load(f)
                    raw_services = services_json.get('services', [])
                    logger.info(f"–ù–∞–π–¥–µ–Ω–æ {len(raw_services)} —É—Å–ª—É–≥ –≤ JSON")
                    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø—É—Ç–∏ –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º (—É–±–∏—Ä–∞–µ–º /static –∏–∑ –Ω–∞—á–∞–ª–∞)
                    processed_services = []
                    for service in raw_services:
                        # –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
                        if not isinstance(service, dict):
                            logger.warning(f"–ü—Ä–æ–ø—É—â–µ–Ω –Ω–µ-dict —ç–ª–µ–º–µ–Ω—Ç: {type(service)}")
                            continue
                        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
                        if service.get('image', '').startswith('/static/'):
                            service['image'] = service['image'].replace('/static/', '')
                        elif not service.get('image'):
                            service['image'] = 'img/services/classic-massage.jpg'
                        # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ü–µ–Ω—É
                        if 'price' in service:
                            price = service['price']
                            if isinstance(price, (int, float)):
                                service['price_formatted'] = f"{int(price):,}".replace(',', ' ')
                            else:
                                service['price_formatted'] = str(price)
                        else:
                            service['price_formatted'] = "0"
                        # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
                        if 'duration' in service:
                            duration = service['duration']
                            if isinstance(duration, (int, float)):
                                service['duration_formatted'] = f"{int(duration)} –º–∏–Ω"
                            else:
                                service['duration_formatted'] = str(duration) if '–º–∏–Ω' in str(duration) else f"{str(duration)} –º–∏–Ω"
                        else:
                            service['duration_formatted'] = "60 –º–∏–Ω"
                        # –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –≤—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
                        if 'name' not in service:
                            service['name'] = '–£—Å–ª—É–≥–∞'
                        if 'short_description' not in service and 'full_description' not in service:
                            service['short_description'] = '–û–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥–∏'
                        if 'benefits' not in service:
                            service['benefits'] = []
                        if 'category' not in service:
                            service['category'] = 'massage'
                        if 'featured' not in service:
                            service['featured'] = False
                        processed_services.append(service)
                    services_data = processed_services
                    logger.info(f"–ó–∞–≥—Ä—É–∂–µ–Ω–æ {len(services_data)} —É—Å–ª—É–≥ –∏–∑ JSON –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫")
                    if services_data:
                        logger.info(f"–ü–µ—Ä–≤–∞—è —É—Å–ª—É–≥–∞: {services_data[0].get('name', 'N/A')} - {services_data[0].get('short_description', 'N/A')[:50]}")
                    else:
                        logger.warning("‚ö†Ô∏è services_data –ø—É—Å—Ç–æ–π –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏!")
            else:
                logger.error(f"‚ùå –§–∞–π–ª services.json –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –ø—É—Ç–∏: {possible_paths}")
                services_data = []
        except Exception as e:
            logger.error(f"‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —É—Å–ª—É–≥–∏ –∏–∑ JSON: {e}", exc_info=True)
            services_data = []

        # –°–æ–∑–¥–∞–µ–º —Å–ª–æ–≤–∞—Ä—å –¥–ª—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —É—Å–ª—É–≥ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é (JSON -> –ë–î)
        service_name_to_db_id = {s['name']: s['id'] for s in services_formatted}
        
        # –û–±–Ω–æ–≤–ª—è–µ–º ID –≤ services_data –Ω–∞ –æ—Å–Ω–æ–≤–µ ID –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        for service in services_data:
            service_name = service.get('name')
            if service_name and service_name in service_name_to_db_id:
                service['id'] = service_name_to_db_id[service_name]
        
        response = make_response(render_template('index.html',
                             services=services_formatted,
                             services_data=services_data,
                             categories_with_stats=categories_with_stats,
                             reviews=reviews,
                             calendar_available=CALENDAR_AVAILABLE,
                             site=SITE))
        # –û—Ç–∫–ª—é—á–∞–µ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (—á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—ã–ª–∏ –≤–∏–¥–Ω—ã —Å—Ä–∞–∑—É)
        response.headers['Cache-Control'] = 'no-cache, no-store, must-revalidate'
        response.headers['Pragma'] = 'no-cache'
        response.headers['Expires'] = '0'
        return response

    @app.route('/thank-you', methods=['GET'])
    def thank_you():
        """–°—Ç—Ä–∞–Ω–∏—Ü–∞ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏."""
        # –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–µ—Å—Å–∏–∏
        booking_data = session.get('booking_success')
        if not booking_data:
            # –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç, —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏–º –Ω–∞ –≥–ª–∞–≤–Ω—É—é
            flash('–î–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã', 'warning')
            return redirect(url_for('index'))

        # –ü–æ–ª—É—á–∞–µ–º username –±–æ—Ç–∞ (–≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º EnlivenSpaBot)
        telegram_bot_username = 'EnlivenSpaBot'
        # –û—á–∏—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–µ—Å—Å–∏–∏ –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
        session.pop('booking_success', None)
        return render_template('thank_you.html',
                             booking_data=booking_data,
                             telegram_bot_username=telegram_bot_username,
                             site=SITE)

    @app.route('/booking', methods=['GET', 'POST'])
    def booking():
        """–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–ø–∏—Å–∏ –Ω–∞ –º–∞—Å—Å–∞–∂."""
        if request.method == 'POST':
            logger.info("‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –°–¢–ê–†–´–ô –º–∞—Ä—à—Ä—É—Ç: app.py")
            # –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–æ—Ä–º—ã
            form_data = {
                'name': request.form.get('name', '').strip(),
                'phone': request.form.get('phone', '').strip(),
                'service_id': request.form.get('service_id'),
                'session_duration': request.form.get('session_duration', '60'),
                'date': request.form.get('date'),
                'time': request.form.get('time'),
                'contraindications': request.form.get('contraindications', '').strip(),
                'preferences': request.form.get('preferences', '').strip()
            }
            logger.info(f"INFO –ü–æ–ª—É—á–µ–Ω–∞ –∑–∞—è–≤–∫–∞ –æ—Ç: {form_data['name']}")

            # –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
            is_valid, error_message = validate_booking_form(form_data)
            if not is_valid:
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —ç—Ç–æ AJAX –∑–∞–ø—Ä–æ—Å
                accept_header = request.headers.get('Accept', '')
                is_ajax = 'application/json' in accept_header
                if is_ajax:
                    return jsonify({
                        'success': False,
                        'message': error_message
                    }), 400
                flash(error_message, 'error')
                return redirect(url_for('booking'))

            # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤—Ä–µ–º–µ–Ω–∏
            session_duration = form_data.get('session_duration') or '60'
            try:
                session_duration_int = int(session_duration)
            except (ValueError, TypeError):
                session_duration_int = 60
                logger.warning(f"‚ö†Ô∏è session_duration –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —á–∏—Å–ª–æ–º, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 60 –º–∏–Ω—É—Ç")
            has_conflict, conflict_message = check_time_conflict(
                form_data['date'],
                form_data['time'],
                session_duration_int
            )
            if has_conflict:
                error_msg = f'–û—à–∏–±–∫–∞: {conflict_message}. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è.'
                logger.warning(f"WARNING –ö–æ–Ω—Ñ–ª–∏–∫—Ç –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è {form_data['name']}: {conflict_message}")
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —ç—Ç–æ AJAX –∑–∞–ø—Ä–æ—Å
                accept_header = request.headers.get('Accept', '')
                is_ajax = 'application/json' in accept_header
                if is_ajax:
                    return jsonify({
                        'success': False,
                        'message': error_msg
                    }), 409
                flash(error_msg, 'error')
                return redirect(url_for('booking'))

            # –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
            booking = None
            if DATABASE_AVAILABLE:
                try:
                    booking = create_booking_from_form(form_data)
                    if not booking:
                        logger.warning("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ë–î")
                        # –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–∞–±–æ—Ç—É, —Å–æ—Ö—Ä–∞–Ω—è—è –≤ –ø–∞–º—è—Ç–∏
                    else:
                        logger.info(f"SUCCESS –ó–∞–ø–∏—Å—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –ë–î: ID {booking.id}")
                except Exception as e:
                    logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –ë–î: {e}")
                    logger.error(f"–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: {traceback.format_exc()}")
                    # –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–∞–±–æ—Ç—É, —Å–æ—Ö—Ä–∞–Ω—è—è –≤ –ø–∞–º—è—Ç–∏

            # –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º)
            new_booking = {
                'id': booking.id if booking else len(BOOKINGS) + 1,
                'name': form_data['name'],
                'phone': form_data['phone'],
                'service_id': form_data['service_id'],
                'date': form_data['date'],
                'time': form_data['time'],
                'session_duration': form_data.get('session_duration') or '60',
                'contraindications': form_data.get('contraindications', ''),
                'preferences': form_data.get('preferences', ''),
                'created_at': datetime.now().isoformat()
            }
            # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ø–∞–º—è—Ç–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
            if not DATABASE_AVAILABLE or not booking:
                BOOKINGS.append(new_booking)

            logger.info(f"SUCCESS –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ: {form_data['name']} - {form_data['date']} {form_data['time']}")

            # –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram
            logger.info(f"–ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram: TELEGRAM_AVAILABLE={TELEGRAM_AVAILABLE}, TOKEN={'—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω' if TELEGRAM_BOT_TOKEN else 'None'}, CHAT_ID={TELEGRAM_CHAT_ID}")
            if TELEGRAM_AVAILABLE:
                try:
                    from telegram_bot import send_booking_notification_sync
                    # –ü–æ–ª—É—á–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å–ø–∏—Å–∫–∏ —É—Å–ª—É–≥
                    services_list = SERVICES  # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                    if DATABASE_AVAILABLE:
                        try:
                            services_list = [service.to_dict() for service in Service.query.filter_by(is_active=True).all()]
                            # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —Ñ–æ—Ä–º–∞—Ç, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å–æ —Å—Ç–∞—Ä—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º
                            if services_list:
                                services_formatted = []
                                for s in services_list:
                                    services_formatted.append({
                                        'id': s['id'],
                                        'name': s['name'],
                                        'durations': [{
                                            'minutes': s.get('duration_minutes', 60),
                                            'price': s.get('price', 0),
                                            'default': True
                                        }]
                                    })
                                services_list = services_formatted
                        except Exception as db_error:
                            logger.warning(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —É—Å–ª—É–≥ –∏–∑ –ë–î –¥–ª—è Telegram: {db_error}, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ")
                            services_list = SERVICES
                    logger.info(f"–û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –¥–ª—è {form_data['name']}...")
                    logger.info(f"–î–∞–Ω–Ω—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: {new_booking}")
                    logger.info(f"üîç TELEGRAM_AVAILABLE={TELEGRAM_AVAILABLE}, TELEGRAM_BOT_TOKEN={'—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω' if TELEGRAM_BOT_TOKEN else '–ù–ï —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω'}, TELEGRAM_CHAT_ID={TELEGRAM_CHAT_ID}")
                    # –ü–µ—Ä–µ–¥–∞–µ–º —Ç–æ–∫–µ–Ω –∏ chat_id –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏
                    success = send_booking_notification_sync(
                        new_booking,
                        [],
                        services_list,
                        bot_token=TELEGRAM_BOT_TOKEN,
                        chat_id=str(TELEGRAM_CHAT_ID)  # –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞
                    )
                    if success:
                        logger.info(f"‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –¥–ª—è {form_data['name']}")
                    else:
                        logger.warning(f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram –¥–ª—è {form_data['name']}. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.")
                except Exception as telegram_error:
                    logger.error(f"‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram: {telegram_error}")
                    logger.error(f"‚ùå –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: {traceback.format_exc()}")
            else:
                logger.warning(f"‚ö†Ô∏è Telegram –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ. TELEGRAM_AVAILABLE={TELEGRAM_AVAILABLE}")

            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º, —ç—Ç–æ AJAX –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –æ–±—ã—á–Ω—ã–π POST
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ –∑–∞–ø—Ä–æ—Å–∞
            accept_header = request.headers.get('Accept', '')
            is_ajax = 'application/json' in accept_header
            logger.info(f"üîç –¢–∏–ø –∑–∞–ø—Ä–æ—Å–∞: is_ajax={is_ajax}, Accept={accept_header}")

            # –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ Google Calendar
            success_message = None
            calendar_result = None
            if CALENDAR_AVAILABLE:
                logger.info(f"üìÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ Google Calendar –¥–ª—è {form_data['name']}...")
                # –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ –¥–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è
                service_name_for_calendar = '–ù–µ —É–∫–∞–∑–∞–Ω–æ'
                try:
                    service_id = int(form_data.get('service_id', 0))
                    if DATABASE_AVAILABLE:
                        service = Service.query.get(service_id)
                        if service:
                            service_name_for_calendar = service.name
                except (ValueError, TypeError):
                    pass
                # –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ –≤ form_data –¥–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è
                form_data_with_service = form_data.copy()
                form_data_with_service['service_name'] = service_name_for_calendar
                success, result = create_calendar_booking(form_data_with_service)
                calendar_result = result
                if success:
                    # NOTE: –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ —Å–æ–±—ã—Ç–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –≤ –ë–î
                    if DATABASE_AVAILABLE and booking:
                        try:
                            booking.calendar_link = result
                            db.session.commit()
                            logger.info(f"‚úÖ –°—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –ë–î: {result}")
                        except Exception as e:
                            logger.error(f"‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—å: {e}")
                    success_message = '–í–∞—à–∞ –∑–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å!'
                    logger.info(f"‚úÖ SUCCESS –ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ –¥–ª—è: {form_data['name']} - {form_data['date']} {form_data['time']}")
                else:
                    success_message = f'–ó–∞–ø–∏—Å—å –ø—Ä–∏–Ω—è—Ç–∞, –Ω–æ –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞ —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º: {result}'
                    logger.warning(f"‚ö†Ô∏è WARNING –û—à–∏–±–∫–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –¥–ª—è {form_data['name']}: {result}")
            else:
                success_message = '–ó–∞–ø–∏—Å—å –ø—Ä–∏–Ω—è—Ç–∞! (–ö–∞–ª–µ–Ω–¥–∞—Ä—å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)'
                logger.info(f"‚ÑπÔ∏è SUCCESS –ó–∞–ø–∏—Å—å –ø—Ä–∏–Ω—è—Ç–∞ –±–µ–∑ –∫–∞–ª–µ–Ω–¥–∞—Ä—è: {form_data['name']} (CALENDAR_AVAILABLE={CALENDAR_AVAILABLE})")

            # –ü–æ–ª—É—á–∞–µ–º username –±–æ—Ç–∞ –¥–ª—è —Å—Å—ã–ª–∫–∏
            telegram_bot_username = None
            if TELEGRAM_BOT_TOKEN:
                try:
                    import asyncio
                    from aiogram import Bot
                    from aiogram.client.default import DefaultBotProperties
                    async def get_bot_info():
                        bot = Bot(token=TELEGRAM_BOT_TOKEN, default=DefaultBotProperties())
                        try:
                            bot_info = await bot.get_me()
                            return bot_info.username if bot_info else None
                        finally:
                            await bot.session.close()
                    try:
                        loop = asyncio.get_event_loop()
                    except RuntimeError:
                        loop = asyncio.new_event_loop()
                        asyncio.set_event_loop(loop)
                    telegram_bot_username = loop.run_until_complete(get_bot_info())
                except Exception as e:
                    logger.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å username –±–æ—Ç–∞: {e}")
                    telegram_bot_username = None

            # –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏
            # –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ –∏ —Ü–µ–Ω—É
            service_name = '–ù–µ —É–∫–∞–∑–∞–Ω–æ'
            service_price = None
            if form_data.get('service_id'):
                try:
                    service_id_int = int(form_data['service_id'])
                    if DATABASE_AVAILABLE:
                        try:
                            service = Service.query.get(service_id_int)
                            if service:
                                service_name = service.name
                                try:
                                    duration_key = str(form_data.get('session_duration') or service.base_duration or service.duration_minutes or 60)
                                    if getattr(service, 'duration_prices', None) and isinstance(service.duration_prices, dict):
                                        service_price = service.duration_prices.get(duration_key) or service.duration_prices.get(str(service.base_duration))
                                    if not service_price and getattr(service, 'price', None):
                                        service_price = service.price
                                except Exception:
                                    service_price = getattr(service, 'price', None)
                        except Exception:
                            pass
                    if service_name == '–ù–µ —É–∫–∞–∑–∞–Ω–æ':
                        # –ü—Ä–æ–±—É–µ–º –Ω–∞–π—Ç–∏ –≤ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
                        service = next((s for s in SERVICES if s.get('id') == service_id_int), None)
                        if service:
                            service_name = service.get('name', '–ù–µ —É–∫–∞–∑–∞–Ω–æ')
                            duration_key = str(form_data.get('session_duration') or service.get('duration') or service.get('base_duration') or 60)
                            service_price = (service.get('duration_prices') or {}).get(duration_key) or service.get('price')
                    if service_price is None:
                        # Fallback: –∏—â–µ–º –≤ JSON —Ñ–∞–π–ª–µ
                        possible_paths = [
                            os.path.join(os.path.dirname(os.path.dirname(__file__)), 'data', 'services.json'),
                            os.path.join(os.path.dirname(__file__), '..', 'data', 'services.json'),
                            'data/services.json',
                            os.path.abspath('data/services.json')
                        ]
                        json_path = next((p for p in possible_paths if os.path.exists(p)), None)
                        if json_path:
                            try:
                                with open(json_path, 'r', encoding='utf-8') as f:
                                    services_data = json.load(f).get('services', [])
                                    for s in services_data:
                                        if (s.get('id') == service_id_int) or (s.get('name') == service_name):
                                            dur_key = str(form_data.get('session_duration') or s.get('duration') or s.get('base_duration') or 60)
                                            duration_prices = s.get('duration_prices') or {}
                                            service_price = duration_prices.get(dur_key) or s.get('price')
                                            break
                            except Exception:
                                pass
                except (ValueError, TypeError):
                    pass
            if service_price is None:
                service_price = 0

# --- VK: –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ---
            try:
                from notify.vk_bot import send_vk_notification
                # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∞—Ç—É –¥–ª—è VK
                vk_date = form_data.get('date', '')
                try:
                    date_obj = datetime.strptime(vk_date, '%Y-%m-%d')
                    vk_date_formatted = date_obj.strftime('%d.%m.%Y')
                except:
                    vk_date_formatted = vk_date
                send_vk_notification(
                       f"üÜï –ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å!\n"
                       f"–ò–º—è: {form_data['name']}\n"
                       f"–¢–µ–ª–µ—Ñ–æ–Ω: {form_data['phone']}\n"
                       f"–£—Å–ª—É–≥–∞: {service_name}\n"
                       f"–î–∞—Ç–∞: {vk_date_formatted} | –í—Ä–µ–º—è: {form_data['time']}\n"
                )
            except Exception as e:
                logger.error(f"‚ùå –û—à–∏–±–∫–∞ VK-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: {e}")

            # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∞—Ç—É
            date_formatted = form_data.get('date', '')
            try:
                date_obj = datetime.strptime(date_formatted, '%Y-%m-%d')
                date_formatted = date_obj.strftime('%d.%m.%Y')
            except:
                pass

            # –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ —Å–µ—Å—Å–∏–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏
            session['booking_success'] = {
                'name': form_data.get('name', ''),
                'phone': form_data.get('phone', ''),
                'date': form_data.get('date', ''),
                'date_formatted': date_formatted,
                'time': form_data.get('time', ''),
                'service_name': service_name,
                'duration': form_data.get('session_duration', '60'),
                'price': service_price,
                'telegram_bot_username': 'EnlivenSpaBot'
            }

            # NOTE: –î–ª—è AJAX –∑–∞–ø—Ä–æ—Å–æ–≤ –í–°–ï–ì–î–ê –≤–æ–∑–≤—Ä–∞—â–∞–µ–º JSON —Å —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏
            if is_ajax:
                logger.info(f"üì§ –í–æ–∑–≤—Ä–∞—â–∞–µ–º JSON –æ—Ç–≤–µ—Ç –¥–ª—è AJAX –∑–∞–ø—Ä–æ—Å–∞")
                response_data = {
                    'success': True,
                    'message': success_message or '–ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞!',
                    'redirect': url_for('thank_you'),
                    'telegram_bot_username': 'EnlivenSpaBot',
                    'booking_data': {
                        'name': form_data.get('name', ''),
                        'phone': form_data.get('phone', ''),
                        'date': form_data.get('date', ''),
                        'date_formatted': date_formatted,
                        'time': form_data.get('time', ''),
                        'service_name': service_name,
                        'duration': form_data.get('session_duration', '60'),
                        'price': service_price
                    }
                }
                if calendar_result:
                    response_data['calendar_link'] = calendar_result
                logger.info(f"üì¶ JSON –æ—Ç–≤–µ—Ç: {response_data}")
                response = jsonify(response_data)
                response.headers['Content-Type'] = 'application/json'
                return response

            # –î–ª—è –æ–±—ã—á–Ω—ã—Ö POST –∑–∞–ø—Ä–æ—Å–æ–≤ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏
            # NOTE: –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º flash-—Å–æ–æ–±—â–µ–Ω–∏–µ, —Ç–∞–∫ –∫–∞–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ /thank-you —É–∂–µ –µ—Å—Ç—å –≤—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
            logger.info(f"üîÑ –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏ –¥–ª—è –æ–±—ã—á–Ω–æ–≥–æ POST –∑–∞–ø—Ä–æ—Å–∞")
            return redirect(url_for('thank_you'))

        # GET –∑–∞–ø—Ä–æ—Å - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É
        today = datetime.now().strftime('%Y-%m-%d')
        max_date = (datetime.now() + timedelta(days=60)).strftime('%Y-%m-%d')

        # NOTE: –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ
        if DATABASE_AVAILABLE:
            try:
                db_services = Service.query.filter_by(is_active=True).all()
                services = []
                for service in db_services:
                    service_dict = service.to_dict()
                    # –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –¥–ª—è —Ñ–æ—Ä–º—ã
                    if 'duration_minutes' not in service_dict or not service_dict['duration_minutes']:
                        service_dict['duration_minutes'] = service_dict.get('base_duration', 60)
                    # –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ —Ü–µ–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
                    if 'price' not in service_dict or not service_dict['price'] or service_dict['price'] == 0:
                        # –ü–æ–ª—É—á–∞–µ–º —Ü–µ–Ω—É –∏–∑ duration_prices
                        if service_dict.get('duration_prices') and isinstance(service_dict['duration_prices'], dict) and service_dict['duration_prices']:
                            base_dur = str(service_dict.get('base_duration', 60))
                            service_dict['price'] = service_dict['duration_prices'].get(base_dur, 0)
                            # –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ –ø–æ –±–∞–∑–æ–≤–æ–π –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –±–µ—Ä–µ–º –ø–µ—Ä–≤—É—é –¥–æ—Å—Ç—É–ø–Ω—É—é
                            if service_dict['price'] == 0 and service_dict['duration_prices']:
                                first_key = list(service_dict['duration_prices'].keys())[0]
                                service_dict['price'] = service_dict['duration_prices'][first_key]
                        else:
                            # –ò—Å–ø–æ–ª—å–∑—É–µ–º min_price –∏–ª–∏ 0
                            service_dict['price'] = service_dict.get('min_price', 0)
                    # –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ duration —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
                    if not service_dict.get('duration') and service_dict.get('duration_minutes'):
                        service_dict['duration'] = service_dict['duration_minutes']
                    services.append(service_dict)
                if not services:
                    logger.warning("–í –ë–î –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —É—Å–ª—É–≥, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ")
                    services = SERVICES
                else:
                    logger.info(f"‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ {len(services)} —É—Å–ª—É–≥ –∏–∑ –ë–î –¥–ª—è —Ñ–æ—Ä–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è")
            except Exception as e:
                logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —É—Å–ª—É–≥ –∏–∑ –ë–î: {e}")
                logger.error(f"–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: {traceback.format_exc()}")
                services = SERVICES
        else:
            services = SERVICES

        # –ü–æ–ª—É—á–∞–µ–º service_id –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ URL –¥–ª—è –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º—ã
        selected_service_id = request.args.get('service_id')
        # –ü–æ–ª—É—á–∞–µ–º username –±–æ—Ç–∞ –¥–ª—è —Å—Å—ã–ª–∫–∏
        telegram_bot_username = None
        if TELEGRAM_BOT_TOKEN:
            try:
                import asyncio
                from aiogram import Bot
                from aiogram.client.default import DefaultBotProperties
                async def get_bot_info():
                    bot = Bot(token=TELEGRAM_BOT_TOKEN, default=DefaultBotProperties())
                    try:
                        bot_info = await bot.get_me()
                        return bot_info.username if bot_info else None
                    finally:
                        await bot.session.close()
                # –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å username —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
                try:
                    loop = asyncio.get_event_loop()
                except RuntimeError:
                    loop = asyncio.new_event_loop()
                    asyncio.set_event_loop(loop)
                telegram_bot_username = loop.run_until_complete(get_bot_info())
            except Exception as e:
                logger.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å username –±–æ—Ç–∞: {e}")
                telegram_bot_username = None

        return render_template('booking.html',
                             services=services,
                             calendar_available=CALENDAR_AVAILABLE,
                             database_available=DATABASE_AVAILABLE,
                             today=today,
                             max_date=max_date,
                             selected_service_id=selected_service_id,
                             telegram_bot_username=telegram_bot_username,
                             site=SITE)

    @app.route('/api/reviews', methods=['GET'])
    @log_api_calls(logger)
    def get_reviews():
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤"""
        try:
            limit = request.args.get('limit', 10, type=int)
            featured_only = request.args.get('featured', 'false').lower() == 'true'
            query = Review.query.filter_by(is_approved=True)
            if featured_only:
                query = query.filter_by(is_featured=True)
            reviews = query.order_by(Review.created_at.desc()).limit(limit).all()
            return jsonify({
                'success': True,
                'reviews': [review.to_dict() for review in reviews],
                'count': len(reviews)
            }), 200
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–∑—ã–≤–æ–≤: {e}")
            return jsonify({
                'success': False,
                'message': '–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–∑—ã–≤–æ–≤'
            }), 500

    @app.route('/api/reviews', methods=['POST'])
    @log_api_calls(logger)
    def submit_review():
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–∑—ã–≤–∞"""
        try:
            # –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
            if request.is_json:
                data = request.get_json()
            else:
                data = request.form.to_dict()

            # –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
            if not data.get('name') or not data.get('rating') or not data.get('message'):
                return jsonify({
                    'success': False,
                    'message': '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è'
                }), 400

            rating = int(data.get('rating', 0))
            if rating < 1 or rating > 5:
                return jsonify({
                    'success': False,
                    'message': '–û—Ü–µ–Ω–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 1 –¥–æ 5'
                }), 400

            # –°–æ–∑–¥–∞–µ–º –æ—Ç–∑—ã–≤ (–Ω–µ–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–π)
            review = Review(
                client_name=data.get('name').strip(),
                rating=rating,
                text=data.get('message').strip(),
                master_id=data.get('master_id'),  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
                service_id=data.get('service_id'),  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
                is_approved=False,  # –¢—Ä–µ–±—É–µ—Ç –º–æ–¥–µ—Ä–∞—Ü–∏–∏
                is_featured=False
            )
            db.session.add(review)
            db.session.commit()
            logger.info(f"‚úÖ –û—Ç–∑—ã–≤ —Å–æ–∑–¥–∞–Ω (ID: {review.id}, –∏–º—è: {review.client_name}, –æ—Ü–µ–Ω–∫–∞: {review.rating})")

            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
            if TELEGRAM_AVAILABLE and TELEGRAM_BOT_TOKEN and TELEGRAM_CHAT_ID:
                try:
                    from telegram_bot import send_booking_notification_sync
                    review_message = f"""
üîî –ù–û–í–´–ô –û–¢–ó–´–í –¢–†–ï–ë–£–ï–¢ –ú–û–î–ï–†–ê–¶–ò–ò
üë§ –ò–º—è: {review.client_name}
‚≠ê –û—Ü–µ–Ω–∫–∞: {'‚≠ê' * rating} ({rating}/5)
üìù –¢–µ–∫—Å—Ç: {review.text[:200]}{'...' if len(review.text) > 200 else ''}
ID –æ—Ç–∑—ã–≤–∞: {review.id}
–î–∞—Ç–∞: {review.created_at.strftime('%d.%m.%Y %H:%M')}
–î–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏: /admin/reviews
"""
                    send_booking_notification_sync(
                        {'message': review_message},
                        bot_token=TELEGRAM_BOT_TOKEN,
                        chat_id=str(TELEGRAM_CHAT_ID)
                    )
                    logger.info("‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—Ç–∑—ã–≤–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Telegram")
                except Exception as e:
                    logger.error(f"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram: {e}")

            return jsonify({
                'success': True,
                'message': '–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –æ—Ç–∑—ã–≤! –ü–æ—Å–ª–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –æ–Ω –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ.',
                'review_id': review.id
            }), 201
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–∑—ã–≤–∞: {e}")
            logger.error(f"–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: {traceback.format_exc()}")
            db.session.rollback()
            return jsonify({
                'success': False,
                'message': '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–∑—ã–≤–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.'
            }), 500

    @app.route('/api/available-slots')
    @log_api_calls(logger)
    def api_available_slots():
        """
        API endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π).
        Query Parameters:
            date: –î–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
            duration: –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ–∞–Ω—Å–∞ –≤ –º–∏–Ω—É—Ç–∞—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 60)
        Returns:
            JSON: –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã –∏–ª–∏ –æ—à–∏–±–∫–∞
        PROD: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ rate limiting –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
        """
        try:
            date = request.args.get('date')
            # NOTE: –ü–æ–ª—É—á–∞–µ–º –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ–∞–Ω—Å–∞ –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
            duration = request.args.get('duration')
            if duration:
                try:
                    duration = int(duration)
                    # –í–∞–ª–∏–¥–∞—Ü–∏—è: –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º
                    if duration <= 0:
                        duration = None
                except (ValueError, TypeError):
                    duration = None

            if not date:
                return jsonify({
                    'success': False,
                    'message': '–ù–µ —É–∫–∞–∑–∞–Ω–∞ –¥–∞—Ç–∞'
                }), 400

            # –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç—ã
            try:
                datetime.strptime(date, '%Y-%m-%d')
            except ValueError:
                return jsonify({
                    'success': False,
                    'message': '–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã'
                }), 400

            # NOTE: –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞
            try:
                from utils.performance_optimizer import init_performance_system
                optimizer = init_performance_system()
                result = optimizer.get_available_slots_optimized(date, None, duration)
                response = jsonify(result)
                # –û—Ç–∫–ª—é—á–∞–µ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
                response.headers['Cache-Control'] = 'no-cache, no-store, must-revalidate'
                response.headers['Pragma'] = 'no-cache'
                response.headers['Expires'] = '0'
                return response
            except ImportError:
                # FALLBACK: –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é
                slots = get_available_time_slots(date, duration)
                result = jsonify({
                    'success': True,
                    'date': date,
                    'available_slots': slots
                })
                # –û—Ç–∫–ª—é—á–∞–µ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
                result.headers['Cache-Control'] = 'no-cache, no-store, must-revalidate'
                result.headers['Pragma'] = 'no-cache'
                result.headers['Expires'] = '0'
                return result
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ API —Å–ª–æ—Ç–æ–≤: {e}")
            return jsonify({
                'success': False,
                'message': '–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞'
            }), 500

    @app.route('/api/system/status')
    def system_status():
        """
        API endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã.
        Returns:
            JSON: –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã, –º–µ—Ç—Ä–∏–∫–∏ –∏ –∞–ª–µ—Ä—Ç—ã
        PROD: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç endpoint –¥–ª—è health checks –≤ Kubernetes/Docker.
        """
        try:
            if monitoring_system:
                status = monitoring_system.get_system_status()
                return jsonify(status)
            else:
                return jsonify({
                    'status': 'unknown',
                    'message': '–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞',
                    'timestamp': datetime.now().isoformat()
                })
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã: {e}")
            return jsonify({
                'status': 'error',
                'message': '–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞',
                'timestamp': datetime.now().isoformat()
            }), 500

    @app.route('/api/system/metrics')
    def system_metrics():
        """
        API endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ —Å–∏—Å—Ç–µ–º—ã.
        Returns:
            JSON: –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        PROD: –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å Prometheus –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫.
        """
        try:
            if monitoring_system:
                metrics = monitoring_system.metrics.get_metrics()
                return jsonify({
                    'success': True,
                    'metrics': metrics,
                    'timestamp': datetime.now().isoformat()
                })
            else:
                return jsonify({
                    'success': False,
                    'message': '–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞'
                })
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫: {e}")
            return jsonify({
                'success': False,
                'message': '–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫'
            }), 500

    @app.route('/api/system/alerts')
    def system_alerts():
        """
        API endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–ª–µ—Ä—Ç–æ–≤.
        Returns:
            JSON: –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–ª–µ—Ä—Ç–æ–≤
        """
        try:
            if monitoring_system:
                active_alerts = monitoring_system.alert_manager.get_active_alerts()
                alerts_data = []
                for alert in active_alerts:
                    alerts_data.append({
                        'id': alert.id,
                        'level': alert.level.value,
                        'message': alert.message,
                        'timestamp': alert.timestamp.isoformat(),
                        'source': alert.source,
                        'metadata': alert.metadata
                    })
                return jsonify({
                    'success': True,
                    'alerts': alerts_data,
                    'count': len(alerts_data),
                    'timestamp': datetime.now().isoformat()
                })
            else:
                return jsonify({
                    'success': False,
                    'message': '–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞'
                })
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∞–ª–µ—Ä—Ç–æ–≤: {e}")
            return jsonify({
                'success': False,
                'message': '–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∞–ª–µ—Ä—Ç–æ–≤'
            }), 500

    return app


# ==================================================
# –°–û–ó–î–ê–ù–ò–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø –î–õ–Ø GUNICORN
# ==================================================
# –°–æ–∑–¥–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç app –¥–ª—è Gunicorn
app = create_app()


# ==================================================
# STARTUP –ó–ê–ü–£–°–ö –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
# ==================================================
if __name__ == '__main__':
    print("=" * 50)
    print("STARTUP –ó–∞–ø—É—Å–∫ Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –º–∞—Å—Å–∞–∂–Ω–æ–≥–æ —Å–∞–ª–æ–Ω–∞")
    print("=" * 50)
    print(f"SUCCESS –ö–∞–ª–µ–Ω–¥–∞—Ä—å –¥–æ—Å—Ç—É–ø–µ–Ω: {CALENDAR_AVAILABLE}")
    print("ROUTES –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: http://localhost:5000")
    print("INFO –§–æ—Ä–º–∞ –∑–∞–ø–∏—Å–∏: http://localhost:5000/booking")
    print("CONFIG API —Å–ª–æ—Ç–æ–≤: http://localhost:5000/api/available-slots")
    print("=" * 50)
    # PROD: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ production —Å–µ—Ä–≤–µ—Ä (Gunicorn)
    # gunicorn -w 4 -b 0.0.0.0:5000 app:app
    app.run(
        debug=True,  # <-- –í–ê–ñ–ù–û
        host=os.environ.get('FLASK_HOST', '0.0.0.0'),
        port=int(os.environ.get('FLASK_PORT', 5000))
    )


================================================================================
–§–ê–ô–õ: spam_protection.py
================================================================================
import time
from flask import request
import re

class SpamProtectionBackend:
    @staticmethod
    def check_spam():
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–ø–∞–º –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞"""
        
        # 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ honeypot –ø–æ–ª–µ–π
        if request.form.get('hp_name') or request.form.get('hp_email') or request.form.get('hp_website'):
            return "Honeypot field filled"
        
        # 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
        form_load_time = request.form.get('form_load_time')
        form_submit_time = request.form.get('form_submit_time')
        
        if form_load_time and form_submit_time:
            time_spent = (int(form_submit_time) - int(form_load_time)) / 1000
            if time_spent < 2:  # –ú–µ–Ω—å—à–µ 2 —Å–µ–∫—É–Ω–¥ - —Å–ø–∞–º
                return f"Form filled too fast: {time_spent} seconds"
        
        # 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞
        protection_token = request.form.get('protection_token')
        if not protection_token or len(protection_token) < 10:
            return "Invalid protection token"
        
        # 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ User-Agent
        user_agent = request.headers.get('User-Agent', '')
        if not user_agent or len(user_agent) < 10:
            return "Invalid User-Agent"
        
        # 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Ñ–µ—Ä–µ—Ä–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
        referer = request.headers.get('Referer', '')
        if referer and 'your-domain.com' not in referer:
            return "Invalid referer"
        
        return None  # No spam detected

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ä–æ—É—Ç–µ
@app.route('/booking', methods=['POST'])
def booking():
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–ø–∞–º
    spam_check = SpamProtectionBackend.check_spam()
    if spam_check:
        print(f'üö´ –°–ø–∞–º –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω: {spam_check}')
        return jsonify({'success': False, 'message': '–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã'})
    
    # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ ...


================================================================================
–§–ê–ô–õ: check_services.py
================================================================================
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Å–ª—É–≥ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
"""

import sys
import os

sys.path.insert(0, os.path.dirname(os.path.abspath(__file__)))

from app import create_app
from models import db, Service

def check_services():
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å–ª—É–≥–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö"""
    app = create_app()
    
    with app.app_context():
        services = Service.query.filter_by(is_active=True).all()
        
        print("=" * 80)
        print(f"–ù–∞–π–¥–µ–Ω–æ —É—Å–ª—É–≥ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö: {len(services)}")
        print("=" * 80)
        
        for service in services:
            duration_prices = service.duration_prices if isinstance(service.duration_prices, dict) else {}
            base_duration = service.base_duration
            price = duration_prices.get(str(base_duration), '–ù–µ —É–∫–∞–∑–∞–Ω–∞')
            
            print(f"\nID: {service.id}")
            print(f"  –ù–∞–∑–≤–∞–Ω–∏–µ: {service.name}")
            print(f"  –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {base_duration} –º–∏–Ω ({base_duration/60:.1f} —á–∞—Å–∞)")
            print(f"  –¶–µ–Ω–∞: {price} —Ä—É–±.")
            print(f"  –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {service.category}")
            print(f"  –ê–∫—Ç–∏–≤–Ω–∞: {'–î–∞' if service.is_active else '–ù–µ—Ç'}")
        
        print("\n" + "=" * 80)

if __name__ == '__main__':
    check_services()












================================================================================
–§–ê–ô–õ: wsgi.py
================================================================================
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
WSGI entry point –¥–ª—è production —Å–µ—Ä–≤–µ—Ä–∞ (Gunicorn, uWSGI, etc.)

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
    gunicorn wsgi:app
    –∏–ª–∏
    gunicorn -c gunicorn_config.py wsgi:app
"""

import os
from dotenv import load_dotenv

# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
load_dotenv()

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ –≤ production
os.environ.setdefault('FLASK_ENV', 'production')

import sys
import os

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É –≤ sys.path (–¥–ª—è production)
project_path = os.path.dirname(os.path.abspath(__file__))
if project_path not in sys.path:
    sys.path.insert(0, project_path)

from app import create_app

# –°–æ–∑–¥–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
app = create_app()
# –î–ª—è Gunicorn —Ç–∞–∫–∂–µ —Å–æ–∑–¥–∞–µ–º application (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∏–º—è –¥–ª—è WSGI)
application = app

# PROD: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SECRET_KEY —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
if not app.config.get('SECRET_KEY') or app.config.get('SECRET_KEY') == 'dev-secret-key-change-in-production':
    raise ValueError(
        "SECRET_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω! –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è SECRET_KEY. "
        "–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–ª—é—á: python -c 'import secrets; print(secrets.token_hex(32))'"
    )

if __name__ == "__main__":
    # –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    app.run(host='0.0.0.0', port=5000, debug=False)





================================================================================
–§–ê–ô–õ: init_db.py
================================================================================
# -*- coding: utf-8 -*-
"""
–°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö SQLite
"""

from app import create_app
from db_models import db, Service, Client, Booking

def init_database():
    """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü"""
    app = create_app()
    with app.app_context():
        # –°–æ–∑–¥–∞–µ–º –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã
        db.create_all()
        print("‚úÖ –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ —É—Å–ª—É–≥–∏
        if Service.query.count() == 0:
            # –î–æ–±–∞–≤–ª—è–µ–º —É—Å–ª—É–≥–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            services_data = [
                {
                    'name': '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∞–∂',
                    'description': '–†–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–π –º–∞—Å—Å–∞–∂ –≤—Å–µ–≥–æ —Ç–µ–ª–∞ –¥–ª—è —Å–Ω—è—Ç–∏—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è',
                    'duration_minutes': 60,
                    'price': 3000
                },
                {
                    'name': '–õ–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂',
                    'description': '–ú–∞—Å—Å–∞–∂ –¥–ª—è –ª–µ—á–µ–Ω–∏—è –∏ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π',
                    'duration_minutes': 60,
                    'price': 3500
                },
                {
                    'name': '–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∞–∂',
                    'description': '–ú–∞—Å—Å–∞–∂ –¥–ª—è —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤ –∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ª—é–¥–µ–π',
                    'duration_minutes': 60,
                    'price': 4000
                },
                {
                    'name': '–ê–Ω—Ç–∏—Ü–µ–ª–ª—é–ª–∏—Ç–Ω—ã–π –º–∞—Å—Å–∞–∂',
                    'description': '–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∞–∂ –¥–ª—è –±–æ—Ä—å–±—ã —Å —Ü–µ–ª–ª—é–ª–∏—Ç–æ–º',
                    'duration_minutes': 60,
                    'price': 4500
                },
                {
                    'name': '–¢–∞–π—Å–∫–∏–π –º–∞—Å—Å–∞–∂',
                    'description': '–î—Ä–µ–≤–Ω—è—è —Ç–µ—Ö–Ω–∏–∫–∞ —Ä–∞—Å—Ç—è–∂–∫–∏ –∏ –∞–∫—É–ø—Ä–µ—Å—Å—É—Ä—ã',
                    'duration_minutes': 90,
                    'price': 5000
                },
                {
                    'name': '–ú–∞—Å—Å–∞–∂ –≥–æ—Ä—è—á–∏–º–∏ –∫–∞–º–Ω—è–º–∏',
                    'description': '–ì–ª—É–±–æ–∫–æ–µ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–∞–≥—Ä–µ—Ç—ã—Ö –∫–∞–º–Ω–µ–π',
                    'duration_minutes': 90,
                    'price': 5500
                }
            ]
            
            for service_data in services_data:
                service = Service(**service_data)
                db.session.add(service)
            
            db.session.commit()
            print(f"‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ {len(services_data)} —É—Å–ª—É–≥")
        else:
            print(f"‚ÑπÔ∏è  –í –±–∞–∑–µ —É–∂–µ –µ—Å—Ç—å {Service.query.count()} —É—Å–ª—É–≥")
        
        print("‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ!")

if __name__ == '__main__':
    init_database()




================================================================================
–§–ê–ô–õ: notify/vk_bot.py
================================================================================
# notify/vk_bot.py
import os
import logging
from vk_api import VkApi
from vk_api.utils import get_random_id

logger = logging.getLogger(__name__)

def send_vk_notification(message: str) -> bool:
    token = os.environ.get('VK_API_TOKEN')
    admin_id_str = os.environ.get('VK_ADMIN_ID')
    
    if not token or not admin_id_str:
        logger.warning("‚ö†Ô∏è VK_API_TOKEN –∏–ª–∏ VK_ADMIN_ID –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã")
        return False

    try:
        admin_id = int(admin_id_str)
        vk = VkApi(token=token).get_api()
        vk.messages.send(
            user_id=admin_id,
            message=message,
            random_id=get_random_id()
        )
        logger.info("‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ VK")
        return True
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ VK: {e}")
        return False


================================================================================
–§–ê–ô–õ: notify/__init__.py
================================================================================



================================================================================
–§–ê–ô–õ: notify/senders.py
================================================================================



================================================================================
–§–ê–ô–õ: telegram_bot/run_telegram_bot.py
================================================================================
# run_telegram_bot.py
import os
from telegram_bot.telegram_bot_simple import start_telegram_bot_simple

if __name__ == "__main__":
    token = os.environ.get('TELEGRAM_BOT_TOKEN')
    chat_id = os.environ.get('TELEGRAM_CHAT_ID')

    if token and chat_id:
        start_telegram_bot_simple(token=token, admin_chat_id=chat_id)
    else:
        print("ERROR: TELEGRAM_BOT_TOKEN –∏–ª–∏ TELEGRAM_CHAT_ID –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã.")


================================================================================
–§–ê–ô–õ: telegram_bot/__init__.py
================================================================================
# -*- coding: utf-8 -*-
"""
Telegram –±–æ—Ç –¥–ª—è –º–∞—Å—Å–∞–∂–Ω–æ–≥–æ —Å–∞–ª–æ–Ω–∞
"""

from .telegram_bot_simple import (
    init_telegram_bot,
    send_booking_notification_sync,
    start_telegram_bot_simple
)

__all__ = [
    'init_telegram_bot',
    'send_booking_notification_sync',
    'start_telegram_bot_simple'
]





================================================================================
–§–ê–ô–õ: telegram_bot/telegram_bot_simple.py
================================================================================
# -*- coding: utf-8 -*-
"""
Telegram-–±–æ—Ç –Ω–∞ Python —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ aiogram
–°–æ–∑–¥–∞–µ—Ç SQLite-–±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å —Ç–∞–±–ª–∏—Ü–µ–π users –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ —Ä–∞—Å—Å—ã–ª–∫–∏
"""

import os
import sqlite3
import logging
import asyncio
import threading
from datetime import datetime, timedelta
from typing import Optional, Dict, Any

logger = logging.getLogger(__name__)

# –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
bot_instance = None
bot_dispatcher = None
bot_thread = None
BOT_TOKEN = None
ADMIN_CHAT_ID = None
DB_PATH = os.path.join(os.path.dirname(os.path.dirname(__file__)), 'instance', 'telegram_bot.db')

# –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏
broadcast_states = {}  # {chat_id: True/False}


def init_database():
    """
    –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç SQLite-–±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ —Å–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É users, –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.
    
    –¢–∞–±–ª–∏—Ü–∞ users —Å–æ–¥–µ—Ä–∂–∏—Ç:
    - user_id (INTEGER PRIMARY KEY) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    - username (TEXT) - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    - first_name (TEXT) - –∏–º—è
    - language_code (TEXT) - —è–∑—ã–∫
    - is_blocked (INTEGER DEFAULT 0) - —Ñ–ª–∞–≥ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (0 - –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω, 1 - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω)
    - created_at (TEXT) - –≤—Ä–µ–º—è –ø–µ—Ä–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (ISO —Ñ–æ—Ä–º–∞—Ç)
    - last_active (TEXT) - –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è (ISO —Ñ–æ—Ä–º–∞—Ç)
    """
    try:
        # –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
        os.makedirs(os.path.dirname(DB_PATH), exist_ok=True)
        
        # –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
        conn = sqlite3.connect(DB_PATH)
        cursor = conn.cursor()
        
        # –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É users, –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS users (
                user_id INTEGER PRIMARY KEY,
                username TEXT,
                first_name TEXT,
                language_code TEXT,
                is_blocked INTEGER DEFAULT 0,
                created_at TEXT NOT NULL,
                last_active TEXT NOT NULL
            )
        ''')
        
        # –°–æ–∑–¥–∞–µ–º –∏–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ is_blocked
        cursor.execute('''
            CREATE INDEX IF NOT EXISTS idx_is_blocked ON users(is_blocked)
        ''')
        
        # –°–æ–∑–¥–∞–µ–º –∏–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ last_active
        cursor.execute('''
            CREATE INDEX IF NOT EXISTS idx_last_active ON users(last_active)
        ''')
        
        conn.commit()
        conn.close()
        
        logger.info(f"‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞: {DB_PATH}")
        return True
        
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: {e}")
        import traceback
        logger.error(traceback.format_exc())
        return False


def save_user(user_id: int, username: Optional[str] = None, first_name: Optional[str] = None, 
              language_code: Optional[str] = None):
    """
    –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
    
    –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –æ–±–Ω–æ–≤–ª—è–µ—Ç last_active.
    –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–æ–≤—ã–π, —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å.
    
    Args:
        user_id: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        username: –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        first_name: –ò–º—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        language_code: –ö–æ–¥ —è–∑—ã–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    """
    try:
        conn = sqlite3.connect(DB_PATH)
        cursor = conn.cursor()
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
        cursor.execute('SELECT user_id FROM users WHERE user_id = ?', (user_id,))
        existing_user = cursor.fetchone()
        
        current_time = datetime.now().isoformat()
        
        if existing_user:
            # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –æ–±–Ω–æ–≤–ª—è–µ–º last_active –∏ –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
            cursor.execute('''
                UPDATE users 
                SET username = COALESCE(?, username),
                    first_name = COALESCE(?, first_name),
                    language_code = COALESCE(?, language_code),
                    last_active = ?
                WHERE user_id = ?
            ''', (username, first_name, language_code, current_time, user_id))
            logger.debug(f"–û–±–Ω–æ–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å user_id={user_id}")
        else:
            # –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —Å–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å
            cursor.execute('''
                INSERT INTO users (user_id, username, first_name, language_code, is_blocked, created_at, last_active)
                VALUES (?, ?, ?, ?, 0, ?, ?)
            ''', (user_id, username, first_name, language_code, current_time, current_time))
            logger.info(f"–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å user_id={user_id}, username={username}, first_name={first_name}")
        
        conn.commit()
        conn.close()
        
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {e}")
        import traceback
        logger.error(traceback.format_exc())


def get_statistics() -> tuple:
    """
    –ü–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
    
    Returns:
        tuple: (total_users, active_users_7days)
            - total_users: –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            - active_users_7days: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
    """
    try:
        conn = sqlite3.connect(DB_PATH)
        cursor = conn.cursor()
        
        # –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        cursor.execute('SELECT COUNT(*) FROM users')
        total_users = cursor.fetchone()[0]
        
        # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
        seven_days_ago = (datetime.now() - timedelta(days=7)).isoformat()
        cursor.execute('''
            SELECT COUNT(*) FROM users 
            WHERE last_active >= ?
        ''', (seven_days_ago,))
        active_users_7days = cursor.fetchone()[0]
        
        conn.close()
        
        return total_users, active_users_7days
        
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: {e}")
        import traceback
        logger.error(traceback.format_exc())
        return 0, 0


def get_users_for_broadcast() -> list:
    """
    –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ user_id –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É –∫–æ—Ç–æ—Ä—ã—Ö is_blocked = 0.
    
    Returns:
        list: –°–ø–∏—Å–æ–∫ user_id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏
    """
    try:
        conn = sqlite3.connect(DB_PATH)
        cursor = conn.cursor()
        
        cursor.execute('SELECT user_id FROM users WHERE is_blocked = 0')
        users = [row[0] for row in cursor.fetchall()]
        
        conn.close()
        
        return users
        
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏: {e}")
        import traceback
        logger.error(traceback.format_exc())
        return []


def is_admin(chat_id: str) -> bool:
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–æ–º"""
    return str(chat_id) == str(ADMIN_CHAT_ID)


def get_all_bookings(limit: int = 50) -> list:
    """
    –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Flask.
    –î–æ–ª–∂–Ω–∞ –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –≤–Ω—É—Ç—Ä–∏ app context.
    
    Args:
        limit: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è
        
    Returns:
        list: –°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π (bookings)
    """
    try:
        from models import db, Booking, Client, Service
        from datetime import date
        
        # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –∑–∞–ø–∏—Å–∏, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–Ω–∞—á–∞–ª–∞)
        bookings = Booking.query.order_by(
            Booking.booking_date.desc(), 
            Booking.booking_time.desc()
        ).limit(limit).all()
        
        return bookings
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π: {e}")
        import traceback
        logger.error(traceback.format_exc())
        return []


def get_bookings_for_today() -> list:
    """
    –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Flask.
    –î–æ–ª–∂–Ω–∞ –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –≤–Ω—É—Ç—Ä–∏ app context.
    
    Returns:
        list: –°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π (bookings) –∑–∞ —Å–µ–≥–æ–¥–Ω—è
    """
    try:
        from models import db, Booking, Client, Service
        from datetime import date
        
        # –ü–æ–ª—É—á–∞–µ–º —Å–µ–≥–æ–¥–Ω—è—à–Ω—é—é –¥–∞—Ç—É
        today = date.today()
        
        # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –∑–∞–ø–∏—Å–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
        bookings = Booking.query.filter(
            Booking.booking_date == today
        ).order_by(
            Booking.booking_time.asc()
        ).all()
        
        return bookings
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –∑–∞ —Å–µ–≥–æ–¥–Ω—è: {e}")
        import traceback
        logger.error(traceback.format_exc())
        return []


def get_telegram_chat_id_by_phone(phone: str) -> Optional[str]:
    """
    –ü–æ–ª—É—á–∞–µ—Ç telegram_chat_id –∏–∑ –±–∞–∑—ã –±–æ—Ç–∞ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É –∫–ª–∏–µ–Ω—Ç–∞.
    –ò—â–µ—Ç –ø–æ –∏–º–µ–Ω–∏ –∫–ª–∏–µ–Ω—Ç–∞ –≤ –±–∞–∑–µ –±–æ—Ç–∞ (first_name).
    
    Args:
        phone: –¢–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞
        
    Returns:
        str: telegram_chat_id –∏–ª–∏ None
    """
    try:
        # –í –±–∞–∑–µ –±–æ—Ç–∞ –Ω–µ—Ç –ø–æ–ª—è phone, –ø–æ—ç—Ç–æ–º—É –∏—â–µ–º –ø–æ –∏–º–µ–Ω–∏
        # –≠—Ç–æ –Ω–µ –∏–¥–µ–∞–ª—å–Ω–æ, –Ω–æ –ª—É—á—à–µ —á–µ–º –Ω–∏—á–µ–≥–æ
        # –í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ phone –≤ –±–∞–∑—É –±–æ—Ç–∞
        conn = sqlite3.connect(DB_PATH)
        cursor = conn.cursor()
        
        # –ü–æ–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º None, —Ç–∞–∫ –∫–∞–∫ –≤ –±–∞–∑–µ –±–æ—Ç–∞ –Ω–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω–∞
        # –≠—Ç–æ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è phone –≤ –±–∞–∑—É –±–æ—Ç–∞
        conn.close()
        return None
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è telegram_chat_id –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É: {e}")
        return None


def get_telegram_chat_id_by_name(name: str) -> Optional[str]:
    """
    –ü–æ–ª—É—á–∞–µ—Ç telegram_chat_id –∏–∑ –±–∞–∑—ã –±–æ—Ç–∞ –ø–æ –∏–º–µ–Ω–∏ –∫–ª–∏–µ–Ω—Ç–∞.
    –ò—â–µ—Ç –ø–æ first_name –≤ –±–∞–∑–µ –±–æ—Ç–∞.
    
    Args:
        name: –ò–º—è –∫–ª–∏–µ–Ω—Ç–∞
        
    Returns:
        str: telegram_chat_id –∏–ª–∏ None (–µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–≤—ã–π)
    """
    try:
        conn = sqlite3.connect(DB_PATH)
        cursor = conn.cursor()
        
        # –ò—â–µ–º –ø–æ first_name (–±–µ–∑ —É—á–µ—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞)
        cursor.execute('''
            SELECT user_id FROM users 
            WHERE LOWER(first_name) = LOWER(?)
            ORDER BY last_active DESC
            LIMIT 1
        ''', (name,))
        
        result = cursor.fetchone()
        conn.close()
        
        if result:
            telegram_chat_id = str(result[0])
            logger.info(f"‚úÖ –ù–∞–π–¥–µ–Ω telegram_chat_id –¥–ª—è –∏–º–µ–Ω–∏ '{name}': {telegram_chat_id}")
            return telegram_chat_id
        
        return None
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è telegram_chat_id –ø–æ –∏–º–µ–Ω–∏: {e}")
        import traceback
        logger.error(traceback.format_exc())
        return None


def get_client_bookings(telegram_chat_id: str) -> list:
    """
    –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ –µ–≥–æ Telegram chat_id.
    –î–æ–ª–∂–Ω–∞ –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –≤–Ω—É—Ç—Ä–∏ app context.
    
    Args:
        telegram_chat_id: Telegram chat_id –∫–ª–∏–µ–Ω—Ç–∞
        
    Returns:
        list: –°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π (bookings) –∫–ª–∏–µ–Ω—Ç–∞, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–Ω–∞—á–∞–ª–∞)
    """
    try:
        from models import db, Booking, Client, Service
        from datetime import date, datetime
        
        # –ù–∞—Ö–æ–¥–∏–º –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ telegram_chat_id
        client = Client.query.filter_by(telegram_chat_id=telegram_chat_id).first()
        
        if not client:
            return []
        
        # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –∑–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç–∞, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–Ω–∞—á–∞–ª–∞)
        bookings = Booking.query.filter_by(
            client_id=client.id
        ).order_by(
            Booking.booking_date.desc(),
            Booking.booking_time.desc()
        ).all()
        
        return bookings
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –∫–ª–∏–µ–Ω—Ç–∞: {e}")
        import traceback
        logger.error(traceback.format_exc())
        return []


def format_booking_for_telegram(booking) -> str:
    """
    –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –∑–∞–ø–∏—Å—å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ Telegram.
    
    Args:
        booking: –û–±—ä–µ–∫—Ç Booking –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        
    Returns:
        str: –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    """
    try:
        # –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –æ–±—ä–µ–∫—Ç–∞ booking (—É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –≤ app context)
        client = booking.client if hasattr(booking, 'client') and booking.client else None
        service = booking.service if hasattr(booking, 'service') and booking.service else None
        
        client_name = client.name if client else "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"
        client_phone = client.phone if client else "–ù–µ —É–∫–∞–∑–∞–Ω–æ"
        service_name = service.name if service else "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —É—Å–ª—É–≥–∞"
        
        date_str = booking.booking_date.strftime('%d.%m.%Y') if booking.booking_date else "–ù–µ —É–∫–∞–∑–∞–Ω–æ"
        time_str = booking.booking_time.strftime('%H:%M') if booking.booking_time else "–ù–µ —É–∫–∞–∑–∞–Ω–æ"
        
        status_emoji = {
            'confirmed': '‚úÖ',
            'cancelled': '‚ùå',
            'completed': '‚úì'
        }.get(booking.status, 'üìÖ')
        
        status_text = {
            'confirmed': '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞',
            'cancelled': '–û—Ç–º–µ–Ω–µ–Ω–∞',
            'completed': '–ó–∞–≤–µ—Ä—à–µ–Ω–∞'
        }.get(booking.status, '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ')
        
        created_at_str = booking.created_at.strftime('%d.%m.%Y %H:%M') if booking.created_at else "–ù–µ —É–∫–∞–∑–∞–Ω–æ"
        
        message = f"""
{status_emoji} <b>–ó–∞–ø–∏—Å—å #{booking.id}</b>

üë§ <b>–ö–ª–∏–µ–Ω—Ç:</b> {client_name}
üìû <b>–¢–µ–ª–µ—Ñ–æ–Ω:</b> {client_phone}
üíÜ <b>–£—Å–ª—É–≥–∞:</b> {service_name}

üìÖ <b>–î–∞—Ç–∞:</b> {date_str}
‚è∞ <b>–í—Ä–µ–º—è:</b> {time_str}
‚è±Ô∏è <b>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</b> {booking.duration_minutes} –º–∏–Ω
üìä <b>–°—Ç–∞—Ç—É—Å:</b> {status_text}
"""
        
        if booking.contraindications:
            message += f"\n‚ö†Ô∏è <b>–ü—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è:</b> {booking.contraindications}"
        
        if booking.preferences:
            message += f"\nüí¨ <b>–ü–æ–∂–µ–ª–∞–Ω–∏—è:</b> {booking.preferences}"
        
        message += f"\n\nüïê <i>–°–æ–∑–¥–∞–Ω–∞: {created_at_str}</i>"
        
        return message
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏: {e}")
        import traceback
        logger.error(traceback.format_exc())
        return f"–û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏: {e}"


async def start_bot():
    """–ó–∞–ø—É—Å–∫–∞–µ—Ç Telegram –±–æ—Ç–∞"""
    global bot_instance, bot_dispatcher
    
    try:
        from aiogram import Bot, Dispatcher, F
        from aiogram.filters import Command
        from aiogram.types import Message, ReplyKeyboardMarkup, KeyboardButton
        from aiogram.enums import ParseMode
        from aiogram.client.default import DefaultBotProperties
        
        if not BOT_TOKEN:
            logger.error("BOT_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
            return
        
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
        if not init_database():
            logger.error("–ù–µ —É–¥–∞–ª–æ—Å—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö")
            return
        
        # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∫—Å–∏, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω
        from aiogram.client.session.aiohttp import AiohttpSession
        
        proxy_url = os.environ.get('TELEGRAM_PROXY_URL') or os.environ.get('HTTP_PROXY') or os.environ.get('HTTPS_PROXY')
        
        if proxy_url:
            logger.info(f"üåê –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∫—Å–∏ –¥–ª—è Telegram –±–æ—Ç–∞: {proxy_url[:30]}...")
            # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–æ–∫—Å–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (aiohttp –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç)
            os.environ['HTTP_PROXY'] = proxy_url
            os.environ['HTTPS_PROXY'] = proxy_url
        
        # –°–æ–∑–¥–∞–µ–º —Å–µ—Å—Å–∏—é (aiohttp –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç HTTP_PROXY/HTTPS_PROXY –∏–∑ –æ–∫—Ä—É–∂–µ–Ω–∏—è)
        session = AiohttpSession()
        
        # –°–æ–∑–¥–∞–µ–º –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä
        bot_instance = Bot(
            token=BOT_TOKEN,
            session=session,
            default=DefaultBotProperties(parse_mode=ParseMode.HTML)
        )
        bot_dispatcher = Dispatcher()
        
        def get_keyboard():
            """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–æ–π '–ú–æ–∏ –∑–∞–ø–∏—Å–∏' –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"""
            return ReplyKeyboardMarkup(
                keyboard=[
                    [KeyboardButton(text="üìã –ú–æ–∏ –∑–∞–ø–∏—Å–∏")],
                ],
                resize_keyboard=True
            )
        
        def get_admin_keyboard():
            """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –†–∞—Å—Å—ã–ª–∫–∞ –¥–ª—è –∞–¥–º–∏–Ω–∞"""
            return ReplyKeyboardMarkup(
                keyboard=[
                    [KeyboardButton(text="üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"), KeyboardButton(text="üì¢ –†–∞—Å—Å—ã–ª–∫–∞")],
                ],
                resize_keyboard=True
            )
        
        @bot_dispatcher.message(Command("start"))
        async def cmd_start(message: Message):
            """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ"""
            # –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏
            user_id = message.from_user.id
            username = message.from_user.username
            first_name = message.from_user.first_name
            language_code = message.from_user.language_code
            save_user(user_id, username, first_name, language_code)
            
            chat_id = str(message.chat.id)
            
            if is_admin(chat_id):
                keyboard = get_admin_keyboard()
                await message.answer(
                    "üë®‚Äçüíº <b>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</b>\n\n"
                    "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –Ω–∏–∂–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:\n\n"
                    "‚Ä¢ üìä <b>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</b> - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π\n"
                    "‚Ä¢ üì¢ <b>–†–∞—Å—Å—ã–ª–∫–∞</b> - —Ä–∞—Å—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º",
                    reply_markup=keyboard
                )
            else:
                keyboard = get_keyboard()
                await message.answer(
                    "üë§ <b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</b>\n\n"
                    "–í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ –±–æ—Ç–µ.\n\n"
                    "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É <b>üìã –ú–æ–∏ –∑–∞–ø–∏—Å–∏</b> –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤–∞—à–∏—Ö –∑–∞–ø–∏—Å–µ–π –Ω–∞ –º–∞—Å—Å–∞–∂.",
                    reply_markup=keyboard,
                    parse_mode='HTML'
                )
        
        @bot_dispatcher.message(Command("stats"))
        async def cmd_stats(message: Message):
            """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /stats - –≤—ã–≤–æ–¥–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É"""
            # –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –ø—Ä–∏ –ª—é–±–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏
            user_id = message.from_user.id
            username = message.from_user.username
            first_name = message.from_user.first_name
            language_code = message.from_user.language_code
            save_user(user_id, username, first_name, language_code)
            
            chat_id = str(message.chat.id)
            
            if not is_admin(chat_id):
                keyboard = get_keyboard()
                await message.answer("‚ùå –£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏", reply_markup=keyboard)
                return
            
            keyboard = get_admin_keyboard()
            await message.answer("‚è≥ –ó–∞–≥—Ä—É–∂–∞—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É...", reply_markup=keyboard)
            
            total_users, active_users_7days = get_statistics()
            
            stats_message = f"""
üìä <b>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</b>

üë• <b>–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:</b> {total_users}
üìà <b>–ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π:</b> {active_users_7days}
"""
            await message.answer(stats_message, reply_markup=keyboard)
        
        @bot_dispatcher.message(Command("broadcast"))
        async def cmd_broadcast(message: Message):
            """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /broadcast - –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞—Å—Å—ã–ª–∫—É"""
            # –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –ø—Ä–∏ –ª—é–±–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏
            user_id = message.from_user.id
            username = message.from_user.username
            first_name = message.from_user.first_name
            language_code = message.from_user.language_code
            save_user(user_id, username, first_name, language_code)
            
            chat_id = str(message.chat.id)
            
            if not is_admin(chat_id):
                keyboard = get_keyboard()
                await message.answer("‚ùå –£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏", reply_markup=keyboard)
                return
            
            keyboard = get_admin_keyboard()
            # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏
            broadcast_states[chat_id] = True
            
            await message.answer(
                "üì¢ <b>–†–∞—Å—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π</b>\n\n"
                "–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ö–æ—Ç–∏—Ç–µ —Ä–∞–∑–æ—Å–ª–∞—Ç—å –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º (—É –∫–æ—Ç–æ—Ä—ã—Ö is_blocked = 0).\n"
                "–ò–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ <b>'–æ—Ç–º–µ–Ω–∞'</b> –¥–ª—è –æ—Ç–º–µ–Ω—ã.",
                reply_markup=keyboard
            )
        
        @bot_dispatcher.message(F.text == "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞")
        async def button_stats(message: Message):
            """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞'"""
            # –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –ø—Ä–∏ –ª—é–±–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏
            user_id = message.from_user.id
            username = message.from_user.username
            first_name = message.from_user.first_name
            language_code = message.from_user.language_code
            save_user(user_id, username, first_name, language_code)
            
            chat_id = str(message.chat.id)
            
            if not is_admin(chat_id):
                keyboard = get_keyboard()
                await message.answer("‚ùå –£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏", reply_markup=keyboard)
                return
            
            keyboard = get_admin_keyboard()
            await message.answer("‚è≥ –ó–∞–≥—Ä—É–∂–∞—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É...", reply_markup=keyboard)
            
            total_users, active_users_7days = get_statistics()
            
            stats_message = f"""
üìä <b>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</b>

üë• <b>–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:</b> {total_users}
üìà <b>–ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π:</b> {active_users_7days}
"""
            await message.answer(stats_message, reply_markup=keyboard)
        
        @bot_dispatcher.message(F.text == "üìã –ú–æ–∏ –∑–∞–ø–∏—Å–∏")
        async def button_my_bookings(message: Message):
            """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ '–ú–æ–∏ –∑–∞–ø–∏—Å–∏'"""
            try:
                # –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –ø—Ä–∏ –ª—é–±–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏
                user_id = message.from_user.id
                username = message.from_user.username
                first_name = message.from_user.first_name
                language_code = message.from_user.language_code
                save_user(user_id, username, first_name, language_code)
                
                chat_id = str(message.chat.id)
                keyboard = get_keyboard() if not is_admin(chat_id) else get_admin_keyboard()
                
                # –ü–æ–ª—É—á–∞–µ–º –∑–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç–∞ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Flask
                try:
                    # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º app –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è app context
                    import sys
                    import os
                    sys.path.insert(0, os.path.dirname(os.path.dirname(__file__)))
                    from app import create_app
                    
                    app = create_app()
                    with app.app_context():
                        bookings = get_client_bookings(chat_id)
                        
                        if not bookings:
                            await message.answer(
                                "üìã <b>–ú–æ–∏ –∑–∞–ø–∏—Å–∏</b>\n\n"
                                "–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π.\n\n"
                                "–ß—Ç–æ–±—ã –∑–∞–ø–∏—Å–∞—Ç—å—Å—è, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å–∞–π—Ç –∏–ª–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.",
                                reply_markup=keyboard
                            )
                            return
                        
                        # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π
                        from datetime import date, datetime
                        today = date.today()
                        
                        message_text = "üìã <b>–ú–æ–∏ –∑–∞–ø–∏—Å–∏</b>\n\n"
                        
                        for i, booking in enumerate(bookings, 1):
                            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
                            status_emoji = {
                                'confirmed': '‚úÖ',
                                'cancelled': '‚ùå',
                                'completed': '‚úì'
                            }.get(booking.status, 'üìÖ')
                            
                            status_text = {
                                'confirmed': '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞',
                                'cancelled': '–û—Ç–º–µ–Ω–µ–Ω–∞',
                                'completed': '–ó–∞–≤–µ—Ä—à–µ–Ω–∞'
                            }.get(booking.status, '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ')
                            
                            # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∞—Ç—É
                            booking_date = booking.booking_date
                            if booking_date:
                                date_str = booking_date.strftime('%d.%m.%Y')
                                # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø—Ä–æ—à–ª–∞ –ª–∏ –∑–∞–ø–∏—Å—å
                                if booking_date < today and booking.status == 'confirmed':
                                    status_emoji = '‚è∞'
                                    status_text = '–ü—Ä–æ—à–ª–∞'
                            else:
                                date_str = '–ù–µ —É–∫–∞–∑–∞–Ω–æ'
                            
                            # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –≤—Ä–µ–º—è
                            time_str = booking.booking_time.strftime('%H:%M') if booking.booking_time else '–ù–µ —É–∫–∞–∑–∞–Ω–æ'
                            
                            # –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏
                            service_name = booking.service.name if booking.service else '–ù–µ —É–∫–∞–∑–∞–Ω–æ'
                            
                            message_text += f"{status_emoji} <b>–ó–∞–ø–∏—Å—å #{booking.id}</b>\n"
                            message_text += f"üíÜ <b>–£—Å–ª—É–≥–∞:</b> {service_name}\n"
                            message_text += f"üìÖ <b>–î–∞—Ç–∞:</b> {date_str}\n"
                            message_text += f"‚è∞ <b>–í—Ä–µ–º—è:</b> {time_str}\n"
                            message_text += f"‚è±Ô∏è <b>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</b> {booking.duration_minutes} –º–∏–Ω\n"
                            message_text += f"üìä <b>–°—Ç–∞—Ç—É—Å:</b> {status_text}\n"
                            
                            if booking.contraindications:
                                message_text += f"‚ö†Ô∏è <b>–ü—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è:</b> {booking.contraindications}\n"
                            
                            if booking.preferences:
                                message_text += f"üí¨ <b>–ü–æ–∂–µ–ª–∞–Ω–∏—è:</b> {booking.preferences}\n"
                            
                            message_text += "\n"
                            
                            # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É —Å–æ–æ–±—â–µ–Ω–∏—è (Telegram –ª–∏–º–∏—Ç ~4096 —Å–∏–º–≤–æ–ª–æ–≤)
                            if len(message_text) > 3500:
                                message_text += f"\n... –∏ –µ—â–µ {len(bookings) - i} –∑–∞–ø–∏—Å–µ–π"
                                break
                        
                        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                        await message.answer(message_text, reply_markup=keyboard, parse_mode='HTML')
                        
                except Exception as db_error:
                    logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –∏–∑ –ë–î: {db_error}")
                    import traceback
                    logger.error(traceback.format_exc())
                    await message.answer(
                        "‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–µ–π. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",
                        reply_markup=keyboard
                    )
                    
            except Exception as e:
                logger.error(f"‚ùå –û—à–∏–±–∫–∞ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –∫–Ω–æ–ø–∫–∏ '–ú–æ–∏ –∑–∞–ø–∏—Å–∏': {e}")
                import traceback
                logger.error(traceback.format_exc())
                chat_id = str(message.chat.id)
                keyboard = get_keyboard() if not is_admin(chat_id) else get_admin_keyboard()
                await message.answer("‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.", reply_markup=keyboard)
        
        @bot_dispatcher.message(F.text == "üì¢ –†–∞—Å—Å—ã–ª–∫–∞")
        async def button_broadcast(message: Message):
            """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ '–†–∞—Å—Å—ã–ª–∫–∞'"""
            try:
                # –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –ø—Ä–∏ –ª—é–±–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏
                user_id = message.from_user.id
                username = message.from_user.username
                first_name = message.from_user.first_name
                language_code = message.from_user.language_code
                save_user(user_id, username, first_name, language_code)
                
                chat_id = str(message.chat.id)
                
                if not is_admin(chat_id):
                    keyboard = get_keyboard()
                    await message.answer("‚ùå –£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏", reply_markup=keyboard)
                    return
                
                keyboard = get_admin_keyboard()
                # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏
                broadcast_states[chat_id] = True
                
                logger.info(f"üì¢ –ê–¥–º–∏–Ω {chat_id} –Ω–∞—á–∞–ª —Ä–∞—Å—Å—ã–ª–∫—É")
                
                await message.answer(
                    "üì¢ <b>–†–∞—Å—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π</b>\n\n"
                    "–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ö–æ—Ç–∏—Ç–µ —Ä–∞–∑–æ—Å–ª–∞—Ç—å –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º (—É –∫–æ—Ç–æ—Ä—ã—Ö is_blocked = 0).\n"
                    "–ò–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ <b>'–æ—Ç–º–µ–Ω–∞'</b> –¥–ª—è –æ—Ç–º–µ–Ω—ã.",
                    reply_markup=keyboard
                )
            except Exception as e:
                logger.error(f"‚ùå –û—à–∏–±–∫–∞ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –∫–Ω–æ–ø–∫–∏ –†–∞—Å—Å—ã–ª–∫–∞: {e}")
                import traceback
                logger.error(traceback.format_exc())
                chat_id = str(message.chat.id)
                # –ò—Å–ø–æ–ª—å–∑—É–µ–º –∞–¥–º–∏–Ω—Å–∫—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É, —Ç–∞–∫ –∫–∞–∫ –∫–Ω–æ–ø–∫–∞ –†–∞—Å—Å—ã–ª–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—É
                keyboard = get_admin_keyboard() if is_admin(chat_id) else get_keyboard()
                await message.answer("‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.", reply_markup=keyboard)
        
        # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Å–µ—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏)
        # –≠—Ç–æ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–º, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –∫–Ω–æ–ø–∫–∏
        @bot_dispatcher.message(F.text)
        async def handle_text_message(message: Message):
            """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏"""
            # –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –ø—Ä–∏ –ª—é–±–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏
            user_id = message.from_user.id
            username = message.from_user.username
            first_name = message.from_user.first_name
            language_code = message.from_user.language_code
            save_user(user_id, username, first_name, language_code)
            
            chat_id = str(message.chat.id)
            message_text = message.text
            
            # –í–ê–ñ–ù–û: –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –Ω–µ –∫–Ω–æ–ø–∫–∞ –º–µ–Ω—é (–æ–Ω–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –¥—Ä—É–≥–∏–º–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏)
            # –í aiogram –±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –ø–µ—Ä–≤—ã–º–∏
            menu_buttons = ["üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞", "üì¢ –†–∞—Å—Å—ã–ª–∫–∞", "üìã –ú–æ–∏ –∑–∞–ø–∏—Å–∏"]
            if message_text in menu_buttons:
                # –≠—Ç–æ –∫–Ω–æ–ø–∫–∞ –º–µ–Ω—é, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º - –¥—Ä—É–≥–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–ª–∏
                return
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –Ω–µ –∫–æ–º–∞–Ω–¥–∞
            if message_text and message_text.startswith('/'):
                # –≠—Ç–æ –∫–æ–º–∞–Ω–¥–∞, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
                return
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            keyboard = get_admin_keyboard() if is_admin(chat_id) else get_keyboard()
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –æ–∂–∏–¥–∞–µ—Ç—Å—è –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏
            if not broadcast_states.get(chat_id, False):
                # –ï—Å–ª–∏ –Ω–µ –æ–∂–∏–¥–∞–µ—Ç—Å—è —Ä–∞—Å—Å—ã–ª–∫–∞, –ø—Ä–æ—Å—Ç–æ –æ—Ç–≤–µ—á–∞–µ–º
                if not is_admin(chat_id):
                    await message.answer("–ü—Ä–∏–≤–µ—Ç! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.", reply_markup=keyboard)
                return
            
            if not is_admin(chat_id):
                broadcast_states[chat_id] = False
                keyboard = get_keyboard()
                await message.answer("‚ùå –£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏", reply_markup=keyboard)
                return
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –æ—Ç–º–µ–Ω—É
            if message_text.lower() in ['–æ—Ç–º–µ–Ω–∞', 'cancel', '–æ—Ç–º–µ–Ω–∏—Ç—å']:
                broadcast_states[chat_id] = False
                await message.answer("‚ùå –†–∞—Å—Å—ã–ª–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞", reply_markup=keyboard)
                return
            
            logger.info(f"üì¢ –ù–∞—á–∏–Ω–∞—é —Ä–∞—Å—Å—ã–ª–∫—É –¥–ª—è –∞–¥–º–∏–Ω–∞ {chat_id}, —Å–æ–æ–±—â–µ–Ω–∏–µ: {message_text[:50]}...")
            keyboard = get_admin_keyboard()
            await message.answer("‚è≥ –ù–∞—á–∏–Ω–∞—é —Ä–∞—Å—Å—ã–ª–∫—É...", reply_markup=keyboard)
            
            # –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏
            users = get_users_for_broadcast()
            logger.info(f"üì¢ –ù–∞–π–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏: {len(users)}")
            
            if not users:
                broadcast_states[chat_id] = False
                keyboard = get_admin_keyboard()
                await message.answer("‚ùå –ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏ (–≤—Å–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –∏–ª–∏ –±–∞–∑–∞ –ø—É—Å—Ç–∞)", reply_markup=keyboard)
                logger.warning(f"‚ö†Ô∏è –ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏")
                return
            
            sent_count = 0
            failed_count = 0
            
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–∞–∂–¥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
            for user_id_target in users:
                try:
                    await bot_instance.send_message(
                        chat_id=user_id_target,
                        text=message_text,
                        parse_mode='HTML'
                    )
                    sent_count += 1
                    logger.info(f"‚úÖ –†–∞—Å—Å—ã–ª–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é user_id={user_id_target}")
                    
                    # –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–µ–≤—ã—Å–∏—Ç—å –ª–∏–º–∏—Ç—ã API (30 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Å–µ–∫—É–Ω–¥—É)
                    await asyncio.sleep(0.1)
                    
                except Exception as e:
                    failed_count += 1
                    error_msg = str(e).lower()
                    logger.error(f"‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–∞—Å—Å—ã–ª–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é user_id={user_id_target}: {e}")
                    
                    # –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –±–æ—Ç–∞, –ø–æ–º–µ—á–∞–µ–º –µ–≥–æ –∫–∞–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ
                    if "bot was blocked" in error_msg or "chat not found" in error_msg or "user is deactivated" in error_msg:
                        try:
                            conn = sqlite3.connect(DB_PATH)
                            cursor = conn.cursor()
                            cursor.execute('UPDATE users SET is_blocked = 1 WHERE user_id = ?', (user_id_target,))
                            conn.commit()
                            conn.close()
                            logger.info(f"üîí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å user_id={user_id_target} –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π")
                        except Exception as db_error:
                            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏: {db_error}")
            
            # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            broadcast_states[chat_id] = False
            
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            result_message = f"""
‚úÖ <b>–†–∞—Å—Å—ã–ª–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</b>

üìä <b>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:</b>
üë• –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏: {len(users)}
‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: {sent_count}
‚ùå –û—à–∏–±–æ–∫: {failed_count}
"""
            logger.info(f"‚úÖ –†–∞—Å—Å—ã–ª–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞: –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ {sent_count} –∏–∑ {len(users)}")
            await message.answer(result_message, reply_markup=keyboard)
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º polling
        logger.info("‚úÖ Telegram –±–æ—Ç –∑–∞–ø—É—â–µ–Ω, –Ω–∞—á–∏–Ω–∞–µ–º polling...")
        
        try:
            # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
            try:
                await bot_instance.delete_webhook(drop_pending_updates=True)
                logger.info("‚úÖ –°—Ç–∞—Ä—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–ø—É—â–µ–Ω—ã")
            except Exception as e:
                logger.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: {e}")
            
            # –ó–∞–ø—É—Å–∫–∞–µ–º polling –≤—Ä—É—á–Ω—É—é
            offset = 0
            logger.info("‚úÖ –ù–∞—á–∏–Ω–∞–µ–º –ø–æ–ª—É—á–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è...")
            
            while True:
                try:
                    # –ü–æ–ª—É—á–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
                    updates = await bot_instance.get_updates(
                        offset=offset,
                        timeout=30,
                        allowed_updates=None
                    )
                    
                    if updates:
                        logger.debug(f"üì• –ü–æ–ª—É—á–µ–Ω–æ {len(updates)} –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π")
                        for update in updates:
                            # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –¥–∏—Å–ø–µ—Ç—á–µ—Ä
                            try:
                                await bot_dispatcher.feed_update(bot_instance, update)
                                offset = update.update_id + 1
                            except Exception as update_error:
                                logger.error(f"‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: {update_error}")
                                import traceback
                                logger.error(traceback.format_exc())
                            
                except asyncio.CancelledError:
                    logger.info("Polling –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
                    break
                except Exception as e:
                    logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π: {e}")
                    import traceback
                    logger.error(traceback.format_exc())
                    await asyncio.sleep(5)  # –ñ–¥–µ–º –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–æ–º
                    
        except Exception as polling_error:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ polling: {polling_error}")
            import traceback
            logger.error(traceback.format_exc())
            raise
        
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ Telegram –±–æ—Ç–∞: {e}")
        import traceback
        logger.error(traceback.format_exc())


def run_bot_in_thread():
    """–ó–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ"""
    global bot_thread
    
    try:
        # –ü–∞—Ç—á–∏–º asyncio –î–û —Å–æ–∑–¥–∞–Ω–∏—è event loop –¥–ª—è –æ–±—Ö–æ–¥–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å signal handlers
        import asyncio
        original_add_signal_handler = asyncio.AbstractEventLoop.add_signal_handler
        
        def patched_add_signal_handler(self, *args, **kwargs):
            """–ü–∞—Ç—á –¥–ª—è –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è signal handlers –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ"""
            try:
                return original_add_signal_handler(self, *args, **kwargs)
            except (RuntimeError, ValueError) as e:
                if "signal" in str(e).lower() or "wakeup" in str(e).lower():
                    logger.debug("‚ö†Ô∏è Signal handler –ø—Ä–æ–ø—É—â–µ–Ω (—Ä–∞–±–æ—Ç–∞–µ–º –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ)")
                    return None
                raise
        
        # –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–∞—Ç—á –î–û —Å–æ–∑–¥–∞–Ω–∏—è loop
        asyncio.AbstractEventLoop.add_signal_handler = patched_add_signal_handler
        
        loop = asyncio.new_event_loop()
        asyncio.set_event_loop(loop)
        loop.run_until_complete(start_bot())
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –≤ –ø–æ—Ç–æ–∫–µ –±–æ—Ç–∞: {e}")
        import traceback
        logger.error(traceback.format_exc())


def start_telegram_bot_simple(token: str, admin_chat_id: str):
    """
    –ó–∞–ø—É—Å–∫–∞–µ—Ç Telegram –±–æ—Ç–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ.
    
    Args:
        token: –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç BotFather
        admin_chat_id: ID —á–∞—Ç–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ –∏ —Ä–∞—Å—Å—ã–ª–∫–µ)
    """
    global BOT_TOKEN, ADMIN_CHAT_ID, bot_thread
    
    BOT_TOKEN = token
    ADMIN_CHAT_ID = admin_chat_id
    
    if not BOT_TOKEN:
        logger.warning("‚ö†Ô∏è BOT_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –±–æ—Ç –Ω–µ –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω")
        return False
    
    if bot_thread and bot_thread.is_alive():
        logger.info("‚ÑπÔ∏è Telegram –±–æ—Ç —É–∂–µ –∑–∞–ø—É—â–µ–Ω")
        return True
    
    try:
        bot_thread = threading.Thread(target=run_bot_in_thread, daemon=True)
        bot_thread.start()
        logger.info("‚úÖ Telegram –±–æ—Ç –∑–∞–ø—É—â–µ–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ")
        return True
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ Telegram –±–æ—Ç–∞: {e}")
        return False


def stop_telegram_bot():
    """–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Telegram –±–æ—Ç–∞"""
    global bot_instance, bot_dispatcher, bot_thread
    
    try:
        if bot_dispatcher:
            # –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º polling
            pass
        if bot_instance:
            # –ó–∞–∫—Ä—ã–≤–∞–µ–º —Å–µ—Å—Å–∏—é
            pass
        logger.info("‚úÖ Telegram –±–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ Telegram –±–æ—Ç–∞: {e}")


def format_booking_message_for_client(booking_data: Dict[str, Any], services: list = None, booking_id: int = None) -> str:
    """
    –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –∑–∞–ø–∏—Å–∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ –≤ Telegram.
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ —Ñ–æ—Ä–º–∞—Ç, —á—Ç–æ –∏ –≤ "–ú–æ–∏ –∑–∞–ø–∏—Å–∏", –Ω–æ –±–µ–∑ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—å.
    
    Args:
        booking_data: –°–ª–æ–≤–∞—Ä—å —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –∑–∞–ø–∏—Å–∏
        services: –°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥ –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ ID
        booking_id: ID –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        
    Returns:
        str: –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ HTML
    """
    from datetime import datetime, date
    
    service_id = booking_data.get('service_id')
    date_str = booking_data.get('date', '–ù–µ —É–∫–∞–∑–∞–Ω–æ')
    time_str = booking_data.get('time', '–ù–µ —É–∫–∞–∑–∞–Ω–æ')
    duration = booking_data.get('session_duration', '60')
    contraindications = booking_data.get('contraindications', '')
    preferences = booking_data.get('preferences', '')
    
    # –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏
    service_name = '–ù–µ —É–∫–∞–∑–∞–Ω–æ'
    if service_id and services:
        try:
            service_id_int = int(service_id)
            service = next((s for s in services if s.get('id') == service_id_int), None)
            if service:
                service_name = service.get('name', f'–£—Å–ª—É–≥–∞ ID: {service_id}')
        except (ValueError, TypeError):
            service_name = f'–£—Å–ª—É–≥–∞ ID: {service_id}'
    elif service_id:
        service_name = f'–£—Å–ª—É–≥–∞ ID: {service_id}'
    
    # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∞—Ç—É
    try:
        date_obj = datetime.strptime(date_str, '%Y-%m-%d').date()
        formatted_date = date_obj.strftime('%d.%m.%Y')
        today = date.today()
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø—Ä–æ—à–ª–∞ –ª–∏ –∑–∞–ø–∏—Å—å
        if date_obj < today:
            status_emoji = '‚è∞'
            status_text = '–ü—Ä–æ—à–ª–∞'
        else:
            status_emoji = '‚úÖ'
            status_text = '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞'
    except:
        formatted_date = date_str
        status_emoji = '‚úÖ'
        status_text = '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞'
    
    # –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ç–æ–º –∂–µ —Ñ–æ—Ä–º–∞—Ç–µ, —á—Ç–æ –∏ –≤ "–ú–æ–∏ –∑–∞–ø–∏—Å–∏"
    message = f"{status_emoji} <b>–ó–∞–ø–∏—Å—å #{booking_id if booking_id else '–Ω–æ–≤–∞—è'}</b>\n\n"
    message += f"üíÜ <b>–£—Å–ª—É–≥–∞:</b> {service_name}\n"
    message += f"üìÖ <b>–î–∞—Ç–∞:</b> {formatted_date}\n"
    message += f"‚è∞ <b>–í—Ä–µ–º—è:</b> {time_str}\n"
    message += f"‚è±Ô∏è <b>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</b> {duration} –º–∏–Ω\n"
    message += f"üìä <b>–°—Ç–∞—Ç—É—Å:</b> {status_text}\n"
    
    if contraindications:
        message += f"‚ö†Ô∏è <b>–ü—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è:</b> {contraindications}\n"
    
    if preferences:
        message += f"üí¨ <b>–ü–æ–∂–µ–ª–∞–Ω–∏—è:</b> {preferences}\n"
    
    return message


def format_booking_message(booking_data: Dict[str, Any], masters: list = None, services: list = None) -> str:
    """
    –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –∑–∞–ø–∏—Å–∏ –¥–ª—è Telegram.
    
    Args:
        booking_data: –°–ª–æ–≤–∞—Ä—å —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –∑–∞–ø–∏—Å–∏
        masters: –°–ø–∏—Å–æ–∫ –º–∞—Å—Ç–µ—Ä–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–º–µ–Ω–∏ –ø–æ ID
        services: –°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥ –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ ID
        
    Returns:
        str: –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ HTML
    """
    from datetime import datetime
    
    name = booking_data.get('name', '–ù–µ —É–∫–∞–∑–∞–Ω–æ')
    phone = booking_data.get('phone', '–ù–µ —É–∫–∞–∑–∞–Ω–æ')
    master_id = booking_data.get('master_id')
    service_id = booking_data.get('service_id')
    date = booking_data.get('date', '–ù–µ —É–∫–∞–∑–∞–Ω–æ')
    time = booking_data.get('time', '–ù–µ —É–∫–∞–∑–∞–Ω–æ')
    duration = booking_data.get('session_duration', '60')
    contraindications = booking_data.get('contraindications', '')
    preferences = booking_data.get('preferences', '')
    
    # –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ –∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ü–µ–Ω—É
    service_name = '–ù–µ —É–∫–∞–∑–∞–Ω–æ'
    price = 0
    duration_int = int(duration) if duration else 60
    
    if service_id and services:
        try:
            service_id_int = int(service_id)
            service = next((s for s in services if s.get('id') == service_id_int), None)
            if service:
                service_name = service.get('name', f'–£—Å–ª—É–≥–∞ ID: {service_id}')
                
                # –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ü–µ–Ω—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
                durations = service.get('durations', [])
                if durations:
                    # –ò—â–µ–º –ø–æ–¥—Ö–æ–¥—è—â—É—é –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
                    matching_duration = next((d for d in durations if d.get('minutes') == duration_int), None)
                    if matching_duration:
                        price = matching_duration.get('price', 0)
                    else:
                        # –ï—Å–ª–∏ —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –Ω–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–∞–∑–æ–≤—É—é —Ü–µ–Ω—É –∑–∞ 60 –º–∏–Ω—É—Ç –¥–ª—è –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞
                        base_60_duration = next((d for d in durations if d.get('minutes') == 60), None)
                        if base_60_duration:
                            base_price = base_60_duration.get('price', 0)
                            price = int((base_price / 60) * duration_int)
                        else:
                            # –ï—Å–ª–∏ –Ω–µ—Ç —Ü–µ–Ω—ã –∑–∞ 60 –º–∏–Ω—É—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–≤—É—é –¥–æ—Å—Ç—É–ø–Ω—É—é
                            base_duration = durations[0]
                            base_minutes = base_duration.get('minutes', 60)
                            base_price = base_duration.get('price', 0)
                            if base_minutes > 0:
                                price = int((base_price / base_minutes) * duration_int)
                elif service.get('price'):
                    # –ï—Å–ª–∏ —Ü–µ–Ω–∞ —É–∫–∞–∑–∞–Ω–∞ –Ω–∞–ø—Ä—è–º—É—é –≤ —É—Å–ª—É–≥–µ
                    base_price = service.get('price', 0)
                    base_duration = service.get('duration_minutes', 60)
                    if base_duration > 0:
                        price = int((base_price / base_duration) * duration_int)
        except (ValueError, TypeError) as e:
            service_name = f'–£—Å–ª—É–≥–∞ ID: {service_id}'
            logger.warning(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ —Ü–µ–Ω—ã: {e}")
    elif service_id:
        service_name = f'–£—Å–ª—É–≥–∞ ID: {service_id}'
    
    # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∞—Ç—É –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    try:
        date_obj = datetime.strptime(date, '%Y-%m-%d')
        formatted_date = date_obj.strftime('%d.%m.%Y')
    except:
        formatted_date = date
    
    # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ü–µ–Ω—É —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏ —Ç—ã—Å—è—á
    if price > 0:
        price_formatted = f"{price:,}".replace(',', ' ')
    else:
        price_formatted = "–ù–µ —É–∫–∞–∑–∞–Ω–∞"
    
    message = f"""
üéâ <b>–ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å –Ω–∞ –º–∞—Å—Å–∞–∂!</b>

üë§ <b>–ö–ª–∏–µ–Ω—Ç:</b> {name}
üìû <b>–¢–µ–ª–µ—Ñ–æ–Ω:</b> {phone}

üìÖ <b>–î–∞—Ç–∞:</b> {formatted_date}
‚è∞ <b>–í—Ä–µ–º—è:</b> {time}
‚è±Ô∏è <b>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</b> {duration} –º–∏–Ω—É—Ç

üíÜ <b>–£—Å–ª—É–≥–∞:</b> {service_name}
üí∞ <b>–°—Ç–æ–∏–º–æ—Å—Ç—å:</b> {price_formatted} ‚ÇΩ
"""
    
    if contraindications:
        message += f"\n‚ö†Ô∏è <b>–ü—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è:</b> {contraindications}"
    
    if preferences:
        message += f"\nüí¨ <b>–ü–æ–∂–µ–ª–∞–Ω–∏—è:</b> {preferences}"
    
    message += f"\n\nüïê <i>–ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞: {datetime.now().strftime('%d.%m.%Y %H:%M')}</i>"
    
    # –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è
    # (–¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å –≤ booking_data)
    
    return message


async def send_booking_notification_to_client(booking_data: Dict[str, Any], client_chat_id: str, services: list = None, bot_token: str = None) -> bool:
    """
    –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç—É –≤ Telegram.
    
    Args:
        booking_data: –°–ª–æ–≤–∞—Ä—å —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –∑–∞–ø–∏—Å–∏
        client_chat_id: Telegram chat_id –∫–ª–∏–µ–Ω—Ç–∞
        services: –°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥ –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ ID
        bot_token: –¢–æ–∫–µ–Ω –±–æ—Ç–∞ (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–π)
            
    Returns:
        bool: True –µ—Å–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ, False –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ
    """
    from aiogram import Bot
    from aiogram.enums import ParseMode
    from aiogram.client.default import DefaultBotProperties
    from aiogram.types import ReplyKeyboardMarkup, KeyboardButton
    
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
    token = bot_token or BOT_TOKEN or os.environ.get('TELEGRAM_BOT_TOKEN')
    
    if not token:
        logger.error(f"‚ùå Telegram —Ç–æ–∫–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω!")
        return False
    
    if not client_chat_id or client_chat_id == 'None' or client_chat_id == '':
        logger.error(f"‚ùå Telegram chat_id –∫–ª–∏–µ–Ω—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω!")
        return False
    
    logger.info(f"üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É –≤ Telegram: chat_id={client_chat_id}")
    
    bot = None
    try:
        # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∫—Å–∏, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω
        from aiogram.client.session.aiohttp import AiohttpSession
        
        session = None
        proxy_url = os.environ.get('TELEGRAM_PROXY_URL') or os.environ.get('HTTP_PROXY') or os.environ.get('HTTPS_PROXY')
        
        if proxy_url:
            logger.info(f"üåê –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∫—Å–∏ –¥–ª—è Telegram: {proxy_url[:30]}...")
            os.environ['HTTP_PROXY'] = proxy_url
            os.environ['HTTPS_PROXY'] = proxy_url
        
        session = AiohttpSession()
        
        bot = Bot(
            token=token,
            session=session,
            default=DefaultBotProperties(parse_mode=ParseMode.HTML)
        )
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞
        message = format_booking_message_for_client(booking_data, services, booking_id)
        
        # –°–æ–∑–¥–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞
        client_keyboard = ReplyKeyboardMarkup(
            keyboard=[
                [KeyboardButton(text="üìã –ú–æ–∏ –∑–∞–ø–∏—Å–∏")],
            ],
            resize_keyboard=True
        )
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
        try:
            result = await bot.send_message(
                chat_id=str(client_chat_id),
                text=message,
                parse_mode='HTML',
                reply_markup=client_keyboard
            )
            logger.info(f"‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Telegram: message_id={result.message_id if result else 'unknown'}")
            return True
        except Exception as send_error:
            error_msg = str(send_error)
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É: {error_msg}")
            
            # –ü—Ä–æ–±—É–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –±–µ–∑ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
            try:
                result = await bot.send_message(
                    chat_id=str(client_chat_id),
                    text=message,
                    parse_mode='HTML'
                )
                logger.info(f"‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –±–µ–∑ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã")
                return True
            except Exception as send_error2:
                logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∫–ª–∏–µ–Ω—Ç—É –±–µ–∑ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã: {send_error2}")
                return False
        
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É: {e}")
        import traceback
        logger.error(f"‚ùå –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: {traceback.format_exc()}")
        return False
    finally:
        if bot:
            try:
                session = bot.session
                if session and not session.closed:
                    await session.close()
            except Exception:
                pass


async def send_booking_notification(booking_data: Dict[str, Any], masters: list = None, services: list = None, bot_token: str = None, chat_id: str = None) -> bool:
    """
    –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏ –≤ Telegram.
    
    Args:
        booking_data: –°–ª–æ–≤–∞—Ä—å —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –∑–∞–ø–∏—Å–∏
        masters: –°–ø–∏—Å–æ–∫ –º–∞—Å—Ç–µ—Ä–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–º–µ–Ω–∏ –ø–æ ID
        services: –°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥ –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ ID
        bot_token: –¢–æ–∫–µ–Ω –±–æ—Ç–∞ (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–π)
        chat_id: ID —á–∞—Ç–∞ (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–π)
            
    Returns:
        bool: True –µ—Å–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ, False –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ
    """
    from aiogram import Bot
    from aiogram.enums import ParseMode
    from aiogram.client.default import DefaultBotProperties
    from aiogram.types import ReplyKeyboardMarkup, KeyboardButton
    
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
    token = bot_token or BOT_TOKEN or os.environ.get('TELEGRAM_BOT_TOKEN')
    target_chat_id = str(chat_id or ADMIN_CHAT_ID or os.environ.get('TELEGRAM_CHAT_ID', ''))
    
    if not token:
        logger.error(f"‚ùå Telegram —Ç–æ–∫–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω!")
        return False
    
    if not target_chat_id or target_chat_id == 'None' or target_chat_id == '':
        logger.error(f"‚ùå Telegram chat_id –Ω–µ –Ω–∞–π–¥–µ–Ω!")
        return False
    
    logger.info(f"üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram: chat_id={target_chat_id}")
    
    bot = None
    try:
        # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∫—Å–∏, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω
        from aiogram.client.session.aiohttp import AiohttpSession
        
        session = None
        proxy_url = os.environ.get('TELEGRAM_PROXY_URL') or os.environ.get('HTTP_PROXY') or os.environ.get('HTTPS_PROXY')
        
        if proxy_url:
            logger.info(f"üåê –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∫—Å–∏ –¥–ª—è Telegram: {proxy_url[:30]}...")
            # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–æ–∫—Å–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (aiohttp –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç)
            os.environ['HTTP_PROXY'] = proxy_url
            os.environ['HTTPS_PROXY'] = proxy_url
        
        # –°–æ–∑–¥–∞–µ–º —Å–µ—Å—Å–∏—é (aiohttp –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç HTTP_PROXY/HTTPS_PROXY –∏–∑ –æ–∫—Ä—É–∂–µ–Ω–∏—è)
        session = AiohttpSession()
        
        bot = Bot(
            token=token,
            session=session,
            default=DefaultBotProperties(parse_mode=ParseMode.HTML)
        )
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
        if booking_data.get('message'):
            # –ï—Å–ª–∏ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ (–¥–ª—è –æ—Ç–∑—ã–≤–æ–≤)
            message = booking_data.get('message')
        else:
            # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏
            message = format_booking_message(booking_data, masters, services)
        
        # –°–æ–∑–¥–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è –∞–¥–º–∏–Ω–∞ (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è—Ö –∏–¥—É—Ç —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—É)
        admin_keyboard = ReplyKeyboardMarkup(
            keyboard=[
                [KeyboardButton(text="üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"), KeyboardButton(text="üì¢ –†–∞—Å—Å—ã–ª–∫–∞")],
            ],
            resize_keyboard=True
        )
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
        try:
            result = await bot.send_message(
                chat_id=target_chat_id,
                text=message,
                parse_mode='HTML',
                reply_markup=admin_keyboard
            )
            logger.info(f"‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Telegram: message_id={result.message_id if result else 'unknown'}")
            return True
        except Exception as send_error:
            error_msg = str(send_error)
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è: {error_msg}")
            
            # –ü—Ä–æ–±—É–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –±–µ–∑ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
            try:
                result = await bot.send_message(
                    chat_id=target_chat_id,
                    text=message,
                    parse_mode='HTML'
                )
                logger.info(f"‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –±–µ–∑ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã")
                return True
            except Exception as send_error2:
                logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –±–µ–∑ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã: {send_error2}")
                return False
        
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: {e}")
        import traceback
        logger.error(f"‚ùå –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: {traceback.format_exc()}")
        return False
    finally:
        if bot:
            try:
                session = bot.session
                if session and not session.closed:
                    await session.close()
            except Exception:
                pass


def send_booking_notification_to_client_sync(booking_data: Dict[str, Any], client_chat_id: str, services: list = None, bot_token: str = None, booking_id: int = None) -> bool:
    """
    –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É.
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Flask (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–º).
    
    Args:
        booking_data: –°–ª–æ–≤–∞—Ä—å —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –∑–∞–ø–∏—Å–∏
        client_chat_id: Telegram chat_id –∫–ª–∏–µ–Ω—Ç–∞
        services: –°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥ –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ ID
        bot_token: –¢–æ–∫–µ–Ω –±–æ—Ç–∞
        
    Returns:
        bool: True –µ—Å–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ, False –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ
    """
    result = {'success': False, 'error': None}
    
    def run_in_thread():
        """–ó–∞–ø—É—Å–∫–∞–µ—Ç async —Ñ—É–Ω–∫—Ü–∏—é –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ —Å –Ω–æ–≤—ã–º event loop"""
        try:
            loop = asyncio.new_event_loop()
            asyncio.set_event_loop(loop)
            try:
                success = loop.run_until_complete(send_booking_notification_to_client(booking_data, client_chat_id, services, bot_token, booking_id))
                result['success'] = success
            except Exception as e:
                result['error'] = str(e)
                logger.error(f"‚ùå –û—à–∏–±–∫–∞ –≤ –ø–æ—Ç–æ–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É: {e}")
                import traceback
                logger.error(f"‚ùå –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: {traceback.format_exc()}")
            finally:
                try:
                    pending = asyncio.all_tasks(loop)
                    if pending:
                        loop.run_until_complete(asyncio.gather(*pending, return_exceptions=True))
                except Exception:
                    pass
                try:
                    loop.close()
                except Exception:
                    pass
        except Exception as e:
            result['error'] = str(e)
            logger.error(f"‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ –ø–æ—Ç–æ–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É: {e}")
            import traceback
            logger.error(f"‚ùå –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: {traceback.format_exc()}")
    
    try:
        thread = threading.Thread(target=run_in_thread, daemon=False)
        thread.start()
        thread.join(timeout=15.0)
        
        if thread.is_alive():
            logger.warning("‚ö†Ô∏è –û—Ç–ø—Ä–∞–≤–∫–∞ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É –∑–∞–Ω—è–ª–∞ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏")
            return False
        
        if result['error']:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É: {result['error']}")
            return False
        
        return result['success']
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –≤ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±–µ—Ä—Ç–∫–µ Telegram –±–æ—Ç–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞: {e}")
        import traceback
        logger.error(f"‚ùå –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: {traceback.format_exc()}")
        return False


def send_booking_notification_sync(booking_data: Dict[str, Any], masters: list = None, services: list = None, bot_token: str = None, chat_id: str = None) -> bool:
    """
    –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Flask (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–º).
    
    Args:
        booking_data: –°–ª–æ–≤–∞—Ä—å —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –∑–∞–ø–∏—Å–∏
        masters: –°–ø–∏—Å–æ–∫ –º–∞—Å—Ç–µ—Ä–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–º–µ–Ω–∏ –ø–æ ID
        services: –°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥ –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ ID
        bot_token: –¢–æ–∫–µ–Ω –±–æ—Ç–∞
        chat_id: ID —á–∞—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
        
    Returns:
        bool: True –µ—Å–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ, False –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ
    """
    result = {'success': False, 'error': None}
    
    def run_in_thread():
        """–ó–∞–ø—É—Å–∫–∞–µ—Ç async —Ñ—É–Ω–∫—Ü–∏—é –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ —Å –Ω–æ–≤—ã–º event loop"""
        try:
            loop = asyncio.new_event_loop()
            asyncio.set_event_loop(loop)
            try:
                success = loop.run_until_complete(send_booking_notification(booking_data, masters, services, bot_token, chat_id))
                result['success'] = success
            except Exception as e:
                result['error'] = str(e)
                logger.error(f"‚ùå –û—à–∏–±–∫–∞ –≤ –ø–æ—Ç–æ–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: {e}")
                import traceback
                logger.error(f"‚ùå –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: {traceback.format_exc()}")
            finally:
                try:
                    pending = asyncio.all_tasks(loop)
                    if pending:
                        loop.run_until_complete(asyncio.gather(*pending, return_exceptions=True))
                except Exception:
                    pass
                try:
                    loop.close()
                except Exception:
                    pass
        except Exception as e:
            result['error'] = str(e)
            logger.error(f"‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ –ø–æ—Ç–æ–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: {e}")
            import traceback
            logger.error(f"‚ùå –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: {traceback.format_exc()}")
    
    try:
        thread = threading.Thread(target=run_in_thread, daemon=False)
        thread.start()
        thread.join(timeout=15.0)
        
        if thread.is_alive():
            logger.warning("‚ö†Ô∏è –û—Ç–ø—Ä–∞–≤–∫–∞ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∑–∞–Ω—è–ª–∞ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏")
            return False
        
        if result['error']:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: {result['error']}")
            return False
        
        return result['success']
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –≤ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±–µ—Ä—Ç–∫–µ Telegram –±–æ—Ç–∞: {e}")
        import traceback
        logger.error(f"‚ùå –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: {traceback.format_exc()}")
        return False


def init_telegram_bot(token: Optional[str] = None, chat_id: Optional[str] = None) -> bool:
    """
    –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram –±–æ—Ç–∞ (–∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏).
    –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è telegram_bot_simple.
    
    Args:
        token: –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç BotFather
        chat_id: ID —á–∞—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        
    Returns:
        bool: True –µ—Å–ª–∏ —Ç–æ–∫–µ–Ω –∏ chat_id —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã, False –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ
    """
    global BOT_TOKEN, ADMIN_CHAT_ID
    
    bot_token = token or os.environ.get('TELEGRAM_BOT_TOKEN')
    telegram_chat_id = chat_id or os.environ.get('TELEGRAM_CHAT_ID')
    
    if not bot_token:
        logger.warning("‚ö†Ô∏è TELEGRAM_BOT_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –±–æ—Ç –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å")
        return False
    
    if not telegram_chat_id:
        logger.warning("‚ö†Ô∏è TELEGRAM_CHAT_ID –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è")
        return False
    
    BOT_TOKEN = bot_token
    ADMIN_CHAT_ID = telegram_chat_id
    
    logger.info("‚úÖ Telegram –±–æ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω (—á–µ—Ä–µ–∑ telegram_bot_simple)")
    return True




================================================================================
–§–ê–ô–õ: utils/logging_system.py
================================================================================
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –¥–ª—è –º–∞—Å—Å–∞–∂–Ω–æ–≥–æ —Å–∞–ª–æ–Ω–∞

PROD: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–æ—Ç–∞—Ü–∏–µ–π —Ñ–∞–π–ª–æ–≤ –∏ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
"""

import logging
import logging.handlers
import os
import traceback
from datetime import datetime
from typing import Dict, Any, Optional
from functools import wraps
import json

# ==================================================
# üîß –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø
# ==================================================

def setup_logging(app_name: str = "massage_salon", log_level: str = "INFO") -> logging.Logger:
    """
    –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
    
    Args:
        app_name: –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –ª–æ–≥–æ–≤
        log_level: –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (DEBUG, INFO, WARNING, ERROR, CRITICAL)
        
    Returns:
        –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ª–æ–≥–≥–µ—Ä
        
    PROD: –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (ELK Stack, Fluentd).
    """
    
    # –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ª–æ–≥–æ–≤
    log_dir = "logs"
    if not os.path.exists(log_dir):
        os.makedirs(log_dir)
    
    # –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤
    log_format = logging.Formatter(
        '%(asctime)s - %(name)s - %(levelname)s - %(funcName)s:%(lineno)d - %(message)s',
        datefmt='%Y-%m-%d %H:%M:%S'
    )
    
    # –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–≥–µ—Ä
    logger = logging.getLogger(app_name)
    logger.setLevel(getattr(logging, log_level.upper()))
    
    # –û—á–∏—â–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
    logger.handlers.clear()
    
    # –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥
    console_handler = logging.StreamHandler()
    console_handler.setLevel(logging.INFO)
    console_handler.setFormatter(log_format)
    logger.addHandler(console_handler)
    
    # –§–∞–π–ª –¥–ª—è –≤—Å–µ—Ö –ª–æ–≥–æ–≤
    file_handler = logging.handlers.RotatingFileHandler(
        os.path.join(log_dir, f"{app_name}.log"),
        maxBytes=10*1024*1024,  # 10MB
        backupCount=5
    )
    file_handler.setLevel(logging.DEBUG)
    file_handler.setFormatter(log_format)
    logger.addHandler(file_handler)
    
    # –§–∞–π–ª —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—à–∏–±–æ–∫
    error_handler = logging.handlers.RotatingFileHandler(
        os.path.join(log_dir, f"{app_name}_errors.log"),
        maxBytes=5*1024*1024,  # 5MB
        backupCount=3
    )
    error_handler.setLevel(logging.ERROR)
    error_handler.setFormatter(log_format)
    logger.addHandler(error_handler)
    
    # PROD: –î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –≤ —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
    # monitoring_handler = MonitoringHandler()
    # monitoring_handler.setLevel(logging.CRITICAL)
    # logger.addHandler(monitoring_handler)
    
    logger.info(f"‚úÖ –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞: {log_level}")
    return logger


# ==================================================
# üõ°Ô∏è –î–ï–ö–û–†–ê–¢–û–†–´ –î–õ–Ø –û–ë–†–ê–ë–û–¢–ö–ò –û–®–ò–ë–û–ö
# ==================================================

def handle_exceptions(logger: logging.Logger, return_value: Any = None):
    """
    –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º.
    
    Args:
        logger: –õ–æ–≥–≥–µ—Ä –¥–ª—è –∑–∞–ø–∏—Å–∏ –æ—à–∏–±–æ–∫
        return_value: –ó–Ω–∞—á–µ–Ω–∏–µ, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ
        
    PROD: –î–æ–±–∞–≤—å—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫—É –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –≤ —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
    """
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            try:
                return func(*args, **kwargs)
            except Exception as e:
                # SECURITY: –ù–µ –ª–æ–≥–∏—Ä—É–µ–º —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                safe_args = _sanitize_args(args, kwargs)
                
                logger.error(
                    f"‚ùå –û—à–∏–±–∫–∞ –≤ {func.__name__}: {str(e)} | "
                    f"Args: {safe_args} | "
                    f"Traceback: {traceback.format_exc()}"
                )
                
                # PROD: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –≤ —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
                if isinstance(e, (SystemExit, KeyboardInterrupt)):
                    raise  # –ù–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
                
                return return_value
        return wrapper
    return decorator


def log_api_calls(logger: logging.Logger):
    """
    –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è API –≤—ã–∑–æ–≤–æ–≤.
    
    Args:
        logger: –õ–æ–≥–≥–µ—Ä –¥–ª—è –∑–∞–ø–∏—Å–∏
        
    PROD: –î–æ–±–∞–≤—å—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Ç—Ä–µ–∫–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤.
    """
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            start_time = datetime.now()
            
            try:
                result = func(*args, **kwargs)
                
                duration = (datetime.now() - start_time).total_seconds()
                logger.info(
                    f"‚úÖ API {func.__name__} –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ –∑–∞ {duration:.3f}s"
                )
                
                return result
                
            except Exception as e:
                duration = (datetime.now() - start_time).total_seconds()
                logger.error(
                    f"‚ùå API {func.__name__} –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π –∑–∞ {duration:.3f}s: {str(e)}"
                )
                raise
                
        return wrapper
    return decorator


def _sanitize_args(args: tuple, kwargs: dict) -> str:
    """
    –û—á–∏—Å—Ç–∫–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –æ—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.
    
    Args:
        args: –ü–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã
        kwargs: –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã
        
    Returns:
        –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    """
    sensitive_keys = ['password', 'secret', 'token', 'key', 'auth']
    
    safe_kwargs = {}
    for key, value in kwargs.items():
        if any(sensitive in key.lower() for sensitive in sensitive_keys):
            safe_kwargs[key] = "***REDACTED***"
        else:
            safe_kwargs[key] = str(value)[:100]  # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É
    
    return f"args={len(args)}, kwargs={safe_kwargs}"


# ==================================================
# üìä –ö–õ–ê–°–°–´ –î–õ–Ø –°–¢–†–£–ö–¢–£–†–ò–†–û–í–ê–ù–ù–û–ì–û –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø
# ==================================================

class BookingLogger:
    """
    –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–æ–≥–≥–µ—Ä –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.
    
    NOTE: –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∑–∞–ø–∏—Å—è–º–∏.
    """
    
    def __init__(self, logger: logging.Logger):
        self.logger = logger
    
    def log_booking_attempt(self, client_name: str, master_id: int, service_id: int, 
                           booking_date: str, booking_time: str) -> None:
        """–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—ã—Ç–∫–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è."""
        self.logger.info(
            f"üìã –ü–æ–ø—ã—Ç–∫–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: {client_name} | "
            f"–ú–∞—Å—Ç–µ—Ä: {master_id} | –£—Å–ª—É–≥–∞: {service_id} | "
            f"–î–∞—Ç–∞: {booking_date} {booking_time}"
        )
    
    def log_booking_success(self, booking_id: int, client_name: str, 
                           calendar_link: Optional[str] = None) -> None:
        """–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è."""
        calendar_info = f" | –ö–∞–ª–µ–Ω–¥–∞—Ä—å: {calendar_link}" if calendar_link else ""
        self.logger.info(
            f"‚úÖ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ: ID {booking_id} | –ö–ª–∏–µ–Ω—Ç: {client_name}{calendar_info}"
        )
    
    def log_booking_failure(self, client_name: str, error_reason: str, 
                           form_data: Optional[Dict] = None) -> None:
        """–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è."""
        safe_data = _sanitize_form_data(form_data) if form_data else "N/A"
        self.logger.warning(
            f"‚ùå –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ: {client_name} | "
            f"–ü—Ä–∏—á–∏–Ω–∞: {error_reason} | –î–∞–Ω–Ω—ã–µ: {safe_data}"
        )
    
    def log_calendar_integration_error(self, client_name: str, error: str) -> None:
        """–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º."""
        self.logger.error(
            f"üìÖ –û—à–∏–±–∫–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –¥–ª—è {client_name}: {error}"
        )


class SecurityLogger:
    """
    –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–æ–≥–≥–µ—Ä –¥–ª—è —Å–æ–±—ã—Ç–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.
    
    SECURITY: –í—Å–µ —Å–æ–±—ã—Ç–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–æ–ª–∂–Ω—ã –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–ª—è –∞—É–¥–∏—Ç–∞.
    """
    
    def __init__(self, logger: logging.Logger):
        self.logger = logger
    
    def log_suspicious_input(self, input_type: str, input_value: str, 
                            client_ip: str, user_agent: str) -> None:
        """–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –≤–≤–æ–¥–∞."""
        self.logger.warning(
            f"üö® –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π –≤–≤–æ–¥: {input_type} | "
            f"–ó–Ω–∞—á–µ–Ω–∏–µ: {input_value[:50]}... | "
            f"IP: {client_ip} | User-Agent: {user_agent[:100]}"
        )
    
    def log_validation_failure(self, field_name: str, input_value: str, 
                              client_ip: str) -> None:
        """–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ—É–¥–∞—á–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏."""
        self.logger.info(
            f"‚ö†Ô∏è –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –ø—Ä–æ–π–¥–µ–Ω–∞: {field_name} | "
            f"–ó–Ω–∞—á–µ–Ω–∏–µ: {input_value[:50]}... | IP: {client_ip}"
        )
    
    def log_rate_limit_exceeded(self, client_ip: str, endpoint: str) -> None:
        """–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤."""
        self.logger.warning(
            f"üö´ –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤: IP {client_ip} | Endpoint: {endpoint}"
        )


def _sanitize_form_data(form_data: Dict[str, Any]) -> str:
    """
    –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã –æ—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.
    
    Args:
        form_data: –î–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
        
    Returns:
        –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    """
    sensitive_fields = ['password', 'secret', 'token', 'phone']
    
    safe_data = {}
    for key, value in form_data.items():
        if any(sensitive in key.lower() for sensitive in sensitive_fields):
            safe_data[key] = "***REDACTED***"
        else:
            safe_data[key] = str(value)[:50]  # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É
    
    return json.dumps(safe_data, ensure_ascii=False)


# ==================================================
# üîß –£–¢–ò–õ–ò–¢–´ –î–õ–Ø –û–ë–†–ê–ë–û–¢–ö–ò –û–®–ò–ë–û–ö
# ==================================================

class ErrorHandler:
    """
    –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫.
    
    NOTE: –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –≤–æ –≤—Å–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.
    """
    
    def __init__(self, logger: logging.Logger):
        self.logger = logger
    
    def handle_database_error(self, operation: str, error: Exception) -> Dict[str, Any]:
        """
        –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
        
        Args:
            operation: –ù–∞–∑–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
            error: –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
            
        Returns:
            –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –æ–± –æ—à–∏–±–∫–µ
        """
        self.logger.error(f"üóÑÔ∏è –û—à–∏–±–∫–∞ –ë–î –≤ {operation}: {str(error)}")
        
        return {
            "success": False,
            "error_type": "database_error",
            "message": "–í—Ä–µ–º–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",
            "operation": operation,
            "timestamp": datetime.now().isoformat()
        }
    
    def handle_calendar_error(self, operation: str, error: Exception) -> Dict[str, Any]:
        """
        –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ Google Calendar.
        
        Args:
            operation: –ù–∞–∑–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
            error: –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
            
        Returns:
            –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –æ–± –æ—à–∏–±–∫–µ
        """
        self.logger.error(f"üìÖ –û—à–∏–±–∫–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –≤ {operation}: {str(error)}")
        
        return {
            "success": False,
            "error_type": "calendar_error",
            "message": "–û—à–∏–±–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º. –ó–∞–ø–∏—Å—å –ø—Ä–∏–Ω—è—Ç–∞ –±–µ–∑ –∫–∞–ª–µ–Ω–¥–∞—Ä—è.",
            "operation": operation,
            "timestamp": datetime.now().isoformat()
        }
    
    def handle_validation_error(self, field: str, value: str, error: str) -> Dict[str, Any]:
        """
        –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏.
        
        Args:
            field: –ü–æ–ª–µ —Å –æ—à–∏–±–∫–æ–π
            value: –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è
            error: –û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
            
        Returns:
            –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –æ–± –æ—à–∏–±–∫–µ
        """
        self.logger.info(f"‚ö†Ô∏è –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏: {field} = {value[:50]}... | {error}")
        
        return {
            "success": False,
            "error_type": "validation_error",
            "message": f"–û—à–∏–±–∫–∞ –≤ –ø–æ–ª–µ '{field}': {error}",
            "field": field,
            "timestamp": datetime.now().isoformat()
        }
    
    def handle_generic_error(self, operation: str, error: Exception) -> Dict[str, Any]:
        """
        –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±—â–∏—Ö –æ—à–∏–±–æ–∫.
        
        Args:
            operation: –ù–∞–∑–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
            error: –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
            
        Returns:
            –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –æ–± –æ—à–∏–±–∫–µ
        """
        self.logger.error(f"‚ùå –û–±—â–∞—è –æ—à–∏–±–∫–∞ –≤ {operation}: {str(error)}")
        
        return {
            "success": False,
            "error_type": "generic_error",
            "message": "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.",
            "operation": operation,
            "timestamp": datetime.now().isoformat()
        }


# ==================================================
# üöÄ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–ò–°–¢–ï–ú–´ –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø
# ==================================================

def init_logging_system(app_name: str = "massage_salon") -> tuple:
    """
    –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.
    
    Args:
        app_name: –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        
    Returns:
        Tuple: (logger, booking_logger, security_logger, error_handler)
        
    PROD: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
    """
    
    # –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–≥–µ—Ä
    logger = setup_logging(app_name)
    
    # –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–≥–µ—Ä—ã
    booking_logger = BookingLogger(logger)
    security_logger = SecurityLogger(logger)
    error_handler = ErrorHandler(logger)
    
    logger.info("‚úÖ –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞")
    
    return logger, booking_logger, security_logger, error_handler




================================================================================
–§–ê–ô–õ: utils/calendar_service.py
================================================================================
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Google Calendar API Service –¥–ª—è –º–∞—Å—Å–∞–∂–Ω–æ–≥–æ —Å–∞–ª–æ–Ω–∞

PROD: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª credentials.json –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
–∏ –∏–º–µ–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ Google Calendar API.
"""

import os
import json
from datetime import datetime, timedelta
from typing import List, Dict, Optional, Tuple
import logging

from google.oauth2 import service_account
from googleapiclient.discovery import build
from googleapiclient.errors import HttpError

# ==================================================
# üîß –ù–ê–°–¢–†–û–ô–ö–ê –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø
# ==================================================

logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)
logger = logging.getLogger(__name__)


class GoogleCalendarService:
    """
    –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Google Calendar API —á–µ—Ä–µ–∑ Service Account.
    
    NOTE: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç server-to-server –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –±–µ–∑ —É—á–∞—Å—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è backend-—Å–∏—Å—Ç–µ–º, –≥–¥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–∞–º–æ —É–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º.
    """

    def __init__(self, credentials_path: str = None, calendar_id: str = None):
        """
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞ Google Calendar.
        
        Args:
            credentials_path: –ü—É—Ç—å –∫ JSON —Ñ–∞–π–ª—É —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
            calendar_id: ID —Ü–µ–ª–µ–≤–æ–≥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 'primary')
            
        PROD: –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏ –∫ credentials.json
        –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥.
        """
        # NOTE: credentials_path –¥–æ–ª–∂–µ–Ω —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ JSON —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
        # —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ Google Calendar API
        self.credentials_path = credentials_path or 'credentials.json'
        # NOTE: –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤–∞—à –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å –ø—Ä–∞–≤–∞–º–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
        self.calendar_id = calendar_id or '927386a71e5905eee5cfdaed9701d53cb43aea1d7d49a661b1175ea663d994fa@group.calendar.google.com'
        self.service = None
        self._initialize_service()
        
        # FIXME: –ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
        # –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —ç—Ç–æ—Ç —Å–ª—É—á–∞–π, –∞ –Ω–µ –ø–∞–¥–∞—Ç—å –ø—Ä–∏ –≤—ã–∑–æ–≤–∞—Ö –º–µ—Ç–æ–¥–æ–≤
        if self.service:
            # NOTE: –û—Ç–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—å –∑–∞–ø–∏—Å–µ–π
            # self._setup_booking_calendar()  # –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
            pass

    def _initialize_service(self) -> None:
        """
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Google Calendar API —Å–µ—Ä–≤–∏—Å–∞.
        
        NOTE: Service Account –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ Google Cloud Console
        —Å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º Google Calendar API –∏ –≤—ã–¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞.
        """
        try:
            if not os.path.exists(self.credentials_path):
                logger.error(f"–§–∞–π–ª —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω: {self.credentials_path}")
                return

            # NOTE: from_service_account_file —Å–æ–∑–¥–∞–µ—Ç credentials –∏–∑ JSON —Ñ–∞–π–ª–∞
            # —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞. Scopes –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —É—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞ –∫ API.
            credentials = service_account.Credentials.from_service_account_file(
                self.credentials_path,
                scopes=['https://www.googleapis.com/auth/calendar']
            )
            
            # NOTE: build —Å–æ–∑–¥–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π API
            # credentials –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫ –∫–∞–∂–¥–æ–º—É –∑–∞–ø—Ä–æ—Å—É
            self.service = build('calendar', 'v3', credentials=credentials)
            logger.info("‚úÖ Google Calendar API —Å–µ—Ä–≤–∏—Å —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω")
            
        except Exception as e:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Google Calendar API: {e}")
            self.service = None

    def _setup_booking_calendar(self) -> None:
        """
        –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –¥–ª—è –∑–∞–ø–∏—Å–µ–π.
        
        NOTE: –°–æ–∑–¥–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –∑–∞–ø–∏—Å–µ–π –æ—Ç –ª–∏—á–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π.
        –ï—Å–ª–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ.
        """
        try:
            calendar_name = "–ó–∞–ø–∏—Å–∏ –Ω–∞ –º–∞—Å—Å–∞–∂ - –†–µ–ª–∞–∫—Å"
            
            # NOTE: calendarList().list() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –∫–∞–ª–µ–Ω–¥–∞—Ä–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            calendars_result = self.service.calendarList().list().execute()
            calendars = calendars_result.get('items', [])
            
            for calendar in calendars:
                if calendar.get('summary') == calendar_name:
                    self.calendar_id = calendar['id']
                    logger.info(f"‚úÖ –ù–∞–π–¥–µ–Ω —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å: {calendar_name}")
                    return
            
            # NOTE: calendars().insert() —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å
            # timeZone –≤–∞–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
            calendar_body = {
                'summary': calendar_name,
                'description': '–ö–∞–ª–µ–Ω–¥–∞—Ä—å –∑–∞–ø–∏—Å–µ–π –º–∞—Å—Å–∞–∂–Ω–æ–≥–æ —Å–∞–ª–æ–Ω–∞ "–†–µ–ª–∞–∫—Å"',
                'timeZone': 'Europe/Moscow'  # PROD: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–æ–∫–∞—Ü–∏–∏ —Å–∞–ª–æ–Ω–∞
            }
            
            created_calendar = self.service.calendars().insert(body=calendar_body).execute()
            self.calendar_id = created_calendar['id']
            logger.info(f"‚úÖ –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å: {calendar_name}")
            
            self._setup_calendar_permissions()
            
        except Exception as e:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è: {e}")
            # FALLBACK: –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
            self.calendar_id = 'primary'

    def _setup_calendar_permissions(self) -> None:
        """
        –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è.
        
        NOTE: ACL (Access Control List) –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫—Ç–æ –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å.
        'default' scope –æ–∑–Ω–∞—á–∞–µ—Ç "–≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏", 'reader' - —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ.
        """
        try:
            acl_rule = {
                'scope': {'type': 'default'},
                'role': 'reader'  # NOTE: 'reader' –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—Å–µ–º –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å, –Ω–æ –Ω–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
            }
            
            self.service.acl().insert(
                calendarId=self.calendar_id,
                body=acl_rule
            ).execute()
            
            logger.info("‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞: –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è —á—Ç–µ–Ω–∏—è")
            
        except Exception as e:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞: {e}")

    def check_health(self) -> Dict:
        """
        –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ API –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è.
        
        Returns:
            Dict: –°—Ç–∞—Ç—É—Å –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞
            
        PROD: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è health checks –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ.
        """
        try:
            # NOTE: calendars().get() –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∫ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API, —Ç–∞–∫ –∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
            calendar = self.service.calendars().get(calendarId=self.calendar_id).execute()
            
            return {
                "success": True,
                "message": "Google Calendar API —Ä–∞–±–æ—Ç–∞–µ—Ç",
                "calendar_id": self.calendar_id,
                "calendar_name": calendar.get('summary', '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'),
                "timestamp": datetime.now().isoformat()
            }
            
        except HttpError as e:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ Google Calendar API: {e}")
            return {
                "success": False,
                "message": f"–û—à–∏–±–∫–∞ Google Calendar API: {e}",
                "timestamp": datetime.now().isoformat()
            }
        except Exception as e:
            logger.error(f"‚ùå –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {e}")
            return {
                "success": False,
                "message": f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {e}",
                "timestamp": datetime.now().isoformat()
            }

    def get_busy_slots(self, date: str) -> Dict:
        """
        –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–Ω—è—Ç—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∞—Ç—É.
        
        Args:
            date: –î–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD
            
        Returns:
            Dict: –ó–∞–Ω—è—Ç—ã–µ —Å–ª–æ—Ç—ã –∏ –º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
            
        NOTE: Google Calendar API —Ç—Ä–µ–±—É–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –≤ UTC (Z-—Å—É—Ñ—Ñ–∏–∫—Å)
        """
        try:
            # NOTE: strptime –ø–∞—Ä—Å–∏—Ç —Å—Ç—Ä–æ–∫—É –≤ datetime –æ–±—ä–µ–∫—Ç
            start_date = datetime.strptime(date, '%Y-%m-%d')
            end_date = start_date + timedelta(days=1)
            
            # FIXME: timeMin/timeMax –≤ UTC –º–æ–≥—É—Ç —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å —á–∞—Å–æ–≤—ã–º–∏ –ø–æ—è—Å–∞–º–∏
            # –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –ª–µ—Ç–Ω–µ–µ/–∑–∏–º–Ω–µ–µ –≤—Ä–µ–º—è
            time_min = start_date.isoformat() + 'Z'  # NOTE: 'Z' —É–∫–∞–∑—ã–≤–∞–µ—Ç UTC –≤—Ä–µ–º—è
            time_max = end_date.isoformat() + 'Z'
            
            events_result = self.service.events().list(
                calendarId=self.calendar_id,
                timeMin=time_min,
                timeMax=time_max,
                singleEvents=True,  # NOTE: –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Å–æ–±—ã—Ç–∏—è
                orderBy='startTime'
            ).execute()
            
            events = events_result.get('items', [])
            
            busy_slots = []
            for event in events:
                start = event['start'].get('dateTime', event['start'].get('date'))
                end = event['end'].get('dateTime', event['end'].get('date'))
                
                busy_slots.append({
                    'start': start,
                    'end': end,
                    'summary': event.get('summary', '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è'),
                    'description': event.get('description', ''),
                    'event_id': event.get('id')
                })
            
            return {
                "success": True,
                "date": date,
                "busy_slots": busy_slots,
                "count": len(busy_slots)
            }
            
        except Exception as e:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–Ω—è—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤: {e}")
            return {
                "success": False,
                "message": f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–Ω—è—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤: {e}",
                "date": date,
                "busy_slots": [],
                "count": 0
            }

    def get_busy_slots_for_master(self, date: str, master_id: str = None) -> Dict:
        """
        –ü–æ–ª—É—á–∏—Ç—å –∑–∞–Ω—è—Ç—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã –¥–ª—è –¥–∞—Ç—ã.
        
        NOTE: master_id –æ—Å—Ç–∞–≤–ª–µ–Ω –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.
        –í—Å–µ —Å–æ–±—ã—Ç–∏—è –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –º–∞—Å—Ç–µ—Ä—É.
        
        Args:
            date: –î–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD
            master_id: ID –º–∞—Å—Ç–µ—Ä–∞ (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è, –æ—Å—Ç–∞–≤–ª–µ–Ω –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
            
        Returns:
            Dict: –†–µ–∑—É–ª—å—Ç–∞—Ç —Å –∑–∞–Ω—è—Ç—ã–º–∏ —Å–ª–æ—Ç–∞–º–∏
        """
        try:
            # NOTE: –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —Å–æ–±—ã—Ç–∏—è –Ω–∞ –¥–∞—Ç—É (–±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –º–∞—Å—Ç–µ—Ä—É)
            return self.get_busy_slots(date)
            
        except Exception as e:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–Ω—è—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤: {e}")
            return {
                "success": False,
                "message": f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–Ω—è—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤: {e}",
                "date": date,
                "busy_slots": [],
                "count": 0
            }

    def check_slot_availability(self, datetime_str: str, duration_minutes: int = 60) -> Dict:
        """
        –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å–ª–æ—Ç–∞.
        
        Args:
            datetime_str: –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DDTHH:MM:SS
            duration_minutes: –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ–∞–Ω—Å–∞ –≤ –º–∏–Ω—É—Ç–∞—Ö
            
        Returns:
            Dict: –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
        """
        try:
            # NOTE: replace('Z', '') —É–±–∏—Ä–∞–µ—Ç UTC —Å—É—Ñ—Ñ–∏–∫—Å –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
            start_time = datetime.fromisoformat(datetime_str.replace('Z', ''))
            end_time = start_time + timedelta(minutes=duration_minutes)
            
            time_min = start_time.isoformat() + 'Z'
            time_max = end_time.isoformat() + 'Z'
            
            events_result = self.service.events().list(
                calendarId=self.calendar_id,
                timeMin=time_min,
                timeMax=time_max,
                singleEvents=True,
                orderBy='startTime'
            ).execute()
            
            events = events_result.get('items', [])
            
            conflicting_event = None
            if events:
                conflicting_event = {
                    'start': events[0]['start'].get('dateTime', events[0]['start'].get('date')),
                    'end': events[0]['end'].get('dateTime', events[0]['end'].get('date')),
                    'summary': events[0].get('summary', '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è'),
                    'event_id': events[0].get('id')
                }
            
            return {
                "success": True,
                "datetime": datetime_str,
                "available": len(events) == 0,
                "conflicting_event": conflicting_event,
                "duration_minutes": duration_minutes
            }
            
        except Exception as e:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏: {e}")
            return {
                "success": False,
                "message": f"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏: {e}",
                "datetime": datetime_str,
                "available": False,
                "conflicting_event": None
            }

    def create_event(self, 
                    summary: str,
                    start_datetime: str,
                    end_datetime: str,
                    description: str = "",
                    client_name: str = "",
                    client_phone: str = "",
                    master_name: str = "",
                    service_name: str = "",
                    service_price: int = 0) -> Dict:
        """
        –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –∑–∞–ø–∏—Å–∏ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ.
        
        Args:
            summary: –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–æ–±—ã—Ç–∏—è
            start_datetime: –ù–∞—á–∞–ª–æ –≤ ISO —Ñ–æ—Ä–º–∞—Ç–µ
            end_datetime: –û–∫–æ–Ω—á–∞–Ω–∏–µ –≤ ISO —Ñ–æ—Ä–º–∞—Ç–µ  
            description: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
            client_name: –ò–º—è –∫–ª–∏–µ–Ω—Ç–∞
            client_phone: –¢–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞
            master_name: –ò–º—è –º–∞—Å—Ç–µ—Ä–∞
            service_name: –ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏
            
        Returns:
            Dict: –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è
            
        PROD: –î–æ–±–∞–≤—å—Ç–µ –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–æ–º–µ—Ä–æ–≤ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ –∏ email –¥–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π.
        """
        try:
            # NOTE: –ü–∞—Ä—Å–∏–º —Å—Ç—Ä–æ–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –≤ datetime –æ–±—ä–µ–∫—Ç—ã
            start_time = datetime.fromisoformat(start_datetime.replace('Z', ''))
            end_time = datetime.fromisoformat(end_datetime.replace('Z', ''))
            
            # NOTE: –§–æ—Ä–º–∏—Ä—É–µ–º –∫—Ä–∞—Ç–∫–æ–µ –∏ –ø–æ–Ω—è—Ç–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
            duration_minutes = int((end_time - start_time).total_seconds() / 60)
            
            # NOTE: –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å
            price_text = ""
            if service_price > 0:
                formatted_price = f"{service_price:,}".replace(",", " ")
                price_text = f"üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: {formatted_price} —Ä—É–±.\n"
            
            event_description = f"""üë§ –ö–ª–∏–µ–Ω—Ç: {client_name}
üìû –¢–µ–ª–µ—Ñ–æ–Ω: {client_phone}
üíÜ‚Äç‚ôÄÔ∏è –£—Å–ª—É–≥–∞: {service_name}
‚è±Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {duration_minutes} –º–∏–Ω
{price_text}
üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
{description if description else '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}

üåê –ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞ —á–µ—Ä–µ–∑ —Å–∞–π—Ç —Å–∞–ª–æ–Ω–∞ "Enliven Spa"
‚è∞ –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è: {datetime.now().strftime('%d.%m.%Y %H:%M')}"""
            
            event = {
                'summary': summary,
                'description': event_description,
                'start': {
                    'dateTime': start_time.isoformat(),
                    'timeZone': 'Europe/Moscow',  # NOTE: –Ø–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ–º —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å
                },
                'end': {
                    'dateTime': end_time.isoformat(), 
                    'timeZone': 'Europe/Moscow',
                },
                'reminders': {
                    'useDefault': False,
                    'overrides': [
                        {'method': 'email', 'minutes': 24 * 60},  # NOTE: Email –∑–∞ –¥–µ–Ω—å
                        {'method': 'popup', 'minutes': 30},       # NOTE: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∑–∞ 30 –º–∏–Ω
                    ],
                },
            }
            
            created_event = self.service.events().insert(
                calendarId=self.calendar_id,
                body=event
            ).execute()
            
            logger.info(f"‚úÖ –°–æ–±—ã—Ç–∏–µ —Å–æ–∑–¥–∞–Ω–æ: {created_event.get('htmlLink')}")
            
            return {
                "success": True,
                "message": "–°–æ–±—ã—Ç–∏–µ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–æ",
                "event_id": created_event.get('id'),
                "event_link": created_event.get('htmlLink'),
                "start_time": start_datetime,
                "end_time": end_datetime
            }
            
        except Exception as e:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è: {e}")
            return {
                "success": False,
                "message": f"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è: {e}",
                "event_id": None,
                "event_link": None
            }

    def delete_event(self, event_id: str) -> Dict:
        """
        –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –∏–∑ –∫–∞–ª–µ–Ω–¥–∞—Ä—è.
        
        Args:
            event_id: ID —Å–æ–±—ã—Ç–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
            
        Returns:
            Dict: –†–µ–∑—É–ª—å—Ç–∞—Ç —É–¥–∞–ª–µ–Ω–∏—è
        """
        try:
            self.service.events().delete(
                calendarId=self.calendar_id,
                eventId=event_id
            ).execute()
            
            logger.info(f"‚úÖ –°–æ–±—ã—Ç–∏–µ {event_id} —É–¥–∞–ª–µ–Ω–æ")
            
            return {
                "success": True,
                "message": "–°–æ–±—ã—Ç–∏–µ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ", 
                "event_id": event_id
            }
            
        except Exception as e:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è: {e}")
            return {
                "success": False,
                "message": f"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è: {e}",
                "event_id": event_id
            }

    def create_booking_event(self, booking_data: Dict) -> Tuple[Optional[str], Optional[str]]:
        """
        –°–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ –∑–∞–ø–∏—Å–∏ –Ω–∞ –º–∞—Å—Å–∞–∂ (legacy API compatibility).
        
        Args:
            booking_data: –î–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –∏–∑ —Ñ–æ—Ä–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
            
        Returns:
            Tuple: (event_link, error_message)
            
        NOTE: –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º –∫–æ–¥–æ–º.
        """
        try:
            # NOTE: –ö–æ–º–±–∏–Ω–∏—Ä—É–µ–º –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è –∏–∑ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã
            start_time = datetime.strptime(f"{booking_data['date']} {booking_data['time']}", "%Y-%m-%d %H:%M")
            duration_minutes = booking_data.get('session_duration') or 60
            duration_minutes = int(duration_minutes)
            end_time = start_time + timedelta(minutes=duration_minutes)
            
            # –ü—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ –∏–∑ booking_data, –µ—Å–ª–∏ –æ–Ω–æ —Ç–∞–º –µ—Å—Ç—å
            service_name = booking_data.get('service_name') or booking_data.get('service')
            if not service_name:
                service_name = self.get_service_name(booking_data.get('service_id'))
            service_price = self.get_service_price(booking_data.get('service_id'), duration_minutes)
            
            # NOTE: –§–æ—Ä–º–∏—Ä—É–µ–º –∫—Ä–∞—Ç–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
            summary = f'üíÜ‚Äç‚ôÄÔ∏è {service_name} - {booking_data["name"]}'
            
            # NOTE: –û–±—ä–µ–¥–∏–Ω—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
            additional_info = []
            if booking_data.get("contraindications"):
                additional_info.append(f"–ü—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è: {booking_data['contraindications']}")
            if booking_data.get("preferences"):
                additional_info.append(f"–ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è: {booking_data['preferences']}")
            
            description = '\n'.join(additional_info) if additional_info else '–ù–µ —É–∫–∞–∑–∞–Ω–æ'
            
            result = self.create_event(
                summary=summary,
                start_datetime=start_time.isoformat(),
                end_datetime=end_time.isoformat(),
                description=description,
                client_name=booking_data["name"],
                client_phone=booking_data["phone"],
                master_name="",
                service_name=service_name,
                service_price=service_price
            )
            
            if result['success']:
                return result['event_link'], None
            else:
                return None, result['message']
                
        except Exception as e:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏: {e}")
            return None, str(e)

    def get_master_name(self, master_id: Optional[str]) -> str:
        """
        –ü–æ–ª—É—á–∏—Ç—å –∏–º—è –º–∞—Å—Ç–µ—Ä–∞ –ø–æ ID.
        
        Args:
            master_id: ID –º–∞—Å—Ç–µ—Ä–∞ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ —Ñ–æ—Ä–º—ã
            
        Returns:
            str: –ò–º—è –º–∞—Å—Ç–µ—Ä–∞ –∏–ª–∏ –∑–∞–≥–ª—É—à–∫–∞
            
        PROD: –ó–∞–º–µ–Ω–∏—Ç–µ —Ö–∞—Ä–¥–∫–æ–¥ –Ω–∞ –∑–∞–ø—Ä–æ—Å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
        """
        masters = {
            '1': '–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞',
            '2': '–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞',
            '3': '–ï–ª–µ–Ω–∞ –°–∏–¥–æ—Ä–æ–≤–∞',
            '4': '–û–ª—å–≥–∞ –ö–æ–∑–ª–æ–≤–∞'
        }
        return masters.get(str(master_id), '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –º–∞—Å—Ç–µ—Ä')

    def get_service_name(self, service_id: Optional[str]) -> str:
        """
        –ü–æ–ª—É—á–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ –ø–æ ID –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
        
        Args:
            service_id: ID —É—Å–ª—É–≥–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ —Ñ–æ—Ä–º—ã
            
        Returns:
            str: –ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ –∏–ª–∏ –∑–∞–≥–ª—É—à–∫–∞
        """
        if not service_id:
            return '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —É—Å–ª—É–≥–∞'
        
        try:
            # –ü—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å —É—Å–ª—É–≥—É –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
            from models import Service
            from app import create_app
            
            app = create_app()
            with app.app_context():
                try:
                    service_id_int = int(service_id)
                    service = Service.query.get(service_id_int)
                    if service:
                        return service.name if hasattr(service, 'name') else (service.service_name if hasattr(service, 'service_name') else '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —É—Å–ª—É–≥–∞')
                except (ValueError, TypeError):
                    pass
        except Exception as e:
            logger.warning(f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —É—Å–ª—É–≥—É –∏–∑ –ë–î: {e}")
        
        # Fallback: –ø—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ JSON
        try:
            import os
            json_path = os.path.join(os.path.dirname(os.path.dirname(__file__)), 'data', 'services.json')
            if os.path.exists(json_path):
                with open(json_path, 'r', encoding='utf-8') as f:
                    services_json = json.load(f)
                    services_list = services_json.get('services', [])
                    for service in services_list:
                        if str(service.get('id')) == str(service_id):
                            return service.get('name', '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —É—Å–ª—É–≥–∞')
        except Exception as e:
            logger.warning(f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —É—Å–ª—É–≥—É –∏–∑ JSON: {e}")
        
        # –ü–æ—Å–ª–µ–¥–Ω–∏–π fallback: —Å—Ç–∞—Ä—ã–π —Ö–∞—Ä–¥–∫–æ–¥
        services = {
            '1': '–õ–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂',
            '2': '–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∞–∂', 
            '3': '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∞–∂',
            '4': '–¢–∞–π—Å–∫–∏–π –º–∞—Å—Å–∞–∂',
            '5': '–ê—Ä–æ–º–∞—Ç–µ—Ä–∞–ø–∏—è',
            '6': '–ì–æ—Ä—è—á–∏–µ –∫–∞–º–Ω–∏',
            '7': '–û–±–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Ç–µ–ª–∞',
            '8': '–ü–∞—Ä–Ω—ã–π –º–∞—Å—Å–∞–∂'
        }
        return services.get(str(service_id), '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —É—Å–ª—É–≥–∞')

    def get_service_price(self, service_id: Optional[str], duration_minutes: int) -> int:
        """
        –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å —É—Å–ª—É–≥–∏ –ø–æ ID –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
        
        Args:
            service_id: ID —É—Å–ª—É–≥–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ —Ñ–æ—Ä–º—ã
            duration_minutes: –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ–∞–Ω—Å–∞ –≤ –º–∏–Ω—É—Ç–∞—Ö
            
        Returns:
            int: –°—Ç–æ–∏–º–æ—Å—Ç—å —É—Å–ª—É–≥–∏ –≤ —Ä—É–±–ª—è—Ö
            
        PROD: –ó–∞–º–µ–Ω–∏—Ç–µ —Ö–∞—Ä–¥–∫–æ–¥ –Ω–∞ –∑–∞–ø—Ä–æ—Å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
        """
        # NOTE: –°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞ –º–∏–Ω—É—Ç—É –¥–ª—è –∫–∞–∂–¥–æ–π —É—Å–ª—É–≥–∏
        price_per_minute = {
            '1': 40.00,  # –õ–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂: 2400 —Ä—É–± / 60 –º–∏–Ω
            '2': 35.00,  # –°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∞–∂: 2100 —Ä—É–± / 60 –º–∏–Ω
            '3': 33.33,  # –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∞–∂: 2000 —Ä—É–± / 60 –º–∏–Ω
            '4': 45.00,  # –¢–∞–π—Å–∫–∏–π –º–∞—Å—Å–∞–∂: 2700 —Ä—É–± / 60 –º–∏–Ω
            '5': 50.00,  # –ê—Ä–æ–º–∞—Ç–µ—Ä–∞–ø–∏—è: 3000 —Ä—É–± / 60 –º–∏–Ω
            '6': 55.00,  # –ì–æ—Ä—è—á–∏–µ –∫–∞–º–Ω–∏: 3300 —Ä—É–± / 60 –º–∏–Ω
            '7': 60.00,  # –û–±–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Ç–µ–ª–∞: 3600 —Ä—É–± / 60 –º–∏–Ω
            '8': 80.00   # –ü–∞—Ä–Ω—ã–π –º–∞—Å—Å–∞–∂: 4800 —Ä—É–± / 60 –º–∏–Ω
        }
        
        rate = price_per_minute.get(str(service_id), 0)
        total_price = int(rate * duration_minutes)
        
        return total_price
        
    def is_available(self) -> bool:
        """
        –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞ Google Calendar.
        
        Returns:
            bool: True –µ—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω
        """
        return self.service is not None

    def get_available_time_slots(self, date: str, master_id: str = None, working_hours: Tuple[int, int] = (8, 20)) -> List[str]:
        """
        –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∞—Ç—É –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞.
        
        Args:
            date: –î–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD
            master_id: ID –º–∞—Å—Ç–µ—Ä–∞ (–µ—Å–ª–∏ None, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–æ—Ç—ã –¥–ª—è –≤—Å–µ—Ö –º–∞—Å—Ç–µ—Ä–æ–≤)
            working_hours: –ö–æ—Ä—Ç–µ–∂ (–Ω–∞—á–∞–ª—å–Ω—ã–π_—á–∞—Å, –∫–æ–Ω–µ—á–Ω—ã–π_—á–∞—Å)
            
        Returns:
            List[str]: –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –≤ ISO —Ñ–æ—Ä–º–∞—Ç–µ
            
        FIXME: –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —á–∞—Å–æ–≤—ã–º–∏ –ø–æ—è—Å–∞–º–∏.
        PROD: –î–æ–±–∞–≤—å—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫—É pytz –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å timezone.
        """
        try:
            # NOTE: –ü–æ–ª—É—á–∞–µ–º –∑–∞–Ω—è—Ç—ã–µ —Å–ª–æ—Ç—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞
            busy_result = self.get_busy_slots_for_master(date, master_id)
            if not busy_result["success"]:
                return []
            
            busy_slots = busy_result["busy_slots"]
            available_slots = []
            start_hour, end_hour = working_hours
            
            for hour in range(start_hour, end_hour):
                slot_time = f"{date}T{hour:02d}:00:00"
                slot_datetime = datetime.fromisoformat(slot_time)
                
                is_available = True
                for busy_slot in busy_slots:
                    # FIXME: –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ–ª–∂–Ω–∞ —É—á–∏—Ç—ã–≤–∞—Ç—å —á–∞—Å–æ–≤—ã–µ –ø–æ—è—Å–∞
                    busy_start_str = busy_slot['start'].replace('Z', '')
                    busy_end_str = busy_slot['end'].replace('Z', '')
                    
                    # NOTE: –£–±–∏—Ä–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
                    if '+' in busy_start_str:
                        busy_start_str = busy_start_str.split('+')[0]
                    if '+' in busy_end_str:
                        busy_end_str = busy_end_str.split('+')[0]
                    
                    # NOTE: –î–ª—è —Å–æ–±—ã—Ç–∏–π –Ω–∞ –≤–µ—Å—å –¥–µ–Ω—å –¥–æ–±–∞–≤–ª—è–µ–º –≤—Ä–µ–º—è
                    if 'T' not in busy_start_str:
                        busy_start_str += 'T00:00:00'
                    if 'T' not in busy_end_str:
                        busy_end_str += 'T23:59:59'
                    
                    busy_start = datetime.fromisoformat(busy_start_str)
                    busy_end = datetime.fromisoformat(busy_end_str)
                    
                    # NOTE: –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
                    if (slot_datetime < busy_end and 
                        slot_datetime + timedelta(hours=1) > busy_start):
                        is_available = False
                        break
                
                if is_available:
                    available_slots.append(slot_time)
            
            return available_slots
            
        except Exception as e:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª–æ—Ç–æ–≤ –¥–ª—è –º–∞—Å—Ç–µ—Ä–∞ {master_id}: {e}")
            return []


# ==================================================
# üöÄ –ì–û–ë–ê–õ–¨–ù–´–ô –≠–ö–ó–ï–ú–ü–õ–Ø–† –°–ï–†–í–ò–°–ê
# ==================================================

# PROD: –í production —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ dependency injection
# –≤–º–µ—Å—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –¥–ª—è –ª—É—á—à–µ–π —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏
calendar_service = GoogleCalendarService()


================================================================================
–§–ê–ô–õ: utils/validators.py
================================================================================
# -*- coding: utf-8 -*-
"""
–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
"""

import re
from datetime import datetime, date, time as time_type

def validate_future_date(date_string: str) -> bool:
    """–í–∞–ª–∏–¥–∞—Ü–∏—è —á—Ç–æ –¥–∞—Ç–∞ –Ω–µ –≤ –ø—Ä–æ—à–ª–æ–º"""
    try:
        selected_date = datetime.strptime(date_string, '%Y-%m-%d').date()
        today = datetime.now().date()
        
        if selected_date < today:
            raise ValidationError("–î–∞—Ç–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ø—Ä–æ—à–ª–æ–º")
        return True
    except ValueError:
        raise ValidationError("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ì–ì–ì–ì-–ú–ú-–î–î")

def validate_future_time(date_string: str, time_string: str) -> bool:
    """–í–∞–ª–∏–¥–∞—Ü–∏—è —á—Ç–æ –≤—Ä–µ–º—è –Ω–µ –≤ –ø—Ä–æ—à–ª–æ–º (–¥–ª—è —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π –¥–∞—Ç—ã)"""
    try:
        selected_date = datetime.strptime(date_string, '%Y-%m-%d').date()
        selected_time = datetime.strptime(time_string, '%H:%M').time()
        now = datetime.now()
        
        # –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ —Å–µ–≥–æ–¥–Ω—è—à–Ω—è—è –¥–∞—Ç–∞, –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤—Ä–µ–º—è
        if selected_date == now.date():
            selected_datetime = datetime.combine(selected_date, selected_time)
            if selected_datetime < now:
                raise ValidationError("–í—Ä–µ–º—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ø—Ä–æ—à–ª–æ–º –¥–ª—è —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π –¥–∞—Ç—ã")
        return True
    except ValueError:
        raise ValidationError("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ß–ß:–ú–ú")

def validate_phone(phone):
    """–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞"""
    # –£–¥–∞–ª—è–µ–º –≤—Å–µ —Å–∏–º–≤–æ–ª—ã –∫—Ä–æ–º–µ —Ü–∏—Ñ—Ä
    phone_digits = re.sub(r'\D', '', phone)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–æ—Å—Å–∏–π—Å–∫–∏–π –Ω–æ–º–µ—Ä
    if phone_digits.startswith('8'):
        phone_digits = '7' + phone_digits[1:]
    
    if phone_digits.startswith('7') and len(phone_digits) == 11:
        return True, phone_digits
    
    return False, "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞"

def validate_email(email):
    """–í–∞–ª–∏–¥–∞—Ü–∏—è email"""
    pattern = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
    if re.match(pattern, email):
        return True, email
    return False, "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç email"

def validate_booking_data(data):
    """–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è"""
    errors = []
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
    required_fields = ['client_name', 'client_phone', 'service_id', 'master_id', 'booking_date', 'booking_time']
    for field in required_fields:
        if not data.get(field):
            errors.append(f"–ü–æ–ª–µ '{field}' –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è")
    
    # –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–º–µ–Ω–∏
    if data.get('client_name'):
        name = data['client_name'].strip()
        if len(name) < 2:
            errors.append("–ò–º—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞")
        elif len(name) > 100:
            errors.append("–ò–º—è –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–µ–≤—ã—à–∞—Ç—å 100 —Å–∏–º–≤–æ–ª–æ–≤")
    
    # –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞
    if data.get('client_phone'):
        is_valid, message = validate_phone(data['client_phone'])
        if not is_valid:
            errors.append(message)
    
    # –í–∞–ª–∏–¥–∞—Ü–∏—è email (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω)
    if data.get('client_email'):
        is_valid, message = validate_email(data['client_email'])
        if not is_valid:
            errors.append(message)
    
    # –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç—ã
    if data.get('booking_date'):
        try:
            booking_date = datetime.strptime(data['booking_date'], '%Y-%m-%d').date()
            if booking_date < date.today():
                errors.append("–î–∞—Ç–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ø—Ä–æ—à–ª–æ–º")
        except ValueError:
            errors.append("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã")
    
    # –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏
    if data.get('booking_time'):
        try:
            booking_time = datetime.strptime(data['booking_time'], '%H:%M').time()
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Ä–µ–º—è –≤ —Ä–∞–±–æ—á–µ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ (8:00 - 20:00)
            if booking_time < time(8, 0) or booking_time > time(20, 0):
                errors.append("–í—Ä–µ–º—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 8:00 - 20:00")
        except ValueError:
            errors.append("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏")
    
    if errors:
        return {
            'valid': False,
            'message': '; '.join(errors)
        }
    
    return {'valid': True}

def validate_master_data(data):
    """–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –º–∞—Å—Ç–µ—Ä–∞"""
    errors = []
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
    required_fields = ['name', 'position', 'experience', 'specialization']
    for field in required_fields:
        if not data.get(field):
            errors.append(f"–ü–æ–ª–µ '{field}' –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è")
    
    # –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–º–µ–Ω–∏
    if data.get('name'):
        name = data['name'].strip()
        if len(name) < 2:
            errors.append("–ò–º—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞")
        elif len(name) > 100:
            errors.append("–ò–º—è –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–µ–≤—ã—à–∞—Ç—å 100 —Å–∏–º–≤–æ–ª–æ–≤")
    
    if errors:
        return {
            'valid': False,
            'message': '; '.join(errors)
        }
    
    return {'valid': True}

def validate_review_data(data):
    """–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç–∑—ã–≤–∞"""
    errors = []
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
    required_fields = ['client_name', 'rating', 'text']
    for field in required_fields:
        if not data.get(field):
            errors.append(f"–ü–æ–ª–µ '{field}' –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è")
    
    # –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–π—Ç–∏–Ω–≥–∞
    if data.get('rating'):
        try:
            rating = int(data['rating'])
            if rating < 1 or rating > 5:
                errors.append("–†–µ–π—Ç–∏–Ω–≥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 1 –¥–æ 5")
        except ValueError:
            errors.append("–†–µ–π—Ç–∏–Ω–≥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å–ª–æ–º")
    
    # –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –æ—Ç–∑—ã–≤–∞
    if data.get('text'):
        text = data['text'].strip()
        if len(text) < 10:
            errors.append("–¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤")
        elif len(text) > 1000:
            errors.append("–¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 1000 —Å–∏–º–≤–æ–ª–æ–≤")
    
    if errors:
        return {
            'valid': False,
            'message': '; '.join(errors)
        }
    
    return {'valid': True}










================================================================================
–§–ê–ô–õ: utils/__init__.py
================================================================================
# -*- coding: utf-8 -*-
"""
–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —É—Ç–∏–ª–∏—Ç—ã
"""









================================================================================
–§–ê–ô–õ: utils/monitoring_system.py
================================================================================
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –∞–ª–µ—Ä—Ç–æ–≤ –¥–ª—è –º–∞—Å—Å–∞–∂–Ω–æ–≥–æ —Å–∞–ª–æ–Ω–∞

PROD: –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å Prometheus, Grafana, DataDog –∏–ª–∏ –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
"""

import time
import json
import logging
from datetime import datetime, timedelta
from typing import Dict, List, Any, Optional, Callable
from dataclasses import dataclass
from enum import Enum
import threading
import queue

# ==================================================
# üîß –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê
# ==================================================

class AlertLevel(Enum):
    """–£—Ä–æ–≤–Ω–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏ –∞–ª–µ—Ä—Ç–æ–≤."""
    INFO = "info"
    WARNING = "warning"
    ERROR = "error"
    CRITICAL = "critical"


@dataclass
class Alert:
    """–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–ª–µ—Ä—Ç–∞."""
    id: str
    level: AlertLevel
    message: str
    timestamp: datetime
    source: str
    metadata: Dict[str, Any]
    resolved: bool = False
    resolved_at: Optional[datetime] = None


class MetricsCollector:
    """
    –°–±–æ—Ä—â–∏–∫ –º–µ—Ç—Ä–∏–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
    
    PROD: –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å Prometheus –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫.
    """
    
    def __init__(self):
        self.metrics = {}
        self.logger = logging.getLogger(__name__)
        self._lock = threading.Lock()
    
    def increment_counter(self, name: str, value: int = 1, labels: Dict[str, str] = None) -> None:
        """–£–≤–µ–ª–∏—á–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ –º–µ—Ç—Ä–∏–∫–∏."""
        with self._lock:
            key = f"{name}:{json.dumps(labels or {}, sort_keys=True)}"
            self.metrics[key] = self.metrics.get(key, 0) + value
    
    def set_gauge(self, name: str, value: float, labels: Dict[str, str] = None) -> None:
        """–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏."""
        with self._lock:
            key = f"{name}:{json.dumps(labels or {}, sort_keys=True)}"
            self.metrics[key] = value
    
    def record_histogram(self, name: str, value: float, labels: Dict[str, str] = None) -> None:
        """–ó–∞–ø–∏—Å–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—É."""
        with self._lock:
            key = f"{name}:{json.dumps(labels or {}, sort_keys=True)}"
            if key not in self.metrics:
                self.metrics[key] = []
            self.metrics[key].append({
                'value': value,
                'timestamp': datetime.now().isoformat()
            })
    
    def get_metrics(self) -> Dict[str, Any]:
        """–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –º–µ—Ç—Ä–∏–∫–∏."""
        with self._lock:
            return self.metrics.copy()


class HealthChecker:
    """
    –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã.
    
    PROD: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.
    """
    
    def __init__(self, metrics_collector: MetricsCollector):
        self.metrics = metrics_collector
        self.logger = logging.getLogger(__name__)
        self.checks = {}
    
    def register_check(self, name: str, check_func: Callable[[], bool], 
                      critical: bool = True, timeout: int = 30) -> None:
        """–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∑–¥–æ—Ä–æ–≤—å—è."""
        self.checks[name] = {
            'function': check_func,
            'critical': critical,
            'timeout': timeout,
            'last_check': None,
            'last_result': None
        }
    
    def run_health_checks(self) -> Dict[str, Any]:
        """–í—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è."""
        results = {
            'overall_status': 'healthy',
            'checks': {},
            'timestamp': datetime.now().isoformat()
        }
        
        for name, check_info in self.checks.items():
            try:
                start_time = time.time()
                result = check_info['function']()
                duration = time.time() - start_time
                
                check_info['last_check'] = datetime.now()
                check_info['last_result'] = result
                
                results['checks'][name] = {
                    'status': 'healthy' if result else 'unhealthy',
                    'critical': check_info['critical'],
                    'duration': duration,
                    'timestamp': datetime.now().isoformat()
                }
                
                # –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â–∏–π —Å—Ç–∞—Ç—É—Å
                if not result and check_info['critical']:
                    results['overall_status'] = 'unhealthy'
                
                # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –º–µ—Ç—Ä–∏–∫–∏
                self.metrics.set_gauge(
                    f"health_check_{name}",
                    1 if result else 0,
                    {'critical': str(check_info['critical'])}
                )
                
            except Exception as e:
                self.logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è {name}: {e}")
                results['checks'][name] = {
                    'status': 'error',
                    'critical': check_info['critical'],
                    'error': str(e),
                    'timestamp': datetime.now().isoformat()
                }
                
                if check_info['critical']:
                    results['overall_status'] = 'unhealthy'
        
        return results


class AlertManager:
    """
    –ú–µ–Ω–µ–¥–∂–µ—Ä –∞–ª–µ—Ä—Ç–æ–≤ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.
    
    PROD: –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å Slack, Email, PagerDuty –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.
    """
    
    def __init__(self, metrics_collector: MetricsCollector):
        self.metrics = metrics_collector
        self.logger = logging.getLogger(__name__)
        self.alerts = {}
        self.alert_queue = queue.Queue()
        self._lock = threading.Lock()
    
    def create_alert(self, alert_id: str, level: AlertLevel, message: str,
                    source: str, metadata: Dict[str, Any] = None) -> Alert:
        """–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∞–ª–µ—Ä—Ç."""
        alert = Alert(
            id=alert_id,
            level=level,
            message=message,
            timestamp=datetime.now(),
            source=source,
            metadata=metadata or {}
        )
        
        with self._lock:
            self.alerts[alert_id] = alert
        
        # –î–æ–±–∞–≤–ª—è–µ–º –≤ –æ—á–µ—Ä–µ–¥—å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
        self.alert_queue.put(alert)
        
        # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –º–µ—Ç—Ä–∏–∫–∏
        self.metrics.increment_counter(
            'alerts_total',
            labels={'level': level.value, 'source': source}
        )
        
        self.logger.warning(f"üö® –ê–õ–ï–†–¢ [{level.value.upper()}] {alert_id}: {message}")
        
        return alert
    
    def resolve_alert(self, alert_id: str) -> bool:
        """–†–∞–∑—Ä–µ—à–∏—Ç—å –∞–ª–µ—Ä—Ç."""
        with self._lock:
            if alert_id in self.alerts:
                self.alerts[alert_id].resolved = True
                self.alerts[alert_id].resolved_at = datetime.now()
                
                self.logger.info(f"‚úÖ –ê–ª–µ—Ä—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω: {alert_id}")
                return True
        
        return False
    
    def get_active_alerts(self) -> List[Alert]:
        """–ü–æ–ª—É—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã."""
        with self._lock:
            return [alert for alert in self.alerts.values() if not alert.resolved]
    
    def get_alerts_by_level(self, level: AlertLevel) -> List[Alert]:
        """–ü–æ–ª—É—á–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –ø–æ —É—Ä–æ–≤–Ω—é."""
        with self._lock:
            return [alert for alert in self.alerts.values() 
                   if alert.level == level and not alert.resolved]


class PerformanceMonitor:
    """
    –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
    
    PROD: –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å APM —Å–∏—Å—Ç–µ–º–∞–º–∏ (New Relic, DataDog APM).
    """
    
    def __init__(self, metrics_collector: MetricsCollector):
        self.metrics = metrics_collector
        self.logger = logging.getLogger(__name__)
        self.request_times = []
        self.error_rates = {}
    
    def record_request(self, endpoint: str, method: str, duration: float, 
                      status_code: int) -> None:
        """–ó–∞–ø–∏—Å–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∑–∞–ø—Ä–æ—Å–∞."""
        # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
        self.metrics.record_histogram(
            'request_duration_seconds',
            duration,
            {'endpoint': endpoint, 'method': method, 'status': str(status_code)}
        )
        
        # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –∑–∞–ø—Ä–æ—Å–æ–≤
        self.metrics.increment_counter(
            'requests_total',
            labels={'endpoint': endpoint, 'method': method, 'status': str(status_code)}
        )
        
        # –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –æ—à–∏–±–∫–∏
        if status_code >= 400:
            self.metrics.increment_counter(
                'errors_total',
                labels={'endpoint': endpoint, 'status': str(status_code)}
            )
    
    def record_database_query(self, query_type: str, duration: float, 
                            success: bool) -> None:
        """–ó–∞–ø–∏—Å–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –∫ –ë–î."""
        self.metrics.record_histogram(
            'database_query_duration_seconds',
            duration,
            {'query_type': query_type, 'success': str(success)}
        )
        
        if not success:
            self.metrics.increment_counter(
                'database_errors_total',
                labels={'query_type': query_type}
            )
    
    def record_calendar_api_call(self, operation: str, duration: float, 
                               success: bool) -> None:
        """–ó–∞–ø–∏—Å–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤—ã–∑–æ–≤–∞ Google Calendar API."""
        self.metrics.record_histogram(
            'calendar_api_duration_seconds',
            duration,
            {'operation': operation, 'success': str(success)}
        )
        
        if not success:
            self.metrics.increment_counter(
                'calendar_api_errors_total',
                labels={'operation': operation}
            )


class MonitoringSystem:
    """
    –û—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
    
    PROD: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –∞–ª–µ—Ä—Ç—ã.
    """
    
    def __init__(self):
        self.metrics = MetricsCollector()
        self.health_checker = HealthChecker(self.metrics)
        self.alert_manager = AlertManager(self.metrics)
        self.performance_monitor = PerformanceMonitor(self.metrics)
        self.logger = logging.getLogger(__name__)
        
        # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –±–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è
        self._register_basic_health_checks()
    
    def _register_basic_health_checks(self) -> None:
        """–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±–∞–∑–æ–≤—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –∑–¥–æ—Ä–æ–≤—å—è."""
        
        def check_database():
            """–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö."""
            try:
                from models.database import db
                # –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
                db.session.execute('SELECT 1')
                return True
            except Exception as e:
                self.logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ë–î: {e}")
                return False
        
        def check_calendar_api():
            """–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Google Calendar API."""
            try:
                from utils.calendar_service import calendar_service
                return calendar_service.is_available()
            except Exception as e:
                self.logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è: {e}")
                return False
        
        def check_disk_space():
            """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ."""
            try:
                import shutil
                free_space = shutil.disk_usage('/').free
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–≤–æ–±–æ–¥–Ω–æ –±–æ–ª—å—à–µ 1GB
                return free_space > 1024 * 1024 * 1024
            except Exception as e:
                self.logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∏—Å–∫–∞: {e}")
                return False
        
        # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –ø—Ä–æ–≤–µ—Ä–∫–∏
        self.health_checker.register_check('database', check_database, critical=True)
        self.health_checker.register_check('calendar_api', check_calendar_api, critical=False)
        self.health_checker.register_check('disk_space', check_disk_space, critical=True)
    
    def get_system_status(self) -> Dict[str, Any]:
        """–ü–æ–ª—É—á–∏—Ç—å –æ–±—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã."""
        health_results = self.health_checker.run_health_checks()
        active_alerts = self.alert_manager.get_active_alerts()
        
        return {
            'status': health_results['overall_status'],
            'timestamp': datetime.now().isoformat(),
            'health_checks': health_results,
            'active_alerts': len(active_alerts),
            'critical_alerts': len(self.alert_manager.get_alerts_by_level(AlertLevel.CRITICAL)),
            'metrics_summary': {
                'total_requests': self._get_metric_sum('requests_total'),
                'total_errors': self._get_metric_sum('errors_total'),
                'avg_response_time': self._get_metric_avg('request_duration_seconds')
            }
        }
    
    def _get_metric_sum(self, metric_name: str) -> int:
        """–ü–æ–ª—É—á–∏—Ç—å —Å—É–º–º—É –º–µ—Ç—Ä–∏–∫–∏."""
        metrics = self.metrics.get_metrics()
        total = 0
        for key, value in metrics.items():
            if key.startswith(metric_name):
                if isinstance(value, (int, float)):
                    total += value
        return total
    
    def _get_metric_avg(self, metric_name: str) -> float:
        """–ü–æ–ª—É—á–∏—Ç—å —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏."""
        metrics = self.metrics.get_metrics()
        values = []
        for key, value in metrics.items():
            if key.startswith(metric_name) and isinstance(value, list):
                values.extend([v['value'] for v in value])
        
        return sum(values) / len(values) if values else 0.0
    
    def create_critical_alert(self, message: str, source: str, metadata: Dict = None) -> Alert:
        """–°–æ–∑–¥–∞—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∞–ª–µ—Ä—Ç."""
        alert_id = f"critical_{int(time.time())}"
        return self.alert_manager.create_alert(
            alert_id, AlertLevel.CRITICAL, message, source, metadata
        )
    
    def create_warning_alert(self, message: str, source: str, metadata: Dict = None) -> Alert:
        """–°–æ–∑–¥–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ."""
        alert_id = f"warning_{int(time.time())}"
        return self.alert_manager.create_alert(
            alert_id, AlertLevel.WARNING, message, source, metadata
        )


# ==================================================
# üöÄ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–ò–°–¢–ï–ú–´ –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê
# ==================================================

def init_monitoring_system() -> MonitoringSystem:
    """
    –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
    
    Returns:
        –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
        
    PROD: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
    """
    monitoring = MonitoringSystem()
    
    logging.getLogger(__name__).info("‚úÖ –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞")
    
    return monitoring


# ==================================================
# üîß –î–ï–ö–û–†–ê–¢–û–†–´ –î–õ–Ø –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê
# ==================================================

def monitor_performance(monitoring_system: MonitoringSystem):
    """
    –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–π.
    
    Args:
        monitoring_system: –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
    """
    def decorator(func: Callable) -> Callable:
        def wrapper(*args, **kwargs):
            start_time = time.time()
            
            try:
                result = func(*args, **kwargs)
                duration = time.time() - start_time
                
                # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –º–µ—Ç—Ä–∏–∫–∏
                monitoring_system.performance_monitor.record_request(
                    endpoint=func.__name__,
                    method='FUNCTION',
                    duration=duration,
                    status_code=200
                )
                
                return result
                
            except Exception as e:
                duration = time.time() - start_time
                
                # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –º–µ—Ç—Ä–∏–∫–∏ –æ—à–∏–±–∫–∏
                monitoring_system.performance_monitor.record_request(
                    endpoint=func.__name__,
                    method='FUNCTION',
                    duration=duration,
                    status_code=500
                )
                
                # –°–æ–∑–¥–∞–µ–º –∞–ª–µ—Ä—Ç –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
                if isinstance(e, (SystemExit, KeyboardInterrupt)):
                    raise
                
                monitoring_system.create_warning_alert(
                    f"–û—à–∏–±–∫–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ {func.__name__}: {str(e)}",
                    source="performance_monitor",
                    metadata={'function': func.__name__, 'duration': duration}
                )
                
                raise
        
        return wrapper
    return decorator




================================================================================
–§–ê–ô–õ: utils/performance_optimizer.py
================================================================================
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–°–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

PROD: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ connection pooling –¥–ª—è –ë–î.
"""

import time
import functools
from typing import Any, Dict, List, Optional, Callable
from datetime import datetime, timedelta
import logging

# ==================================================
# üîß –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ö–≠–®–ò–†–û–í–ê–ù–ò–Ø
# ==================================================

# NOTE: –ü—Ä–æ—Å—Ç–æ–µ in-memory –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
# PROD: –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ Redis –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏
class SimpleCache:
    """
    –ü—Ä–æ—Å—Ç–æ–µ in-memory –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ.
    
    PROD: –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ Redis –¥–ª—è production —Å—Ä–µ–¥—ã.
    """
    
    def __init__(self, default_ttl: int = 300):  # 5 –º–∏–Ω—É—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        self.cache = {}
        self.default_ttl = default_ttl
    
    def get(self, key: str) -> Optional[Any]:
        """–ü–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∫—ç—à–∞."""
        if key in self.cache:
            value, expiry = self.cache[key]
            if time.time() < expiry:
                return value
            else:
                del self.cache[key]  # –£–¥–∞–ª—è–µ–º –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏
        return None
    
    def set(self, key: str, value: Any, ttl: Optional[int] = None) -> None:
        """–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫—ç—à."""
        ttl = ttl or self.default_ttl
        expiry = time.time() + ttl
        self.cache[key] = (value, expiry)
    
    def delete(self, key: str) -> None:
        """–£–¥–∞–ª–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∫—ç—à–∞."""
        self.cache.pop(key, None)
    
    def clear(self) -> None:
        """–û—á–∏—Å—Ç–∏—Ç—å –≤–µ—Å—å –∫—ç—à."""
        self.cache.clear()
    
    def size(self) -> int:
        """–ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –∫—ç—à–µ."""
        return len(self.cache)


# –ì–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∫—ç—à–∞
cache = SimpleCache()

# ==================================================
# üöÄ –î–ï–ö–û–†–ê–¢–û–†–´ –î–õ–Ø –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò
# ==================================================

def cached(ttl: int = 300, key_prefix: str = ""):
    """
    –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π.
    
    Args:
        ttl: –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫—ç—à–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
        key_prefix: –ü—Ä–µ—Ñ–∏–∫—Å –¥–ª—è –∫–ª—é—á–∞ –∫—ç—à–∞
        
    PROD: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Redis —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π TTL –∏ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–µ–π.
    """
    def decorator(func: Callable) -> Callable:
        @functools.wraps(func)
        def wrapper(*args, **kwargs):
            # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–ª—é—á –∫—ç—à–∞
            cache_key = f"{key_prefix}:{func.__name__}:{hash(str(args) + str(sorted(kwargs.items())))}"
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à
            cached_result = cache.get(cache_key)
            if cached_result is not None:
                logging.getLogger(__name__).debug(f"Cache HIT: {cache_key}")
                return cached_result
            
            # –í—ã–ø–æ–ª–Ω—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é –∏ –∫—ç—à–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            result = func(*args, **kwargs)
            cache.set(cache_key, result, ttl)
            logging.getLogger(__name__).debug(f"Cache SET: {cache_key}")
            
            return result
        return wrapper
    return decorator


def rate_limit(max_calls: int = 100, time_window: int = 3600):
    """
    –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã –≤—ã–∑–æ–≤–æ–≤ API.
    
    Args:
        max_calls: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∑–æ–≤–æ–≤
        time_window: –í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
        
    PROD: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Redis –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ rate limiting.
    """
    def decorator(func: Callable) -> Callable:
        call_history = {}
        
        @functools.wraps(func)
        def wrapper(*args, **kwargs):
            # –ü–æ–ª—É—á–∞–µ–º IP –∫–ª–∏–µ–Ω—Ç–∞ (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
            client_ip = "unknown"
            if 'request' in globals():
                client_ip = request.remote_addr
            
            current_time = time.time()
            
            # –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏
            if client_ip in call_history:
                call_history[client_ip] = [
                    call_time for call_time in call_history[client_ip]
                    if current_time - call_time < time_window
                ]
            else:
                call_history[client_ip] = []
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–∏–º–∏—Ç
            if len(call_history[client_ip]) >= max_calls:
                logging.getLogger(__name__).warning(f"Rate limit exceeded for IP: {client_ip}")
                return {
                    "success": False,
                    "error": "rate_limit_exceeded",
                    "message": f"–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤: {max_calls} –≤ —á–∞—Å",
                    "retry_after": time_window
                }
            
            # –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–∏–π –≤—ã–∑–æ–≤
            call_history[client_ip].append(current_time)
            
            return func(*args, **kwargs)
        return wrapper
    return decorator


def performance_monitor(func: Callable) -> Callable:
    """
    –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–π.
    
    PROD: –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Prometheus, DataDog).
    """
    @functools.wraps(func)
    def wrapper(*args, **kwargs):
        start_time = time.time()
        
        try:
            result = func(*args, **kwargs)
            execution_time = time.time() - start_time
            
            # –õ–æ–≥–∏—Ä—É–µ–º –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
            if execution_time > 1.0:  # –ë–æ–ª–µ–µ 1 —Å–µ–∫—É–Ω–¥—ã
                logging.getLogger(__name__).warning(
                    f"SLOW QUERY: {func.__name__} took {execution_time:.3f}s"
                )
            else:
                logging.getLogger(__name__).debug(
                    f"PERF: {func.__name__} took {execution_time:.3f}s"
                )
            
            return result
            
        except Exception as e:
            execution_time = time.time() - start_time
            logging.getLogger(__name__).error(
                f"ERROR in {func.__name__} after {execution_time:.3f}s: {str(e)}"
            )
            raise
    
    return wrapper


# ==================================================
# üóÑÔ∏è –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –ë–ê–ó–´ –î–ê–ù–ù–´–•
# ==================================================

class DatabaseOptimizer:
    """
    –ö–ª–∞—Å—Å –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.
    
    PROD: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ connection pooling –∏ prepared statements.
    """
    
    def __init__(self, db_session):
        self.db = db_session
        self.logger = logging.getLogger(__name__)
    
    @cached(ttl=600, key_prefix="masters")  # –ö—ç—à –Ω–∞ 10 –º–∏–Ω—É—Ç
    def get_all_masters(self) -> List[Dict]:
        """–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –º–∞—Å—Ç–µ—Ä–æ–≤ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º."""
        try:
            from models.database import Master
            masters = Master.query.filter_by(is_active=True).all()
            return [master.to_dict() for master in masters]
        except Exception as e:
            self.logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –º–∞—Å—Ç–µ—Ä–æ–≤: {e}")
            return []
    
    @cached(ttl=600, key_prefix="services")  # –ö—ç—à –Ω–∞ 10 –º–∏–Ω—É—Ç
    def get_all_services(self) -> List[Dict]:
        """–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —É—Å–ª—É–≥–∏ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º."""
        try:
            from models.database import Service
            services = Service.query.filter_by(is_active=True).all()
            return [service.to_dict() for service in services]
        except Exception as e:
            self.logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —É—Å–ª—É–≥: {e}")
            return []
    
    @cached(ttl=60, key_prefix="bookings")  # –ö—ç—à –Ω–∞ 1 –º–∏–Ω—É—Ç—É
    def get_bookings_by_date(self, date: str) -> List[Dict]:
        """–ü–æ–ª—É—á–∏—Ç—å –∑–∞–ø–∏—Å–∏ –Ω–∞ –¥–∞—Ç—É —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º."""
        try:
            from models.database import Booking
            from datetime import datetime
            
            booking_date = datetime.strptime(date, '%Y-%m-%d').date()
            bookings = Booking.query.filter_by(booking_date=booking_date).all()
            return [booking.to_dict() for booking in bookings]
        except Exception as e:
            self.logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –Ω–∞ {date}: {e}")
            return []
    
    def invalidate_cache(self, cache_type: str) -> None:
        """–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞."""
        # PROD: –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å–µ–ª–µ–∫—Ç–∏–≤–Ω—É—é –æ—á–∏—Å—Ç–∫—É –∫—ç—à–∞
        cache.clear()
        self.logger.info(f"Cache invalidated for type: {cache_type}")


# ==================================================
# üìä –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø API ENDPOINTS
# ==================================================

class APIOptimizer:
    """
    –ö–ª–∞—Å—Å –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ API endpoints.
    
    PROD: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ connection pooling.
    """
    
    def __init__(self):
        self.logger = logging.getLogger(__name__)
        self.db_optimizer = None
    
    def init_db_optimizer(self, db_session):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä–∞ –ë–î."""
        self.db_optimizer = DatabaseOptimizer(db_session)
    
    @rate_limit(max_calls=200, time_window=3600)  # 200 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —á–∞—Å
    @performance_monitor
    def get_available_slots_optimized(self, date: str, master_id: str, duration_minutes: Optional[int] = None) -> Dict[str, Any]:
        """
        –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤.
        
        Args:
            date: –î–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD
            master_id: ID –º–∞—Å—Ç–µ—Ä–∞
            duration_minutes: –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ–∞–Ω—Å–∞ –≤ –º–∏–Ω—É—Ç–∞—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 60)
            
        Returns:
            –°–ª–æ–≤–∞—Ä—å —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —Å–ª–æ—Ç–∞–º–∏
        """
        # NOTE: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        if duration_minutes is None:
            duration_minutes = 60
        else:
            try:
                duration_minutes = int(duration_minutes)
                if duration_minutes <= 0:
                    duration_minutes = 60
            except (ValueError, TypeError):
                duration_minutes = 60
        try:
            # NOTE: –û—Ç–∫–ª—é—á–∞–µ–º –∫—ç—à –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏ —Å–ª–æ—Ç–æ–≤
            # –ö—ç—à –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ –æ –∑–∞–Ω—è—Ç—ã—Ö —Å–ª–æ—Ç–∞—Ö
            # cache_key = f"available_slots:{date}:{master_id}"
            # cached_slots = cache.get(cache_key)
            # if cached_slots:
            #     return cached_slots
            
            # –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
            from utils.calendar_service import calendar_service
            
            if not calendar_service or not calendar_service.is_available():
                return {
                    "success": False,
                    "message": "–ö–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω",
                    "available_slots": []
                }
            
            # –ü–æ–ª—É—á–∞–µ–º –∑–∞–Ω—è—Ç—ã–µ —Å–ª–æ—Ç—ã
            busy_result = calendar_service.get_busy_slots_for_master(date, master_id)
            if not busy_result["success"]:
                return {
                    "success": False,
                    "message": "–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–Ω—è—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤",
                    "available_slots": []
                }
            
            def _parse_datetime(value: str, is_end: bool = False) -> datetime:
                """–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å—Ç—Ä–æ–∫—É ISO –≤ datetime –±–µ–∑ —Ç–∞–π–º–∑–æ–Ω—ã."""
                if not value:
                    return None
                cleaned = value.replace('Z', '+00:00')
                try:
                    dt = datetime.fromisoformat(cleaned)
                except ValueError:
                    if 'T' in cleaned:
                        cleaned = cleaned.split('+')[0]
                        dt = datetime.strptime(cleaned, "%Y-%m-%dT%H:%M:%S")
                    else:
                        dt = datetime.strptime(cleaned, "%Y-%m-%d")
                        if is_end:
                            dt = dt + timedelta(hours=23, minutes=59)
                return dt.replace(tzinfo=None)
            
            busy_intervals = []
            for slot in busy_result["busy_slots"]:
                start_dt = _parse_datetime(slot.get('start'))
                end_dt = _parse_datetime(slot.get('end'), is_end=True)
                if start_dt and end_dt:
                    busy_intervals.append((start_dt, end_dt))
            
            # –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–Ω—è—Ç—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –∏–∑ —Å–ø–∏—Å–∫–∞ BOOKINGS (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
            try:
                from app import BOOKINGS
                for booking in BOOKINGS:
                    try:
                        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ –¥–∞—Ç—É (master_id –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
                        if booking.get('date') == date:
                            booking_time = booking.get('time')
                            booking_duration = booking.get('session_duration') or 60
                            booking_duration = int(booking_duration)
                            booking_start = datetime.strptime(f"{date} {booking_time}", "%Y-%m-%d %H:%M")
                            booking_end = booking_start + timedelta(minutes=booking_duration)
                            busy_intervals.append((booking_start, booking_end))
                    except (ValueError, KeyError, TypeError) as e:
                        self.logger.warning(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Å–ª–æ—Ç–æ–≤: {e}")
                        continue
            except ImportError:
                # –ï—Å–ª–∏ BOOKINGS –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –±–µ–∑ –Ω–µ–≥–æ
                pass
            
            date_obj = datetime.strptime(date, "%Y-%m-%d")
            # –ò–°–ü–†–ê–í–õ–ï–ù–û: –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞–∫ —à–∞–≥ –¥–ª—è —Å–ª–æ—Ç–æ–≤
            # –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
            slot_length = timedelta(minutes=duration_minutes)
            work_start = date_obj.replace(hour=8, minute=0, second=0, microsecond=0)
            work_end = date_obj.replace(hour=20, minute=0, second=0, microsecond=0)
            
            # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ—à–µ–¥—à–∏—Ö —Å–ª–æ—Ç–æ–≤
            now = datetime.now()
            today = now.date()
            selected_date = date_obj.date()
            
            available_slots = []
            # NOTE: –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–¥–∞–Ω–Ω—É—é –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
            booking_duration = timedelta(minutes=duration_minutes)
            
            # –°–æ–∑–¥–∞–µ–º –º–Ω–æ–∂–µ—Å—Ç–≤–æ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å—Ç–∞—Ä—Ç–æ–≤—ã—Ö —Ç–æ—á–µ–∫ —Å–ª–æ—Ç–æ–≤
            # –í–∫–ª—é—á–∞–µ–º –Ω–∞—á–∞–ª–æ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è –∏ –∫–æ–Ω—Ü—ã –≤—Å–µ—Ö –∑–∞–Ω—è—Ç—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
            potential_starts = {work_start}
            
            # –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ü—ã –≤—Å–µ—Ö –∑–∞–Ω—è—Ç—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –∫–∞–∫ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ —Ç–æ—á–∫–∏
            for busy_start, busy_end in busy_intervals:
                potential_starts.add(busy_end)
            
            # –¢–∞–∫–∂–µ –¥–æ–±–∞–≤–ª—è–µ–º —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ —Å–ª–æ—Ç—ã —Å —à–∞–≥–æ–º —Ä–∞–≤–Ω—ã–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            regular_slot = work_start
            while regular_slot < work_end:
                potential_starts.add(regular_slot)
                regular_slot = regular_slot + slot_length

            # –°–æ—Ä—Ç–∏—Ä—É–µ–º –≤—Å–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ —Ç–æ—á–∫–∏
            sorted_starts = sorted(potential_starts)
            
            for current_start in sorted_starts:
                # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—à–µ–¥—à–∏–µ —Å–ª–æ—Ç—ã, –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–Ω–∞—è –¥–∞—Ç–∞ - —Å–µ–≥–æ–¥–Ω—è
                if selected_date == today and current_start < now:
                    continue
                
                # NOTE: –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å —É—á–µ—Ç–æ–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–æ–≤–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
                # –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å duration_minutes –º–∏–Ω—É—Ç, 
                # –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–µ—Å—å –∏–Ω—Ç–µ—Ä–≤–∞–ª [current_start, current_start + duration_minutes] —Å–≤–æ–±–æ–¥–µ–Ω
                current_end = current_start + booking_duration
                
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–æ–Ω–µ—Ü –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã
                if current_end > work_end:
                    # –≠—Ç–æ—Ç —Å–ª–æ—Ç –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç, —Ç–∞–∫ –∫–∞–∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –ø–æ–º–µ—Å—Ç–∏—Ç—Å—è
                    continue
                
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å –∑–∞–Ω—è—Ç—ã–º–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏
                # –ö–æ–Ω—Ñ–ª–∏–∫—Ç –µ—Å—Ç—å, –µ—Å–ª–∏ –Ω–æ–≤—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è —Å –ª—é–±—ã–º –∑–∞–Ω—è—Ç—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º
                has_conflict = any(
                    not (current_end <= busy_start or current_start >= busy_end)
                    for busy_start, busy_end in busy_intervals
                )
                
                slot_time = current_start.strftime("%H:%M")
                
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –¥–æ–±–∞–≤–∏–ª–∏ –ª–∏ –º—ã —É–∂–µ —ç—Ç–æ—Ç —Å–ª–æ—Ç
                if any(slot['time'] == slot_time for slot in available_slots):
                    continue
                
                # –î–æ–±–∞–≤–ª—è–µ–º —Å–ª–æ—Ç –∏ —É–∫–∞–∑—ã–≤–∞–µ–º, —Å–≤–æ–±–æ–¥–µ–Ω –æ–Ω –∏–ª–∏ –∑–∞–Ω—è—Ç
                if has_conflict:
                    available_slots.append({
                        'time': slot_time,
                        'display': f"{slot_time} - –∑–∞–Ω—è—Ç–æ",
                        'disabled': True
                    })
                else:
                    available_slots.append({
                        'time': slot_time,
                        'display': f"{slot_time} - —Å–≤–æ–±–æ–¥–Ω–æ",
                        'disabled': False
                    })
            
            result = {
                "success": True,
                "date": date,
                "master_id": master_id,
                "available_slots": available_slots,
                "count": len(available_slots)
            }
            
            # NOTE: –ù–µ –∫—ç—à–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –æ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏
            # cache.set(cache_key, result, 300)
            
            return result
            
        except Exception as e:
            self.logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª–æ—Ç–æ–≤: {e}")
            return {
                "success": False,
                "message": f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª–æ—Ç–æ–≤: {str(e)}",
                "available_slots": []
            }
    
    @performance_monitor
    def batch_process_bookings(self, bookings_data: List[Dict]) -> Dict[str, Any]:
        """
        –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø–∏—Å–µ–π –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
        
        Args:
            bookings_data: –°–ø–∏—Å–æ–∫ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
            
        Returns:
            –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
        """
        try:
            from models.database import Booking, db
            from datetime import datetime
            
            successful_bookings = []
            failed_bookings = []
            
            # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∑–∞–ø–∏—Å–∏ –ø–∞–∫–µ—Ç–∞–º–∏
            batch_size = 10  # PROD: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞
            for i in range(0, len(bookings_data), batch_size):
                batch = bookings_data[i:i + batch_size]
                
                try:
                    for booking_data in batch:
                        # –°–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å
                        booking = Booking(
                            client_name=booking_data['name'],
                            client_phone=booking_data['phone'],
                            master_id=int(booking_data['master_id']),
                            service_id=int(booking_data['service_id']),
                            booking_date=datetime.strptime(booking_data['date'], '%Y-%m-%d').date(),
                            booking_time=datetime.strptime(booking_data['time'], '%H:%M').time(),
                            duration_minutes=int(booking_data.get('session_duration') or 60),
                            total_price=booking_data.get('total_price', 0)
                        )
                        
                        db.session.add(booking)
                        successful_bookings.append(booking_data)
                    
                    # –ö–æ–º–º–∏—Ç–∏–º –ø–∞–∫–µ—Ç
                    db.session.commit()
                    
                except Exception as e:
                    db.session.rollback()
                    failed_bookings.extend(batch)
                    self.logger.error(f"–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–∞–∫–µ—Ç–∞: {e}")
            
            return {
                "success": True,
                "processed": len(successful_bookings),
                "failed": len(failed_bookings),
                "successful_bookings": successful_bookings,
                "failed_bookings": failed_bookings
            }
            
        except Exception as e:
            self.logger.error(f"–û—à–∏–±–∫–∞ –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏: {e}")
            return {
                "success": False,
                "message": f"–û—à–∏–±–∫–∞ –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏: {str(e)}"
            }


# ==================================================
# üöÄ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–ò–°–¢–ï–ú–´ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò
# ==================================================

def init_performance_system(db_session=None) -> APIOptimizer:
    """
    –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
    
    Args:
        db_session: –°–µ—Å—Å–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        
    Returns:
        –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä API
    """
    optimizer = APIOptimizer()
    
    if db_session:
        optimizer.init_db_optimizer(db_session)
    
    logging.getLogger(__name__).info("‚úÖ –°–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞")
    
    return optimizer




================================================================================
–§–ê–ô–õ: utils/helpers.py
================================================================================
# -*- coding: utf-8 -*-
"""
–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
"""

import os
import json
from datetime import datetime
from flask import current_app
from flask_mail import Mail, Message

def load_json_data(filename):
    """–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON —Ñ–∞–π–ª–∞"""
    try:
        filepath = os.path.join('data', filename)
        with open(filepath, 'r', encoding='utf-8') as f:
            return json.load(f)
    except FileNotFoundError:
        return {}
    except json.JSONDecodeError:
        return {}

def save_json_data(filename, data):
    """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ JSON —Ñ–∞–π–ª"""
    try:
        filepath = os.path.join('data', filename)
        with open(filepath, 'w', encoding='utf-8') as f:
            json.dump(data, f, ensure_ascii=False, indent=2)
        return True
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö: {e}")
        return False

def send_booking_notification(booking):
    """–û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤–æ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏"""
    try:
        # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É email –∏–ª–∏ SMS
        # –ü–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –ª–æ–≥–∏—Ä—É–µ–º
        print(f"–ù–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: {booking.client_name} - {booking.booking_date} {booking.booking_time}")
        return True
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: {e}")
        return False

def format_phone(phone):
    """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞"""
    # –£–¥–∞–ª—è–µ–º –≤—Å–µ —Å–∏–º–≤–æ–ª—ã –∫—Ä–æ–º–µ —Ü–∏—Ñ—Ä
    phone_digits = ''.join(filter(str.isdigit, phone))
    
    # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ä–æ—Å—Å–∏–π—Å–∫–∏–π –Ω–æ–º–µ—Ä
    if phone_digits.startswith('8'):
        phone_digits = '7' + phone_digits[1:]
    
    if phone_digits.startswith('7') and len(phone_digits) == 11:
        return f"+7 ({phone_digits[1:4]}) {phone_digits[4:7]}-{phone_digits[7:9]}-{phone_digits[9:11]}"
    
    return phone

def format_datetime(dt):
    """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏"""
    if isinstance(dt, datetime):
        return dt.strftime('%d.%m.%Y %H:%M')
    return str(dt)

def get_working_hours():
    """–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤"""
    return {
        'start': '08:00',
        'end': '20:00',
        'days': ['–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–í—Ç–æ—Ä–Ω–∏–∫', '–°—Ä–µ–¥–∞', '–ß–µ—Ç–≤–µ—Ä–≥', '–ü—è—Ç–Ω–∏—Ü–∞', '–°—É–±–±–æ—Ç–∞', '–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ']
    }

def get_available_times(date_str):
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è"""
    # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–Ω—è—Ç—ã—Ö –≤—Ä–µ–º–µ–Ω
    # –ü–æ–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∞
    times = []
    for hour in range(8, 20):
        times.append(f"{hour:02d}:00")
        if hour < 19:  # –ù–µ –¥–æ–±–∞–≤–ª—è–µ–º 30 –º–∏–Ω—É—Ç –¥–ª—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —á–∞—Å–∞
            times.append(f"{hour:02d}:30")
    return times

def generate_booking_number():
    """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–º–µ—Ä–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è"""
    return f"MS{datetime.now().strftime('%Y%m%d%H%M%S')}"

def is_working_day(date_obj):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –¥–µ–Ω—å —Ä–∞–±–æ—á–∏–º"""
    # –ü–æ–∫–∞ –≤—Å–µ –¥–Ω–∏ —Ä–∞–±–æ—á–∏–µ
    return True

def get_contact_info():
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏"""
    return {
        'phone': '+7 (965) 610-21-08',
        'email': 'info@relax-salon.ru',
        'address': '—É–ª. –õ–µ–Ω–∏–Ω–∞, –≥.–ê–ª—å–º–µ—Ç—å–µ–≤—Å–∫',
        'working_hours': '–ï–∂–µ–¥–Ω–µ–≤–Ω–æ 8:00 - 20:00',
        'social': {
            'instagram': 'https://instagram.com/relax_salon',
            'vk': 'https://vk.com/relax_salon',
            'telegram': 'https://t.me/relax_salon'
        }
    }

def create_upload_folder():
    """–°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–æ–∫"""
    upload_folder = 'static/img/uploads'
    if not os.path.exists(upload_folder):
        os.makedirs(upload_folder)
    return upload_folder

def allowed_file(filename):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤"""
    ALLOWED_EXTENSIONS = {'png', 'jpg', 'jpeg', 'gif', 'svg'}
    return '.' in filename and \
           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS

def get_file_size_mb(file_path):
    """–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ –≤ –ú–ë"""
    try:
        size_bytes = os.path.getsize(file_path)
        return size_bytes / (1024 * 1024)
    except OSError:
        return 0










================================================================================
–§–ê–ô–õ: models/service.py
================================================================================
from .database import db
from datetime import datetime
import json

class Service(db.Model):
    __tablename__ = 'services'

    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(100), nullable=False, unique=True)
    description = db.Column(db.Text, nullable=True)
    category = db.Column(db.String(50), nullable=False, default='massage')  # ‚úÖ –°—Ç–∞—Ä–æ–µ –ø–æ–ª–µ (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
    category_id = db.Column(db.Integer, db.ForeignKey('categories.id'), nullable=True)  # ‚úÖ –°–≤—è–∑—å —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π
    base_duration = db.Column(db.Integer, nullable=False, default=60)  # ‚úÖ –ó–∞–º–µ–Ω–∏–ª–∏ duration_minutes
    duration_prices = db.Column(db.JSON, nullable=False, default=dict)  # ‚úÖ –ù–æ–≤–æ–µ –ø–æ–ª–µ –¥–ª—è –≥–∏–±–∫–∏—Ö —Ü–µ–Ω
    is_active = db.Column(db.Boolean, default=True)
    created_at = db.Column(db.DateTime, default=datetime.utcnow)  # ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ
    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)  # ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

    # –°–≤—è–∑–∏
    bookings = db.relationship('Booking', back_populates='service', lazy=True)
    category_obj = db.relationship('Category', back_populates='services', lazy=True)  # ‚úÖ –°–≤—è–∑—å —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π

    def __init__(self, **kwargs):
        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º created_at –∏ updated_at
        if 'created_at' not in kwargs:
            kwargs['created_at'] = datetime.utcnow()
        if 'updated_at' not in kwargs:
            kwargs['updated_at'] = datetime.utcnow()
        
        # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º duration_prices –≤ —Å–ª–æ–≤–∞—Ä—å –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
        if 'duration_prices' in kwargs and isinstance(kwargs['duration_prices'], str):
            kwargs['duration_prices'] = json.loads(kwargs['duration_prices'])
            
        super().__init__(**kwargs)

    def __repr__(self):
        return f'<Service {self.name}>'

    def to_dict(self):
        """–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Å–ª–æ–≤–∞—Ä—å –¥–ª—è API –∏ —à–∞–±–ª–æ–Ω–æ–≤"""
        # –ü–æ–ª—É—á–∞–µ–º –±–∞–∑–æ–≤—É—é —Ü–µ–Ω—É –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
        base_price = self.get_price(self.base_duration)
        if base_price is None:
            # –ï—Å–ª–∏ —Ü–µ–Ω–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –ø—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –ø–æ–ª—è price (–µ—Å–ª–∏ –µ—Å—Ç—å)
            # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é —Ü–µ–Ω—É –∏–∑ duration_prices
            if self.duration_prices and isinstance(self.duration_prices, dict) and self.duration_prices:
                base_price = min(self.duration_prices.values())
            else:
                base_price = 0
        
        # –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –ø–æ–ª—è
        category_name = self.category
        if self.category_obj:
            category_name = self.category_obj.name
        elif self.category_id:
            # –ï—Å–ª–∏ –µ—Å—Ç—å category_id, –Ω–æ –æ–±—ä–µ–∫—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ä–æ–µ –ø–æ–ª–µ category
            category_name = self.category
        
        result = {
            'id': self.id,
            'name': self.name,
            'description': self.description,
            'category': category_name,  # ‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            'category_id': self.category_id,  # ‚úÖ ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            'base_duration': self.base_duration,
            'duration_prices': self.duration_prices,  # ‚úÖ –í—Å–µ —Ü–µ–Ω—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π
            'available_durations': self.get_available_durations(),  # ‚úÖ –ù–æ–≤—ã–π –º–µ—Ç–æ–¥
            'min_price': self.get_min_price(),  # ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
            'max_price': self.get_max_price(),  # ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
            'is_active': self.is_active,
            'created_at': self.created_at.isoformat() if self.created_at else None,
            'updated_at': self.updated_at.isoformat() if self.updated_at else None,
            # ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –¥–ª—è —Å—Ç–∞—Ä—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
            'duration_minutes': self.base_duration,  # –î–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
            'duration': self.base_duration,  # –î–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
            'price': base_price,  # –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
            # ‚úÖ –§–æ—Ä–º–∏—Ä—É–µ–º durations –≤ —Å—Ç–∞—Ä–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
            'durations': [
                {
                    'minutes': int(duration),
                    'price': price,
                    'default': duration == str(self.base_duration)
                }
                for duration, price in sorted(self.duration_prices.items(), key=lambda x: int(x[0]))
            ] if self.duration_prices else [
                {
                    'minutes': self.base_duration,
                    'price': base_price,
                    'default': True
                }
            ]
        }
        return result

    # ‚úÖ –ù–û–í–´–ï –ú–ï–¢–û–î–´ –î–õ–Ø –†–ê–ë–û–¢–´ –° –¶–ï–ù–ê–ú–ò:

    def get_price(self, duration=None):
        """–ü–æ–ª—É—á–∏—Ç—å —Ü–µ–Ω—É –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–π –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏"""
        if duration is None:
            duration = self.base_duration
        
        # –ï—Å–ª–∏ duration_prices –ø—É—Å—Ç–æ–π, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º None
        if not self.duration_prices or not isinstance(self.duration_prices, dict):
            return None
        
        return self.duration_prices.get(str(duration))

    def get_available_durations(self):
        """–ü–æ–ª—É—á–∏—Ç—å –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π"""
        durations = [int(d) for d in self.duration_prices.keys()]
        return sorted(durations)

    def get_min_price(self):
        """–ü–æ–ª—É—á–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é —Ü–µ–Ω—É"""
        return min(self.duration_prices.values()) if self.duration_prices else 0

    def get_max_price(self):
        """–ü–æ–ª—É—á–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Ü–µ–Ω—É"""
        return max(self.duration_prices.values()) if self.duration_prices else 0

    def is_duration_available(self, duration):
        """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞ –ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å"""
        return str(duration) in self.duration_prices

    def add_duration_price(self, duration, price):
        """–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Ü–µ–Ω—É"""
        self.duration_prices[str(duration)] = price
        self.updated_at = datetime.utcnow()

    def remove_duration(self, duration):
        """–£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å"""
        if str(duration) in self.duration_prices:
            del self.duration_prices[str(duration)]
            self.updated_at = datetime.utcnow()
            return True
        return False

    # ‚úÖ –û–ë–†–ê–¢–ù–ê–Ø –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–¨:

    @property
    def duration_minutes(self):
        """–î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–∞–∑–æ–≤—É—é –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å"""
        return self.base_duration

    @property
    def price(self):
        """–î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–∞–∑–æ–≤—É—é —Ü–µ–Ω—É"""
        return self.get_price(self.base_duration)


================================================================================
–§–ê–ô–õ: models/database.py
================================================================================
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –º–∞—Å—Å–∞–∂–Ω–æ–≥–æ —Å–∞–ª–æ–Ω–∞

PROD: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PostgreSQL –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏.
SQLite –ø–æ–¥—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
"""

from flask_sqlalchemy import SQLAlchemy
from datetime import datetime, date
from typing import Optional, List, Dict
import logging

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–æ–¥–µ–ª–∏, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
# NOTE: Master, Service, Booking, Client, Review –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö

# ==================================================
# üîß –ù–ê–°–¢–†–û–ô–ö–ê –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø
# ==================================================

logger = logging.getLogger(__name__)

# ==================================================
# üóÑÔ∏è –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ë–ê–ó–´ –î–ê–ù–ù–´–•
# ==================================================

db = SQLAlchemy()

# ==================================================
# üìä –ú–û–î–ï–õ–ò –î–ê–ù–ù–´–•
# ==================================================

# NOTE: –ú–æ–¥–µ–ª—å Master –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ models/master.py, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è


# NOTE: –ú–æ–¥–µ–ª—å Service –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ models/service.py

class ServiceDuration(db.Model):
    """
    –ú–æ–¥–µ–ª—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —É—Å–ª—É–≥–∏.
    
    NOTE: –ü–æ–∑–≤–æ–ª—è–µ—Ç –≥–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å —É—Å–ª—É–≥ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—Ä–µ–º–µ–Ω–∏.
    """
    __tablename__ = 'service_durations'
    
    id = db.Column(db.Integer, primary_key=True)
    service_id = db.Column(db.Integer, db.ForeignKey('services.id'), nullable=False)
    duration_minutes = db.Column(db.Integer, nullable=False)
    price = db.Column(db.Integer, nullable=False)
    is_default = db.Column(db.Boolean, default=False)
    is_active = db.Column(db.Boolean, default=True)
    
    def __repr__(self):
        return f'<ServiceDuration {self.duration_minutes}min - {self.price}—Ä—É–±>'
    
    def to_dict(self) -> Dict:
        """–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Å–ª–æ–≤–∞—Ä—å –¥–ª—è API."""
        return {
            'minutes': self.duration_minutes,
            'price': self.price,
            'default': self.is_default
        }


# NOTE: –ú–æ–¥–µ–ª—å Booking –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ models/booking.py

# NOTE: –ú–æ–¥–µ–ª—å Review –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ models/review.py

# ==================================================
# üîß –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò
# ==================================================

def init_database(app):
    """
    –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º Flask.
    
    Args:
        app: –≠–∫–∑–µ–º–ø–ª—è—Ä Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        
    PROD: –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ Alembic –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º–æ–π –ë–î.
    """
    try:
        db.init_app(app)
        
        with app.app_context():
            # PROD: –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
            db.create_all()
            logger.info("‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞")
            
            # NOTE: –ó–∞–ø–æ–ª–Ω—è–µ–º –±–∞–∑—É –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –µ—Å–ª–∏ –æ–Ω–∞ –ø—É—Å—Ç–∞—è
            from .master import Master
            if Master.query.count() == 0:
                populate_initial_data()
                logger.info("‚úÖ –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã")
                
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: {e}")
        raise


def populate_initial_data():
    """
    –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.
    
    NOTE: –ó–∞–≥—Ä—É–∂–∞–µ—Ç –º–∞—Å—Ç–µ—Ä–æ–≤, —É—Å–ª—É–≥–∏ –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–∑ JSON —Ñ–∞–π–ª–æ–≤.
    """
    try:
        import json
        import os
        
        # –ó–∞–≥—Ä—É–∂–∞–µ–º –º–∞—Å—Ç–µ—Ä–æ–≤
        masters_file = os.path.join(os.path.dirname(__file__), '..', 'data', 'masters.json')
        if os.path.exists(masters_file):
            with open(masters_file, 'r', encoding='utf-8') as f:
                masters_data = json.load(f)
                
            for master_data in masters_data:
                master = Master(
                    id=master_data['id'],
                    name=master_data['name'],
                    specialization=master_data['specialization']
                )
                db.session.add(master)
        
        # –ó–∞–≥—Ä—É–∂–∞–µ–º —É—Å–ª—É–≥–∏
        services_file = os.path.join(os.path.dirname(__file__), '..', 'data', 'services.json')
        if os.path.exists(services_file):
            with open(services_file, 'r', encoding='utf-8') as f:
                services_data = json.load(f)
                
            for service_data in services_data:
                from .service import Service
                service = Service(
                    id=service_data['id'],
                    name=service_data['name'],
                    base_price=service_data['durations'][0]['price']  # –ë–µ—Ä–µ–º –±–∞–∑–æ–≤—É—é —Ü–µ–Ω—É
                )
                db.session.add(service)
                db.session.flush()  # –ü–æ–ª—É—á–∞–µ–º ID —Å–µ—Ä–≤–∏—Å–∞
                
                # –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
                for duration_data in service_data['durations']:
                    duration = ServiceDuration(
                        service_id=service.id,
                        duration_minutes=duration_data['minutes'],
                        price=duration_data['price'],
                        is_default=duration_data.get('default', False)
                    )
                    db.session.add(duration)
        
        db.session.commit()
        logger.info("‚úÖ –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã")
        
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö: {e}")
        db.session.rollback()
        raise


def get_master_by_id(master_id: int) -> Optional['Master']:
    """
    –ü–æ–ª—É—á–∏—Ç—å –º–∞—Å—Ç–µ—Ä–∞ –ø–æ ID.
    
    Args:
        master_id: ID –º–∞—Å—Ç–µ—Ä–∞
        
    Returns:
        Master –∏–ª–∏ None –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω
    """
    try:
        from .master import Master
        return Master.query.filter_by(id=master_id, is_active=True).first()
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –º–∞—Å—Ç–µ—Ä–∞ {master_id}: {e}")
        return None


def get_service_by_id(service_id: int):
    # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º Service –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
    from .service import Service
    """
    –ü–æ–ª—É—á–∏—Ç—å —É—Å–ª—É–≥—É –ø–æ ID.
    
    Args:
        service_id: ID —É—Å–ª—É–≥–∏
        
    Returns:
        Service –∏–ª–∏ None –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
    """
    try:
        return Service.query.filter_by(id=service_id, is_active=True).first()
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —É—Å–ª—É–≥–∏ {service_id}: {e}")
        return None


def get_service_price(service_id: int, duration_minutes: int) -> int:
    """
    –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å —É—Å–ª—É–≥–∏ –ø–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
    
    Args:
        service_id: ID —É—Å–ª—É–≥–∏
        duration_minutes: –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∏–Ω—É—Ç–∞—Ö
        
    Returns:
        –°—Ç–æ–∏–º–æ—Å—Ç—å –≤ —Ä—É–±–ª—è—Ö
    """
    try:
        duration = ServiceDuration.query.filter_by(
            service_id=service_id,
            duration_minutes=duration_minutes,
            is_active=True
        ).first()
        
        if duration:
            return duration.price
        
        # FALLBACK: –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø–æ –±–∞–∑–æ–≤–æ–π —Ü–µ–Ω–µ
        service = get_service_by_id(service_id)
        if service:
            return int(service.base_price * duration_minutes / 60)
        
        return 0
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏: {e}")
        return 0


def create_booking_from_form(form_data: Dict):
    # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º Booking –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
    from .booking import Booking
    """
    –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –∏–∑ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã.
    
    Args:
        form_data: –î–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–æ—Ä–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
        
    Returns:
        Booking –∏–ª–∏ None –ø—Ä–∏ –æ—à–∏–±–∫–µ
    """
    try:
        from datetime import datetime, date, time
        
        # –ü–∞—Ä—Å–∏–º –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è
        booking_date = datetime.strptime(form_data['date'], '%Y-%m-%d').date()
        booking_time = datetime.strptime(form_data['time'], '%H:%M').time()
        duration_minutes = int(form_data.get('session_duration', 60))
        
        # –ü–æ–ª—É—á–∞–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å
        total_price = get_service_price(
            int(form_data['service_id']),
            duration_minutes
        )
        
        booking = Booking(
            client_name=form_data['name'],
            client_phone=form_data['phone'],
            master_id=int(form_data['master_id']),
            service_id=int(form_data['service_id']),
            booking_date=booking_date,
            booking_time=booking_time,
            duration_minutes=duration_minutes,
            total_price=total_price,
            contraindications=form_data.get('contraindications', ''),
            preferences=form_data.get('preferences', '')
        )
        
        db.session.add(booking)
        db.session.commit()
        
        logger.info(f"‚úÖ –ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞: {booking}")
        return booking
        
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏: {e}")
        db.session.rollback()
        return None


def get_bookings_by_date(date: date):
    # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º Booking –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
    from .booking import Booking
    """
    –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –¥–∞—Ç—É.
    
    Args:
        date: –î–∞—Ç–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞
        
    Returns:
        –°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π
    """
    try:
        return Booking.query.filter_by(booking_date=date).all()
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –Ω–∞ {date}: {e}")
        return []


def get_master_bookings_by_date(master_id: int, date: date):
    # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º Booking –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
    from .booking import Booking
    """
    –ü–æ–ª—É—á–∏—Ç—å –∑–∞–ø–∏—Å–∏ –º–∞—Å—Ç–µ—Ä–∞ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –¥–∞—Ç—É.
    
    Args:
        master_id: ID –º–∞—Å—Ç–µ—Ä–∞
        date: –î–∞—Ç–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞
        
    Returns:
        –°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π –º–∞—Å—Ç–µ—Ä–∞
    """
    try:
        return Booking.query.filter_by(
            master_id=master_id,
            booking_date=date
        ).all()
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –º–∞—Å—Ç–µ—Ä–∞ {master_id} –Ω–∞ {date}: {e}")
        return []



================================================================================
–§–ê–ô–õ: models/client.py
================================================================================
from .database import db
from datetime import datetime  # ‚Üê –¥–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ

class Client(db.Model):
    __tablename__ = 'clients'

    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(100), nullable=False)
    phone = db.Column(db.String(20), nullable=False)
    telegram_chat_id = db.Column(db.String(50), nullable=True)
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)

    # –°–≤—è–∑–∏
    bookings = db.relationship('Booking', back_populates='client', lazy=True)

    def __repr__(self):
        return f'<Client {self.name} - {self.phone}>'

    def to_dict(self):
        return {
            'id': self.id,
            'name': self.name,
            'phone': self.phone,
            'telegram_chat_id': self.telegram_chat_id,
            'created_at': self.created_at.isoformat() if self.created_at else None
        }


================================================================================
–§–ê–ô–õ: models/booking.py
================================================================================
# -*- coding: utf-8 -*-
"""
–ú–æ–¥–µ–ª—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
"""

from datetime import datetime
from .database import db

class Booking(db.Model):
    """–ú–æ–¥–µ–ª—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–µ–∞–Ω—Å–∞ –º–∞—Å—Å–∞–∂–∞"""
    __tablename__ = 'bookings'
    
    id = db.Column(db.Integer, primary_key=True)
    client_id = db.Column(db.Integer, db.ForeignKey('clients.id'), nullable=False)
    service_id = db.Column(db.Integer, db.ForeignKey('services.id'), nullable=False)
    booking_date = db.Column(db.Date, nullable=False)
    booking_time = db.Column(db.Time, nullable=False)
    duration_minutes = db.Column(db.Integer, nullable=False)
    status = db.Column(db.String(20), default='confirmed')  # confirmed, cancelled, completed
    contraindications = db.Column(db.Text, nullable=True)
    preferences = db.Column(db.Text, nullable=True)
    calendar_event_id = db.Column(db.String(200), nullable=True)
    calendar_link = db.Column(db.String(500), nullable=True)
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
    client_ip = db.Column(db.String(45))  # –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è IP
    
    # –°–≤—è–∑–∏
    # NOTE: backref —É–∂–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ Client –∏ Service –º–æ–¥–µ–ª—è—Ö
    client = db.relationship('Client', back_populates='bookings', lazy=True)
    service = db.relationship('Service', back_populates='bookings', lazy=True)
    
    def __repr__(self):
        return f'<Booking {self.client.name if self.client else "Unknown"} - {self.booking_date} {self.booking_time}>'
    
    def to_dict(self):
        """–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Å–ª–æ–≤–∞—Ä—å –¥–ª—è API"""
        return {
            'id': self.id,
            'client': self.client.to_dict() if self.client else None,
            'service': self.service.to_dict() if self.service else None,
            'booking_date': self.booking_date.isoformat() if self.booking_date else None,
            'booking_time': self.booking_time.strftime('%H:%M') if self.booking_time else None,
            'duration_minutes': self.duration_minutes,
            'status': self.status,
            'contraindications': self.contraindications,
            'preferences': self.preferences,
            'calendar_event_id': self.calendar_event_id,
            'calendar_link': self.calendar_link,
            'created_at': self.created_at.isoformat() if self.created_at else None,
            'updated_at': self.updated_at.isoformat() if self.updated_at else None
        }










================================================================================
–§–ê–ô–õ: models/__init__.py
================================================================================
# -*- coding: utf-8 -*-
"""
–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –º–∞—Å—Å–∞–∂–Ω–æ–≥–æ —Å–∞–ª–æ–Ω–∞
"""

from .database import db
from .booking import Booking
from .master import Master
from .review import Review
from .client import Client
from .service import Service
from .category import Category

__all__ = ['db', 'Booking', 'Master', 'Review', 'Client', 'Service', 'Category']









================================================================================
–§–ê–ô–õ: models/review.py
================================================================================
# -*- coding: utf-8 -*-
"""
–ú–æ–¥–µ–ª—å –æ—Ç–∑—ã–≤–∞
"""

from datetime import datetime
from .database import db

class Review(db.Model):
    """–ú–æ–¥–µ–ª—å –æ—Ç–∑—ã–≤–∞ –∫–ª–∏–µ–Ω—Ç–∞"""
    __tablename__ = 'reviews'
    
    id = db.Column(db.Integer, primary_key=True)
    client_name = db.Column(db.String(100), nullable=False)
    client_photo = db.Column(db.String(200), nullable=True)
    
    rating = db.Column(db.Integer, nullable=False)  # 1-5 –∑–≤–µ–∑–¥
    text = db.Column(db.Text, nullable=False)
    
    master_id = db.Column(db.Integer, db.ForeignKey('masters.id'), nullable=True)
    service_id = db.Column(db.String(50), nullable=True)
    
    is_approved = db.Column(db.Boolean, default=False)  # –ú–æ–¥–µ—Ä–∞—Ü–∏—è –æ—Ç–∑—ã–≤–æ–≤
    is_featured = db.Column(db.Boolean, default=False)  # –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –æ—Ç–∑—ã–≤—ã
    
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
    
    # –°–≤—è–∑–∏
    master = db.relationship('Master', backref=db.backref('reviews', lazy=True))
    
    def __repr__(self):
        return f'<Review {self.client_name} - {self.rating} stars>'
    
    def to_dict(self):
        """–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Å–ª–æ–≤–∞—Ä—å –¥–ª—è API"""
        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º created_at (–º–æ–∂–µ—Ç –±—ã—Ç—å datetime –∏–ª–∏ —Å—Ç—Ä–æ–∫–∞)
        created_at = self.created_at
        if isinstance(created_at, datetime):
            created_at = created_at
        elif isinstance(created_at, str):
            try:
                created_at = datetime.fromisoformat(created_at.replace('Z', '+00:00'))
            except:
                created_at = None
        
        return {
            'id': self.id,
            'client_name': self.client_name,
            'client_photo': self.client_photo,
            'title': getattr(self, 'title', None),  # –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—è title (–º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –ë–î)
            'rating': self.rating,
            'text': self.text,
            'master_id': self.master_id,
            'service_id': self.service_id,
            'is_approved': self.is_approved,
            'is_featured': self.is_featured,
            'created_at': created_at if created_at else None,
            'updated_at': self.updated_at.isoformat() if self.updated_at and isinstance(self.updated_at, datetime) else None
        }










================================================================================
–§–ê–ô–õ: models/master.py
================================================================================
# -*- coding: utf-8 -*-
"""
–ú–æ–¥–µ–ª—å –º–∞—Å—Ç–µ—Ä–∞
"""

from datetime import datetime
from .database import db

class Master(db.Model):
    """–ú–æ–¥–µ–ª—å –º–∞—Å—Ç–µ—Ä–∞ –º–∞—Å—Å–∞–∂–∞"""
    __tablename__ = 'masters'
    
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(100), nullable=False)
    position = db.Column(db.String(100), nullable=False)
    experience = db.Column(db.String(50), nullable=False)
    specialization = db.Column(db.Text, nullable=False)
    photo = db.Column(db.String(200), nullable=True)
    
    bio = db.Column(db.Text, nullable=True)
    education = db.Column(db.Text, nullable=True)
    certificates = db.Column(db.Text, nullable=True)  # JSON —Å—Ç—Ä–æ–∫–∞ —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏
    
    is_active = db.Column(db.Boolean, default=True)
    order = db.Column(db.Integer, default=0)  # –ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
    
    def __repr__(self):
        return f'<Master {self.name}>'
    
    def to_dict(self):
        """–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Å–ª–æ–≤–∞—Ä—å –¥–ª—è API"""
        return {
            'id': self.id,
            'name': self.name,
            'position': self.position,
            'experience': self.experience,
            'specialization': self.specialization,
            'photo': self.photo,
            'bio': self.bio,
            'education': self.education,
            'certificates': self.certificates,
            'is_active': self.is_active,
            'order': self.order,
            'created_at': self.created_at.isoformat() if self.created_at else None,
            'updated_at': self.updated_at.isoformat() if self.updated_at else None
        }










================================================================================
–§–ê–ô–õ: models/category.py
================================================================================
from .database import db
from datetime import datetime

class Category(db.Model):
    """–ú–æ–¥–µ–ª—å –∫–∞—Ç–µ–≥–æ—Ä–∏–π —É—Å–ª—É–≥"""
    __tablename__ = 'categories'

    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(100), nullable=False, unique=True)
    description = db.Column(db.Text, nullable=True)
    order = db.Column(db.Integer, default=0)
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)

    # –°–≤—è–∑—å —Å —É—Å–ª—É–≥–∞–º–∏
    services = db.relationship('Service', back_populates='category_obj', lazy=True)

    def __init__(self, **kwargs):
        if 'created_at' not in kwargs:
            kwargs['created_at'] = datetime.utcnow()
        if 'updated_at' not in kwargs:
            kwargs['updated_at'] = datetime.utcnow()
        super().__init__(**kwargs)

    def __repr__(self):
        return f'<Category {self.name}>'

    def to_dict(self):
        """–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Å–ª–æ–≤–∞—Ä—å –¥–ª—è API –∏ —à–∞–±–ª–æ–Ω–æ–≤"""
        return {
            'id': self.id,
            'name': self.name,
            'description': self.description,
            'order': self.order,
            'created_at': self.created_at.isoformat() if self.created_at else None,
            'updated_at': self.updated_at.isoformat() if self.updated_at else None
        }










================================================================================
–§–ê–ô–õ: static/css/variables.css
================================================================================
/* –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –º–∞—Å—Å–∞–∂–Ω–æ–≥–æ —Å–∞–ª–æ–Ω–∞ */

:root {
    /* –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–≤–µ—Ç–∞ */
    --primary: #056486;
    --primary-light: #0A7FA3;
    --primary-dark: #034A5F;
    
    --secondary: #056486;
    --secondary-light: #0A7FA3;
    --secondary-dark: #034A5F;
    
    --accent: #056486;
    --accent-light: #0A7FA3;
    --accent-dark: #034A5F;
    
    /* –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞ (—Å–≤–µ—Ç–ª–∞—è –ø–∞–ª–∏—Ç—Ä–∞) */
    --white: #FFFFFF;
    --gray-50: #F8F9FA;
    --gray-100: #F1F3F5;
    --gray-200: #E9ECEF;
    --gray-300: #DEE2E6;
    --gray-400: #CED4DA;
    --gray-500: #ADB5BD;
    --gray-600: #6C757D;
    --gray-700: #495057;
    --gray-800: #343A40;
    --gray-900: #212529;
    
    /* –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Ü–≤–µ—Ç–∞ */
    --success: #4CAF50;
    --warning: #FF9800;
    --error: #F44336;
    --info: #2196F3;
    
    /* –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã */
    --gradient-primary: linear-gradient(135deg, var(--primary), var(--secondary));
    --gradient-warm: linear-gradient(135deg, var(--primary), var(--secondary), var(--accent));
    --gradient-hero: linear-gradient(135deg, rgba(5, 100, 134, 0.9), rgba(10, 127, 163, 0.8));
    
    /* –¢–µ–Ω–∏ */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    
    /* –†–∞–¥–∏—É—Å—ã */
    --radius-sm: 0.25rem;
    --radius: 0.5rem;
    --radius-md: 0.75rem;
    --radius-lg: 1rem;
    --radius-xl: 1.5rem;
    --radius-2xl: 2rem;
    --radius-full: 9999px;
    
    /* –û—Ç—Å—Ç—É–ø—ã */
    --space-1: 0.25rem;
    --space-2: 0.5rem;
    --space-3: 0.75rem;
    --space-4: 1rem;
    --space-5: 1.25rem;
    --space-6: 1.5rem;
    --space-8: 2rem;
    --space-10: 2.5rem;
    --space-12: 3rem;
    --space-16: 4rem;
    --space-20: 5rem;
    --space-24: 6rem;
    --space-32: 8rem;
    
    /* –†–∞–∑–º–µ—Ä—ã —à—Ä–∏—Ñ—Ç–æ–≤ */
    --text-xs: 0.75rem;
    --text-sm: 0.875rem;
    --text-base: 1rem;
    --text-lg: 1.125rem;
    --text-xl: 1.25rem;
    --text-2xl: 1.5rem;
    --text-3xl: 1.875rem;
    --text-4xl: 2.25rem;
    --text-5xl: 3rem;
    --text-6xl: 3.75rem;
    --text-7xl: 4.5rem;
    --text-8xl: 6rem;
    --text-9xl: 8rem;
    
    /* –í–µ—Å–∞ —à—Ä–∏—Ñ—Ç–æ–≤ */
    --font-thin: 100;
    --font-light: 300;
    --font-normal: 400;
    --font-medium: 500;
    --font-semibold: 600;
    --font-bold: 700;
    --font-extrabold: 800;
    --font-black: 900;
    
    /* –í—ã—Å–æ—Ç—ã —Å—Ç—Ä–æ–∫ */
    --leading-none: 1;
    --leading-tight: 1.25;
    --leading-snug: 1.375;
    --leading-normal: 1.5;
    --leading-relaxed: 1.625;
    --leading-loose: 2;
    
    /* –ü–µ—Ä–µ—Ö–æ–¥—ã */
    --transition-fast: 150ms ease;
    --transition: 300ms ease;
    --transition-slow: 500ms ease;
    
    /* Z-index */
    --z-dropdown: 1000;
    --z-sticky: 1020;
    --z-fixed: 1030;
    --z-modal-backdrop: 1040;
    --z-modal: 1050;
    --z-popover: 1060;
    --z-tooltip: 1070;
    
    /* –ë—Ä–µ–π–∫–ø–æ–∏–Ω—Ç—ã */
    --breakpoint-sm: 640px;
    --breakpoint-md: 768px;
    --breakpoint-lg: 1024px;
    --breakpoint-xl: 1280px;
    --breakpoint-2xl: 1536px;
    
    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã */
    --container-sm: 640px;
    --container-md: 768px;
    --container-lg: 1024px;
    --container-xl: 1280px;
    --container-2xl: 1536px;
}

/* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ */
@media (prefers-color-scheme: dark) {
    :root {
        --white: #1a1a1a;
        --gray-50: #262626;
        --gray-100: #404040;
        --gray-200: #525252;
        --gray-300: #737373;
        --gray-400: #a3a3a3;
        --gray-500: #d4d4d4;
        --gray-600: #e5e5e5;
        --gray-700: #f5f5f5;
        --gray-800: #fafafa;
        --gray-900: #ffffff;
    }
}


================================================================================
–§–ê–ô–õ: static/css/base.css
================================================================================
/* –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±–∞–∑–æ–≤—ã–π CSS –¥–ª—è –º–∞—Å—Å–∞–∂–Ω–æ–≥–æ —Å–∞–ª–æ–Ω–∞ */

/* –°–±—Ä–æ—Å —Å—Ç–∏–ª–µ–π */
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

/* –ë–∞–∑–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
html {
    font-size: 16px;
    line-height: 1.5;
    scroll-behavior: smooth;
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: var(--text-base);
    font-weight: var(--font-normal);
    line-height: var(--leading-normal);
    color: var(--gray-900);
    background-color: var(--white);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* –¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞ */
h1, h2, h3, h4, h5, h6 {
    font-family: 'Playfair Display', Georgia, serif;
    font-weight: var(--font-bold);
    line-height: var(--leading-tight);
    margin-bottom: var(--space-4);
    color: #056486;
}

h1 { font-size: var(--text-5xl); }
h2 { font-size: var(--text-4xl); }
h3 { font-size: var(--text-3xl); }
h4 { font-size: var(--text-2xl); }
h5 { font-size: var(--text-xl); }
h6 { font-size: var(--text-lg); }

p {
    margin-bottom: var(--space-4);
    color: var(--gray-700);
    line-height: var(--leading-relaxed);
}

/* –°—Å—ã–ª–∫–∏ */
a {
    color: var(--primary);
    text-decoration: none;
    transition: color var(--transition-fast);
}

a:hover {
    color: var(--primary-dark);
    text-decoration: underline;
}

a:focus {
    outline: 2px solid var(--primary);
    outline-offset: 2px;
}

/* –°–ø–∏—Å–∫–∏ */
ul, ol {
    margin-bottom: var(--space-4);
    padding-left: var(--space-6);
}

li {
    margin-bottom: var(--space-2);
}

/* –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è */
img {
    max-width: 100%;
    height: auto;
    display: block;
}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã */
.container {
    width: 100%;
    max-width: var(--container-xl);
    margin: 0 auto;
    padding: 0 var(--space-6);
}

.container-sm {
    max-width: var(--container-sm);
}

.container-md {
    max-width: var(--container-md);
}

.container-lg {
    max-width: var(--container-lg);
}

/* –°–µ—Ç–∫–∞ */
.grid {
    display: grid;
    gap: var(--space-6);
}

.grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
.grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
.grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
.grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }

/* Flexbox */
.flex {
    display: flex;
}

.flex-col {
    flex-direction: column;
}

.items-center {
    align-items: center;
}

.justify-center {
    justify-content: center;
}

.justify-between {
    justify-content: space-between;
}

/* –û—Ç—Å—Ç—É–ø—ã */
.p-0 { padding: 0; }
.p-1 { padding: var(--space-1); }
.p-2 { padding: var(--space-2); }
.p-3 { padding: var(--space-3); }
.p-4 { padding: var(--space-4); }
.p-6 { padding: var(--space-6); }
.p-8 { padding: var(--space-8); }

.m-0 { margin: 0; }
.m-1 { margin: var(--space-1); }
.m-2 { margin: var(--space-2); }
.m-3 { margin: var(--space-3); }
.m-4 { margin: var(--space-4); }
.m-6 { margin: var(--space-6); }
.m-8 { margin: var(--space-8); }

.mb-0 { margin-bottom: 0; }
.mb-2 { margin-bottom: var(--space-2); }
.mb-4 { margin-bottom: var(--space-4); }
.mb-6 { margin-bottom: var(--space-6); }
.mb-8 { margin-bottom: var(--space-8); }

.mt-0 { margin-top: 0; }
.mt-2 { margin-top: var(--space-2); }
.mt-4 { margin-top: var(--space-4); }
.mt-6 { margin-top: var(--space-6); }
.mt-8 { margin-top: var(--space-8); }

/* –¢–µ–∫—Å—Ç */
.text-center { text-align: center; }
.text-left { text-align: left; }
.text-right { text-align: right; }

.text-xs { font-size: var(--text-xs); }
.text-sm { font-size: var(--text-sm); }
.text-base { font-size: var(--text-base); }
.text-lg { font-size: var(--text-lg); }
.text-xl { font-size: var(--text-xl); }
.text-2xl { font-size: var(--text-2xl); }
.text-3xl { font-size: var(--text-3xl); }
.text-4xl { font-size: var(--text-4xl); }
.text-5xl { font-size: var(--text-5xl); }

.font-light { font-weight: var(--font-light); }
.font-normal { font-weight: var(--font-normal); }
.font-medium { font-weight: var(--font-medium); }
.font-semibold { font-weight: var(--font-semibold); }
.font-bold { font-weight: var(--font-bold); }

/* –¶–≤–µ—Ç–∞ —Ç–µ–∫—Å—Ç–∞ */
.text-primary { color: var(--primary); }
.text-secondary { color: var(--secondary); }
.text-accent { color: var(--accent); }
.text-white { color: var(--white); }
.text-gray-500 { color: var(--gray-500); }
.text-gray-600 { color: var(--gray-600); }
.text-gray-700 { color: var(--gray-700); }
.text-gray-800 { color: var(--gray-800); }
.text-gray-900 { color: var(--gray-900); }

/* –§–æ–Ω—ã */
.bg-primary { background-color: var(--primary); }
.bg-secondary { background-color: var(--secondary); }
.bg-accent { background-color: var(--accent); }
.bg-white { background-color: var(--white); }
.bg-gray-50 { background-color: var(--gray-50); }
.bg-gray-100 { background-color: var(--gray-100); }

/* –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã */
.bg-gradient-primary {
    background: var(--gradient-primary);
}

.bg-gradient-warm {
    background: var(--gradient-warm);
}

/* –¢–µ–Ω–∏ */
.shadow-sm { box-shadow: var(--shadow-sm); }
.shadow { box-shadow: var(--shadow); }
.shadow-md { box-shadow: var(--shadow-md); }
.shadow-lg { box-shadow: var(--shadow-lg); }
.shadow-xl { box-shadow: var(--shadow-xl); }
.shadow-2xl { box-shadow: var(--shadow-2xl); }

/* –†–∞–¥–∏—É—Å—ã */
.rounded-sm { border-radius: var(--radius-sm); }
.rounded { border-radius: var(--radius); }
.rounded-md { border-radius: var(--radius-md); }
.rounded-lg { border-radius: var(--radius-lg); }
.rounded-xl { border-radius: var(--radius-xl); }
.rounded-2xl { border-radius: var(--radius-2xl); }
.rounded-full { border-radius: var(--radius-full); }

/* –ü–µ—Ä–µ—Ö–æ–¥—ã */
.transition { transition: all var(--transition); }
.transition-fast { transition: all var(--transition-fast); }
.transition-slow { transition: all var(--transition-slow); }

/* –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ */
.relative { position: relative; }
.absolute { position: absolute; }
.fixed { position: fixed; }
.sticky { position: sticky; }

/* –í–∏–¥–∏–º–æ—Å—Ç—å */
.hidden { display: none; }
.block { display: block; }
.inline-block { display: inline-block; }

/* –ê–Ω–∏–º–∞—Ü–∏–∏ */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes slideInLeft {
    from { opacity: 0; transform: translateX(-30px); }
    to { opacity: 1; transform: translateX(0); }
}

@keyframes slideInRight {
    from { opacity: 0; transform: translateX(30px); }
    to { opacity: 1; transform: translateX(0); }
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

.animate-fade-in {
    animation: fadeIn 0.6s ease-out;
}

.animate-slide-in-left {
    animation: slideInLeft 0.6s ease-out;
}

.animate-slide-in-right {
    animation: slideInRight 0.6s ease-out;
}

.animate-pulse {
    animation: pulse 2s infinite;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 1024px) {
    .container {
        padding: 0 var(--space-4);
    }
    
    .grid-cols-4 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    .grid-cols-3 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}

@media (max-width: 768px) {
    .container {
        padding: 0 var(--space-3);
    }
    
    .grid-cols-4,
    .grid-cols-3,
    .grid-cols-2 {
        grid-template-columns: repeat(1, minmax(0, 1fr));
    }
    
    h1 { font-size: var(--text-4xl); }
    h2 { font-size: var(--text-3xl); }
    h3 { font-size: var(--text-2xl); }
}

@media (max-width: 480px) {
    .container {
        padding: 0 var(--space-2);
    }
    
    h1 { font-size: var(--text-3xl); }
    h2 { font-size: var(--text-2xl); }
    h3 { font-size: var(--text-xl); }
}


================================================================================
–§–ê–ô–õ: static/css/sections/services.css
================================================================================
/* Services Section Styles */
.services-section {
    padding: 100px 0;
    background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
    position: relative;
}

.services-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

/* Header */
.services-header {
    text-align: center;
    margin-bottom: 60px;
}

.services-title {
    font-size: 3rem;
    font-weight: 700;
    background: linear-gradient(135deg, #ffd166, #ff9e6d);
    margin-bottom: 20px;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.services-divider {
    width: 80px;
    height: 4px;
    background: linear-gradient(45deg, #FFD700, #FFA500, #FF8C00);
    margin: 0 auto 30px;
    border-radius: 2px;
}

.services-subtitle {
    font-size: 1.3rem;
    color: #6c757d;
    font-weight: 300;
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.6;
}

/* Filters */
.services-filters {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 15px;
    margin-bottom: 50px;
}

.filter-btn {
    padding: 12px 24px;
    border: 2px solid #e9ecef;
    background: white;
    color: #6c757d;
    border-radius: 25px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.95rem;
}

.filter-btn:hover {
    border-color: #056486;
    color: #056486;
    transform: translateY(-2px);
}

.filter-btn.active {
    background: linear-gradient(135deg, #056486 0%, #0A7FA3 100%);
    border-color: transparent;
    color: white;
    box-shadow: 0 5px 15px rgba(5, 100, 134, 0.4);
}

/* Categories Grid */
.categories-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
    margin-bottom: 80px;
}

/* Category Card */
.category-card {
    background: white;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    position: relative;
    display: flex;
    flex-direction: column;
}

.category-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(0,0,0,0.15);
}

.category-image {
    position: relative;
    height: 200px;
    background: linear-gradient(135deg, #056486 0%, #0A7FA3 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
}

.category-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
}

.category-card:hover .category-img {
    transform: scale(1.1);
}

.category-content {
    padding: 30px;
    flex: 1;
    display: flex;
    flex-direction: column;
}

.category-name {
    font-size: 1.5rem;
    font-weight: 700;
    color: #056486;
    margin-bottom: 15px;
    text-align: center;
}

.category-description {
    color: #6c757d;
    line-height: 1.6;
    margin-bottom: 20px;
    text-align: center;
    flex: 1;
    font-size: 0.95rem;
}

.category-stats {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 0;
    margin-bottom: 20px;
    border-top: 1px solid #e9ecef;
    border-bottom: 1px solid #e9ecef;
}

.category-count {
    color: #6c757d;
    font-size: 0.9rem;
    font-weight: 500;
}

.category-price {
    font-size: 1.2rem;
    font-weight: 700;
    color: #056486;
}

.category-btn {
    background: #FF6C35 !important;
    color: #ffffff !important;
    border: 1px solid #FF6C35 !important;
    padding: 15px 30px;
    border-radius: 25px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 1rem;
    box-shadow: 0 4px 15px rgba(255, 108, 53, 0.4) !important;
    width: 100%;
}

.category-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 25px rgba(255, 108, 53, 0.6) !important;
    background: #ff7a45 !important;
    border-color: #ff7a45 !important;
}

/* –ö–æ–º–ø–ª–µ–∫—Å—ã */
.complexes-section {
    margin-top: 80px;
    margin-bottom: 60px;
}

.complexes-title {
    font-size: 2.5rem;
    font-weight: 700;
    text-align: center;
    margin-bottom: 50px;
    color: #FF6C35;
    background: linear-gradient(135deg, #cb552a 0%, #FF6C35 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.complex-card {
    position: relative;
}

.complex-duration {
    text-align: center;
    font-size: 1rem;
    color: #6c757d;
    margin-bottom: 10px;
    font-weight: 500;
}

.complex-price {
    text-align: center;
    font-size: 1.5rem;
    font-weight: 700;
    color: #FF6C35;
    margin-bottom: 20px;
}

.complex-items-list {
    list-style: none;
    padding: 0;
    margin: 0 0 25px 0;
    text-align: left;
}

.complex-items-list li {
    padding: 8px 0;
    padding-left: 25px;
    position: relative;
    color: #495057;
    line-height: 1.6;
    font-size: 0.9rem;
}

.complex-items-list li:before {
    content: "‚úì";
    position: absolute;
    left: 0;
    color: #FF6C35;
    font-weight: bold;
    font-size: 1rem;
}

/* Services Grid (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏) */
.services-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 25px;
    margin-bottom: 80px;
}

.service-card {
    background: white;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    position: relative;
}

.service-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(0,0,0,0.15);
}

.service-card.featured {
    border: 2px solid #056486;
}

.service-badge {
    position: absolute;
    top: 20px;
    right: 20px;
    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
    color: white;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
    z-index: 2;
    box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
}

/* Service Image */
.service-image {
    position: relative;
    height: 180px;
    overflow: hidden;
}

.service-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
}

.service-card:hover .service-image img {
    transform: scale(1.1);
}

.service-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(to bottom, transparent 0%, rgba(0,0,0,0.7) 100%);
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    padding: 20px;
    color: white;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.service-card:hover .service-overlay {
    opacity: 1;
}

.service-time, .service-price {
    background: rgba(255,255,255,0.2);
    padding: 5px 12px;
    border-radius: 15px;
    font-size: 0.85rem;
    backdrop-filter: blur(10px);
}

/* Service Content */
.service-content {
    padding: 20px;
}

.service-name {
    font-size: 1.2rem;
    font-weight: 600;
    color: #056486;
    margin-bottom: 12px;
}

.service-description {
    color: #6c757d;
    line-height: 1.5;
    margin-bottom: 15px;
    font-size: 0.9rem;
}

.service-features {
    list-style: none;
    padding: 0;
    margin-bottom: 15px;
}

.service-features li {
    padding: 8px 0;
    color: #5a6c7d;
    position: relative;
    padding-left: 20px;
    font-size: 0.9rem;
}

.service-features li::before {
    content: '‚úì';
    position: absolute;
    left: 0;
    color: #056486;
    font-weight: bold;
}

/* Service Footer */
.service-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 15px;
    border-top: 1px solid #e9ecef;
}

.service-meta {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.duration {
    color: #6c757d;
    font-size: 0.9rem;
}

.price {
    font-size: 1.1rem;
    font-weight: 700;
    color: #056486;
}

.price.discount {
    color: #056486;
}

.price.discount span {
    font-size: 1rem;
    color: #6c757d;
    text-decoration: line-through;
    margin-left: 8px;
}

.service-btn {
    background: #FF6C35 !important;
    color: #ffffff !important;
    border: 1px solid #FF6C35 !important;
    padding: 10px 20px;
    border-radius: 20px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.85rem;
    box-shadow: 0 4px 15px rgba(255, 108, 53, 0.4) !important;
}

.service-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 25px rgba(255, 108, 53, 0.6) !important;
    background: #ff7a45 !important;
    border-color: #ff7a45 !important;
}

.featured-btn {
    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
    box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
}

.featured-btn:hover {
    box-shadow: 0 8px 25px rgba(255, 107, 107, 0.6);
}

/* CTA Section */
.services-cta {
    box-shadow: 0 10px 30px rgba(255, 107, 0, 0.2);
    border-radius: 20px;
    padding: 50px;
    color: white;
    text-align: center;
}

.cta-content {
    max-width: 600px;
    margin: 0 auto;
    position: relative;
    z-index: 2;
}

.cta-text h3 {
    font-size: 2rem;
    margin-bottom: 15px;
    font-weight: 700;
    color: #ffffff !important;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.cta-text h3,
.services-cta .cta-text h3 {
    color: #ffffff !important;
}

.cta-text p {
    font-size: 1.1rem;
    color: #ffffff !important;
    opacity: 1 !important;
    margin-bottom: 30px;
    font-weight: 400;
    text-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);
    line-height: 1.6;
}

.cta-text p,
.services-cta .cta-text p {
    color: #ffffff !important;
}

.cta-actions {
    display: flex;
    gap: 20px;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
}

.cta-phone {
    display: flex;
    align-items: center;
    gap: 10px;
    background: rgba(255,255,255,0.1);
    padding: 15px 25px;
    border-radius: 25px;
    color: white;
    text-decoration: none;
    font-weight: 600;
    font-size: 1.1rem;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
}

.cta-phone:hover {
    background: rgba(255,255,255,0.2);
    transform: translateY(-2px);
}

.phone-icon {
    font-size: 1.2rem;
}

.cta-consultation {
    display: inline-block;
    background: white;
    color: #056486;
    border: none;
    padding: 15px 40px;
    border-radius: 25px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 1.1rem;
    text-decoration: none;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

.cta-consultation:hover {
    transform: translateY(-3px);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
    color: #056486;
}

/* –ê–Ω–∏–º–∞—Ü–∏–∏ */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.service-card {
    animation: fadeInUp 0.6s ease-out;
}

.service-card:nth-child(2) { animation-delay: 0.1s; }
.service-card:nth-child(3) { animation-delay: 0.2s; }
.service-card:nth-child(4) { animation-delay: 0.3s; }
.service-card:nth-child(5) { animation-delay: 0.4s; }
.service-card:nth-child(6) { animation-delay: 0.5s; }

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 1200px) {
    .services-grid {
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    }
}

@media (max-width: 768px) {
    .services-section {
        padding: 60px 0;
    }
    
    .services-title {
        font-size: 2.5rem;
    }
    
    .categories-grid {
        grid-template-columns: 1fr;
        gap: 25px;
    }
    
    .services-grid {
        grid-template-columns: 1fr;
        gap: 25px;
    }
    
    .category-image {
        height: 150px;
    }
    
    .category-icon {
        font-size: 4rem;
    }
    
    .category-content {
        padding: 20px;
    }
    
    .category-name {
        font-size: 1.3rem;
    }
    
    .complexes-section {
        margin-top: 60px;
        margin-bottom: 40px;
    }
    
    .complexes-title {
        font-size: 2rem;
        margin-bottom: 30px;
    }
    
    .complex-price {
        font-size: 1.3rem;
    }
    
    .complex-items-list li {
        font-size: 0.85rem;
        padding: 6px 0;
    }
    
    .services-filters {
        gap: 10px;
    }
    
    .filter-btn {
        padding: 10px 20px;
        font-size: 0.9rem;
    }
    
    .service-content {
        padding: 20px;
    }
    
    .service-image {
        height: 160px;
    }
    
    .service-name {
        font-size: 1.1rem;
    }
    
    .services-cta {
        padding: 40px 25px;
    }
    
    .cta-actions {
        flex-direction: column;
    }
    
    .cta-phone, .cta-consultation {
        width: 100%;
        justify-content: center;
    }
}

@media (max-width: 480px) {
    .services-container {
        padding: 0 15px;
    }
    
    .services-title {
        font-size: 2rem;
    }
    
    .service-footer {
        flex-direction: column;
        gap: 15px;
        align-items: stretch;
    }
    
    .service-meta {
        text-align: center;
    }
}

/* No services message */
.no-services {
    grid-column: 1 / -1;
    text-align: center;
    padding: 3rem 2rem;
    color: #6c757d;
    font-size: 1.2rem;
    font-style: italic;
}


================================================================================
–§–ê–ô–õ: static/css/sections/booking.css
================================================================================
/* ========================================
   BOOKING SECTION STYLES - –°–ï–ö–¶–ò–Ø –ó–ê–ü–ò–°–ò
   ======================================== */

/* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ —Å–µ–∫—Ü–∏–∏ booking */
.booking-section {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 50%, #dee2e6 100%) !important;
    padding: 80px 0 !important;
    position: relative !important;
    overflow: hidden !important;
}

/* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ —Ñ–æ—Ä–º—ã */
.booking-section .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

.booking-section .row {
    display: flex;
    flex-wrap: wrap;
    margin-left: -15px;
    margin-right: -15px;
}

.booking-section .row.justify-content-center {
    justify-content: center;
}

.booking-section .col-lg-8 {
    flex: 0 0 66.666667%;
    max-width: 66.666667%;
    padding-left: 15px;
    padding-right: 15px;
    box-sizing: border-box;
}

.booking-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
        radial-gradient(circle at 20% 80%, rgba(5, 100, 134, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(10, 127, 163, 0.1) 0%, transparent 50%);
    pointer-events: none;
}

.booking-section .section-header {
    margin-bottom: 60px;
    position: relative;
    z-index: 2;
}

.booking-section .section-title {
    font-size: 2.5rem;
    font-weight: 700;
    color: #ffffff !important;
    margin-bottom: 20px;
    text-align: center;
    position: relative;
}

.booking-section .section-title::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 4px;
    background: linear-gradient(45deg, #FFD700, #FFA500, #FF8C00);
    border-radius: 2px;
}

.booking-section .section-subtitle {
    font-size: 1.2rem;
    color: rgba(255, 255, 255, 0.9) !important;
    text-align: center;
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.6;
}

/* –û–±—ë—Ä—Ç–∫–∞ —Ñ–æ—Ä–º—ã */
.booking-section .booking-form-wrapper {
    background: #2A2D2C !important;
    border-radius: 20px;
    padding: 40px;
    box-shadow: 
        0 20px 40px rgba(0, 0, 0, 0.3),
        0 8px 16px rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    position: relative;
    z-index: 2;
    color: #ffffff !important;
}

.booking-section .booking-form-wrapper::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(45deg, #FFD700, #FFA500, #FF8C00);
    border-radius: 20px 20px 0 0;
}

/* –°–µ–∫—Ü–∏–∏ —Ñ–æ—Ä–º—ã */
.booking-section .form-section {
    margin-bottom: 40px;
    padding: 30px;
    background: rgba(42, 45, 44, 0.6);
    border-radius: 15px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.3s ease;
    color: #ffffff !important;
}

.booking-section .form-section:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(5, 100, 134, 0.15);
}

.form-check-label {
	color: #ffffff !important;
}

.booking-section .form-section-title {
    font-size: 1.4rem;
    font-weight: 600;
    color: #ffffff !important;
    margin-bottom: 25px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.booking-section .form-section-title::before {
    content: '‚ú®';
    font-size: 1.2rem;
}

/* –ü–æ–ª—è —Ñ–æ—Ä–º—ã */
.booking-section .form-label {
    font-weight: 600;
    color: #ffffff !important;
    margin-bottom: 8px;
    display: block;
    font-size: 0.95rem;
}

.booking-section .form-input,
.booking-section .form-select,
.booking-section .form-textarea {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 10px;
    font-size: 1rem;
    transition: all 0.3s ease;
    background: rgba(255, 255, 255, 0.1);
    color: #ffffff !important;
    box-sizing: border-box;
    max-width: 100%;
}

.booking-section .form-input:focus,
.booking-section .form-select:focus,
.booking-section .form-textarea:focus {
    outline: none;
    border-color: #FF6C35;
    box-shadow: 0 0 0 3px rgba(255, 108, 53, 0.2);
    transform: translateY(-1px);
    background: rgba(255, 255, 255, 0.15);
}

.booking-section .form-input::placeholder,
.booking-section .form-textarea::placeholder {
    color: rgba(255, 255, 255, 0.6);
    font-style: italic;
}

.booking-section .form-hint {
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.7);
    margin-top: 5px;
    font-style: italic;
}

/* –ö–Ω–æ–ø–∫–∏ */
.booking-section .form-navigation {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 40px;
}

.booking-section .btn-secondary {
    background: linear-gradient(135deg, #6c757d, #495057);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 10px;
    font-weight: 600;
    transition: all 0.3s ease;
    cursor: pointer;
}

.booking-section .btn-secondary:hover {
    background: linear-gradient(135deg, #495057, #343a40);
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(108, 117, 125, 0.3);
}

.booking-section .booking-submit-btn,
.booking-form__form .booking-submit-btn,
#submitBooking,
button#submitBooking,
button.submitBooking {
    background: #FF6C35 !important;
    background-image: none !important;
    color: #ffffff !important;
    border: 1px solid #FF6C35 !important;
    padding: 0.85rem 1.75rem !important;
    border-radius: 12px !important;
    font-size: 0.95rem !important;
    font-weight: 700 !important;
    text-transform: uppercase !important;
    letter-spacing: 0.6px !important;
    cursor: pointer !important;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    box-shadow: 0 4px 20px rgba(255, 108, 53, 0.5), 0 2px 8px rgba(255, 108, 53, 0.3) !important;
    backdrop-filter: blur(10px) !important;
    position: relative !important;
    overflow: visible !important;
    display: inline-block !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 10px !important;
    min-width: auto !important;
    pointer-events: auto !important;
    opacity: 1 !important;
    visibility: visible !important;
    z-index: 10 !important;
    margin: 10px !important;
    text-decoration: none !important;
}

/* –£–±–∏—Ä–∞–µ–º –≤—Å–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ */
#submitBooking:disabled,
.booking-submit-btn:disabled,
button#submitBooking:disabled {
    pointer-events: auto !important;
    cursor: pointer !important;
    opacity: 1 !important;
    background: linear-gradient(135deg, #056486, #0A7FA3) !important;
}

#submitBooking.disabled,
.booking-submit-btn.disabled {
    pointer-events: auto !important;
    cursor: pointer !important;
    opacity: 1 !important;
}

.booking-section .booking-submit-btn:hover,
#submitBooking:hover,
button#submitBooking:hover {
    background: #ff7a45 !important;
    border-color: #ff7a45 !important;
    transform: translateY(-1px) !important;
    box-shadow: 0 8px 30px rgba(255, 108, 53, 0.7), 0 4px 12px rgba(255, 108, 53, 0.5) !important;
    color: #ffffff !important;
    cursor: pointer !important;
}

/* –û—Ç–∫–ª—é—á–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è */
.booking-section .booking-submit-btn::before,
.booking-section .booking-submit-btn.btn::before,
.booking-section .booking-submit-btn.btn-primary::before,
#submitBooking::before,
#submitBooking.btn::before,
#submitBooking.btn-primary::before,
#submitBookingMain::before,
#submitBookingMain.btn::before,
#submitBookingMain.btn-primary::before,
button#submitBooking::before,
button#submitBooking.btn::before,
button#submitBooking.btn-primary::before,
button.submitBooking::before,
button.submitBooking.btn::before,
button.submitBooking.btn-primary::before {
    display: none !important;
    content: none !important;
    background: none !important;
    opacity: 0 !important;
    visibility: hidden !important;
    pointer-events: none !important;
    left: -9999px !important;
    width: 0 !important;
    height: 0 !important;
}

.booking-section .booking-submit-btn:active {
    transform: translateY(-1px);
}

/* –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É */
#submitBooking:disabled,
.booking-submit-btn:disabled {
    pointer-events: auto !important;
    cursor: pointer !important;
    opacity: 1 !important;
}

#submitBooking.disabled,
.booking-submit-btn.disabled {
    pointer-events: auto !important;
    cursor: pointer !important;
    opacity: 1 !important;
}

/* Flash —Å–æ–æ–±—â–µ–Ω–∏—è */
.booking-section .flash-messages {
    margin-bottom: 30px;
}

.booking-section .alert {
    padding: 15px 20px;
    border-radius: 10px;
    border: none;
    font-weight: 500;
    position: relative;
    animation: slideInDown 0.5s ease;
}

.booking-section .alert-success {
    background: linear-gradient(135deg, #d4edda, #c3e6cb);
    color: #155724;
    border-left: 4px solid #28a745;
}

.booking-section .alert-danger {
    background: linear-gradient(135deg, #f8d7da, #f5c6cb);
    color: #721c24;
    border-left: 4px solid #dc3545;
}

.booking-section .btn-close {
    background: none;
    border: none;
    font-size: 1.2rem;
    opacity: 0.7;
    transition: opacity 0.3s ease;
}

.booking-section .btn-close:hover {
    opacity: 1;
}

/* –ê–Ω–∏–º–∞—Ü–∏–∏ */
@keyframes slideInDown {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.booking-section .form-section {
    animation: fadeInUp 0.6s ease forwards;
}

.booking-section .form-section:nth-child(1) { animation-delay: 0.1s; }
.booking-section .form-section:nth-child(2) { animation-delay: 0.2s; }
.booking-section .form-section13665782 { animation-delay: 0.3s; }
.booking-section .form-section:nth-child(4) { animation-delay: 0.4s; }

/* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–æ–∫ –∏ –∫–æ–ª–æ–Ω–æ–∫ —Ñ–æ—Ä–º—ã */
.booking-section .row {
    display: flex;
    flex-wrap: wrap;
    margin-left: -15px;
    margin-right: -15px;
}

.booking-section .row.justify-content-center {
    justify-content: center;
}

.booking-section .col-lg-8 {
    flex: 0 0 66.666667%;
    max-width: 66.666667%;
    padding-left: 15px;
    padding-right: 15px;
    box-sizing: border-box;
}

.booking-section .col-md-6 {
    flex: 0 0 50%;
    max-width: 50%;
    padding-left: 15px;
    padding-right: 15px;
    box-sizing: border-box;
}

/* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª—è –¥–∞—Ç—ã */
.booking-section input[type="date"] {
    box-sizing: border-box !important;
    max-width: 100% !important;
    width: 100% !important;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: textfield;
}

.booking-section input[type="date"]::-webkit-calendar-picker-indicator {
    cursor: pointer;
    padding: 5px;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ –¥–∞—Ç—ã */
.booking-section .date-error-message {
    color: #dc3545;
    font-size: 0.875rem;
    margin-top: 0.25rem;
    display: block;
    animation: fadeIn 0.3s ease-in;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(-5px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–≥–æ –ø–æ–ª—è –¥–∞—Ç—ã */
.booking-section input[type="date"]:invalid {
    border-color: #dc3545;
}

.booking-section input[type="date"]:invalid:focus {
    border-color: #dc3545;
    box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 768px) {
    .booking-section {
        padding: 40px 0;
    }
    
    .booking-section .section-title {
        font-size: 2rem;
    }
    
    .booking-section .section-subtitle {
        font-size: 1rem;
    }
    
    .booking-section .booking-form-wrapper {
        padding: 20px;
        margin: 0 15px;
    }
    
    .booking-section .form-section {
        padding: 20px;
        margin-bottom: 25px;
    }
    
    .booking-section .form-navigation {
        flex-direction: column;
        align-items: center;
    }
    
    .booking-section .booking-submit-btn {
        width: 100%;
        max-width: 300px;
    }
    
    /* –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –∫–æ–ª–æ–Ω–∫–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –ø–æ–ª–Ω–æ–π —à–∏—Ä–∏–Ω—ã */
    .booking-section .col-lg-8 {
        flex: 0 0 100%;
        max-width: 100%;
    }
    
    .booking-section .col-md-6 {
        flex: 0 0 100%;
        max-width: 100%;
        margin-bottom: 15px;
    }
    
    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª—è –¥–∞—Ç—ã –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    .booking-section input[type="date"] {
        font-size: 16px !important; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑—É–º –Ω–∞ iOS */
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
        padding: 12px 10px !important;
    }
    
    .booking-section .row {
        margin-left: 0;
        margin-right: 0;
    }
    
    .booking-section .col-md-6 {
        padding-left: 0;
        padding-right: 0;
    }
}

@media (max-width: 480px) {
    .booking-section .section-title {
        font-size: 1.8rem;
    }
    
    .booking-section .booking-form-wrapper {
        padding: 15px;
        margin: 0 10px;
    }
    
    .booking-section .form-section {
        padding: 15px;
    }
    
    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –¥–ª—è –ø–æ–ª—è –¥–∞—Ç—ã –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
    .booking-section input[type="date"] {
        font-size: 16px !important;
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
        padding: 10px 8px !important;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    
    .booking-section .form-input,
    .booking-section .form-select {
        font-size: 16px !important; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑—É–º –Ω–∞ iOS */
    }
}

/* ========================================
   –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† –°–¢–û–ò–ú–û–°–¢–ò
   ======================================== */

.price-calculator {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border: 2px solid #056486;
    border-radius: 12px;
    padding: 20px;
    margin-top: 15px;
    box-shadow: 0 4px 15px rgba(5, 100, 134, 0.1);
    animation: slideInUp 0.5s ease-out;
}

.price-display {
    text-align: center;
}

.price-display .form-label {
    font-weight: 600;
    color: #056486;
    margin-bottom: 10px;
    font-size: 1.1rem;
}

.price-amount {
    font-size: 2.2rem;
    font-weight: 700;
    color: #056486;
    margin-bottom: 8px;
    text-shadow: 0 2px 4px rgba(5, 100, 134, 0.1);
}

.price-breakdown {
    font-size: 0.9rem;
    color: #6c757d;
}

.price-breakdown #pricePerMinute {
    font-weight: 600;
    color: #056486;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è */
@keyframes slideInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.price-calculator .btn-secondary {
    margin-top: 20px;
    width: 100%;
}

.price-calculator .btn-secondary:hover {
    transform: translateY(-2px);
}

.price-calculator .note {
    font-size: 0.85rem;
    color: #6c757d;
    margin-top: 15px;
    text-align: left;
    line-height: 1.5;
}

/* ========================================
   –°–¢–ò–õ–ò –î–õ–Ø –í–†–ï–ú–ï–ù–ù–´–• –°–õ–û–¢–û–í
   ======================================== */

/* –°—Ç–∏–ª–∏ –¥–ª—è select —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Å–ª–æ—Ç–∞–º–∏ */
.booking-section .form-select option.time-slot-available {
    background-color: rgba(42, 45, 44, 0.9) !important;
    color: #ffffff !important;
    padding: 10px 15px !important;
    font-weight: 600 !important;
    border-left: 4px solid #28a745 !important;
}

.booking-section .form-select option.time-slot-busy {
    background-color: rgba(42, 45, 44, 0.7) !important;
    color: rgba(255, 255, 255, 0.5) !important;
    padding: 10px 15px !important;
    opacity: 0.8;
    border-left: 4px solid #dc3545 !important;
    text-decoration: line-through;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –æ–ø—Ü–∏–π –≤ –≤—ã–ø–∞–¥–∞—é—â–µ–º —Å–ø–∏—Å–∫–µ */
.booking-section .form-select option {
    padding: 10px 15px !important;
    margin: 2px 0 !important;
    border-radius: 5px !important;
    font-size: 1rem !important;
    background-color: rgba(42, 45, 44, 0.9) !important;
    color: #ffffff !important;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –æ–ø—Ü–∏–∏ */
.booking-section .form-select option:checked,
.booking-section .form-select option[selected] {
    background: #FF6C35 !important;
    color: #ffffff !important;
    font-weight: 700 !important;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —Å–∞–º–æ–≥–æ select –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ (–≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö) */
.booking-section .form-select:focus {
    border-color: #0A7FA3;
    box-shadow: 0 0 0 3px rgba(10, 127, 163, 0.1);
}

/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ª—É—á—à–µ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö */
.booking-section .form-select option:hover {
    background-color: #e9ecef !important;
}

.booking-section .form-select option.time-slot-available:hover {
    background-color: #c3e6cb !important;
}

.booking-section .form-select option.time-slot-busy:hover {
    background-color: #f5c6cb !important;
    cursor: not-allowed;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –º–Ω–æ–≥–æ—à–∞–≥–æ–≤–æ–π —Ñ–æ—Ä–º—ã (booking-form__select) */
.booking-form__select option.time-slot-available {
    background-color: #d4edda !important;
    background: linear-gradient(135deg, #d4edda, #c3e6cb) !important;
    color: #155724 !important;
    padding: 10px 15px !important;
    font-weight: 600 !important;
    border-left: 4px solid #28a745 !important;
}

.booking-form__select option.time-slot-busy {
    background-color: #f8d7da !important;
    background: linear-gradient(135deg, #f8d7da, #f5c6cb) !important;
    color: #721c24 !important;
    padding: 10px 15px !important;
    opacity: 0.8;
    border-left: 4px solid #dc3545 !important;
    text-decoration: line-through;
}

.booking-form__select option {
    padding: 10px 15px !important;
    margin: 2px 0 !important;
    border-radius: 5px !important;
    font-size: 1rem !important;
}

.booking-form__select option:checked,
.booking-form__select option[selected] {
    background: linear-gradient(135deg, #8B4513, #D2691E) !important;
    color: white !important;
    font-weight: 700 !important;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å–æ —Å–≤–æ–±–æ–¥–Ω—ã–º–∏ –∏ –∑–∞–Ω—è—Ç—ã–º–∏ —Å–ª–æ—Ç–∞–º–∏ */
.booking-section select option.time-slot-available,
.booking-form__select option.time-slot-available {
    background-color: #d4edda !important;
    color: #155724 !important;
}

.booking-section select option.time-slot-busy,
.booking-form__select option.time-slot-busy {
    background-color: #f8d7da !important;
    color: #721c24 !important;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ */
.privacy-link {
    color: #056486;
    text-decoration: underline;
    cursor: pointer;
    font-weight: 600;
}

.privacy-link:hover {
    color: #0A7FA3;
    text-decoration: none;
}

.privacy-policy-text {
    margin-top: 15px;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 8px;
    font-size: 0.9rem;
    line-height: 1.6;
    color: #555;
    border-left: 3px solid #056486;
}

.privacy-policy-text strong {
    color: #056486;
    display: block;
    margin-bottom: 10px;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —Å–ø–∞–º–∞ */
.hp-field {
    display: none !important;
    opacity: 0 !important;
    position: absolute !important;
    left: -9999px !important;
    height: 0 !important;
    width: 0 !important;
    overflow: hidden !important;
    pointer-events: none !important;
}

#spam-protection-error {
    background: #fff3f3 !important;
    border: 1px solid #ffcdd2 !important;
    border-radius: 8px !important;
    padding: 15px !important;
    margin: 15px 0 !important;
    color: #d32f2f !important;
    font-size: 14px !important;
    line-height: 1.4 !important;
}

#spam-protection-error strong {
    color: #b71c1c !important;
}

/* –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∑–∞—â–∏—Ç—ã –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ñ–æ—Ä–º */
form.no-protection {
    /* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—ã –±–µ–∑ –∑–∞—â–∏—Ç—ã - —Å—Ç–∏–ª–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ */
}

/* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å–ª—É–≥–µ */
.service-info {
    background: rgba(42, 45, 44, 0.6);
    border-radius: 8px;
    padding: 15px;
    margin-top: 15px;
    color: #ffffff !important;
}

.service-details {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin-bottom: 10px;
}

.service-duration,
.service-price {
    font-size: 1rem;
    color: #ffffff !important;
}

.service-duration strong,
.service-price strong {
    color: #FF6C35;
    margin-right: 5px;
}

.service-price {
    color: #FF6C35 !important;
    font-weight: 600;
}

/* –°–æ—Å—Ç–∞–≤ –∫–æ–º–ø–ª–µ–∫—Å–∞ */
.complex-items {
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid #dee2e6;
}

.complex-items strong {
    color: #FF6C35;
    display: block;
    margin-bottom: 10px;
}

.complex-items-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.complex-items-list li {
    padding: 8px 0;
    padding-left: 25px;
    position: relative;
    color: rgba(255, 255, 255, 0.9) !important;
    line-height: 1.6;
}

.complex-items-list li:before {
    content: "‚úì";
    position: absolute;
    left: 0;
    color: #28a745;
    font-weight: bold;
}

/* –ë–ª–æ–∫ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ */
.price-display-block {
    background: rgba(42, 45, 44, 0.8);
    border: 1px solid rgba(255, 108, 53, 0.5);
    border-radius: 8px;
    padding: 20px;
    text-align: center;
    margin-top: 20px;
    margin-bottom: 20px;
}

.price-label {
    color: #ffffff !important;
    font-size: 0.95rem;
    margin-bottom: 8px;
    font-weight: 500;
}

.price-value {
    color: #FF6C35 !important;
    font-size: 1.8rem;
    font-weight: 700;
    line-height: 1.2;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ */
#service-details-section {
    margin-top: 20px;
    padding: 20px;
    background: rgba(42, 45, 44, 0.6);
    border-radius: 8px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #ffffff !important;
}

#service-details-section .form-input[readonly] {
    background-color: rgba(255, 255, 255, 0.05);
    cursor: not-allowed;
    border-color: rgba(255, 255, 255, 0.1);
    color: #ffffff !important;
}

#service-details-section .form-input[readonly]:focus {
    border-color: #FF6C35;
    box-shadow: 0 0 0 0.2rem rgba(255, 108, 53, 0.2);
}

/* –ë–ª–æ–∫ –∫–∞–ª—å–∫—É–ª—è—Ü–∏–∏ */
.calculation-block {
    background: rgba(42, 45, 44, 0.8);
    border: 2px solid rgba(255, 108, 53, 0.5);
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    overflow: hidden;
    margin-top: 20px;
    transition: all 0.3s ease;
    color: #ffffff !important;
}

.calculation-block:hover {
    box-shadow: 0 6px 20px rgba(5, 100, 134, 0.25);
    transform: translateY(-2px);
}

.calculation-header {
    background: #FF6C35;
    padding: 15px 20px;
    color: #ffffff !important;
}

.calculation-title {
    margin: 0;
    font-size: 1.25rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 10px;
}

.calculation-icon {
    font-size: 1.5rem;
}

.calculation-body {
    padding: 20px;
}

.calculation-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 0;
    border-bottom: 1px solid #e9ecef;
}

.calculation-row:last-child {
    border-bottom: none;
}

.calculation-label {
    font-size: 1rem;
    color: rgba(255, 255, 255, 0.9) !important;
    font-weight: 500;
}

.calculation-value {
    font-size: 1rem;
    color: #ffffff !important;
    font-weight: 600;
}

.calculation-divider {
    height: 2px;
    background: linear-gradient(90deg, transparent 0%, #056486 50%, transparent 100%);
    margin: 15px 0;
}

.calculation-total {
    margin-top: 10px;
    padding-top: 15px;
    border-top: 2px solid #056486;
}

.calculation-total .calculation-label {
    font-size: 1.2rem;
    color: #ffffff !important;
    font-weight: 700;
}

.calculation-price {
    font-size: 1.5rem;
    color: #FF6C35 !important;
    font-weight: 700;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª–µ–π –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ */
#service-details-row {
    background: rgba(42, 45, 44, 0.6);
    padding: 20px;
    border-radius: 8px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    margin-top: 15px;
    color: #ffffff !important;
}

#service-details-row .form-input[readonly] {
    background-color: rgba(255, 255, 255, 0.05);
    cursor: not-allowed;
    border-color: rgba(255, 255, 255, 0.1);
    color: #ffffff !important;
}

#service-details-row .form-input[readonly]:focus {
    border-color: #FF6C35;
    box-shadow: 0 0 0 0.2rem rgba(255, 108, 53, 0.2);
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É—Å–ª—É–≥–µ */
@media (max-width: 768px) {
    .service-details {
        flex-direction: column;
        gap: 10px;
    }
    
    .service-info {
        padding: 12px;
    }
    
    .calculation-block {
        margin-top: 15px;
    }
    
    .calculation-header {
        padding: 12px 15px;
    }
    
    .calculation-title {
        font-size: 1.1rem;
    }
    
    .calculation-body {
        padding: 15px;
    }
    
    .calculation-row {
        flex-direction: column;
        align-items: flex-start;
        gap: 5px;
    }
    
    .calculation-total .calculation-label,
    .calculation-price {
        font-size: 1.2rem;
    }
    
    #service-details-row {
        padding: 15px;
    }
    
    #service-details-row .col-md-6 {
        margin-bottom: 15px;
    }
    
    .price-display-block {
        padding: 15px;
        margin-top: 15px;
        margin-bottom: 15px;
    }
    
    .price-label {
        font-size: 0.9rem;
    }
    
    .price-value {
        font-size: 1.5rem;
    }
    
    #service-details-section {
        padding: 15px;
    }
}


================================================================================
–§–ê–ô–õ: static/css/sections/gallery.css
================================================================================
/* Gallery Section Styles */
.gallery-section {
    padding: 100px 0;
    background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
    position: relative;
}

.gallery-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 20px;
}

/* Header */
.gallery-header {
    text-align: center;
    margin-bottom: 60px;
}

.gallery-title {
    font-size: 3rem;
    font-weight: 700;
    color: #056486;
    margin-bottom: 20px;
    background: linear-gradient(135deg, #056486 0%, #0A7FA3 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.gallery-divider {
    width: 80px;
    height: 4px;
    background: linear-gradient(135deg, #056486 0%, #0A7FA3 100%);
    margin: 0 auto 30px;
    border-radius: 2px;
}

.gallery-subtitle {
    font-size: 1.3rem;
    color: #6c757d;
    font-weight: 300;
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.6;
}

/* Filters */
.gallery-filters {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 12px;
    margin-bottom: 50px;
}

.gallery-filter-btn {
    padding: 10px 20px;
    border: 2px solid #e9ecef;
    background: white;
    color: #6c757d;
    border-radius: 20px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.9rem;
}

.gallery-filter-btn:hover {
    border-color: #056486;
    color: #056486;
    transform: translateY(-2px);
}

.gallery-filter-btn.active {
    background: linear-gradient(135deg, #056486 0%, #0A7FA3 100%);
    border-color: transparent;
    color: white;
    box-shadow: 0 5px 15px rgba(5, 100, 134, 0.4);
}

/* Gallery Grid */
.gallery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 25px;
    margin-bottom: 50px;
}

.gallery-item {
    background: white;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    transition: all 0.4s ease;
    position: relative;
    cursor: pointer;
}

.gallery-item:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 40px rgba(0,0,0,0.15);
}

.gallery-item.featured {
    border: 2px solid #056486;
}

.gallery-badge {
    position: absolute;
    top: 15px;
    right: 15px;
    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
    color: white;
    padding: 6px 12px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    z-index: 2;
    box-shadow: 0 4px 12px rgba(255, 107, 107, 0.4);
}

/* Gallery Image */
.gallery-image {
    position: relative;
    height: 250px;
    overflow: hidden;
}

.gallery-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.4s ease;
}

.gallery-item:hover .gallery-img {
    transform: scale(1.08);
}

.gallery-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(to bottom, transparent 0%, rgba(0,0,0,0.7) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.gallery-item:hover .gallery-overlay {
    opacity: 1;
}

.gallery-actions {
    display: flex;
    gap: 10px;
}

.gallery-action-btn {
    background: rgba(255,255,255,0.9);
    border: none;
    width: 45px;
    height: 45px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 1.1rem;
}

.gallery-action-btn:hover {
    background: white;
    transform: scale(1.1);
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}

/* Gallery Info */
.gallery-info {
    padding: 20px;
}

.gallery-item-title {
    font-size: 1.2rem;
    font-weight: 600;
    color: #056486;
    margin-bottom: 8px;
}

.gallery-item-desc {
    color: #6c757d;
    font-size: 0.9rem;
    line-height: 1.5;
    margin: 0;
}

/* Load More Button */
.gallery-load-more {
    text-align: center;
    margin-bottom: 80px;
}

.load-more-btn {
    background: linear-gradient(135deg, #056486 0%, #0A7FA3 100%);
    color: white;
    border: none;
    padding: 15px 40px;
    border-radius: 25px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 1rem;
    box-shadow: 0 5px 15px rgba(5, 100, 134, 0.4);
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 0 auto;
}

.load-more-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(5, 100, 134, 0.6);
}

.load-more-btn:disabled {
    opacity: 0.7;
    cursor: not-allowed;
    transform: none;
}

/* CTA Section */
.gallery-cta {
    background: linear-gradient(135deg, #056486 0%, #034A5F 100%);
    border-radius: 20px;
    padding: 60px 40px;
    color: white;
    text-align: center;
}

.cta-content {
    max-width: 600px;
    margin: 0 auto;
}

.cta-text h3 {
    font-size: 2.2rem;
    margin-bottom: 15px;
    font-weight: 700;
    color: #ffffff !important;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.gallery-cta .cta-text h3 {
    color: #ffffff !important;
}

.cta-text p {
    font-size: 1.1rem;
    opacity: 1 !important;
    margin-bottom: 30px;
    line-height: 1.6;
    color: #ffffff !important;
    font-weight: 400;
    text-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);
}

.gallery-cta .cta-text p {
    color: #ffffff !important;
}

.cta-actions {
    display: flex;
    gap: 20px;
    justify-content: center;
    flex-wrap: wrap;
}

.cta-btn {
    padding: 15px 30px;
    border: none;
    border-radius: 25px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 1rem;
}

.cta-btn-primary {
    background: linear-gradient(135deg, #056486 0%, #0A7FA3 100%);
    color: white;
    box-shadow: 0 5px 15px rgba(5, 100, 134, 0.4);
}

.cta-btn-primary:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 25px rgba(5, 100, 134, 0.6);
}

.cta-btn-secondary {
    background: rgba(255,255,255,0.1);
    color: white;
    border: 2px solid rgba(255,255,255,0.3);
    backdrop-filter: blur(10px);
}

.cta-btn-secondary:hover {
    background: rgba(255,255,255,0.2);
    transform: translateY(-3px);
}

/* Modal Styles */
.gallery-modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.9);
    backdrop-filter: blur(5px);
}

.modal-content {
    position: relative;
    margin: 2% auto;
    width: 90%;
    max-width: 1000px;
    max-height: 90vh;
    animation: modalSlideIn 0.3s ease;
}

@keyframes modalSlideIn {
    from {
        opacity: 0;
        transform: scale(0.8);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

.modal-close {
    position: absolute;
    top: 15px;
    right: 15px;
    color: white;
    font-size: 2.5rem;
    font-weight: bold;
    cursor: pointer;
    z-index: 10;
    transition: color 0.3s ease;
    background: rgba(0,0,0,0.5);
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.modal-close:hover {
    color: #056486;
    background: rgba(255,255,255,0.1);
}

.modal-nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(255,255,255,0.2);
    color: white;
    border: none;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    font-size: 2rem;
    cursor: pointer;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
    display: flex;
    align-items: center;
    justify-content: center;
}

.modal-prev {
    left: 20px;
}

.modal-next {
    right: 20px;
}

.modal-nav:hover {
    background: rgba(255,255,255,0.3);
    transform: translateY(-50%) scale(1.1);
}

.modal-image-container {
    position: relative;
    background: #000;
    border-radius: 10px 10px 0 0;
    overflow: hidden;
}

.modal-image {
    width: 100%;
    max-height: 70vh;
    object-fit: contain;
    display: block;
}

.modal-loader {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 3rem;
    color: white;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.modal-loader.loading {
    opacity: 1;
}

.modal-info {
    background: white;
    padding: 25px;
    border-radius: 0 0 10px 10px;
}

.modal-info h3 {
    color: #056486;
    margin-bottom: 10px;
    font-size: 1.5rem;
}

.modal-info p {
    color: #6c757d;
    line-height: 1.6;
    margin-bottom: 15px;
}

.modal-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-category {
    background: #056486;
    color: white;
    padding: 5px 12px;
    border-radius: 15px;
    font-size: 0.8rem;
    font-weight: 500;
}

.modal-index {
    color: #6c757d;
    font-size: 0.9rem;
}

/* Thumbnails */
.gallery-thumbnails {
    display: none;
    position: fixed;
    bottom: 20px;
    left: 0;
    right: 0;
    z-index: 1001;
}

.thumbnails-container {
    display: flex;
    justify-content: center;
    gap: 10px;
    padding: 15px;
    background: rgba(0,0,0,0.7);
    backdrop-filter: blur(10px);
    border-radius: 15px;
    margin: 0 auto;
    max-width: 90%;
    overflow-x: auto;
}

.thumbnail {
    width: 60px;
    height: 60px;
    border-radius: 8px;
    overflow: hidden;
    cursor: pointer;
    opacity: 0.6;
    transition: all 0.3s ease;
    border: 2px solid transparent;
}

.thumbnail:hover {
    opacity: 0.8;
    transform: scale(1.05);
}

.thumbnail.active {
    opacity: 1;
    border-color: #056486;
    transform: scale(1.1);
}

.thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* –ê–Ω–∏–º–∞—Ü–∏–∏ */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.gallery-item {
    animation: fadeInUp 0.6s ease-out;
}

.gallery-item:nth-child(2) { animation-delay: 0.1s; }
.gallery-item:nth-child(3) { animation-delay: 0.2s; }
.gallery-item:nth-child(4) { animation-delay: 0.3s; }
.gallery-item:nth-child(5) { animation-delay: 0.4s; }
.gallery-item:nth-child(6) { animation-delay: 0.5s; }
.gallery-item:nth-child(7) { animation-delay: 0.6s; }
.gallery-item:nth-child(8) { animation-delay: 0.7s; }
.gallery-item:nth-child(9) { animation-delay: 0.8s; }

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 1200px) {
    .gallery-grid {
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    }
}

@media (max-width: 768px) {
    .gallery-section {
        padding: 60px 0;
    }
    
    .gallery-title {
        font-size: 2.5rem;
    }
    
    .gallery-grid {
        grid-template-columns: 1fr;
        gap: 20px;
    }
    
    .gallery-filters {
        gap: 8px;
    }
    
    .gallery-filter-btn {
        padding: 8px 16px;
        font-size: 0.85rem;
    }
    
    .modal-content {
        width: 95%;
        margin: 5% auto;
    }
    
    .modal-nav {
        width: 50px;
        height: 50px;
        font-size: 1.5rem;
    }
    
    .modal-prev {
        left: 10px;
    }
    
    .modal-next {
        right: 10px;
    }
    
    .cta-actions {
        flex-direction: column;
        align-items: center;
    }
    
    .cta-btn {
        width: 100%;
        max-width: 300px;
    }
}

@media (max-width: 480px) {
    .gallery-container {
        padding: 0 15px;
    }
    
    .gallery-title {
        font-size: 2rem;
    }
    
    .gallery-image {
        height: 200px;
    }
    
    .modal-info {
        padding: 20px 15px;
    }
    
    .thumbnails-container {
        max-width: 95%;
    }
    
    .thumbnail {
        width: 50px;
        height: 50px;
    }
}


================================================================================
–§–ê–ô–õ: static/css/sections/hero.css
================================================================================
/* ============================================================================
   –ì–ï–†–û–ô-–°–ï–ö–¶–ò–Ø (HERO SECTION)
   –û—Å–Ω–æ–≤–Ω–∞—è —Å–µ–∫—Ü–∏—è —Å –ø—Ä–∏–∑—ã–≤–æ–º –∫ –¥–µ–π—Å—Ç–≤–∏—é –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
   ============================================================================ */

/* ----------------------------------------------------------------------------
   –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò –î–õ–Ø –ì–ï–†–û–ô-–°–ï–ö–¶–ò–ò
   ---------------------------------------------------------------------------- */
.hero {
    /* –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–∑–º–µ—Ä—ã */
    position: relative;           /* –î–ª—è –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
    min-height: 100vh;            /* –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ - –≤–µ—Å—å —ç–∫—Ä–∞–Ω */
    min-height: 100dvh;           /* –°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤ */
    
    /* Flexbox –¥–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
    display: flex;
    align-items: center;          /* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ */
    justify-content: center;      /* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ */
    
    /* –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ */
    overflow: hidden;             /* –°–∫—Ä—ã–≤–∞–µ–º –≤—ã—Ö–æ–¥—è—â–∏–π –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –∫–æ–Ω—Ç–µ–Ω—Ç */
    color: white;                 /* –ë–∞–∑–æ–≤—ã–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
    text-align: center;           /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
    
    /* ‚òÖ –§–û–ù–û–í–û–ï –û–§–û–†–ú–õ–ï–ù–ò–ï ‚òÖ */
    background-color: #0C5C75;    /* –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ–Ω–æ–≤—ã–π —Ü–≤–µ—Ç –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
    
    /* –°–≤–æ–π—Å—Ç–≤–∞ —Ñ–æ–Ω–∞ (–∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ background-image) */
    background-size: cover;       /* –ö–∞—Ä—Ç–∏–Ω–∫–∞ —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –≤–µ—Å—å –±–ª–æ–∫ */
    background-position: center center; /* –ö–∞—Ä—Ç–∏–Ω–∫–∞ —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ—Ç—Å—è */
    background-repeat: no-repeat; /* –ó–∞–ø—Ä–µ—Ç –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –∫–∞—Ä—Ç–∏–Ω–∫–∏ */
    
    /* –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è iOS */
    -webkit-overflow-scrolling: touch; /* –ü–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª –Ω–∞ iOS */
}

/* ----------------------------------------------------------------------------
   –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–• –£–°–¢–†–û–ô–°–¢–í (–¥–æ 768px)
   ---------------------------------------------------------------------------- */
@media (max-width: 768px) {
    .hero {
        /* ‚òÖ –î–û–ë–ê–í–õ–Ø–ï–ú –§–û–ù–û–í–£–Æ –ö–ê–†–¢–ò–ù–ö–£ –¢–û–õ–¨–ö–û –ù–ê –ú–û–ë–ò–õ–¨–ù–´–• ‚òÖ */
        /* background-image: url("/static/img/hero/hero-bg.jpg");*/
        
        /* –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
        background-attachment: scroll;  /* –û—Ç–∫–ª—é—á–∞–µ–º fixed –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏ */
        -webkit-backface-visibility: hidden; /* –£–±–∏—Ä–∞–µ–º –º–µ—Ä—Ü–∞–Ω–∏–µ */
        -webkit-transform: translateZ(0);     /* –ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ */
        transform: translateZ(0);             /* –ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ */
        will-change: transform;               /* –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∞–Ω–∏–º–∞—Ü–∏–π */
    }
}

/* ----------------------------------------------------------------------------
   –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ –î–õ–Ø –û–ß–ï–ù–¨ –ú–ê–õ–ï–ù–¨–ö–ò–• –≠–ö–†–ê–ù–û–í (–¥–æ 360px)
   ---------------------------------------------------------------------------- */
@media (max-width: 360px) {
    .hero {
        /* –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–∞—Ä—Ç–∏–Ω–∫–æ–π */
        background-size: cover;
        background-position: center center;
    }
}

/* ----------------------------------------------------------------------------
   –õ–ê–ù–î–®–ê–§–¢–ù–ê–Ø –û–†–ò–ï–ù–¢–ê–¶–ò–Ø –ù–ê –ú–û–ë–ò–õ–¨–ù–´–•
   ---------------------------------------------------------------------------- */
@media (max-height: 500px) and (orientation: landscape) {
    .hero {
        min-height: 120vh;        /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –≤—ã—Å–æ—Ç—É –¥–ª—è –ª–∞–Ω–¥—à–∞—Ñ—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ */
        background-size: cover;
        background-position: center 30%; /* –°–¥–≤–∏–≥–∞–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É –≤–≤–µ—Ä—Ö */
    }
}

/* ----------------------------------------------------------------------------
   –ü–û–î–î–ï–†–ñ–ö–ê RETINA-–≠–ö–†–ê–ù–û–í (–≤—ã—Å–æ–∫–∞—è –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –ø–∏–∫—Å–µ–ª–µ–π)
   ---------------------------------------------------------------------------- */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .hero {
        /* –î–ª—è Retina-—ç–∫—Ä–∞–Ω–æ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ 2x —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ */
        /* background-image: url("/static/img/hero/hero-bg@2x.jpg"); */
    }
}

/* ============================================================================
   –ö–û–ù–¢–ï–ô–ù–ï–†–´ –ò –û–ë–ï–†–¢–ö–ò
   ============================================================================ */

/* ----------------------------------------------------------------------------
   –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ô–ù–ï–†
   ---------------------------------------------------------------------------- */
.container {
    max-width: 1200px;           /* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
    margin: 0 auto;              /* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—Å—Ç—É–ø—ã –ø–æ –±–æ–∫–∞–º */
    padding: 0 20px;             /* –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
    width: 100%;                 /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é –¥–æ—Å—Ç—É–ø–Ω—É—é —à–∏—Ä–∏–Ω—É */
}

/* ----------------------------------------------------------------------------
   –ö–û–ù–¢–ï–ù–¢ –ì–ï–†–û–ô-–°–ï–ö–¶–ò–ò
   ---------------------------------------------------------------------------- */
.hero-content {
    display: flex;
    flex-direction: column;      /* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    align-items: center;         /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
    gap: 2rem;                   /* –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ */
    padding: 4rem 1rem;          /* –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
    
    /* –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ (iOS) */
    padding-top: max(4rem, env(safe-area-inset-top));
    padding-bottom: max(4rem, env(safe-area-inset-bottom));
    
    z-index: 1;                  /* –ö–æ–Ω—Ç–µ–Ω—Ç –ø–æ–≤–µ—Ä—Ö —Ñ–æ–Ω–∞ –∏ –æ–≤–µ—Ä–ª–µ—è */
}

/* ----------------------------------------------------------------------------
   –¢–ï–ö–°–¢–û–í–ê–Ø –û–ë–õ–ê–°–¢–¨
   ---------------------------------------------------------------------------- */
.hero-text {
    max-width: 700px;            /* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ */
}

/* ============================================================================
   –¢–ò–ü–û–ì–†–ê–§–ò–ö–ê –ò –¢–ï–ö–°–¢
   ============================================================================ */

/* ----------------------------------------------------------------------------
   –ó–ê–ì–û–õ–û–í–ö–ò
   ---------------------------------------------------------------------------- */
.hero-title {
    display: block;              /* –ë–ª–æ—á–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ */
    margin-bottom: 1rem;         /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
    text-align: left;          /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ */
}

.hero-title-main {
    display: block;
    font-size: 2.5rem;          /* –ë–∞–∑–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
    font-weight: 400;           /* –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏–µ */
    letter-spacing: 1px;        /* –ú–µ–∂–±—É–∫–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª */
    text-align: center;
    color: white;               /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); /* –¢–µ–Ω—å –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ */
}

.hero-title-accent {
    display: block;
    font-size: 3.5rem;          /* –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä */
    font-weight: 800;           /* –ñ–∏—Ä–Ω–æ–µ –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏–µ */
    letter-spacing: -1px;       /* –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–π –º–µ–∂–±—É–∫–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª */
    margin-top: 0.5rem;         /* –û—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É */
    
    /* –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ç–µ–∫—Å—Ç */
    background: linear-gradient(135deg, #e8ebec, #e3ecef);
    -webkit-background-clip: text;  /* –û–±—Ä–µ–∑–∞–µ–º —Ñ–æ–Ω –ø–æ —Ç–µ–∫—Å—Ç—É */
    -webkit-text-fill-color: transparent; /* –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
    background-clip: text;           /* –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ */
    
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2); /* –¢–µ–Ω—å —Ç–µ–∫—Å—Ç–∞ */
}

/* ----------------------------------------------------------------------------
   –ü–û–î–ó–ê–ì–û–õ–û–í–û–ö
   ---------------------------------------------------------------------------- */
.hero-subtitle {
    font-size: 1.25rem;         /* –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
    margin-bottom: 1rem;        /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
    color: #e0e0e0;             /* –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π —Ü–≤–µ—Ç */
    font-weight: 300;           /* –°–≤–µ—Ç–ª–æ–µ –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏–µ */
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3); /* –õ–µ–≥–∫–∞—è —Ç–µ–Ω—å */
}

/* ----------------------------------------------------------------------------
   –û–°–ù–û–í–ù–û–ô –¢–ï–ö–°–¢
   ---------------------------------------------------------------------------- */
.hero-description {
    font-size: 1.1rem;          /* –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
    margin-bottom: 2rem;        /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
    line-height: 1.7;           /* –ú–µ–∂—Å—Ç—Ä–æ—á–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª */
    color: #f0f0f0;             /* –û—á–µ–Ω—å —Å–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π —Ü–≤–µ—Ç */
    max-width: 600px;           /* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã */
    margin-left: auto;          /* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è */
    margin-right: auto;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3); /* –õ–µ–≥–∫–∞—è —Ç–µ–Ω—å */
}

/* ============================================================================
   –§–ò–ß–ò-–ë–õ–û–ö–ò (–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏)
   ============================================================================ */

.hero-features {
    display: flex;
    justify-content: center;    /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
    gap: 2rem;                  /* –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ */
    margin-bottom: 2.5rem;      /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
    flex-wrap: wrap;            /* –ü–µ—Ä–µ–Ω–æ—Å –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ –º–µ—Å—Ç–∞ */
}

.hero-feature {
    display: flex;
    flex-direction: column;     /* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ */
    align-items: center;        /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
    gap: 0.5rem;                /* –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∏–∫–æ–Ω–∫–æ–π –∏ —Ç–µ–∫—Å—Ç–æ–º */
    min-width: 120px;           /* –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ */
}

.feature-icon {
    font-size: 1.8rem;          /* –†–∞–∑–º–µ—Ä –∏–∫–æ–Ω–∫–∏ */
}

.feature-text {
    font-size: 0.9rem;          /* –†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ */
    font-weight: 500;           /* –°—Ä–µ–¥–Ω–µ–µ –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏–µ */
    text-align: center;         /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ */
}

/* ============================================================================
   –ö–ù–û–ü–ö–ò –ò –ü–†–ò–ó–´–í–´ –ö –î–ï–ô–°–¢–í–ò–Æ
   ============================================================================ */

.hero-actions {
    display: flex;
    gap: 1.5rem;                /* –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ */
    justify-content: center;    /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ */
    flex-wrap: wrap;            /* –ü–µ—Ä–µ–Ω–æ—Å –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É */
}

/* ----------------------------------------------------------------------------
   –ë–ê–ó–û–í–´–ô –°–¢–ò–õ–¨ –ö–ù–û–ü–ö–ò
   ---------------------------------------------------------------------------- */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.8rem 1.5rem;    /* –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
    border: none;              /* –£–±–∏—Ä–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —Ä–∞–º–∫—É */
    border-radius: 8px;        /* –°–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤ */
    text-align: center;
    text-decoration: none;     /* –£–±–∏—Ä–∞–µ–º –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ */
    font-size: 1rem;           /* –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
    font-weight: 600;          /* –ñ–∏—Ä–Ω–æ–µ –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏–µ */
    cursor: pointer;           /* –ö—É—Ä—Å–æ—Ä-—É–∫–∞–∑–∞—Ç–µ–ª—å */
    transition: all 0.3s ease; /* –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã */
    line-height: 1.5;          /* –ú–µ–∂—Å—Ç—Ä–æ—á–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª */
    white-space: nowrap;       /* –ó–∞–ø—Ä–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞ —Ç–µ–∫—Å—Ç–∞ */
    
    /* –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
    -webkit-tap-highlight-color: transparent; /* –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É –ø—Ä–∏ —Ç–∞–ø–µ */
    touch-action: manipulation;               /* –£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∞—Å–∞–Ω–∏–π */
}

/* ----------------------------------------------------------------------------
   –ü–ï–†–í–ò–ß–ù–ê–Ø –ö–ù–û–ü–ö–ê
   ---------------------------------------------------------------------------- */
.btn-primary {
    background: linear-gradient(135deg, #056486, #0A7FA3); /* –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ñ–æ–Ω */
    color: white;               /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
}

.btn-primary:hover {
    background: linear-gradient(135deg, #0A7FA3, #056486); /* –ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç */
    transform: translateY(-2px); /* –õ–µ–≥–∫–∏–π –ø–æ–¥—ä–µ–º */
    box-shadow: 0 8px 20px rgba(5, 100, 134, 0.3); /* –¢–µ–Ω—å –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
}

/* ----------------------------------------------------------------------------
   –ö–ù–û–ü–ö–ê –° –û–ë–í–û–î–ö–û–ô
   ---------------------------------------------------------------------------- */
.btn-outline {
    background: transparent;    /* –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
    border: 2px solid white;   /* –ë–µ–ª–∞—è —Ä–∞–º–∫–∞ */
    color: white;              /* –ë–µ–ª—ã–π —Ç–µ–∫—Å—Ç */
}

.btn-outline:hover {
    background: white;          /* –ë–µ–ª—ã–π —Ñ–æ–Ω –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    color: #056486;            /* –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π —Ç–µ–∫—Å—Ç */
    transform: translateY(-2px); /* –õ–µ–≥–∫–∏–π –ø–æ–¥—ä–µ–º */
    box-shadow: 0 8px 20px rgba(255, 255, 255, 0.2); /* –°–≤–µ—Ç–ª–∞—è —Ç–µ–Ω—å */
}

/* ----------------------------------------------------------------------------
   –†–ê–ó–ú–ï–†–´ –ö–ù–û–ü–û–ö
   ---------------------------------------------------------------------------- */
.btn-xl {
    padding: 1.2rem 2.5rem;    /* –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã */
    font-size: 1.2rem;         /* –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç */
}

.btn-sm {
    padding: 0.6rem 1.2rem;    /* –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã */
    font-size: 0.9rem;         /* –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç */
}

/* ----------------------------------------------------------------------------
   –ò–ö–û–ù–ö–ò –í –ö–ù–û–ü–ö–ê–•
   ---------------------------------------------------------------------------- */
.btn-icon {
    margin-right: 0.5rem;      /* –û—Ç—Å—Ç—É–ø —Å–ø—Ä–∞–≤–∞ –æ—Ç –∏–∫–æ–Ω–∫–∏ */
    font-size: 1.2rem;         /* –†–∞–∑–º–µ—Ä –∏–∫–æ–Ω–∫–∏ */
}

/* ============================================================================
   –ö–ê–†–¢–û–ß–ö–ê –ë–´–°–¢–†–û–ô –ó–ê–ü–ò–°–ò
   ============================================================================ */

.hero-image {
    width: 100%;               /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é —à–∏—Ä–∏–Ω—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
    max-width: 400px;          /* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
}

.hero-card {
    background: rgba(255, 255, 255, 0.92); /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –±–µ–ª—ã–π —Ñ–æ–Ω */
    backdrop-filter: blur(10px);           /* –†–∞–∑–º—ã—Ç–∏–µ —Ñ–æ–Ω–∞ –ø–æ–¥ –∫–∞—Ä—Ç–æ—á–∫–æ–π */
    -webkit-backdrop-filter: blur(10px);   /* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ Safari */
    border-radius: 16px;       /* –°–∏–ª—å–Ω–æ–µ —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤ */
    padding: 1.8rem;           /* –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2); /* –¢–µ–Ω—å –¥–ª—è –≥–ª—É–±–∏–Ω—ã */
    text-align: left;          /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –ø–æ –ª–µ–≤–æ–º—É –∫—Ä–∞—é */
    color: #131111;            /* –¢–µ–º–Ω—ã–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
    
    /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è */
    opacity: 0;
    transform: translateY(20px);
    animation: slideUp 0.8s ease-out 0.5s forwards;
}

@keyframes slideUp {
    to { 
        opacity: 1; 
        transform: translateY(0); 
    }
}

/* ----------------------------------------------------------------------------
   –ó–ê–ì–û–õ–û–í–û–ö –ö–ê–†–¢–û–ß–ö–ò
   ---------------------------------------------------------------------------- */
.hero-card-header {
    margin-bottom: 1.5rem;
    color: #151616!important;     /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
}

.hero-card-title {
    font-size: 1.5rem;         /* –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
    font-weight: 700;          /* –ñ–∏—Ä–Ω–æ–µ –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏–µ */
    margin-bottom: 0.3rem;     /* –ù–µ–±–æ–ª—å—à–æ–π –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
    color: #151616!important;            /* –°–∏–Ω–∏–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
}

.hero-card-subtitle {
    font-size: 0.95rem;        /* –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
    color: #151616!important;               /* –°–µ—Ä—ã–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
    margin: 0;                 /* –£–±–∏—Ä–∞–µ–º –æ—Ç—Å—Ç—É–ø—ã */
}

/* ----------------------------------------------------------------------------
   –°–û–î–ï–†–ñ–ò–ú–û–ï –ö–ê–†–¢–û–ß–ö–ò
   ---------------------------------------------------------------------------- */
.hero-card-content {
    margin-bottom: 1.8rem;     /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
}

.hero-card-item {
    display: flex;
    align-items: center;       /* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ */
    gap: 0.8rem;               /* –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∏–∫–æ–Ω–∫–æ–π –∏ —Ç–µ–∫—Å—Ç–æ–º */
    margin-bottom: 1rem;      /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
}

.hero-card-item:last-child {
    margin-bottom: 0;          /* –£–±–∏—Ä–∞–µ–º –æ—Ç—Å—Ç—É–ø —É –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ */
}

.card-item-icon {
    font-size: 1.5rem;         /* –†–∞–∑–º–µ—Ä –∏–∫–æ–Ω–∫–∏ */
    color: #056486;            /* –°–∏–Ω–∏–π —Ü–≤–µ—Ç –∏–∫–æ–Ω–∫–∏ */
    min-width: 30px;           /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –¥–ª—è –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è */
    text-align: center;        /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ */
}

.card-item-text {
    font-size: 1rem;           /* –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
    font-weight: 500;          /* –°—Ä–µ–¥–Ω–µ–µ –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏–µ */
    color: #151616!important;               /* –¢–µ–º–Ω—ã–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
}

/* ----------------------------------------------------------------------------
   –§–£–¢–ï–† –ö–ê–†–¢–û–ß–ö–ò
   ---------------------------------------------------------------------------- */
.hero-card-footer {
    text-align: center;        /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ */
}

/* ============================================================================
   –ò–ù–î–ò–ö–ê–¢–û–† –ü–†–û–ö–†–£–¢–ö–ò
   ============================================================================ */

.hero-scroll {
    position: absolute;        /* –ê–±—Å–æ–ª—é—Ç–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ */
    bottom: 0.1rem;            /* –û—Ç—Å—Ç—É–ø –æ—Ç –Ω–∏–∂–Ω–µ–≥–æ –∫—Ä–∞—è */
    left: 50%;                 /* –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É */
    transform: translateX(-50%); /* –¢–æ—á–Ω–æ–µ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ */
    z-index: 1;                /* –ü–æ–≤–µ—Ä—Ö –¥—Ä—É–≥–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
    
    /* –£—á–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω—ã –Ω–∞ iOS */
    bottom: max(0.1rem, env(safe-area-inset-bottom));
}

.scroll-indicator {
    display: flex;
    flex-direction: column;    /* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ */
    align-items: center;       /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
    gap: 0.5rem;               /* –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ */
    color: white;              /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
    animation: bounce 2s infinite; /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–¥–ø—Ä—ã–≥–∏–≤–∞–Ω–∏—è */
}

.scroll-text {
    font-size: 0.85rem;        /* –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
    font-weight: 500;          /* –°—Ä–µ–¥–Ω–µ–µ –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏–µ */
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5); /* –¢–µ–Ω—å —Ç–µ–∫—Å—Ç–∞ */
}

.scroll-arrow {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;               /* –®–∏—Ä–∏–Ω–∞ –∫—Ä—É–≥–∞ */
    height: 40px;              /* –í—ã—Å–æ—Ç–∞ –∫—Ä—É–≥–∞ */
    border: 2px solid white;  /* –ë–µ–ª–∞—è —Ä–∞–º–∫–∞ */
    border-radius: 50%;        /* –ö—Ä—É–≥–ª–∞—è —Ñ–æ—Ä–º–∞ */
    color: white;              /* –¶–≤–µ—Ç —Å—Ç—Ä–µ–ª–∫–∏ */
}

@keyframes bounce {
    0%, 20%, 50%, 80%, 100% { 
        transform: translateY(0); 
    }
    40% { 
        transform: translateY(-10px); 
    }
    60% { 
        transform: translateY(-5px); 
    }
}

/* ============================================================================
   –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –≠–õ–ï–ú–ï–ù–¢–´
   ============================================================================ */

/* ----------------------------------------------------------------------------
   –§–û–ù–û–í–û–ï –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ï (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç)
   ---------------------------------------------------------------------------- */
.hero-background {
    position: absolute;        /* –ê–±—Å–æ–ª—é—Ç–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -2;               /* –ü–æ–¥ –æ—Å–Ω–æ–≤–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º */
}

.hero-bg-image {
    width: 100%;
    height: 100%;
    object-fit: cover;         /* –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ */
    
    /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è */
    opacity: 0;
    animation: fadeInBg 1.5s ease-out forwards;
    
    /* –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    backface-visibility: hidden;
}

@keyframes fadeInBg {
    to { 
        opacity: 1; 
    }
}

/* ----------------------------------------------------------------------------
   –ü–ï–†–ï–ö–†–´–í–ê–Æ–©–ò–ô –°–õ–û–ô (–û–í–ï–†–õ–ï–ô)
   ---------------------------------------------------------------------------- */
.hero-overlay {
    position: absolute;        /* –ê–±—Å–æ–ª—é—Ç–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    
    /* –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞ */
    background: linear-gradient(135deg, rgba(0, 55, 86, 0.95), rgba(0, 55, 86, 0.95));
    
    z-index: -1;               /* –ú–µ–∂–¥—É —Ñ–æ–Ω–æ–º –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º */
}

/* ============================================================================
   –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ –î–õ–Ø –ü–õ–ê–ù–®–ï–¢–û–í –ò –î–ï–°–ö–¢–û–ü–û–í (–æ—Ç 769px)
   ============================================================================ */

@media (min-width: 769px) {
    .hero {
        text-align: left;      /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –ø–æ –ª–µ–≤–æ–º—É –∫—Ä–∞—é */
        background-attachment: fixed; /* –≠—Ñ—Ñ–µ–∫—Ç –ø–∞—Ä–∞–ª–ª–∞–∫—Å–∞ –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ */
    }
    
    .hero-content {
        flex-direction: row;   /* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ */
        align-items: center;   /* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ */
        justify-content: space-between; /* –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ */
        gap: 3rem;             /* –£–≤–µ–ª–∏—á–µ–Ω–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ */
        padding: 2rem 1rem;    /* –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã */
    }
    
    .hero-text {
        max-width: 600px;      /* –£–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
        text-align: left;      /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ –ª–µ–≤–æ–º—É –∫—Ä–∞—é */
    }
    
    /* –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —à—Ä–∏—Ñ—Ç–æ–≤ */
    .hero-title-main {
        font-size: 2.8rem;
    }
    
    .hero-title-accent {
        font-size: 4rem;
    }
    
    .hero-subtitle {
        font-size: 1.3rem;
    }
    
    .hero-description {
        font-size: 1.15rem;
    }
    
    /* –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è */
    .hero-features {
        justify-content: flex-start; /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ –ª–µ–≤–æ–º—É –∫—Ä–∞—é */
    }
    
    .hero-actions {
        justify-content: flex-start; /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ –ª–µ–≤–æ–º—É –∫—Ä–∞—é */
    }
    
    /* –†–∞–∑–º–µ—Ä—ã –∫–∞—Ä—Ç–æ—á–∫–∏ */
    .hero-image {
        max-width: 350px;
    }
    
    .hero-card {
        padding: 2rem;         /* –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã */
    }
}

/* ============================================================================
   –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ –î–õ–Ø –ë–û–õ–¨–®–ò–• –≠–ö–†–ê–ù–û–í (–æ—Ç 1024px)
   ============================================================================ */

@media (min-width: 1024px) {
    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —à—Ä–∏—Ñ—Ç–æ–≤ */
    .hero-title-main {
        font-size: 3rem;
    }
    
    .hero-title-accent {
        font-size: 4.5rem;
    }
    
    .hero-subtitle {
        font-size: 1.4rem;
    }
    
    .hero-description {
        font-size: 1.2rem;
    }
    
    .hero-image {
        max-width: 400px;      /* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ */
    }
}

/* ============================================================================
   –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ –î–õ–Ø –ú–ê–õ–ï–ù–¨–ö–ò–• –ú–û–ë–ò–õ–¨–ù–´–• (–¥–æ 480px)
   ============================================================================ */

@media (max-width: 480px) {
    .hero-content {
        padding: 3rem 1rem;    /* –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã */
        gap: 1.5rem;           /* –£–º–µ–Ω—å—à–µ–Ω–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ */
    }
    
    /* –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —à—Ä–∏—Ñ—Ç–æ–≤ */
    .hero-title-main {
        font-size: 2rem;
    }
    
    .hero-title-accent {
        font-size: 2.5rem;
    }
    
    .hero-subtitle {
        font-size: 1.1rem;
    }
    
    .hero-description {
        font-size: 1rem;
    }
    
    /* –ö–æ–º–ø–∞–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–∏—á–µ–π */
    .hero-features {
        gap: 1.2rem;           /* –£–º–µ–Ω—å—à–µ–Ω–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ */
    }
    
    .hero-feature {
        min-width: 100px;      /* –£–º–µ–Ω—å—à–µ–Ω–Ω–∞—è –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
    }
    
    .feature-text {
        font-size: 0.8rem;     /* –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ */
    }
    
    /* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ */
    .hero-actions {
        flex-direction: column; /* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ */
        align-items: center;    /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ */
        gap: 1rem;              /* –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ */
    }
    
    .btn-xl {
        width: 100%;           /* –ü–æ–ª–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
        max-width: 300px;      /* –ù–æ –Ω–µ –±–æ–ª–µ–µ 300px */
        padding: 1rem;         /* –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã */
    }
    
    /* –†–∞–∑–º–µ—Ä—ã –∫–∞—Ä—Ç–æ—á–∫–∏ */
    .hero-image {
        max-width: 90%;        /* 90% –æ—Ç —à–∏—Ä–∏–Ω—ã —ç–∫—Ä–∞–Ω–∞ */
    }
    
    .hero-card {
        padding: 1.5rem;       /* –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã */
    }
    
    .hero-card-title {
        font-size: 1.3rem;     /* –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞ */
    }
    
    .card-item-text {
        font-size: 0.95rem;    /* –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ */
    }
    
    .btn-sm {
        padding: 0.5rem 1rem;  /* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã */
    }
    
    /* –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    .hero-card {
        backdrop-filter: blur(5px);        /* –£–º–µ–Ω—å—à–µ–Ω–Ω–æ–µ —Ä–∞–∑–º—ã—Ç–∏–µ */
        -webkit-backdrop-filter: blur(5px); /* –î–ª—è Safari */
    }
}

/* ============================================================================
   –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ –î–õ–Ø –û–ß–ï–ù–¨ –ú–ê–õ–ï–ù–¨–ö–ò–• –≠–ö–†–ê–ù–û–í (–¥–æ 320px)
   ============================================================================ */

@media (max-width: 320px) {
    /* –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —à—Ä–∏—Ñ—Ç–æ–≤ */
    .hero-title-main {
        font-size: 1.8rem;
    }
    
    .hero-title-accent {
        font-size: 2.2rem;
    }
    
    .hero-subtitle {
        font-size: 1rem;
    }
    
    .hero-description {
        font-size: 0.9rem;
    }
    
    /* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ —Ñ–∏—á–∏ */
    .hero-feature {
        min-width: 90px;       /* –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
    }
    
    .feature-text {
        font-size: 0.75rem;    /* –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ */
    }
}


================================================================================
–§–ê–ô–õ: static/css/sections/navbar.css
================================================================================
/* –°—Ç–∏–ª–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–π –ø–∞–Ω–µ–ª–∏ */
header.navbar.navbar-expand-lg {
    background-color: rgba(255, 255, 255, 0.95) !important;
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    position: sticky;
    top: 0;
    z-index: 1030;
    transition: all 0.3s ease;
    border-bottom: 1px solid rgba(5, 100, 134, 0.1);
}

header.navbar.navbar-expand-lg {
    padding-top: 1rem !important;
    padding-right: 0 !important;
    padding-bottom: 1rem !important;
    padding-left: 0 !important;
}

.navbar-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem 0; /* –ò–ó–ú–ï–ù–ï–ù–û: —É–≤–µ–ª–∏—á–µ–Ω–æ —Å 1rem */
}

/* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–µ–Ω—é */
.navbar-toggle {
    display: none; /* –°–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞ –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
    flex-direction: column;
    justify-content: center;
    align-items: center;
    width: 40px;
    height: 40px;
    background: transparent;
    border: none;
    cursor: pointer;
    padding: 0;
    z-index: 1001; /* –í—ã—à–µ –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–∞–≤–±–∞—Ä–∞ */
}

.navbar-toggle-line {
    width: 25px;
    height: 3px;
    background-color: var(--primary-color, #056486);
    margin: 3px 0;
    transition: all 0.3s ease;
    border-radius: 2px;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –±—É—Ä–≥–µ—Ä–∞ */
.navbar-toggle.active .navbar-toggle-line:nth-child(1) {
    transform: rotate(45deg) translate(6px, 6px);
}
.navbar-toggle.active .navbar-toggle-line:nth-child(2) {
    opacity: 0;
}
.navbar-toggle.active .navbar-toggle-line:nth-child(3) {
    transform: rotate(-45deg) translate(6px, -6px);
}

/* –ú–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
.navbar-menu {
    display: flex;
    list-style: none;
    margin: 0;
    padding: 0;
    gap: 1.75rem; /* –ò–ó–ú–ï–ù–ï–ù–û: —É–≤–µ–ª–∏—á–µ–Ω–æ —Å 1.5rem */
    align-items: center;
}

.navbar-item {
    position: relative;
}

.navbar-link {
    display: block;
    padding: 0.625rem 1rem; /* –ò–ó–ú–ï–ù–ï–ù–û: —É–≤–µ–ª–∏—á–µ–Ω–æ —Å 0.5rem 0.75rem */
    color: var(--text-dark, #1a1a1a);
    text-decoration: none;
    font-weight: 500;
    transition: color 0.3s ease;
    border-radius: 6px; /* –õ—ë–≥–∫–∏–π —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
}

.navbar-link:hover {
    color: var(--primary-color, #056486);
    background-color: rgba(5, 100, 134, 0.05);
}

.navbar-link.active {
    color: var(--primary-color, #056486);
    font-weight: 600;
    position: relative;
}

/* –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –ª–∏–Ω–∏—è –ø–æ–¥ –∞–∫—Ç–∏–≤–Ω–æ–π —Å—Å—ã–ª–∫–æ–π */
.navbar-link.active::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--primary-color, #056486), var(--secondary-color, #0A7FA3));
    transform: scaleX(0);
    transform-origin: right;
    transition: transform 0.3s ease;
}

.navbar-link.active:hover::after {
    transform: scaleX(1);
    transform-origin: left;
}

/* –ö–Ω–æ–ø–∫–∞ –∑–∞–ø–∏—Å–∏ */
/* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –Ω–∞–≤–±–∞—Ä–∞ */
.navbar.navbar-expand-lg {
    background-color: rgba(255, 255, 255, 0.95) !important;
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    position: sticky;
    top: 0;
    z-index: 999;
    transition: all 0.3s ease;
    border-bottom: 1px solid rgba(5, 100, 134, 0.1);
    padding: 0.5rem 0; /* –î–û–ë–ê–í–õ–ï–ù–û: –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã */
}

/* –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∏–ª–∏ –∫–Ω–æ–ø–æ–∫ –∏–∑ –≤–∞—à–µ–≥–æ –∫–æ–¥–∞, –Ω–æ –∞–¥–∞–ø—Ç–∏—Ä—É–µ–º */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.85rem 1.75rem; /* –ò–ó–ú–ï–ù–ï–ù–û: —É–≤–µ–ª–∏—á–µ–Ω–æ —Å 0.8rem 1.5rem */
    border: none;
    border-radius: 8px;
    text-align: center;
    text-decoration: none;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    line-height: 1.5;
}

.btn-secondary {
    background-color: transparent;
    border: 2px solid var(--primary-color, #056486);
    color: var(--primary-color, #056486);
}

.btn-secondary:hover {
    background-color: var(--primary-color, #056486);
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 8px 15px rgba(5, 100, 134, 0.2);
}

.btn-icon {
    margin-right: 0.5rem;
    font-size: 1.2rem;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 992px) {
    .navbar-menu {
        gap: 1.25rem; /* –ò–ó–ú–ï–ù–ï–ù–û: —É–≤–µ–ª–∏—á–µ–Ω–æ —Å 1rem */
    }
    .btn-secondary {
        padding: 0.75rem 1.5rem; /* –ò–ó–ú–ï–ù–ï–ù–û: —É–≤–µ–ª–∏—á–µ–Ω–æ —Å 0.7rem 1.2rem */
        font-size: 0.95rem;
    }
    .btn-icon {
        font-size: 1.1rem;
    }
}

@media (max-width: 768px) {
    .navbar-toggle {
        display: flex; /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é */
    }

    .navbar-menu {
        position: fixed;
        top: 70px; /* –í—ã—Å–æ—Ç–∞ —à–∞–ø–∫–∏ */
        left: -100%; /* –°–∫—Ä—ã—Ç–æ –∑–∞ –ª–µ–≤—ã–º –∫—Ä–∞–µ–º */
        width: 80%;
        max-width: 300px;
        height: calc(100vh - 70px);
        background-color: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(10px);
        box-shadow: 2px 0 15px rgba(0, 0, 0, 0.1);
        flex-direction: column;
        justify-content: flex-start;
        align-items: stretch;
        padding: 2rem 1.5rem; /* –ò–ó–ú–ï–ù–ï–ù–û: —É–≤–µ–ª–∏—á–µ–Ω–æ —Å 2rem 1rem */
        margin: 0;
        transition: left 0.3s ease;
        z-index: 1000;
        overflow-y: auto;
    }

    .navbar-menu.active {
        left: 0; /* –ü–æ—è–≤–ª—è–µ—Ç—Å—è –∏–∑ –ª–µ–≤–æ–π —Å—Ç–æ—Ä–æ–Ω—ã */
    }

    .navbar-item {
        margin-bottom: 0.75rem; /* –ò–ó–ú–ï–ù–ï–ù–û: —É–≤–µ–ª–∏—á–µ–Ω–æ —Å 0.5rem */
    }

    .navbar-link {
        padding: 1.25rem; /* –ò–ó–ú–ï–ù–ï–ù–û: —É–≤–µ–ª–∏—á–µ–Ω–æ —Å 1rem */
        font-size: 1.1rem;
        border-radius: 8px;
    }


    .btn-secondary {
        width: 100%;
        padding: 1rem; /* –î–û–ë–ê–í–õ–ï–ù–û: —É–≤–µ–ª–∏—á–µ–Ω –ø–∞–¥–¥–∏–Ω–≥ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
    }
}

/* ===== BOOTSTRAP –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–¨ ===== */

/* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Bootstrap navbar –¥–ª—è –Ω–∞—à–µ–≥–æ –¥–∏–∑–∞–π–Ω–∞ */
.navbar.navbar-expand-lg {
    background-color: rgba(255, 255, 255, 0.95) !important;
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    position: sticky;
    top: 0;
    z-index: 1030;
    transition: all 0.3s ease;
    border-bottom: 1px solid rgba(5, 100, 134, 0.1);
    padding: 0.75rem 0;
    min-height: 60px;
}

.navbar .container {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding-left: 1rem;
    padding-right: 1rem;
    position: relative;
}

.navbar .container > .navbar-toggler {
    position: absolute;
    left: 1rem;
    z-index: 1002;
}

.navbar .container > .navbar-collapse {
    flex: 1;
    display: flex;
    justify-content: center;
}

.navbar .container > .navbar-toggler {
    position: absolute;
    left: 1rem;
}

.navbar .container > .navbar-collapse {
    flex: 1;
    display: flex;
    justify-content: center;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è nav-link */
.navbar-nav .nav-link {
    color: #000000 !important;
    font-weight: 500;
    padding: 0.875rem 1rem !important;
    transition: all 0.3s ease;
    position: relative;
    margin: 0 !important;
}

.navbar-nav .nav-link:hover {
    color: #f4eded !important;
    background-color: rgba(251, 245, 245, 0.05);
    border-radius: 8px;
}

.navbar-nav .nav-link.active {
    color: #000000 !important;
    font-weight: 600;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è" */
.nav-link-booking {
    background: #FF6C35!important;
    color: #ffffff !important;
    border-radius: 25px !important;
    padding: 0.85rem 2rem !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    font-weight: 600 !important;
    box-shadow: 0 4px 15px rgba(5, 100, 134, 0.3) !important;
    transition: all 0.3s ease !important;
    display: inline-flex !important;
    align-items: center !important;
    gap: 0.75rem !important;
}

.nav-link-booking,
.nav-link-booking * {
    color: #ffffff !important;
}

.nav-link-booking:hover {
    color: #ffffff !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 6px 20px rgba(5, 100, 134, 0.4) !important;
}

.nav-link-booking:hover,
.nav-link-booking:hover * {
    color: #ffffff !important;
}

.nav-link-booking .booking-icon {
    font-size: 1.1rem;
}

.nav-link-booking.active {
    background: linear-gradient(135deg, #0A7FA3, #056486) !important;
    color: #ffffff !important;
}

.nav-link-booking.active::after {
    display: none !important;
}

.navbar-nav .nav-link.active::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 30px;
    height: 2px;
    background: linear-gradient(135deg, #000000, #333333);
    border-radius: 1px;
}

/* –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–µ–Ω—é */
.navbar-nav {
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    width: 100% !important;
    max-width: 100%;
    margin: 0 auto;
    list-style: none;
    padding-left: 0;
    margin-bottom: 0;
    gap: 0.5rem;
}

.navbar-nav .nav-item {
    flex: 0 0 auto;
    text-align: center;
    padding: 0;
}

.navbar-nav .nav-link {
    padding: 0.875rem 1rem !important;
    margin: 0 !important;
    border-radius: 8px;
    transition: all 0.3s ease;
    white-space: nowrap;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–µ–Ω—é */
.navbar-toggler {
    border: none !important;
    padding: 0.5rem !important;
    display: none !important; /* –°–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
    background: transparent;
    cursor: pointer;
    z-index: 1001;
    position: relative;
    width: 44px;
    height: 44px;
    min-width: 44px;
    min-height: 44px;
    flex-shrink: 0;
}

.navbar-toggler:focus {
    box-shadow: 0 0 0 0.2rem rgba(0, 0, 0, 0.25) !important;
    outline: none;
}

.navbar-toggler-icon {
    display: flex !important;
    flex-direction: column;
    justify-content: space-between;
    width: 24px;
    height: 18px;
    position: relative;
    margin: 0 auto;
}

.navbar-toggler-icon span {
    display: block !important;
    width: 100%;
    height: 3px;
    background-color: #056486;
    border-radius: 2px;
    transition: all 0.3s ease;
    opacity: 1;
}

.navbar-toggler.active .navbar-toggler-icon span:nth-child(1) {
    transform: rotate(45deg) translate(6px, 6px);
}

.navbar-toggler.active .navbar-toggler-icon span:nth-child(2) {
    opacity: 0;
}

.navbar-toggler.active .navbar-toggler-icon span:nth-child(3) {
    transform: rotate(-45deg) translate(6px, -6px);
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 991.98px) {
    .navbar-toggler {
        display: flex !important;
        align-items: center;
        justify-content: center;
        position: relative !important;
        left: auto !important;
        margin-right: 0;
    }
    
    .navbar .container {
        display: flex !important;
        align-items: center;
        width: 100%;
        padding-left: 1rem;
        padding-right: 1rem;
        flex-wrap: nowrap;
    }
    
    .navbar .container > .navbar-toggler {
        position: relative !important;
        left: auto !important;
        order: -1;
        flex-shrink: 0;
    }
    
    .navbar-collapse {
        position: fixed !important;
        top: 60px;
        left: -100%;
        width: 80%;
        max-width: 320px;
        height: calc(100vh - 60px);
        background-color: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(10px);
        box-shadow: 2px 0 15px rgba(0, 0, 0, 0.1);
        transition: left 0.3s ease;
        z-index: 1000;
        overflow-y: auto;
        padding: 2rem 1.5rem;
        border-radius: 0;
        margin-top: 0;
        display: block !important;
    }
    
    .navbar-collapse.show {
        left: 0 !important;
        display: block !important;
    }
    
    /* –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–æ–º –º–µ–Ω—é */
    .navbar-overlay {
        display: none;
        position: fixed;
        top: 60px;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 999;
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    
    .navbar-overlay.active {
        display: block;
        opacity: 1;
    }

    .navbar-nav {
        text-align: left !important;
        flex-direction: column !important;
        justify-content: flex-start !important;
        width: 100%;
        max-width: none;
        gap: 0 !important;
    }

    .navbar-nav .nav-item {
        margin: 0.75rem 0;
        flex: none !important;
        width: 100%;
        padding: 0;
    }

    .navbar-nav .nav-link {
        padding: 1.25rem !important;
        border-radius: 10px;
        margin: 0 !important;
        width: 100%;
        display: block;
        text-align: left;
    }
    
    .nav-link-booking {
        margin-left: 0 !important;
        margin-top: 1rem !important;
        width: 100% !important;
        justify-content: center !important;
        padding: 1.25rem !important;
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}


================================================================================
–§–ê–ô–õ: static/css/sections/reviews.css
================================================================================
/* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ */
.reviews-section {
    padding: 6rem 0;
    background-color: #fafafa;
}

.reviews-header {
    text-align: center;
    margin-bottom: 3rem;
}

.reviews-section .section-title {
    font-size: 2.5rem;
    color: #056486 !important;
    margin-bottom: 0.8rem;
    font-weight: 600;
}

.section-title {
    background: linear-gradient(45deg, #FFD700, #FFA500, #FF8C00);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.section-subtitle {
    font-size: 1.1rem;
    color: #161717!important;
    max-width: 700px;
    margin: 0 auto;
}

.section-subtitle p {
    color: #f7fbfb!important;
}

.reviews-stats {
    display: flex;
    justify-content: center;
    gap: 2rem;
    margin-bottom: 4rem;
    flex-wrap: wrap;
}

.stat-item {
    text-align: center;
    min-width: 140px;
    padding: 1.5rem 1rem;
    background: white;
    border-radius: 16px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.stat-item:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
}

.stat-number {
    font-size: 2rem;
    font-weight: 700;
    color: #3498db;
    margin-bottom: 0.5rem;
}

.stat-stars {
    font-size: 1.5rem;
    color: #f39c12;
    margin-bottom: 0.5rem;
}

.stat-label {
    font-size: 0.9rem;
    color: #555;
    font-weight: 500;
}

.reviews-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-bottom: 3rem;
}

/* –ö–∞—Ä—É—Å–µ–ª—å –æ—Ç–∑—ã–≤–æ–≤ */
.reviews-carousel-wrapper {
    position: relative;
    max-width: 1100px;
    margin: 0 auto 3rem;
    padding: 0 3rem;
    width: 100%;
    box-sizing: border-box;
}

.reviews-carousel {
    overflow: hidden;
    position: relative;
}

.reviews-carousel-track {
    --items-per-view: 3;
    --carousel-gap: 1.5rem;
    display: flex;
    gap: var(--carousel-gap);
    transition: transform 0.5s ease-in-out;
    will-change: transform;
}

.reviews-carousel-track .review-card {
    flex: 0 0 calc(
        (100% - (var(--items-per-view) - 1) * var(--carousel-gap))
        / var(--items-per-view)
    );
    margin: 0;
    min-width: 0;
    max-width: 100%;
    overflow: visible;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.carousel-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: white;
    border: 2px solid #056486;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 10;
    transition: all 0.3s ease;
    color: #056486;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.carousel-btn:hover {
    background: #056486;
    color: white;
    transform: translateY(-50%) scale(1.1);
    box-shadow: 0 6px 20px rgba(5, 100, 134, 0.3);
}

.carousel-btn:active {
    transform: translateY(-50%) scale(0.95);
}

.carousel-btn-prev {
    left: 0;
}

.carousel-btn-next {
    right: 0;
}

.carousel-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
    pointer-events: none;
}

.carousel-indicators {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
    margin-top: 2rem;
}

.carousel-indicator {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    border: 2px solid #056486;
    background: transparent;
    cursor: pointer;
    transition: all 0.3s ease;
    padding: 0;
}

.carousel-indicator:hover {
    background: rgba(5, 100, 134, 0.3);
    transform: scale(1.2);
}

.carousel-indicator.active {
    background: #056486;
    transform: scale(1.3);
}

.review-card {
    background: white;
    border-radius: 16px;
    padding: 2rem;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border: 1px solid #eee;
    width: 100%;
    box-sizing: border-box;
    min-height: auto;
    overflow: visible;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.review-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
}

.review-header {
    display: flex;
    align-items: center;
    margin-bottom: 1.5rem;
    gap: 1rem;
    flex-wrap: wrap;
    overflow: visible;
}

.reviewer-avatar {
    width: 60px;
    height: 60px;
    background-color: #3498db;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 1.2rem;
    flex-shrink: 0;
    overflow: hidden;
    position: relative;
}

.reviewer-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
}

.reviewer-avatar .avatar-fallback {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #3498db;
    color: white;
}

.reviewer-info {
    flex-grow: 1;
    min-width: 0;
    flex: 1 1 auto;
}

.reviewer-name {
    font-size: 1.1rem;
    font-weight: 600;
    color: #2c3e50;
    margin: 0 0 0.3rem 0;
}

.review-title {
    font-size: 0.95rem;
    font-weight: 600;
    color: #056486;
    margin: 0 0 0.3rem 0;
    font-style: italic;
}

.review-date {
    font-size: 0.9rem;
    color: #7f8c8d;
    margin: 0.2rem 0 0 0;
}

.review-rating {
    font-size: 1.5rem;
    color: #f39c12;
    font-weight: 500;
    flex-shrink: 0;
    white-space: nowrap;
    overflow: hidden;
    max-width: 100%;
    line-height: 1;
}

.review-text {
    font-size: 1rem;
    line-height: 1.7;
    color: #34495e;
    margin: 0;
    font-weight: 400;
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
    overflow: visible;
}

.no-reviews {
    grid-column: 1 / -1;
    text-align: center;
    color: #7f8c8d;
    font-style: italic;
    padding: 2rem;
}

.reviews-actions {
    text-align: center;
    display: flex;
    justify-content: center;
    gap: 1rem;
    flex-wrap: wrap;
}

.btn {
    padding: 1rem 2rem;
    border-radius: 12px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    text-decoration: none;
    transition: all 0.3s ease;
    border: none;
}

.btn-primary {
    background-color: #FF6C35 !important;
    color: #ffffff !important;
    border: 1px solid #FF6C35 !important;
    box-shadow: 0 4px 15px rgba(255, 108, 53, 0.4) !important;
}

.btn-primary:hover {
    background-color: #ff7a45 !important;
    border-color: #ff7a45 !important;
    transform: translateY(-2px);
    box-shadow: 0 6px 25px rgba(255, 108, 53, 0.6) !important;
}

.reviews-section .btn-outline,
.reviews-actions .btn-outline {
    background-color: #f8f9fa !important;
    color: #0b0c0c !important;
    border: 2px solid #ff7a45 !important;
}

.reviews-section .btn-outline:hover,
.reviews-actions .btn-outline:hover {
    background-color: #ff7a45 !important;
    color: white !important;
    transform: translateY(-2px);
    box-shadow: 0 6px 25px rgba(255, 108, 53, 0.6) !important;
}

/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    justify-content: center;
    align-items: center;
    padding: 2rem;
    overflow-y: auto;
}

.modal-content {
    background: white;
    color: #2c3e50;
    border-radius: 20px;
    width: 100%;
    max-width: 500px;
    padding: 2.5rem;
    position: relative;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
    animation: modalFadeIn 0.4s ease-out;
}

@keyframes modalFadeIn {
    from { opacity: 0; transform: translateY(-30px); }
    to { opacity: 1; transform: translateY(0); }
}

.close-btn {
    position: absolute;
    top: 1rem;
    right: 1rem;
    font-size: 2rem;
    background: none;
    border: none;
    cursor: pointer;
    color: #95a5a6;
    padding: 0;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
}

.close-btn:hover {
    background-color: #f5f5f5;
    color: #2c3e50;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
    color: #2c3e50;
}

.form-group input,
.form-group textarea {
    width: 100%;
    padding: 1rem;
    border: 1px solid #ddd;
    border-radius: 12px;
    font-size: 1rem;
    transition: border-color 0.3s;
    box-sizing: border-box;
    color: #2c3e50;
    background-color: #fff;
    font-family: inherit;
}

.form-group textarea {
    min-height: 120px;
    resize: vertical;
    line-height: 1.5;
}

.form-group input::placeholder,
.form-group textarea::placeholder {
    color: #95a5a6;
    opacity: 1;
}

.form-group input:focus,
.form-group textarea:focus {
    outline: none;
    border-color: #3498db;
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
    color: #2c3e50;
    background-color: #fff;
}

.rating-stars {
    display: flex;
    gap: 0.2rem;
    margin: 0.5rem 0;
}

.rating-stars .star {
    font-size: 2rem;
    cursor: pointer;
    color: #f39c12;
    transition: opacity 0.3s ease, transform 0.2s ease;
    user-select: none;
    opacity: 0.3;
}

.rating-stars .star:hover {
    opacity: 1;
    transform: scale(1.1);
}

.rating-stars .star.active {
    opacity: 1;
}

.rating-hint {
    font-size: 0.9rem;
    color: #7f8c8d;
    margin-top: 0.5rem;
}

.review-note {
    font-size: 0.9rem;
    color: #7f8c8d;
    margin-top: 1.5rem;
    text-align: center;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 768px) {
    .reviews-section {
        padding: 3rem 1rem;
    }

    .reviews-section .section-title {
        font-size: 1.8rem;
        color: #056486 !important;
        margin-bottom: 0.5rem;
    }

    .section-subtitle {
        font-size: 1rem;
        padding: 0 1rem;
    }

    .reviews-stats {
        gap: 0.75rem;
        margin-bottom: 2.5rem;
    }

    .stat-item {
        min-width: 100px;
        padding: 1rem 0.75rem;
        flex: 1 1 calc(33.333% - 0.5rem);
    }

    .stat-number {
        font-size: 1.5rem;
    }

    .stat-stars {
        font-size: 1.2rem;
    }

    .stat-label {
        font-size: 0.85rem;
    }

    .modal-content {
        margin: 1rem;
        padding: 1.5rem;
        max-width: calc(100% - 2rem);
    }
    
    .reviews-carousel-wrapper {
        padding: 0 2.5rem;
        margin-bottom: 2rem;
    }
    
    .reviews-carousel-track {
        --items-per-view: 1;
        --carousel-gap: 1rem;
    }
    
    .carousel-btn {
        width: 40px;
        height: 40px;
    }
    
    .carousel-btn svg {
        width: 20px;
        height: 20px;
    }

    .review-card {
        padding: 1.25rem;
        border-radius: 12px;
        overflow: visible;
        word-wrap: break-word;
        overflow-wrap: break-word;
        margin: 0 auto;
        max-width: 100%;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
    }

    .review-header {
        flex-wrap: wrap;
        gap: 0.75rem;
        margin-bottom: 1rem;
        align-items: flex-start;
    }

    .reviewer-avatar {
        width: 50px;
        height: 50px;
        font-size: 1rem;
        flex-shrink: 0;
    }

    .reviewer-info {
        flex: 1 1 auto;
        min-width: 0;
        max-width: calc(100% - 60px);
    }

    .reviewer-name {
        font-size: 1rem;
        margin-bottom: 0.25rem;
        word-wrap: break-word;
        overflow-wrap: break-word;
    }

    .review-title {
        font-size: 0.9rem;
        margin-bottom: 0.25rem;
        word-wrap: break-word;
        overflow-wrap: break-word;
    }

    .review-date {
        font-size: 0.85rem;
        display: block;
    }

    .review-rating {
        font-size: 1.1rem;
        width: 100%;
        margin-top: 0.5rem;
        flex-shrink: 0;
        white-space: nowrap;
        overflow: visible;
        max-width: 100%;
        text-align: left;
    }

    .review-text {
        font-size: 0.95rem;
        line-height: 1.7;
        word-wrap: break-word;
        overflow-wrap: break-word;
        overflow: visible;
        margin-top: 0.75rem;
    }

    .reviews-actions {
        gap: 0.75rem;
        margin-top: 1.5rem;
    }

    .reviews-actions .btn {
        padding: 0.875rem 1.5rem;
        font-size: 0.95rem;
        flex: 1 1 auto;
        min-width: 140px;
    }
}

@media (max-width: 480px) {
    .reviews-section {
        padding: 2.5rem 0.75rem;
    }

    .reviews-section .section-title {
        font-size: 1.6rem;
    }

    .section-subtitle {
        font-size: 0.95rem;
        padding: 0 0.5rem;
    }

    .reviews-stats {
        gap: 0.5rem;
        margin-bottom: 2rem;
    }

    .stat-item {
        min-width: 90px;
        padding: 0.875rem 0.5rem;
        flex: 1 1 calc(33.333% - 0.33rem);
    }

    .stat-number {
        font-size: 1.3rem;
    }

    .stat-stars {
        font-size: 1rem;
    }

    .stat-label {
        font-size: 0.75rem;
    }
    
    .reviews-carousel-wrapper {
        padding: 0 2rem;
        margin-bottom: 1.5rem;
    }
    
    .reviews-carousel-track {
        --items-per-view: 1;
        --carousel-gap: 0.75rem;
    }
    
    .carousel-btn {
        width: 36px;
        height: 36px;
        background: rgba(255, 255, 255, 0.95);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }
    
    .carousel-btn svg {
        width: 16px;
        height: 16px;
    }

    .carousel-btn-prev {
        left: -0.5rem;
    }

    .carousel-btn-next {
        right: -0.5rem;
    }
    
    .review-card {
        padding: 1rem;
        border-radius: 12px;
        overflow: visible;
        word-wrap: break-word;
        overflow-wrap: break-word;
        margin: 0 auto;
        max-width: 100%;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .review-header {
        gap: 0.75rem;
        margin-bottom: 1rem;
        flex-wrap: wrap;
        align-items: flex-start;
    }
    
    .reviewer-avatar {
        width: 48px;
        height: 48px;
        font-size: 0.95rem;
        flex-shrink: 0;
    }

    .reviewer-info {
        flex: 1 1 auto;
        min-width: 0;
        max-width: calc(100% - 60px);
    }

    .reviewer-name {
        font-size: 0.95rem;
        margin-bottom: 0.25rem;
        word-wrap: break-word;
        overflow-wrap: break-word;
        line-height: 1.3;
    }

    .review-title {
        font-size: 0.85rem;
        margin-bottom: 0.25rem;
        word-wrap: break-word;
        overflow-wrap: break-word;
        line-height: 1.3;
    }

    .review-date {
        font-size: 0.8rem;
        display: block;
        margin-top: 0.25rem;
    }

    .review-rating {
        font-size: 1rem;
        width: 100%;
        margin-top: 0.5rem;
        flex-shrink: 0;
        white-space: nowrap;
        overflow: visible;
        max-width: 100%;
        text-align: left;
        line-height: 1.2;
    }

    .review-text {
        font-size: 0.9rem;
        line-height: 1.6;
        word-wrap: break-word;
        overflow-wrap: break-word;
        overflow: visible;
        margin-top: 0.75rem;
        padding-top: 0.75rem;
        border-top: 1px solid rgba(0, 0, 0, 0.05);
    }

    .carousel-indicators {
        margin-top: 1.5rem;
        gap: 0.4rem;
    }

    .carousel-indicator {
        width: 10px;
        height: 10px;
    }

    .reviews-actions {
        flex-direction: column;
        gap: 0.625rem;
        margin-top: 1.5rem;
    }

    .reviews-actions .btn {
        width: 100%;
        padding: 0.875rem 1.25rem;
        font-size: 0.9rem;
    }

    .modal-content {
        margin: 0.75rem;
        padding: 1.25rem;
        border-radius: 16px;
    }

    .form-group {
        margin-bottom: 1.25rem;
    }

    .form-group input,
    .form-group textarea {
        padding: 0.875rem;
        font-size: 0.95rem;
    }

    .rating-stars .star {
        font-size: 1.75rem;
    }
}

/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
@media (max-width: 360px) {
    .reviews-section {
        padding: 2rem 0.5rem;
    }

    .reviews-section .section-title {
        font-size: 1.4rem;
    }

    .stat-item {
        min-width: 80px;
        padding: 0.75rem 0.4rem;
    }

    .stat-number {
        font-size: 1.2rem;
    }

    .stat-label {
        font-size: 0.7rem;
    }

    .reviews-carousel-wrapper {
        padding: 0 1.5rem;
    }

    .carousel-btn {
        width: 32px;
        height: 32px;
    }

    .carousel-btn svg {
        width: 14px;
        height: 14px;
    }

    .review-card {
        padding: 0.875rem;
        overflow: visible;
        word-wrap: break-word;
        overflow-wrap: break-word;
        border-radius: 10px;
    }

    .review-header {
        gap: 0.625rem;
        margin-bottom: 0.875rem;
    }

    .reviewer-avatar {
        width: 44px;
        height: 44px;
        font-size: 0.9rem;
    }

    .reviewer-info {
        max-width: calc(100% - 55px);
    }

    .reviewer-name {
        font-size: 0.9rem;
        line-height: 1.2;
    }

    .review-title {
        font-size: 0.8rem;
        line-height: 1.2;
    }

    .review-date {
        font-size: 0.75rem;
    }

    .review-rating {
        font-size: 0.95rem;
    }

    .review-text {
        font-size: 0.85rem;
        line-height: 1.5;
        word-wrap: break-word;
        overflow-wrap: break-word;
        overflow: visible;
        margin-top: 0.625rem;
        padding-top: 0.625rem;
    }
}


================================================================================
–§–ê–ô–õ: static/css/sections/masters.css
================================================================================
/* Masters Section Styles */
.masters-section {
    padding: 100px 0;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    position: relative;
}

.masters-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

/* Header */
.masters-header {
    text-align: center;
    margin-bottom: 60px;
}

.masters-title {
    font-size: 3rem;
    font-weight: 700;
    color: #056486;
    margin-bottom: 20px;
    background: linear-gradient(135deg, #056486 0%, #0A7FA3 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.masters-divider {
    width: 80px;
    height: 4px;
    background: linear-gradient(135deg, #056486 0%, #0A7FA3 100%);
    margin: 0 auto 30px;
    border-radius: 2px;
}

.masters-subtitle {
    font-size: 1.3rem;
    color: #6c757d;
    font-weight: 300;
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.6;
}

/* Filters */
.masters-filters {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 15px;
    margin-bottom: 50px;
}

.master-filter-btn {
    padding: 12px 24px;
    border: 2px solid #e9ecef;
    background: white;
    color: #6c757d;
    border-radius: 25px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.95rem;
}

.master-filter-btn:hover {
    border-color: #056486;
    color: #056486;
    transform: translateY(-2px);
}

.master-filter-btn.active {
    background: linear-gradient(135deg, #056486 0%, #0A7FA3 100%);
    border-color: transparent;
    color: white;
    box-shadow: 0 5px 15px rgba(5, 100, 134, 0.4);
}

/* Masters Grid */
.masters-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 30px;
    margin-bottom: 80px;
}

.master-card {
    background: white;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    position: relative;
}

.master-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(0,0,0,0.15);
}

/* Master Image */
.master-image {
    position: relative;
    height: 300px;
    overflow: hidden;
}

.master-photo {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
}

.master-card:hover .master-photo {
    transform: scale(1.05);
}

.master-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(to bottom, transparent 0%, rgba(0,0,0,0.7) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.master-card:hover .master-overlay {
    opacity: 1;
}

.master-quick-view {
    background: rgba(255,255,255,0.9);
    color: #056486;
    border: none;
    padding: 12px 24px;
    border-radius: 25px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.master-quick-view:hover {
    background: white;
    transform: translateY(-2px);
}

/* Master Badges */
.master-badge {
    position: absolute;
    top: 20px;
    left: 20px;
    padding: 8px 16px;
    border-radius: 15px;
    font-size: 0.8rem;
    font-weight: 600;
    color: white;
    z-index: 2;
}

.master-badge-senior {
    background: linear-gradient(135deg, #056486 0%, #0A7FA3 100%);
}

.master-badge-featured {
    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
}

.master-badge-expert {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
}

/* Master Content */
.master-content {
    padding: 30px;
}

.master-info {
    margin-bottom: 20px;
}

.master-name {
    font-size: 1.5rem;
    font-weight: 700;
    color: #056486;
    margin-bottom: 5px;
}

.master-specialization {
    color: #056486;
    font-weight: 500;
    margin-bottom: 15px;
    font-size: 0.95rem;
}

.master-rating {
    display: flex;
    align-items: center;
    gap: 10px;
}

.stars {
    display: flex;
    gap: 2px;
}

.star {
    font-size: 1rem;
    opacity: 0.3;
}

.star.filled {
    opacity: 1;
    color: #ffc107;
}

.star.half {
    background: linear-gradient(90deg, #ffc107 50%, #e4e5e9 50%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.rating-value {
    font-size: 0.9rem;
    color: #6c757d;
}

/* Master Details */
.master-details {
    margin-bottom: 20px;
}

.detail-item {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
    font-size: 0.9rem;
    color: #5a6c7d;
}

.detail-icon {
    font-size: 1rem;
    width: 20px;
    text-align: center;
}

/* Master Skills */
.master-skills {
    margin-bottom: 25px;
}

.master-skills h4 {
    font-size: 1rem;
    color: #056486;
    margin-bottom: 10px;
    font-weight: 600;
}

.skills-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.skill-tag {
    background: #e9ecef;
    color: #495057;
    padding: 6px 12px;
    border-radius: 15px;
    font-size: 0.8rem;
    font-weight: 500;
    transition: all 0.3s ease;
}

.skill-tag:hover {
    background: #056486;
    color: white;
    transform: translateY(-1px);
}

/* Master Actions */
.master-actions {
    display: flex;
    gap: 12px;
}

.master-btn {
    flex: 1;
    padding: 12px 20px;
    border: none;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.9rem;
}

.master-btn-primary {
    background: linear-gradient(135deg, #056486 0%, #0A7FA3 100%);
    color: white;
    box-shadow: 0 5px 15px rgba(5, 100, 134, 0.4);
}

.master-btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(5, 100, 134, 0.6);
}

.master-btn-secondary {
    background: white;
    color: #056486;
    border: 2px solid #056486;
}

.master-btn-secondary:hover {
    background: #056486;
    color: white;
    transform: translateY(-2px);
}

/* CTA Section */
.masters-cta {
    background: linear-gradient(135deg, #056486 0%, #034A5F 100%);
    border-radius: 20px;
    padding: 60px 40px;
    color: white;
    text-align: center;
}

.cta-content {
    max-width: 600px;
    margin: 0 auto;
}

.cta-text h3 {
    font-size: 2.2rem;
    margin-bottom: 15px;
    font-weight: 600;
}

.cta-text p {
    font-size: 1.1rem;
    opacity: 0.9;
    margin-bottom: 30px;
}

.cta-actions {
    display: flex;
    gap: 20px;
    justify-content: center;
    flex-wrap: wrap;
}

.cta-btn {
    padding: 15px 30px;
    border: none;
    border-radius: 25px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 1rem;
}

.cta-btn-primary {
    background: linear-gradient(135deg, #056486 0%, #0A7FA3 100%);
    color: white;
    box-shadow: 0 5px 15px rgba(5, 100, 134, 0.4);
}

.cta-btn-primary:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 25px rgba(5, 100, 134, 0.6);
}

.cta-btn-secondary {
    background: rgba(255,255,255,0.1);
    color: white;
    border: 2px solid rgba(255,255,255,0.3);
    backdrop-filter: blur(10px);
}

.cta-btn-secondary:hover {
    background: rgba(255,255,255,0.2);
    transform: translateY(-3px);
}

/* Modal Styles */
.master-modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
    backdrop-filter: blur(5px);
}

.modal-content {
    background-color: white;
    margin: 5% auto;
    padding: 0;
    border-radius: 20px;
    width: 90%;
    max-width: 600px;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    animation: modalSlideIn 0.3s ease;
}

@keyframes modalSlideIn {
    from {
        opacity: 0;
        transform: translateY(-50px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.modal-close {
    position: absolute;
    right: 20px;
    top: 20px;
    font-size: 2rem;
    color: #6c757d;
    cursor: pointer;
    z-index: 10;
    transition: color 0.3s ease;
}

.modal-close:hover {
    color: #056486;
}

.modal-body {
    padding: 40px;
}

/* –ê–Ω–∏–º–∞—Ü–∏–∏ */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.master-card {
    animation: fadeInUp 0.6s ease-out;
}

.master-card:nth-child(2) { animation-delay: 0.1s; }
.master-card:nth-child(3) { animation-delay: 0.2s; }
.master-card:nth-child(4) { animation-delay: 0.3s; }

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 1200px) {
    .masters-grid {
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    }
}

@media (max-width: 768px) {
    .masters-section {
        padding: 60px 0;
    }
    
    .masters-title {
        font-size: 2.5rem;
    }
    
    .masters-grid {
        grid-template-columns: 1fr;
        gap: 25px;
    }
    
    .masters-filters {
        gap: 10px;
    }
    
    .master-filter-btn {
        padding: 10px 20px;
        font-size: 0.9rem;
    }
    
    .master-content {
        padding: 25px;
    }
    
    .master-actions {
        flex-direction: column;
    }
    
    .masters-cta {
        padding: 40px 25px;
    }
    
    .cta-actions {
        flex-direction: column;
        align-items: center;
    }
    
    .cta-btn {
        width: 100%;
        max-width: 300px;
    }
}

@media (max-width: 480px) {
    .masters-container {
        padding: 0 15px;
    }
    
    .masters-title {
        font-size: 2rem;
    }
    
    .modal-content {
        width: 95%;
        margin: 10% auto;
    }
    
    .modal-body {
        padding: 30px 20px;
    }
}


================================================================================
–§–ê–ô–õ: static/css/sections/faq.css
================================================================================
/* FAQ Section Styles */

.faq {
    padding: 80px 0;
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    position: relative;
    overflow: hidden;
}

.faq::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
        radial-gradient(circle at 30% 20%, rgba(5, 100, 134, 0.05) 0%, transparent 50%),
        radial-gradient(circle at 70% 80%, rgba(5, 100, 134, 0.05) 0%, transparent 50%);
    pointer-events: none;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
    position: relative;
    z-index: 1;
}

/* Section Header */
.section-header {
    text-align: center;
    margin-bottom: 60px;
    animation: fadeInUp 0.8s ease-out;
}

.section-title {
    font-size: 40px;
    font-weight: 800;
    color: #056486;
    margin-bottom: 15px;
    background: linear-gradient(135deg, #056486 0%, #0A7FA3 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    position: relative;
}

.section-subtitle {
    font-size: 18px;
    color: #718096;
    line-height: 1.6;
    max-width: 600px;
    margin: 0 auto;
}

/* FAQ Categories */
.faq-categories {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 50px;
    flex-wrap: wrap;
    animation: fadeInUp 0.8s ease-out 0.2s both;
}

.faq-category-btn {
    padding: 12px 24px;
    border: 2px solid #e2e8f0;
    background: white;
    color: #4a5568;
    border-radius: 25px;
    font-weight: 600;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    position: relative;
    overflow: hidden;
}

.faq-category-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #056486 0%, #0A7FA3 100%);
    transition: left 0.3s ease;
    z-index: -1;
}

.faq-category-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(5, 100, 134, 0.25);
    border-color: #056486;
}

.faq-category-btn.active {
    background: linear-gradient(135deg, #056486 0%, #0A7FA3 100%);
    color: white;
    border-color: #056486;
    box-shadow: 0 8px 25px rgba(5, 100, 134, 0.3);
}

.faq-category-btn.active::before {
    left: 0;
}

/* FAQ List */
.faq-list {
    max-width: 800px;
    margin: 0 auto;
}

.faq-item {
    background: white;
    border-radius: 16px;
    margin-bottom: 20px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    opacity: 0;
    transform: translateY(20px);
    animation: fadeInUp 0.6s ease-out forwards;
    border: 1px solid #f7fafc;
}

.faq-item:nth-child(1) { animation-delay: 0.1s; }
.faq-item:nth-child(2) { animation-delay: 0.2s; }
.faq-item:nth-child(3) { animation-delay: 0.3s; }
.faq-item:nth-child(4) { animation-delay: 0.4s; }
.faq-item:nth-child(5) { animation-delay: 0.5s; }

.faq-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15);
    border-color: #e2e8f0;
}

.faq-item.hidden {
    display: none;
}

/* FAQ Question */
.faq-question {
    padding: 25px 30px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
    transition: all 0.3s ease;
}

.faq-question:hover {
    background: linear-gradient(135deg, #f8fafc 0%, #edf2f7 100%);
}

.faq-question h3 {
    font-size: 18px;
    font-weight: 700;
    color: #056486;
    margin: 0;
    line-height: 1.4;
    flex: 1;
    margin-right: 20px;
}

.faq-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, #056486 0%, #0A7FA3 100%);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    font-weight: bold;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    flex-shrink: 0;
    box-shadow: 0 4px 15px rgba(5, 100, 134, 0.3);
}

.faq-item.active .faq-icon {
    transform: rotate(45deg);
    background: linear-gradient(135deg, #f56565 0%, #ed64a6 100%);
    box-shadow: 0 4px 15px rgba(245, 101, 101, 0.3);
}

/* FAQ Answer */
.faq-answer {
    padding: 0 30px;
    max-height: 0;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    background: #f8fafc;
    border-top: 1px solid #e2e8f0;
}

.faq-item.active .faq-answer {
    padding: 25px 30px;
    max-height: 300px;
}

.faq-answer p {
    font-size: 16px;
    line-height: 1.7;
    color: #4a5568;
    margin: 0;
    opacity: 0;
    transform: translateY(10px);
    transition: all 0.3s ease 0.1s;
}

.faq-item.active .faq-answer p {
    opacity: 1;
    transform: translateY(0);
}

/* FAQ CTA */
.faq-cta {
    margin-top: 80px;
    text-align: center;
    animation: fadeInUp 0.8s ease-out 0.6s both;
}

.cta-content {
    background: linear-gradient(135deg, #056486 0%, #0A7FA3 100%);
    padding: 50px 40px;
    border-radius: 24px;
    color: white;
    position: relative;
    overflow: hidden;
    max-width: 600px;
    margin: 0 auto;
}

.cta-content::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    animation: shimmer 3s infinite;
}

.cta-title {
    font-size: 28px;
    font-weight: 800;
    margin-bottom: 15px;
    position: relative;
    z-index: 1;
}

.cta-description {
    font-size: 16px;
    margin-bottom: 30px;
    opacity: 0.9;
    line-height: 1.6;
    position: relative;
    z-index: 1;
}

.cta-actions {
    display: flex;
    gap: 20px;
    justify-content: center;
    flex-wrap: wrap;
    position: relative;
    z-index: 1;
}

/* Buttons */
.btn {
    padding: 14px 28px;
    border-radius: 12px;
    font-weight: 600;
    font-size: 16px;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    border: 2px solid transparent;
}

.btn-primary {
    background: white;
    color: #056486;
    box-shadow: 0 4px 15px rgba(255, 255, 255, 0.3);
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(255, 255, 255, 0.4);
    background: #f8fafc;
}

.btn-outline {
    background: transparent;
    color: white;
    border-color: rgba(255, 255, 255, 0.5);
}

.btn-outline:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: white;
    transform: translateY(-2px);
}

.btn-icon {
    font-size: 18px;
}

/* Animations */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes shimmer {
    0% {
        transform: translateX(-100%) translateY(-100%) rotate(45deg);
    }
    100% {
        transform: translateX(100%) translateY(100%) rotate(45deg);
    }
}

/* Responsive Design */
@media (max-width: 768px) {
    .faq {
        padding: 60px 0;
    }
    
    .section-title {
        font-size: 32px;
    }
    
    .section-subtitle {
        font-size: 16px;
    }
    
    .faq-categories {
        gap: 10px;
        margin-bottom: 40px;
    }
    
    .faq-category-btn {
        padding: 10px 18px;
        font-size: 13px;
    }
    
    .faq-question {
        padding: 20px;
    }
    
    .faq-question h3 {
        font-size: 16px;
        margin-right: 15px;
    }
    
    .faq-icon {
        width: 35px;
        height: 35px;
        font-size: 18px;
    }
    
    .faq-answer {
        padding: 0 20px;
    }
    
    .faq-item.active .faq-answer {
        padding: 20px;
    }
    
    .cta-content {
        padding: 40px 25px;
        margin: 0 15px;
    }
    
    .cta-title {
        font-size: 24px;
    }
    
    .cta-actions {
        flex-direction: column;
        align-items: center;
    }
    
    .btn {
        width: 100%;
        max-width: 250px;
        justify-content: center;
    }
}

@media (max-width: 480px) {
    .faq-categories {
        flex-direction: column;
        align-items: center;
        gap: 8px;
    }
    
    .faq-category-btn {
        width: 200px;
        text-align: center;
    }
    
    .faq-question {
        padding: 15px;
    }
    
    .faq-question h3 {
        font-size: 15px;
    }
    
    .faq-icon {
        width: 30px;
        height: 30px;
        font-size: 16px;
    }
    
    .cta-title {
        font-size: 20px;
    }
    
    .cta-description {
        font-size: 14px;
    }
}


================================================================================
–§–ê–ô–õ: static/css/sections/contacts.css
================================================================================
/* Contacts Section Styles */

.contacts {
    padding: 80px 0;
    background: #2A2D2C !important;
    color: white;
    position: relative;
    overflow: hidden;
}

.contacts::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
        radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(255, 255, 255, 0.08) 0%, transparent 50%);
    pointer-events: none;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
    position: relative;
    z-index: 1;
}

.ymaps-2-1-79-balloon__layout {
    color: rgb(21, 20, 20)!important;
}

.map-overlay h4 {
    color: rgb(21, 20, 20)!important;
}

.map-overlay p {
    color: rgb(10, 9, 9)!important;
}

/* Section Header */
.section-header {
    text-align: center;
    margin-bottom: 60px;
    animation: fadeInUp 0.8s ease-out;
}

.section-title {
    font-size: 40px;
    font-weight: 800;
    margin-bottom: 15px;
    color: white;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
}

.section-subtitle {
    font-size: 18px;
    opacity: 0.9;
    line-height: 1.6;
    color: white;
    max-width: 600px;
    margin: 0 auto;
}

.section-subtitle-white {
    color: white;
}

/* Contacts Content */
.contacts-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 60px;
    margin-bottom: 80px;
    animation: fadeInUp 0.8s ease-out 0.2s both;
}

/* Contacts Wrapper */
.contacts-wrapper {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 50px;
    align-items: start;
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
}

/* Contact Info */
.contacts-info {
    display: grid;
    gap: 30px;
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
}

.contact-note {
    color: white;
}

.contact-link {
    color: white;
}

.contact-card {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    padding: 30px;
    display: flex;
    align-items: flex-start;
    gap: 20px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}

.contact-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transition: left 0.6s;
}

.contact-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    border-color: rgba(255, 255, 255, 0.3);
}

.contact-card:hover::before {
    left: 100%;
}

.contact-icon {
    width: 60px;
    height: 60px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    flex-shrink: 0;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
}

.contact-details {
    flex: 1;
}

.contact-title {
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 8px;
    color: white;
}

.contact-text {
    font-size: 16px;
    margin-bottom: 5px;
    font-weight: 600;
    color: white;
}

.contact-text a {
    color: white;
    text-decoration: none;
    transition: opacity 0.3s ease;
}

.contact-text a:hover {
    opacity: 0.8;
}

.contact-description {
    font-size: 14px;
    opacity: 0.8;
    margin: 0;
}

/* CTA –±–ª–æ–∫ */
.contacts-cta {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    padding: 25px;
    margin-bottom: 25px;
    text-align: center;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

.contacts-cta h3 {
    color: white;
    font-size: 1.4rem;
    font-weight: 600;
    margin-bottom: 20px;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
}

.cta-buttons {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
}

.btn-call {
    background: #FF6C35 !important;
    color: #ffffff !important;
    box-shadow: 0 4px 15px rgba(255, 108, 53, 0.4) !important;
    border: 1px solid #FF6C35 !important;
}

.btn-call:hover {
    background: #ff7a45 !important;
    border-color: #ff7a45 !important;
    transform: translateY(-2px);
    box-shadow: 0 6px 25px rgba(255, 108, 53, 0.6) !important;
    color: #ffffff !important;
}

.btn-booking {
    background: #FF6C35 !important;
    color: #ffffff !important;
    border: 1px solid #FF6C35 !important;
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 20px rgba(255, 108, 53, 0.5), 0 2px 8px rgba(255, 108, 53, 0.3) !important;
}

.btn-booking:hover {
    background: #ff7a45 !important;
    border-color: #ff7a45 !important;
    transform: translateY(-3px);
    box-shadow: 0 8px 30px rgba(255, 108, 53, 0.7), 0 4px 12px rgba(255, 108, 53, 0.5) !important;
    color: #ffffff !important;
}

/* Schedule */
.schedule {
    margin-bottom: 8px;
}

.schedule-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 5px;
    font-size: 16px;
    font-weight: 600;
}

.schedule-day {
    opacity: 0.9;
}

.schedule-time {
    font-weight: 700;
}

/* Contact Form */
.contacts-form {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    padding: 40px;
    height: fit-content;
}

.form-container {
    width: 100%;
}

.form-title {
    font-size: 26px;
    font-weight: 700;
    margin-bottom: 10px;
    color: white;
}

.form-subtitle {
    font-size: 16px;
    opacity: 0.9;
    margin-bottom: 30px;
    line-height: 1.5;
}

.contact-form {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}

.form-group {
    display: flex;
    flex-direction: column;
}

.form-group label {
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 8px;
    color: white;
    opacity: 0.9;
}

.form-group input,
.form-group select,
.form-group textarea {
    padding: 14px 16px;
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.1);
    color: white;
    font-size: 16px;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
}

.form-group input::placeholder,
.form-group textarea::placeholder {
    color: rgba(255, 255, 255, 0.6);
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    outline: none;
    border-color: rgba(255, 255, 255, 0.5);
    background: rgba(255, 255, 255, 0.15);
    box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1);
}

.form-group textarea {
    resize: vertical;
    min-height: 120px;
    font-family: inherit;
}

/* Checkbox */
.checkbox-label {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    cursor: pointer;
    font-size: 14px;
    line-height: 1.5;
    opacity: 0.9;
}

.checkbox-label input[type="checkbox"] {
    width: 18px;
    height: 18px;
    margin: 0;
    flex-shrink: 0;
    margin-top: 2px;
}

.checkbox-text {
    flex: 1;
}

.checkbox-text .link {
    color: rgba(255, 255, 255, 0.9);
    text-decoration: underline;
    transition: opacity 0.3s ease;
}

.checkbox-text .link:hover {
    opacity: 0.8;
}

/* Buttons */
.btn {
    padding: 16px 32px;
    border-radius: 12px;
    font-weight: 600;
    font-size: 16px;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    border: 2px solid transparent;
    text-align: center;
}

.btn-primary {
    background: #FF6C35 !important;
    color: #ffffff !important;
    box-shadow: 0 4px 15px rgba(255, 108, 53, 0.4) !important;
    border: 1px solid #FF6C35 !important;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 25px rgba(255, 108, 53, 0.6) !important;
    background: #ff7a45 !important;
    border-color: #ff7a45 !important;
}

.btn-outline {
    background: transparent;
    color: white;
    border-color: rgba(255, 255, 255, 0.5);
}

.btn-outline:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: white;
    transform: translateY(-2px);
}

.btn-lg {
    padding: 18px 36px;
    font-size: 18px;
    width: 100%;
}

.btn-icon {
    font-size: 20px;
}

/* Map Section */
.contacts-map {
    margin-bottom: 60px;
    animation: fadeInUp 0.8s ease-out 0.4s both;
    width: 100%;
    max-width: 100%;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    gap: 25px;
}

.map-container {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    padding: 20px;
    text-align: center;
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    overflow: hidden;
    position: relative;
}

#yandex-map {
    width: 100% !important;
    height: 400px !important;
    border-radius: 16px !important;
    overflow: hidden !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
}

.map-overlay {
    position: absolute;
    bottom: 30px;
    left: 30px;
    right: 30px;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    padding: 15px 20px;
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.3);
    z-index: 1000;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.map-overlay h4 {
    font-size: 1.1rem;
    font-weight: 600;
    color: #056486;
    margin: 0 0 5px 0;
}

.map-overlay p {
    font-size: 0.95rem;
    color: #666;
    margin: 0;
}

.map-title {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 30px;
    color: white;
}

.map-placeholder {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
}

.map-icon {
    font-size: 48px;
    margin-bottom: 10px;
}

.map-text {
    font-size: 20px;
    font-weight: 600;
    margin: 0;
}

.map-description {
    font-size: 16px;
    opacity: 0.9;
    margin: 0 0 20px 0;
    line-height: 1.5;
}

/* Social Section */
.contacts-social {
    text-align: center;
    animation: fadeInUp 0.8s ease-out 0.6s both;
}

.social-title {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 30px;
    color: white;
}

.social-links {
    display: flex;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
}

.social-link {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 16px;
    padding: 20px 25px;
    text-decoration: none;
    color: white;
    display: flex;
    align-items: center;
    gap: 12px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    min-width: 150px;
    justify-content: center;
}

.social-link:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 25px rgba(0, 0, 0, 0.3);
    background: rgba(255, 255, 255, 0.15);
    border-color: rgba(255, 255, 255, 0.3);
}

.social-icon {
    font-size: 24px;
}

.social-text {
    font-weight: 600;
    font-size: 16px;
}

/* Animations */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Responsive Design */
@media (max-width: 768px) {
    .contacts {
        padding: 60px 0;
    }
    
    .section-title {
        font-size: 32px;
    }
    
    .section-subtitle {
        font-size: 16px;
    }
    
    .contacts-content {
        grid-template-columns: 1fr;
        gap: 40px;
        margin-bottom: 60px;
    }
    
    .contacts-wrapper {
        grid-template-columns: 1fr;
        gap: 40px;
    }
    
    .contact-card {
        padding: 25px;
        gap: 15px;
    }
    
    .contact-icon {
        width: 50px;
        height: 50px;
        font-size: 20px;
    }
    
    .contact-title {
        font-size: 18px;
    }
    
    .contacts-form {
        padding: 30px;
    }
    
    .form-title {
        font-size: 22px;
    }
    
    .form-row {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    
    .contacts-cta {
        padding: 20px;
        margin-bottom: 20px;
    }
    
    .contacts-cta h3 {
        font-size: 1.2rem;
        margin-bottom: 15px;
    }
    
    .cta-buttons {
        grid-template-columns: 1fr;
        gap: 12px;
    }
    
    .btn {
        padding: 14px 24px;
        font-size: 0.95rem;
    }
    
    .map-container {
        padding: 15px;
    }
    
    #yandex-map {
        height: 350px !important;
    }
    
    .map-overlay {
        bottom: 20px;
        left: 20px;
        right: 20px;
        padding: 12px 15px;
    }
    
    .map-title {
        font-size: 20px;
    }
    
    .social-links {
        gap: 15px;
    }
    
    .social-link {
        padding: 15px 20px;
        min-width: 130px;
    }
}

@media (max-width: 480px) {
    .contacts {
        padding: 50px 0;
    }
    
    .container {
        padding: 0 15px;
    }
    
    .section-title {
        font-size: 28px;
    }
    
    .contact-card {
        padding: 20px;
        flex-direction: column;
        text-align: center;
        gap: 15px;
    }
    
    .contacts-form {
        padding: 25px;
    }
    
    .form-title {
        font-size: 20px;
    }
    
    .form-subtitle {
        font-size: 14px;
    }
    
    .contacts-cta {
        padding: 18px;
        margin-bottom: 15px;
    }
    
    .contacts-cta h3 {
        font-size: 1.1rem;
        margin-bottom: 12px;
    }
    
    .cta-buttons {
        grid-template-columns: 1fr;
        gap: 10px;
    }
    
    .btn {
        padding: 12px 20px;
        font-size: 0.9rem;
    }
    
    .map-container {
        padding: 10px;
    }
    
    #yandex-map {
        height: 300px !important;
    }
    
    .map-overlay {
        bottom: 15px;
        left: 15px;
        right: 15px;
        padding: 10px 12px;
    }
    
    .map-overlay h4 {
        font-size: 1rem;
    }
    
    .map-overlay p {
        font-size: 0.85rem;
    }
    
    .map-icon {
        font-size: 36px;
    }
    
    .social-links {
        flex-direction: column;
        align-items: center;
    }
    
    .social-link {
        width: 200px;
    }
    
    .checkbox-label {
        font-size: 13px;
    }
}


================================================================================
–§–ê–ô–õ: static/css/sections/about.css
================================================================================
/* About Section Styles */
.about-section {
    padding: 100px 0;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    position: relative;
    overflow: hidden;
}

.about-section::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -10%;
    width: 400px;
    height: 400px;
    background: radial-gradient(circle, rgba(255,182,193,0.1) 0%, rgba(255,255,255,0) 70%);
    border-radius: 50%;
}

.about-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
    position: relative;
    z-index: 2;
}

/* Header */
.about-header {
    text-align: center;
    margin-bottom: 80px;
}

.about-title {
    font-size: 3rem;
    font-weight: 700;
    background: linear-gradient(135deg, #ffd166, #ff9e6d);
    margin-bottom: 20px;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.about-divider {
    width: 80px;
    height: 4px;
    background: #FF6C35;
    margin: 0 auto 30px;
    border-radius: 2px;
}

.about-subtitle {
    font-size: 1.3rem;
    color: #6c757d;
    font-weight: 300;
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.6;
}

/* –£–¢–ü –±–ª–æ–∫ */
.about-utp {
    max-width: 900px;
    margin: 0 auto 60px;
    border-radius: 20px;
    padding: 50px 40px;
    text-align: center;
    color: white;
    box-shadow: 0 10px 30px rgba(255, 107, 0, 0.2);
    position: relative;
    overflow: hidden;
}

.about-utp::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -20%;
    width: 300px;
    height: 300px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
}

.utp-content {
    position: relative;
    z-index: 2;
}

.utp-icon {
    font-size: 4rem;
    margin-bottom: 20px;
    animation: float 3s ease-in-out infinite;
}

@keyframes float {
    0%, 100% {
        transform: translateY(0px);
    }
    50% {
        transform: translateY(-10px);
    }
}

.utp-title {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 20px;
    color: white;
}

.utp-text {
    font-size: 1.2rem;
    line-height: 1.8;
    color: rgba(255, 255, 255, 0.95);
    max-width: 700px;
    margin: 0 auto;
}

/* Content Layout */
.about-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 80px;
    align-items: center;
    margin-bottom: 80px;
}

/* Text Section */
.about-text {
    padding-right: 40px;
}

.about-highlight {
    display: flex;
    align-items: center;
    margin-bottom: 30px;
    background: white;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    border-left: 4px solid #FF6C35;
}

.highlight-icon {
    font-size: 2rem;
    margin-right: 15px;
}

.about-highlight h3 {
    color: #1a1b1c!important;
    font-size: 1.4rem;
    margin: 0;
}

.about-description {
    font-size: 1.1rem;
    line-height: 1.8;
    color: #6c757d;
    margin-bottom: 40px;
}

/* Features */
.about-features {
    margin-bottom: 50px;
}

.feature-item {
    display: flex;
    align-items: flex-start;
    margin-bottom: 30px;
    padding: 20px;
    border-radius: 12px;
    transition: all 0.3s ease;
    background: white;
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
}

.feature-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 30px rgba(0,0,0,0.15);
}

.feature-number {
    font-size: 2rem;
    font-weight: 700;
    color: #1a1b1c!important;
    margin-right: 20px;
    min-width: 60px;
    opacity: 0.7;
}

.feature-content h4 {
    color: #1a1b1c!important;
    margin-bottom: 8px;
    font-size: 1.2rem;
}

.feature-content p {
    color: #1a1b1c!important;
    margin: 0;
    line-height: 1.6;
}

/* Stats */
.about-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 30px;
    text-align: center;
}

.stat-item {
    background: white;
    padding: 30px 20px;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    transition: transform 0.3s ease;
}

.stat-item:hover {
    transform: translateY(-5px);
}

.stat-number {
    font-size: 3rem;
    font-weight: 700;
    color: #1a1b1c!important;
    margin-bottom: 10px;
}

.stat-label {
    color: #1a1b1c!important;
    font-size: 0.9rem;
    font-weight: 500;
}

/* Visual Section */
.about-visual {
    position: relative;
}

.image-container {
    position: relative;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 20px 40px rgba(0,0,0,0.15);
}

.about-image {
    width: 100%;
    height: 500px;
    object-fit: cover;
    transition: transform 0.3s ease;
}

.image-container:hover .about-image {
    transform: scale(1.05);
}

.image-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, rgba(102,126,234,0.1) 0%, rgba(118,75,162,0.1) 100%);
}

.floating-card {
    position: absolute;
    bottom: -30px;
    left: -30px;
    background: white;
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.2);
    text-align: center;
    min-width: 200px;
}

.card-icon {
    font-size: 2.5rem;
    margin-bottom: 10px;
}

.floating-card h4 {
    color: #0f1010!important;
    margin-bottom: 5px;
    font-size: 1.1rem;
}

.floating-card p {
    color: #0f1010!important;
    margin: 0;
    font-size: 0.9rem;
}

/* CTA Section */
.about-cta {
    box-shadow: 0 10px 30px rgba(255, 107, 0, 0.2);
    border-radius: 20px;
    padding: 60px 40px;
    text-align: center;
    color: #ffffff;
    position: relative;
    overflow: hidden;
}

.about-cta::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -50%;
    width: 200px;
    height: 200px;
    background: rgba(255,255,255,0.1);
    border-radius: 50%;
}

.cta-content {
    position: relative;
    z-index: 2;
}

.cta-content h3 {
    font-size: 2.2rem;
    margin-bottom: 15px;
    font-weight: 700;
    color: #ffffff;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.cta-content p {
    font-size: 1.2rem;
    margin-bottom: 30px;
    color: #ffffff;
    opacity: 1;
    font-weight: 400;
    text-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);
    line-height: 1.6;
}

.cta-button {
    display: inline-block;
    background: #FF6C35 !important;
    color: #ffffff !important;
    padding: 15px 40px;
    border-radius: 50px;
    text-decoration: none;
    font-weight: 600;
    font-size: 1.1rem;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(255, 108, 53, 0.4) !important;
    border: 1px solid #FF6C35 !important;
}

.cta-button:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 25px rgba(255, 108, 53, 0.6) !important;
    background: #ff7a45 !important;
    border-color: #ff7a45 !important;
}

/* –ê–Ω–∏–º–∞—Ü–∏–∏ */
@keyframes countUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.stat-number {
    animation: countUp 1s ease-out;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 968px) {
    .about-content {
        grid-template-columns: 1fr;
        gap: 50px;
    }
    
    .about-text {
        padding-right: 0;
    }
    
    .about-title {
        font-size: 2.5rem;
    }
    
    .about-stats {
        grid-template-columns: 1fr;
        gap: 20px;
    }
}

@media (max-width: 768px) {
    .about-section {
        padding: 60px 0;
    }
    
    .about-title {
        font-size: 2rem;
    }
    
    .about-utp {
        padding: 40px 25px;
        margin-bottom: 40px;
    }
    
    .utp-title {
        font-size: 1.5rem;
    }
    
    .utp-text {
        font-size: 1rem;
    }
    
    .utp-icon {
        font-size: 3rem;
    }
    
    .about-highlight {
        flex-direction: column;
        text-align: center;
    }
    
    .highlight-icon {
        margin-right: 0;
        margin-bottom: 10px;
    }
    
    .floating-card {
        position: relative;
        bottom: auto;
        left: auto;
        margin-top: 30px;
    }
    
    .feature-item {
        flex-direction: column;
        text-align: center;
    }
    
    .feature-number {
        margin-right: 0;
        margin-bottom: 10px;
    }
}

@media (max-width: 480px) {
    .about-container {
        padding: 0 15px;
    }
    
    .about-title {
        font-size: 1.8rem;
    }
    
    .about-utp {
        padding: 30px 20px;
    }
    
    .utp-title {
        font-size: 1.3rem;
    }
    
    .utp-text {
        font-size: 0.95rem;
    }
    
    .utp-icon {
        font-size: 2.5rem;
    }
    
    .about-cta {
        padding: 40px 20px;
    }
    
    .cta-content h3 {
        font-size: 1.8rem;
    }
}


================================================================================
–§–ê–ô–õ: static/css/sections/header.css
================================================================================
/* Header Styles */


.header {
    background: #2A2D2C !important;
    color: #ffffff !important;
    padding: 0.75rem 0 !important;
    position: sticky;
    top: 0;
    z-index: 1000;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(10px);
}

.header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background:
        radial-gradient(circle at 30% 40%, rgba(255, 255, 255, 0.18) 0%, transparent 55%),
        radial-gradient(circle at 70% 60%, rgba(255, 255, 255, 0.12) 0%, transparent 55%);
    pointer-events: none;
}

.header .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
    position: relative;
    z-index: 1;
}

/* Header Content */
.header-content {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 2rem;
    flex-wrap: wrap;
}

/* Logo Section */
.header-logo {
    display: flex;
    align-items: center;
    justify-content: center;
    flex: 0 0 auto;
}

.logo-link {
    display: flex;
    align-items: center;
    gap: 12px;
    text-decoration: none;
    color: white;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.logo-link:hover {
    transform: scale(1.05);
}

.logo-icon {
    width: 50px;
    height: 50px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.logo-text {
    display: flex;
    flex-direction: column;
    line-height: 1.2;
}

.logo-name {
    font-size: 24px;
    font-weight: 800;
    color: white;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.logo-tagline {
    font-size: 12px;
    color: rgba(255, 255, 255, 0.8);
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* Contact Info */
.header-contact {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1.5rem;
    flex: 1 1 auto;
    flex-wrap: wrap;
}

.contact-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.6rem 0.9rem;
    border-radius: 10px;
    background: rgba(255, 255, 255, 0.12);
    border: 1px solid rgba(255, 255, 255, 0.18);
    backdrop-filter: blur(8px);
    transition: all 0.3s ease;
}

.contact-item:hover {
    background: rgba(255, 255, 255, 0.18);
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(5, 100, 134, 0.2);
}

.contact-icon {
    font-size: 18px;
    opacity: 0.9;
}

.contact-details {
    display: flex;
    flex-direction: column;
    line-height: 1.3;
}

.contact-phone,
.contact-time {
    font-size: 14px;
    font-weight: 600;
    color: white;
    text-decoration: none;
    transition: opacity 0.3s ease;
}

.contact-phone:hover {
    opacity: 0.8;
}

.contact-label {
    font-size: 11px;
    color: rgba(255, 255, 255, 0.7);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-weight: 500;
}

/* CTA Button */
.header-cta {
    display: flex;
    align-items: center;
    justify-content: center;
    flex: 0 0 auto;
}

.btn-booking {
    background: #FF6C35 !important;
    color: #ffffff !important;
    text-decoration: none;
    padding: 0.85rem 1.75rem;
    border-radius: 12px;
    font-weight: 700;
    font-size: 0.95rem;
    text-transform: uppercase;
    letter-spacing: 0.6px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 4px 20px rgba(255, 108, 53, 0.5), 0 2px 8px rgba(255, 108, 53, 0.3) !important;
    border: 1px solid #FF6C35 !important;
    position: relative;
}

.btn-booking:hover {
    transform: translateY(-1px) !important;
    box-shadow: 0 8px 30px rgba(255, 108, 53, 0.7), 0 4px 12px rgba(255, 108, 53, 0.5) !important;
    background: #ff7a45 !important;
    border-color: #ff7a45 !important;
    cursor: pointer !important;
}

.btn-booking:active {
    transform: translateY(0);
}

/* Responsive Design */
@media (max-width: 968px) {
    .header-contact {
        gap: 15px;
    }
    
    .contact-item {
        padding: 10px 14px;
    }
}

@media (max-width: 768px) {
    .header-content {
        padding: 15px 0;
        flex-direction: column;
        gap: 20px;
        text-align: center;
        align-items: center;
        justify-content: center;
    }
    
    .header-logo {
        justify-content: center;
        width: 100%;
    }
    
    .logo-link {
        justify-content: center;
    }
    
    .header-cta {
        justify-content: center;
        width: 100%;
    }
    
    .header-contact {
        gap: 10px;
    }
    
    .logo-icon {
        width: 45px;
        height: 45px;
        font-size: 20px;
    }
    
    .logo-name {
        font-size: 20px;
    }
    
    .logo-tagline {
        font-size: 11px;
    }
    
    .contact-item {
        padding: 8px 12px;
    }
    
    .btn-booking {
        padding: 12px 18px;
        font-size: 13px;
    }
}

@media (max-width: 600px) {
    .header-content {
        flex-direction: column;
        gap: 15px;
        text-align: center;
        align-items: center;
        justify-content: center;
    }
    
    .header-logo {
        justify-content: center;
        width: 100%;
    }
    
    .logo-link {
        justify-content: center;
    }
    
    .header-cta {
        justify-content: center;
        width: 100%;
    }
    
    .header-contact {
        flex-direction: column;
        align-items: center;
        gap: 10px;
    }
    
    .contact-item {
        width: 100%;
        max-width: 250px;
        justify-content: center;
    }
    
    .btn-booking {
        width: 100%;
        max-width: 250px;
        padding: 16px 24px;
        font-size: 16px;
    }
}

@media (max-width: 480px) {
    .header .container {
        padding: 0 15px;
    }
    
    .header-content {
        padding: 12px 0;
        flex-direction: column;
        gap: 12px;
        text-align: center;
        align-items: center;
        justify-content: center;
    }
    
    .header-logo {
        justify-content: center;
        width: 100%;
    }
    
    .logo-link {
        justify-content: center;
    }
    
    .header-cta {
        justify-content: center;
        width: 100%;
    }
    
    .logo-icon {
        width: 40px;
        height: 40px;
        font-size: 18px;
    }
    
    .logo-name {
        font-size: 18px;
    }
    
    .logo-tagline {
        font-size: 10px;
    }
    
    .contact-item {
        padding: 8px 12px;
    }
    
    .contact-phone,
    .contact-time {
        font-size: 13px;
    }
    
    .contact-label {
        font-size: 10px;
    }
    
    .btn-booking {
        padding: 14px 20px;
        font-size: 14px;
    }
}

/* ===== BOOTSTRAP –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–¨ ===== */

/* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Bootstrap navbar –¥–ª—è –Ω–∞—à–µ–≥–æ –¥–∏–∑–∞–π–Ω–∞ */
.header.navbar {
    background: linear-gradient(135deg, #2A2D2C 1000%, #2A2D2C 100%, #2A2D2C 100%) !important;
    border: none !important;
    padding: 0.75rem 0 !important;
}

.header .container {
    max-width: 1200px;
    padding: 0 2rem;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è navbar-brand */
.header-logo .navbar-brand {
    color: #ffffff !important;
    font-weight: 700;
    font-size: 1.5rem;
}

.header-logo .navbar-brand:hover {
    color: #ffffff !important;
    transform: scale(1.05);
    background: rgba(255, 255, 255, 0.1);
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ */
.header-cta .btn-primary {
    background: #FF6C35 !important;
    color: #ffffff !important;
    border: 1px solid #FF6C35 !important;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    box-shadow: 0 4px 15px rgba(255, 108, 53, 0.4) !important;
}

.header-cta .btn-primary:hover {
    background: #ff7a45 !important;
    border-color: #ff7a45 !important;
    color: #ffffff !important;
    transform: translateY(-2px);
    box-shadow: 0 6px 25px rgba(255, 108, 53, 0.6) !important;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è Bootstrap */
@media (max-width: 768px) {
    .header .container {
        padding: 0 1rem;
    }
    
    .header-contact {
        display: none !important;
    }
    
    .header-content {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
        align-items: center;
        justify-content: center;
    }
    
    .header-logo {
        justify-content: center;
        width: 100%;
    }
    
    .logo-link {
        justify-content: center;
    }
    
    .header-cta {
        justify-content: center;
        width: 100%;
    }
}

@media (max-width: 480px) {
    .header .container {
        padding: 0 0.75rem;
    }
}


================================================================================
–§–ê–ô–õ: static/css/sections/footer.css
================================================================================
/* ===== FOOTER STYLES ===== */
.footer {
    background: #2A2D2C !important;
    color: #ffffff;
    padding: 70px 0 30px;
    position: relative;
    overflow: hidden;
}

.footer::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
    position: relative;
    z-index: 1;
}

/* –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ—É—Ç–µ—Ä–∞ */
.footer-content {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 60px;
    align-items: start;
    margin-bottom: 50px;
}

@media (max-width: 768px) {
    .footer-content {
        grid-template-columns: 1fr;
        gap: 40px;
    }
}

/* –ö–æ–ª–æ–Ω–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ */
.footer-info {
    max-width: 500px;
}

.footer-title {
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 20px;
    background: linear-gradient(135deg, #ffd166, #ff9e6d);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    position: relative;
    display: inline-block;
}

.footer-title::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 0;
    width: 60px;
    height: 3px;
    background: linear-gradient(90deg, #ffd166, #ff9e6d);
    border-radius: 2px;
}

.footer-description {
    font-size: 1rem;
    line-height: 1.6;
    color: rgba(255, 255, 255, 0.85);
    margin-bottom: 30px;
}

/* –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ */
.footer-social {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
}

.social-link {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: rgba(255, 255, 255, 0.08);
    color: white;
    text-decoration: none;
    border-radius: 50px;
    font-size: 0.95rem;
    font-weight: 500;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
}

.social-link:hover {
    background: rgba(255, 255, 255, 0.15);
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(255, 209, 102, 0.15);
    border-color: rgba(255, 209, 102, 0.3);
}

.social-link::before {
    content: '';
    width: 20px;
    height: 20px;
    background: currentColor;
    mask-position: center;
    mask-repeat: no-repeat;
    -webkit-mask-position: center;
    -webkit-mask-repeat: no-repeat;
}

.social-link:nth-child(1)::before { mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 0C5.372 0 0 5.372 0 12s5.372 12 12 12 12-5.372 12-12S18.628 0 12 0zm5.894 8.221c-.093 2.026-1.098 6.791-1.098 6.791s-.064.428-.287.644c-.23.225-.492.223-.615.212-.433-.04-1.162-.241-2.04-.77-1.13-.675-1.771-1.098-2.27-1.576-.924-.895-.618-1.388.48-2.209.325-.246 1.877-1.678 1.918-1.82 0-.03-.006-.055-.018-.082-.013-.026-.031-.045-.085-.045-.122 0-.246.037-.525.111-.277.074-1.62.46-2.74.697-1.14.24-1.368.075-1.52-.24-.152-.316.915-1.726 1.278-2.317.355-.58.71-.48 1.006.152.296.63.988 2.06 1.076 2.207.088.148.148.332.03.536-.118.205-.176.296-.352.474-.176.177-.365.387-.522.564-.17.194-.347.404-.152.765.195.36.87 1.695 1.894 2.745 1.325 1.36 2.445 1.773 2.863 1.964.418.192.932.148 1.23-.296.297-.443.297-.822.208-.987-.089-.165-.326-.27-.683-.477-.356-.207-2.1-1.037-2.43-1.294-.33-.257-.247-.37.33-.37.577 0 1.153.034 1.646.09.493.055.77-.055.86-.175.09-.12.06-.57-.09-.985z' fill='white'/%3E%3C/svg%3E"); }
.social-link:nth-child(2)::before { mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 0C5.372 0 0 5.372 0 12s5.372 12 12 12 12-5.372 12-12S18.628 0 12 0zm5.894 8.221c-.093 2.026-1.098 6.791-1.098 6.791s-.064.428-.287.644c-.23.225-.492.223-.615.212-.433-.04-1.162-.241-2.04-.77-1.13-.675-1.771-1.098-2.27-1.576-.924-.895-.618-1.388.48-2.209.325-.246 1.877-1.678 1.918-1.82 0-.03-.006-.055-.018-.082-.013-.026-.031-.045-.085-.045-.122 0-.246.037-.525.111-.277.074-1.62.46-2.74.697-1.14.24-1.368.075-1.52-.24-.152-.316.915-1.726 1.278-2.317.355-.58.71-.48 1.006.152.296.63.988 2.06 1.076 2.207.088.148.148.332.03.536-.118.205-.176.296-.352.474-.176.177-.365.387-.522.564-.17.194-.347.404-.152.765.195.36.87 1.695 1.894 2.745 1.325 1.36 2.445 1.773 2.863 1.964.418.192.932.148 1.23-.296.297-.443.297-.822.208-.987-.089-.165-.326-.27-.683-.477-.356-.207-2.1-1.037-2.43-1.294-.33-.257-.247-.37.33-.37.577 0 1.153.034 1.646.09.493.055.77-.055.86-.175.09-.12.06-.57-.09-.985z' fill='white'/%3E%3C/svg%3E"); }
.social-link:nth-child(3)::before { mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z' fill='white'/%3E%3C/svg%3E"); }

/* –ö–æ–ª–æ–Ω–∫–∞ –∫–Ω–æ–ø–∫–∏ */
.footer-cta {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 20px;
}

@media (max-width: 768px) {
    .footer-cta {
        align-items: stretch;
    }
}

/* –ö–Ω–æ–ø–∫–∞ –∑–∞–ø–∏—Å–∏ */
.footer-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 18px 36px;
    background: #FF6C35 !important;
    color: #ffffff !important;
    text-decoration: none;
    border-radius: 15px;
    font-weight: 600;
    font-size: 1.1rem;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 4px 15px rgba(255, 108, 53, 0.4) !important;
    border: 1px solid #FF6C35 !important;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    white-space: nowrap;
    min-width: 200px;
}

.footer-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.6s;
}

.footer-btn:hover {
    transform: translateY(-4px) scale(1.02);
    box-shadow: 0 6px 25px rgba(255, 108, 53, 0.6) !important;
    background: #ff7a45 !important;
    border-color: #ff7a45 !important;
}

.footer-btn:hover::before {
    left: 100%;
}

.footer-btn-icon {
    font-size: 1.2rem;
    transition: transform 0.3s ease;
}

.footer-btn:hover .footer-btn-icon {
    transform: translateX(3px);
}

/* Copyright */
.footer-bottom {
    text-align: center;
    padding-top: 30px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    color: white;
    font-size: 0.9rem;
    position: relative;
}

.footer-bottom p {
    color: white;	
}

.footer-bottom::before {
    content: '';
    position: absolute;
    top: -1px;
    left: 50%;
    transform: translateX(-50%);
    width: 100px;
    height: 2px;
    background: linear-gradient(90deg, transparent, #ff9e6d, transparent);
}

/* –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
.footer-decoration {
    position: absolute;
    pointer-events: none;
}

.footer-decoration:nth-child(1) {
    top: 20%;
    left: 5%;
    width: 40px;
    height: 40px;
    background: radial-gradient(circle, rgba(255, 209, 102, 0.1) 0%, transparent 70%);
    border-radius: 50%;
}

.footer-decoration:nth-child(2) {
    bottom: 20%;
    right: 5%;
    width: 60px;
    height: 60px;
    background: radial-gradient(circle, rgba(255, 158, 109, 0.08) 0%, transparent 70%);
    border-radius: 50%;
}

.razrabotka{
	text-align: center;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.footer-info {
    animation: fadeInUp 0.6s ease-out;
}

.footer-cta {
    animation: fadeInUp 0.6s ease-out 0.2s both;
}

/* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
@media (max-width: 768px) {
    .footer {
        padding: 50px 0 25px;
    }
    
    .footer-content {
        gap: 40px;
    }
    
    .footer-title {
        font-size: 1.6rem;
    }
    
    .footer-description {
        font-size: 0.95rem;
    }
    
    .social-link {
        padding: 8px 16px;
        font-size: 0.9rem;
    }
    
    .footer-btn {
        padding: 16px 30px;
        font-size: 1rem;
        width: 100%;
        justify-content: center;
    }
    
    .footer-bottom {
        font-size: 0.85rem;
        padding-top: 25px;
    }
}

@media (max-width: 480px) {
    .footer {
        padding: 40px 0 20px;
    }
    
    .container {
        padding: 0 15px;
    }
    
    .footer-title {
        font-size: 1.4rem;
    }
    
    .footer-description {
        font-size: 0.9rem;
        line-height: 1.5;
    }
    
    .footer-social {
        gap: 10px;
    }
    
    .social-link {
        padding: 7px 14px;
        font-size: 0.85rem;
    }
    
    .footer-btn {
        padding: 14px 24px;
        font-size: 0.95rem;
    }
}


================================================================================
–§–ê–ô–õ: static/css/utils/responsive.css
================================================================================
/* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ */









================================================================================
–§–ê–ô–õ: static/css/utils/helpers.css
================================================================================
/* –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ */









================================================================================
–§–ê–ô–õ: static/css/components/modals.css
================================================================================
/* –°—Ç–∏–ª–∏ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω */









================================================================================
–§–ê–ô–õ: static/css/components/booking_form.css
================================================================================
/* –°—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ—Ä–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è */

.booking-form-container {
    max-width: 800px;
    margin: 0 auto;
    padding: var(--spacing-xl);
    background: var(--bg-white);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
}

.booking-form-header {
    text-align: center;
    margin-bottom: var(--spacing-2xl);
}

.booking-form-header h2 {
    font-size: var(--font-size-3xl);
    color: var(--primary-color);
    margin-bottom: var(--spacing-sm);
}

.booking-form-header p {
    color: var(--text-light);
    font-size: var(--font-size-lg);
}

/* –®–∞–≥–∏ —Ñ–æ—Ä–º—ã */
.form-step {
    display: none;
    animation: fadeIn 0.3s ease-in-out;
}

.form-step.active {
    display: block;
}

.step-header {
    display: flex;
    align-items: center;
    margin-bottom: var(--spacing-xl);
    padding-bottom: var(--spacing-md);
    border-bottom: 2px solid var(--border-light);
}

.step-number {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: var(--gradient-primary);
    color: var(--text-white);
    border-radius: var(--radius-full);
    font-weight: var(--font-weight-bold);
    font-size: var(--font-size-lg);
    margin-right: var(--spacing-md);
}

.step-header h3 {
    font-size: var(--font-size-2xl);
    color: var(--text-dark);
    margin: 0;
}

/* –ì—Ä—É–ø–ø—ã —Ñ–æ—Ä–º */
.form-group {
    margin-bottom: var(--spacing-xl);
}

.form-label {
    display: flex;
    align-items: center;
    font-weight: var(--font-weight-semibold);
    color: var(--text-dark);
    margin-bottom: var(--spacing-sm);
    font-size: var(--font-size-md);
}

.label-icon {
    margin-right: var(--spacing-sm);
    font-size: var(--font-size-lg);
}

.form-input,
.form-textarea {
    width: 100%;
    padding: var(--input-padding);
    border: 2px solid var(--border-color);
    border-radius: var(--input-border-radius);
    font-size: var(--font-size);
    transition: var(--transition);
    background: var(--bg-white);
}

.form-input:focus,
.form-textarea:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(5, 100, 134, 0.1);
}

.form-textarea {
    min-height: 120px;
    resize: vertical;
}

.form-error {
    color: var(--status-danger);
    font-size: var(--font-size-sm);
    margin-top: var(--spacing-xs);
    display: none;
}

.form-error.show {
    display: block;
}

.form-help {
    margin-top: var(--spacing-sm);
    padding: var(--spacing-md);
    background: var(--bg-light);
    border-radius: var(--radius);
    border-left: 4px solid var(--primary-color);
}

.form-help p {
    margin: 0 0 var(--spacing-sm) 0;
    font-weight: var(--font-weight-medium);
    color: var(--text-dark);
}

.form-help ul {
    margin: 0;
    padding-left: var(--spacing-lg);
}

.form-help li {
    margin-bottom: var(--spacing-xs);
    color: var(--text-light);
}

/* –í—ã–±–æ—Ä –º–∞—Å—Ç–µ—Ä–∞ */
.master-selection {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--spacing-md);
}

.master-card {
    border: 2px solid var(--border-color);
    border-radius: var(--radius-md);
    padding: var(--spacing-lg);
    cursor: pointer;
    transition: var(--transition);
    background: var(--bg-white);
}

.master-card:hover {
    border-color: var(--primary-color);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.master-card.selected {
    border-color: var(--primary-color);
    background: rgba(5, 100, 134, 0.05);
}

.master-card input[type="radio"] {
    display: none;
}

.master-info {
    text-align: center;
}

.master-photo {
    width: 80px;
    height: 80px;
    border-radius: var(--radius-full);
    margin: 0 auto var(--spacing-md);
    background: var(--bg-light);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-3xl);
}

.master-name {
    font-weight: var(--font-weight-semibold);
    color: var(--text-dark);
    margin-bottom: var(--spacing-xs);
}

.master-specialty {
    color: var(--text-light);
    font-size: var(--font-size-sm);
}

/* –í—ã–±–æ—Ä —É—Å–ª—É–≥–∏ */
.service-selection {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
}

.service-card {
    border: 2px solid var(--border-color);
    border-radius: var(--radius-md);
    padding: var(--spacing-lg);
    cursor: pointer;
    transition: var(--transition);
    background: var(--bg-white);
    text-align: center;
}

.service-card:hover {
    border-color: var(--primary-color);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.service-card.selected {
    border-color: var(--primary-color);
    background: rgba(5, 100, 134, 0.05);
}

.service-card input[type="radio"] {
    display: none;
}

.service-icon {
    font-size: var(--font-size-4xl);
    margin-bottom: var(--spacing-md);
}

.service-name {
    font-weight: var(--font-weight-semibold);
    color: var(--text-dark);
    margin-bottom: var(--spacing-xs);
}

.service-price {
    color: var(--primary-color);
    font-weight: var(--font-weight-bold);
    font-size: var(--font-size-lg);
}

.service-duration {
    color: var(--text-light);
    font-size: var(--font-size-sm);
}

/* –í—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏ */
.time-selection {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: var(--spacing-sm);
}

.time-slot {
    padding: var(--spacing-md);
    border: 2px solid var(--border-color);
    border-radius: var(--radius);
    text-align: center;
    cursor: pointer;
    transition: var(--transition);
    background: var(--bg-white);
}

.time-slot:hover {
    border-color: var(--primary-color);
    background: rgba(5, 100, 134, 0.05);
}

.time-slot.selected {
    border-color: var(--primary-color);
    background: var(--primary-color);
    color: var(--text-white);
}

.time-slot.unavailable {
    background: var(--bg-light);
    color: var(--text-muted);
    cursor: not-allowed;
    opacity: 0.5;
}

.time-slot input[type="radio"] {
    display: none;
}

/* –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ */
.price-calculation {
    background: var(--bg-light);
    border-radius: var(--radius-md);
    padding: var(--spacing-xl);
    margin-bottom: var(--spacing-xl);
}

.price-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-md) 0;
    border-bottom: 1px solid var(--border-light);
}

.price-item:last-child {
    border-bottom: none;
}

.price-item.total {
    font-weight: var(--font-weight-bold);
    font-size: var(--font-size-lg);
    color: var(--primary-color);
    border-top: 2px solid var(--primary-color);
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-md);
}

.price-label {
    color: var(--text-dark);
}

.price-value {
    color: var(--primary-color);
    font-weight: var(--font-weight-semibold);
}

/* –°–≤–æ–¥–∫–∞ –∑–∞–ø–∏—Å–∏ */
.booking-summary {
    background: var(--bg-light);
    border-radius: var(--radius-md);
    padding: var(--spacing-xl);
    margin-bottom: var(--spacing-xl);
}

.summary-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-sm) 0;
    border-bottom: 1px solid var(--border-light);
}

.summary-item:last-child {
    border-bottom: none;
}

.summary-label {
    color: var(--text-dark);
    font-weight: var(--font-weight-medium);
}

.summary-value {
    color: var(--text-light);
}

/* –ß–µ–∫–±–æ–∫—Å */
.checkbox-label {
    display: flex;
    align-items: flex-start;
    cursor: pointer;
    margin-bottom: var(--spacing-md);
}

.checkbox-label input[type="checkbox"] {
    margin-right: var(--spacing-sm);
    margin-top: 2px;
}

.checkbox-text {
    color: var(--text-dark);
    line-height: var(--line-height-relaxed);
}

.link {
    color: var(--primary-color);
    text-decoration: underline;
}

.link:hover {
    color: var(--primary-dark);
}

/* –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —à–∞–≥–∞–º */
.step-navigation {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: var(--spacing-2xl);
    padding-top: var(--spacing-xl);
    border-top: 1px solid var(--border-light);
}

.btn-next,
.btn-prev,
.btn-submit {
    min-width: 120px;
}

/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ */
.form-progress {
    margin-top: var(--spacing-xl);
    padding-top: var(--spacing-xl);
    border-top: 1px solid var(--border-light);
}

.progress-bar {
    width: 100%;
    height: 8px;
    background: var(--bg-light);
    border-radius: var(--radius-full);
    overflow: hidden;
    margin-bottom: var(--spacing-sm);
}

.progress-fill {
    height: 100%;
    background: var(--gradient-primary);
    border-radius: var(--radius-full);
    transition: width 0.3s ease;
    width: 12.5%; /* 1/8 —à–∞–≥–æ–≤ */
}

.progress-text {
    text-align: center;
    color: var(--text-light);
    font-size: var(--font-size-sm);
}

/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É—Å–ø–µ—Ö–∞ */
.modal {
    display: none;
    position: fixed;
    z-index: 10000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(5px);
    overflow: auto;
}

.modal.show,
.modal[style*="display: block"],
.modal[style*="display: flex"] {
    display: flex !important;
    align-items: center;
    justify-content: center;
    animation: fadeIn 0.3s ease;
}

/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è */
#successModal.show,
#successModal[style*="display: flex"],
#successModal[style*="display:flex"] {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    position: fixed !important;
    z-index: 99999 !important;
    left: 0 !important;
    top: 0 !important;
    width: 100% !important;
    height: 100% !important;
    background-color: rgba(0, 0, 0, 0.5) !important;
    opacity: 1 !important;
    visibility: visible !important;
    pointer-events: auto !important;
}

.modal-content {
    background: var(--bg-white);
    border-radius: var(--modal-border-radius);
    box-shadow: var(--modal-shadow);
    max-width: 600px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    animation: slideInUp 0.3s ease;
    position: relative;
    margin: auto;
    margin-top: 5%;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-xl);
    border-bottom: 1px solid var(--border-light);
}

.modal-header h2 {
    margin: 0;
    color: var(--primary-color);
}

.modal-close {
    background: none;
    border: none;
    font-size: var(--font-size-2xl);
    cursor: pointer;
    color: var(--text-light);
    padding: var(--spacing-xs);
    border-radius: var(--radius);
    transition: var(--transition);
}

.modal-close:hover {
    background: var(--bg-light);
    color: var(--text-dark);
}

.modal-body {
    padding: var(--spacing-xl);
    color: #000000;
}

.modal-body p,
.modal-body strong,
.modal-body span {
    color: #000000;
}

.success-icon {
    text-align: center;
    margin-bottom: var(--spacing-xl);
}

.success-icon .icon {
    font-size: var(--font-size-5xl);
    color: var(--status-success);
}

.success-message {
    text-align: center;
    margin-bottom: var(--spacing-xl);
}

.success-message h3 {
    color: var(--primary-color);
    margin-bottom: var(--spacing-sm);
}

.booking-details {
    background: var(--bg-light);
    border-radius: var(--radius-md);
    padding: var(--spacing-lg);
    margin-bottom: var(--spacing-xl);
}

.next-steps {
    margin-bottom: var(--spacing-xl);
}

.next-steps h4 {
    color: var(--text-dark);
    margin-bottom: var(--spacing-md);
}

.next-steps ul {
    margin: 0;
    padding-left: var(--spacing-lg);
}

.next-steps li {
    margin-bottom: var(--spacing-xs);
    color: var(--text-light);
}

.telegram-notification {
    display: flex;
    align-items: center;
    background: linear-gradient(135deg, #0088cc, #229ED9);
    color: white;
    border-radius: var(--radius-md);
    padding: var(--spacing-lg);
    margin-bottom: var(--spacing-xl);
}

.telegram-icon {
    margin-right: var(--spacing-md);
}

.telegram-icon .icon {
    font-size: var(--font-size-3xl);
}

.telegram-content h4 {
    margin: 0 0 var(--spacing-xs) 0;
    color: white;
}

.telegram-content p {
    margin: 0 0 var(--spacing-md) 0;
    opacity: 0.9;
}

.btn-telegram {
    background: white;
    color: #0088cc;
    border: none;
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--radius);
    text-decoration: none;
    font-weight: var(--font-weight-semibold);
    transition: var(--transition);
}

.btn-telegram:hover {
    background: rgba(255, 255, 255, 0.9);
    transform: translateY(-1px);
}

.contact-info {
    background: var(--bg-light);
    border-radius: var(--radius-md);
    padding: var(--spacing-lg);
}

.contact-info h4 {
    margin: 0 0 var(--spacing-md) 0;
    color: var(--text-dark);
}

.contact-item {
    display: flex;
    align-items: center;
    margin-bottom: var(--spacing-sm);
}

.contact-item:last-child {
    margin-bottom: 0;
}

.contact-icon {
    margin-right: var(--spacing-sm);
    font-size: var(--font-size-lg);
}

.contact-item a {
    color: var(--primary-color);
    text-decoration: none;
}

.contact-item a:hover {
    text-decoration: underline;
}

.modal-footer {
    padding: var(--spacing-xl);
    border-top: 1px solid var(--border-light);
    text-align: center;
}

/* –ê–Ω–∏–º–∞—Ü–∏–∏ */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 768px) {
    .booking-form-container {
        padding: var(--spacing-lg);
        margin: var(--spacing-md);
    }
    
    .master-selection,
    .service-selection {
        grid-template-columns: 1fr;
    }
    
    .time-selection {
        grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
    }
    
    .step-navigation {
        flex-direction: column;
        gap: var(--spacing-md);
    }
    
    .step-navigation .btn {
        width: 100%;
    }
    
    .modal-content {
        width: 95%;
        margin: var(--spacing-md);
    }
    
    .telegram-notification {
        flex-direction: column;
        text-align: center;
    }
    
    .telegram-icon {
        margin-right: 0;
        margin-bottom: var(--spacing-md);
    }
}

@media (max-width: 480px) {
    .booking-form-container {
        padding: var(--spacing-md);
        margin: var(--spacing-sm);
    }
    
    .step-header {
        flex-direction: column;
        text-align: center;
    }
    
    .step-number {
        margin-right: 0;
        margin-bottom: var(--spacing-sm);
    }
    
    .form-group {
        margin-bottom: var(--spacing-lg);
    }
    
    .price-calculation,
    .booking-summary {
        padding: var(--spacing-md);
    }
}









================================================================================
–§–ê–ô–õ: static/css/components/forms.css
================================================================================
/* –°—Ç–∏–ª–∏ —Ñ–æ—Ä–º */









================================================================================
–§–ê–ô–õ: static/css/components/buttons.css
================================================================================
/* –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ */

.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-6);
    border: none;
    border-radius: var(--radius-lg);
    font-size: var(--text-base);
    font-weight: var(--font-medium);
    text-decoration: none;
    cursor: pointer;
    transition: all var(--transition);
    position: relative;
    overflow: hidden;
    min-height: 44px;
    white-space: nowrap;
}

.btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none;
}

/* –û—Å–Ω–æ–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∫–Ω–æ–ø–æ–∫ */
.btn-primary {
    background: #FF6C35 !important;
    color: #ffffff !important;
    box-shadow: 0 4px 15px rgba(255, 108, 53, 0.4) !important;
    border-color: #FF6C35 !important;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 25px rgba(255, 108, 53, 0.6) !important;
    background: #ff7a45 !important;
    border-color: #ff7a45 !important;
}

.btn-secondary {
    background: var(--white);
    color: var(--primary);
    border: 2px solid var(--primary);
    box-shadow: var(--shadow-sm);
}

.btn-secondary:hover {
    background: var(--primary);
    color: var(--white);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.btn-outline {
    background: transparent;
    color: var(--gray-700);
    border: 2px solid var(--gray-300);
}

.btn-outline:hover {
    background: var(--gray-700);
    color: var(--white);
    border-color: var(--gray-700);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.btn-ghost {
    background: transparent;
    color: var(--gray-700);
    border: none;
}

.btn-ghost:hover {
    background: var(--gray-100);
    color: var(--gray-900);
}

/* –†–∞–∑–º–µ—Ä—ã –∫–Ω–æ–ø–æ–∫ */
.btn-sm {
    padding: var(--space-2) var(--space-4);
    font-size: var(--text-sm);
    min-height: 36px;
}

.btn-lg {
    padding: var(--space-4) var(--space-8);
    font-size: var(--text-lg);
    min-height: 52px;
}

.btn-xl {
    padding: var(--space-5) var(--space-10);
    font-size: var(--text-xl);
    min-height: 60px;
}

/* –ü–æ–ª–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
.btn-full {
    width: 100%;
}

/* –ö–Ω–æ–ø–∫–∏ —Å –∏–∫–æ–Ω–∫–∞–º–∏ */
.btn-icon {
    width: 44px;
    height: 44px;
    padding: 0;
    border-radius: var(--radius-full);
}

.btn-icon.btn-sm {
    width: 36px;
    height: 36px;
}

.btn-icon.btn-lg {
    width: 52px;
    height: 52px;
}

/* –≠—Ñ—Ñ–µ–∫—Ç—ã */
.btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s;
}

.btn:hover::before {
    left: 100%;
}

/* –ò—Å–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ */
.btn.booking-submit-btn::before,
.btn#submitBooking::before,
.btn#submitBookingMain::before,
button.btn#submitBooking::before,
button.btn.submitBooking::before {
    display: none !important;
    content: none !important;
    background: none !important;
    opacity: 0 !important;
    visibility: hidden !important;
    pointer-events: none !important;
    left: -9999px !important;
    width: 0 !important;
    height: 0 !important;
}

/* –û—Ç–∫–ª—é—á–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è */
.booking-submit-btn::before,
.booking-submit-btn.btn::before,
.booking-submit-btn.btn-primary::before,
#submitBooking::before,
#submitBooking.btn::before,
#submitBooking.btn-primary::before,
#submitBookingMain::before,
#submitBookingMain.btn::before,
#submitBookingMain.btn-primary::before,
button#submitBooking::before,
button#submitBooking.btn::before,
button#submitBooking.btn-primary::before,
button.submitBooking::before,
button.submitBooking.btn::before,
button.submitBooking.btn-primary::before {
    display: none !important;
    content: none !important;
    background: none !important;
    opacity: 0 !important;
    visibility: hidden !important;
    pointer-events: none !important;
}

/* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã */
.btn-pulse {
    animation: pulse 2s infinite;
}

.btn-loading {
    position: relative;
    color: transparent !important;
}

.btn-loading::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 20px;
    height: 20px;
    margin: -10px 0 0 -10px;
    border: 2px solid transparent;
    border-top: 2px solid currentColor;
    border-radius: var(--radius-full);
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* –ì—Ä—É–ø–ø—ã –∫–Ω–æ–ø–æ–∫ */
.btn-group {
    display: inline-flex;
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
}

.btn-group .btn {
    border-radius: 0;
    border-right: 1px solid rgba(255, 255, 255, 0.2);
}

.btn-group .btn:first-child {
    border-top-left-radius: var(--radius-lg);
    border-bottom-left-radius: var(--radius-lg);
}

.btn-group .btn:last-child {
    border-top-right-radius: var(--radius-lg);
    border-bottom-right-radius: var(--radius-lg);
    border-right: none;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 768px) {
    .btn {
        padding: var(--space-3) var(--space-5);
        font-size: var(--text-sm);
    }
    
    .btn-lg {
        padding: var(--space-4) var(--space-6);
        font-size: var(--text-base);
    }
    
    .btn-xl {
        padding: var(--space-4) var(--space-8);
        font-size: var(--text-lg);
    }
}

@media (max-width: 480px) {
    .btn {
        padding: var(--space-2) var(--space-4);
        font-size: var(--text-sm);
        min-height: 40px;
    }
    
    .btn-lg {
        padding: var(--space-3) var(--space-5);
        font-size: var(--text-base);
    }
}


================================================================================
–§–ê–ô–õ: static/css/components/cards.css
================================================================================
/* –°—Ç–∏–ª–∏ –∫–∞—Ä—Ç–æ—á–µ–∫ */









================================================================================
–§–ê–ô–õ: static/css/components/components.css
================================================================================
/* ===================================
   –°–¢–ò–õ–ò –î–õ–Ø –ö–û–ú–ü–û–ù–ï–ù–¢–û–í
   =================================== */

/* –ö–Ω–æ–ø–∫–∏ */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    padding: var(--btn-padding);
    border: var(--btn-border-width) solid transparent;
    border-radius: var(--btn-border-radius);
    font-size: var(--btn-font-size);
    font-weight: var(--btn-font-weight);
    text-decoration: none;
    cursor: pointer;
    transition: var(--transition);
    box-shadow: var(--shadow-sm);
    position: relative;
    overflow: hidden;
}

.btn:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

.btn:active {
    transform: translateY(0);
    box-shadow: var(--shadow-sm);
}

.btn-primary {
    background-color: var(--primary-color);
    color: var(--text-white);
    border-color: var(--primary-color);
}

.btn-primary:hover {
    background-color: var(--primary-dark);
    border-color: var(--primary-dark);
}

.btn-secondary {
    background-color: var(--secondary-color);
    color: var(--text-white);
    border-color: var(--secondary-color);
}

.btn-secondary:hover {
    background-color: var(--secondary-dark);
    border-color: var(--secondary-dark);
}

.btn-outline {
    background-color: transparent;
    color: var(--primary-color);
    border-color: var(--primary-color);
}

.btn-outline:hover {
    background-color: var(--primary-color);
    color: var(--text-white);
}

.btn-ghost {
    background-color: transparent;
    color: var(--text-dark);
    border-color: transparent;
}

.btn-ghost:hover {
    background-color: var(--bg-light);
    color: var(--primary-color);
}

.btn-sm {
    padding: var(--spacing-xs) var(--spacing-sm);
    font-size: var(--font-size-xs);
}

.btn-lg {
    padding: var(--spacing-md) var(--spacing-xl);
    font-size: var(--font-size-lg);
}

.btn-icon {
    width: 40px;
    height: 40px;
    padding: 0;
    border-radius: 50%;
}

.btn-icon img {
    width: 1.2em;
    height: 1.2em;
}

/* –ö–∞—Ä—Ç–æ—á–∫–∏ */
.card {
    background-color: var(--bg-white);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
    overflow: hidden;
    transition: var(--transition);
}

.card:hover {
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
}

.card-header {
    padding: var(--spacing-lg);
    border-bottom: 1px solid var(--border-light);
}

.card-title {
    font-family: var(--font-family-heading);
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    color: var(--text-dark);
    margin-bottom: var(--spacing-sm);
}

.card-subtitle {
    font-size: var(--font-size-sm);
    color: var(--text-medium);
}

.card-body {
    padding: var(--spacing-lg);
}

.card-footer {
    padding: var(--spacing-lg);
    border-top: 1px solid var(--border-light);
    background-color: var(--bg-light);
}

/* –§–æ—Ä–º—ã */
.form-group {
    margin-bottom: var(--spacing-lg);
}

.form-label {
    display: block;
    margin-bottom: var(--spacing-sm);
    font-weight: var(--font-weight-medium);
    color: var(--text-dark);
    font-size: var(--font-size-md);
}

.form-input {
    width: 100%;
    padding: var(--input-padding);
    border: var(--input-border-width) solid var(--border-color);
    border-radius: var(--input-border-radius);
    font-size: var(--font-size);
    color: var(--text-dark);
    background-color: var(--bg-white);
    transition: var(--transition);
    box-shadow: var(--shadow-sm);
}

.form-input:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(var(--primary-color-rgb), 0.2);
    outline: none;
}

.form-textarea {
    resize: vertical;
    min-height: 120px;
}

.form-select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: 2.5rem;
}

.form-error {
    color: var(--status-danger);
    font-size: var(--font-size-sm);
    margin-top: var(--spacing-xs);
}

.form-help {
    color: var(--text-muted);
    font-size: var(--font-size-sm);
    margin-top: var(--spacing-xs);
}

/* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
.modal {
    display: none;
    position: fixed;
    z-index: var(--z-modal);
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: var(--modal-backdrop-bg);
    backdrop-filter: blur(5px);
}

.modal-content {
    background-color: var(--bg-white);
    margin: 5% auto;
    padding: var(--spacing-2xl);
    border-radius: var(--radius-lg);
    box-shadow: var(--modal-shadow);
    position: relative;
    max-width: 600px;
    animation: slideInTop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--spacing-lg);
}

.modal-title {
    font-family: var(--font-family-heading);
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-semibold);
    color: var(--text-dark);
}

.modal-close {
    background: none;
    border: none;
    font-size: var(--font-size-2xl);
    color: var(--text-muted);
    cursor: pointer;
    transition: var(--transition);
}

.modal-close:hover {
    color: var(--text-dark);
    transform: rotate(90deg);
}

.modal-body {
    margin-bottom: var(--spacing-lg);
}

.modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: var(--spacing-md);
    border-top: 1px solid var(--border-light);
    padding-top: var(--spacing-lg);
}

/* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
.alert {
    padding: var(--spacing-md);
    border-radius: var(--radius);
    margin-bottom: var(--spacing-lg);
    border: 1px solid transparent;
}

.alert-success {
    background-color: var(--status-success-light);
    border-color: var(--status-success);
    color: var(--status-success-dark);
}

.alert-error {
    background-color: var(--status-danger-light);
    border-color: var(--status-danger);
    color: var(--status-danger-dark);
}

.alert-warning {
    background-color: var(--status-warning-light);
    border-color: var(--status-warning);
    color: var(--status-warning-dark);
}

.alert-info {
    background-color: var(--status-info-light);
    border-color: var(--status-info);
    color: var(--status-info-dark);
}

/* –ó–∞–≥—Ä—É–∑—á–∏–∫–∏ */
.spinner {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 2px solid var(--border-color);
    border-radius: 50%;
    border-top-color: var(--primary-color);
    animation: spin 1s ease-in-out infinite;
}

.spinner-lg {
    width: 40px;
    height: 40px;
    border-width: 4px;
}

.spinner-sm {
    width: 16px;
    height: 16px;
    border-width: 2px;
}

/* –ê–Ω–∏–º–∞—Ü–∏–∏ */
@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

@keyframes slideInTop {
    from {
        opacity: 0;
        transform: translateY(-50px) scale(0.9);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes slideInLeft {
    from {
        opacity: 0;
        transform: translateX(-50px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes slideInRight {
    from {
        opacity: 0;
        transform: translateX(50px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* –£—Ç–∏–ª–∏—Ç—ã */
.text-center {
    text-align: center;
}

.text-left {
    text-align: left;
}

.text-right {
    text-align: right;
}

.text-primary {
    color: var(--primary-color);
}

.text-secondary {
    color: var(--secondary-color);
}

.text-success {
    color: var(--status-success);
}

.text-danger {
    color: var(--status-danger);
}

.text-warning {
    color: var(--status-warning);
}

.text-info {
    color: var(--status-info);
}

.text-muted {
    color: var(--text-muted);
}

.text-white {
    color: var(--text-white);
}

.bg-primary {
    background-color: var(--primary-color);
}

.bg-secondary {
    background-color: var(--secondary-color);
}

.bg-light {
    background-color: var(--bg-light);
}

.bg-white {
    background-color: var(--bg-white);
}

.d-none {
    display: none;
}

.d-block {
    display: block;
}

.d-flex {
    display: flex;
}

.d-grid {
    display: grid;
}

.justify-center {
    justify-content: center;
}

.justify-between {
    justify-content: space-between;
}

.align-center {
    align-items: center;
}

.flex-column {
    flex-direction: column;
}

.flex-wrap {
    flex-wrap: wrap;
}

.gap-sm {
    gap: var(--spacing-sm);
}

.gap-md {
    gap: var(--spacing-md);
}

.gap-lg {
    gap: var(--spacing-lg);
}

.mb-sm {
    margin-bottom: var(--spacing-sm);
}

.mb-md {
    margin-bottom: var(--spacing-md);
}

.mb-lg {
    margin-bottom: var(--spacing-lg);
}

.mt-sm {
    margin-top: var(--spacing-sm);
}

.mt-md {
    margin-top: var(--spacing-md);
}

.mt-lg {
    margin-top: var(--spacing-lg);
}

.p-sm {
    padding: var(--spacing-sm);
}

.p-md {
    padding: var(--spacing-md);
}

.p-lg {
    padding: var(--spacing-lg);
}

.rounded {
    border-radius: var(--radius);
}

.rounded-lg {
    border-radius: var(--radius-lg);
}

.shadow-sm {
    box-shadow: var(--shadow-sm);
}

.shadow-md {
    box-shadow: var(--shadow-md);
}

.shadow-lg {
    box-shadow: var(--shadow-lg);
}









================================================================================
–§–ê–ô–õ: static/js/time-slots.js
================================================================================
// ==================================================
// üïê –ó–ê–ì–†–£–ó–ö–ê –î–û–°–¢–£–ü–ù–´–• –°–õ–û–¢–û–í –í–†–ï–ú–ï–ù–ò
// ==================================================

class TimeSlotLoader {
    constructor() {
        // NOTE: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ ID (–¥–ª—è –æ–±—ã—á–Ω–æ–π –∏ –º–Ω–æ–≥–æ—à–∞–≥–æ–≤–æ–π —Ñ–æ—Ä–º—ã)
        this.dateInput = document.getElementById('date') || document.getElementById('bookingDate');
        this.timeSelect = document.getElementById('time') || document.getElementById('bookingTime');
        this.timeSlotsHint = document.getElementById('timeSlotsHint');
        this.isLoading = false;
        this.autoRefreshInterval = null; // –ò–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        this.autoRefreshEnabled = true; // –§–ª–∞–≥ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        this.autoRefreshIntervalMs = 30000; // 30 —Å–µ–∫—É–Ω–¥
        
        if (!this.dateInput || !this.timeSelect) {
            console.warn('‚ö†Ô∏è –≠–ª–µ–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º—ã –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');
            return;
        }
        
        this.init();
    }
    
    init() {
        // NOTE: –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞—Ç—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ª–æ—Ç–æ–≤
        this.dateInput.addEventListener('change', () => {
            this.loadAvailableSlots();
            this.startAutoRefresh(); // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –¥–∞—Ç—ã
        });
        
        // NOTE: –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —É—Å–ª—É–≥–∏ –¥–ª—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–ª–æ—Ç–æ–≤
        const serviceSelect = document.getElementById('service_id');
        if (serviceSelect) {
            serviceSelect.addEventListener('change', () => {
                if (this.dateInput.value) {
                    this.loadAvailableSlots();
                }
            });
        }
        
        // NOTE: –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–µ–∞–Ω—Å–∞ –¥–ª—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–ª–æ—Ç–æ–≤
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º select (–¥–ª—è –æ–±—ã—á–Ω–æ–π —Ñ–æ—Ä–º—ã)
        const durationSelect = document.getElementById('session_duration');
        if (durationSelect) {
            durationSelect.addEventListener('change', () => {
                if (this.dateInput.value) {
                    this.loadAvailableSlots();
                }
            });
        }
        
        // NOTE: –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª—è session_duration (–¥–ª—è –º–Ω–æ–≥–æ—à–∞–≥–æ–≤–æ–π —Ñ–æ—Ä–º—ã)
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–º–±–∏–Ω–∞—Ü–∏—é MutationObserver –∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
        this.setupHiddenDurationTracking();
        
        // NOTE: –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —É—Ö–æ–¥–µ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('beforeunload', () => {
            this.stopAutoRefresh();
        });
        
        // NOTE: –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–≥–¥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–∫—Ä—ã—Ç–∞ (–≤–∫–ª–∞–¥–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞)
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                this.stopAutoRefresh();
            } else if (this.dateInput.value) {
                // –í–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–≥–¥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–Ω–æ–≤–∞ –≤–∏–¥–Ω–∞
                this.startAutoRefresh();
            }
        });
    }
    
    /**
     * –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª—è session_duration
     */
    setupHiddenDurationTracking() {
        // –ò—â–µ–º —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ (–º–æ–∂–µ—Ç –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏)
        const findHiddenDurationInput = () => {
            return document.querySelector('input[name="session_duration"][type="hidden"]');
        };
        
        let hiddenDurationInput = findHiddenDurationInput();
        let lastDurationValue = hiddenDurationInput ? hiddenDurationInput.value : null;
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–ª–æ—Ç–æ–≤
        const checkAndReload = () => {
            // –ò—â–µ–º –ø–æ–ª–µ –∑–∞–Ω–æ–≤–æ (–Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –æ–Ω–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏)
            hiddenDurationInput = findHiddenDurationInput();
            
            if (hiddenDurationInput) {
                const currentValue = hiddenDurationInput.value ? hiddenDurationInput.value.trim() : null;
                
                // –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –∏ –¥–∞—Ç–∞ –≤—ã–±—Ä–∞–Ω–∞, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ª–æ—Ç—ã
                if (currentValue !== lastDurationValue && this.dateInput && this.dateInput.value) {
                    lastDurationValue = currentValue;
                    if (currentValue) {
                        console.log(`üîÑ –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –Ω–∞ ${currentValue} –º–∏–Ω, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ª–æ—Ç—ã...`);
                        this.loadAvailableSlots();
                    }
                } else if (currentValue !== lastDurationValue) {
                    // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –¥–∞–∂–µ –µ—Å–ª–∏ –¥–∞—Ç–∞ –Ω–µ –≤—ã–±—Ä–∞–Ω–∞
                    lastDurationValue = currentValue;
                    if (currentValue) {
                        console.log(`üìù –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞: ${currentValue} –º–∏–Ω (–¥–∞—Ç–∞ –µ—â–µ –Ω–µ –≤—ã–±—Ä–∞–Ω–∞)`);
                    }
                }
            }
        };
        
        // –ï—Å–ª–∏ –ø–æ–ª–µ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ
        if (hiddenDurationInput) {
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º MutationObserver –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∞—Ç—Ä–∏–±—É—Ç–∞ value
            const durationObserver = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                    if (mutation.type === 'attributes' && mutation.attributeName === 'value') {
                        checkAndReload();
                    }
                });
            });
            
            durationObserver.observe(hiddenDurationInput, {
                attributes: true,
                attributeFilter: ['value'],
                attributeOldValue: true
            });
            
            // –¢–∞–∫–∂–µ —Å–ª—É—à–∞–µ–º —Å–æ–±—ã—Ç–∏—è input (–Ω–∞ —Å–ª—É—á–∞–π –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ .value)
            hiddenDurationInput.addEventListener('input', checkAndReload);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ observer –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏
            this.durationObserver = durationObserver;
            this.durationInputElement = hiddenDurationInput; // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç
        }
        
        // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –ø–æ–ª—è –∏ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –æ–Ω–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏)
        // –≠—Ç–æ —Ç–∞–∫–∂–µ –ø–æ–º–æ–≥–∞–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ .value (–∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ç—Ä–∏–≥–≥–µ—Ä—è—Ç MutationObserver)
        this.durationCheckInterval = setInterval(() => {
            // –ï—Å–ª–∏ –ø–æ–ª–µ –µ—â–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –ø—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ –µ–≥–æ
            if (!hiddenDurationInput || !document.contains(hiddenDurationInput)) {
                hiddenDurationInput = findHiddenDurationInput();
                // –ï—Å–ª–∏ –Ω–∞—à–ª–∏ –Ω–æ–≤–æ–µ –ø–æ–ª–µ, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ
                if (hiddenDurationInput && !this.durationObserver) {
                    const durationObserver = new MutationObserver((mutations) => {
                        mutations.forEach((mutation) => {
                            if (mutation.type === 'attributes' && mutation.attributeName === 'value') {
                                checkAndReload();
                            }
                        });
                    });
                    durationObserver.observe(hiddenDurationInput, {
                        attributes: true,
                        attributeFilter: ['value'],
                        attributeOldValue: true
                    });
                    hiddenDurationInput.addEventListener('input', checkAndReload);
                    this.durationObserver = durationObserver;
                    this.durationInputElement = hiddenDurationInput;
                }
            }
            checkAndReload();
        }, 300); // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 300–º—Å –¥–ª—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–π —Ä–µ–∞–∫—Ü–∏–∏
        
        // –°–ª—É—à–∞–µ–º –∫–ª–∏–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ —É—Å–ª—É–≥ (–¥–ª—è –º–Ω–æ–≥–æ—à–∞–≥–æ–≤–æ–π —Ñ–æ—Ä–º—ã)
        // –≠—Ç–æ –Ω—É–∂–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ
        this.serviceCardClickHandler = (e) => {
            const serviceCard = e.target.closest('.service-card');
            if (serviceCard && this.dateInput && this.dateInput.value) {
                // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞, —á—Ç–æ–±—ã —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ —É—Å–ø–µ–ª–æ –æ–±–Ω–æ–≤–∏—Ç—å—Å—è
                setTimeout(() => {
                    checkAndReload();
                }, 200);
            }
        };
        document.addEventListener('click', this.serviceCardClickHandler, true); // –ò—Å–ø–æ–ª—å–∑—É–µ–º capture phase –¥–ª—è —Ä–∞–Ω–Ω–µ–≥–æ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞
    }
    
    /**
     * –ó–∞–ø—É—Å–∫–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ª–æ—Ç–æ–≤ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
     */
    startAutoRefresh() {
        // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∏–Ω—Ç–µ—Ä–≤–∞–ª, –µ—Å–ª–∏ –æ–Ω –±—ã–ª
        this.stopAutoRefresh();
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –¥–∞—Ç–∞ –∏ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ
        if (!this.dateInput.value || !this.autoRefreshEnabled) {
            return;
        }
        
        console.log(`üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ª–æ—Ç–æ–≤ –∑–∞–ø—É—â–µ–Ω–æ (–∫–∞–∂–¥—ã–µ ${this.autoRefreshIntervalMs / 1000} —Å–µ–∫)`);
        
        this.autoRefreshInterval = setInterval(() => {
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥–∞—Ç–∞ –≤—ã–±—Ä–∞–Ω–∞ –∏ –Ω–µ –∏–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞
            if (this.dateInput.value && !this.isLoading) {
                console.log('üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ª–æ—Ç–æ–≤...');
                this.loadAvailableSlots();
            }
        }, this.autoRefreshIntervalMs);
    }
    
    /**
     * –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ª–æ—Ç–æ–≤
     */
    stopAutoRefresh() {
        if (this.autoRefreshInterval) {
            clearInterval(this.autoRefreshInterval);
            this.autoRefreshInterval = null;
            console.log('‚è∏Ô∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ª–æ—Ç–æ–≤ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');
        }
    }
    
    /**
     * –û—á–∏—â–∞–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª—è duration
     */
    cleanup() {
        // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
        this.stopAutoRefresh();
        
        // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É duration
        if (this.durationCheckInterval) {
            clearInterval(this.durationCheckInterval);
            this.durationCheckInterval = null;
        }
        
        // –û—Ç–∫–ª—é—á–∞–µ–º MutationObserver
        if (this.durationObserver) {
            this.durationObserver.disconnect();
            this.durationObserver = null;
        }
        
        // –£–¥–∞–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ —É—Å–ª—É–≥
        if (this.serviceCardClickHandler) {
            document.removeEventListener('click', this.serviceCardClickHandler, true);
            this.serviceCardClickHandler = null;
        }
        
        // –£–¥–∞–ª—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç
        this.durationInputElement = null;
    }
    
    /**
     * –í–∫–ª—é—á–∞–µ—Ç/–≤—ã–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
     */
    setAutoRefresh(enabled) {
        this.autoRefreshEnabled = enabled;
        if (enabled && this.dateInput.value) {
            this.startAutoRefresh();
        } else {
            this.stopAutoRefresh();
        }
    }
    
    async loadAvailableSlots() {
        const selectedDate = this.dateInput.value;
        
        if (!selectedDate) {
            this.clearTimeSlots();
            return;
        }
        
        // NOTE: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
        if (this.isLoading) {
            return;
        }
        
        this.isLoading = true;
        this.showLoadingState();
        
        try {
            // NOTE: –ü–æ–ª—É—á–∞–µ–º –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ–∞–Ω—Å–∞ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
            // –í–ê–ñ–ù–û: –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ DOM, –∞ –Ω–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ
            let duration = null;
            
            // 1. –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ (–¥–ª—è –º–Ω–æ–≥–æ—à–∞–≥–æ–≤–æ–π —Ñ–æ—Ä–º—ã)
            const hiddenDurationInput = document.querySelector('input[name="session_duration"][type="hidden"]');
            if (hiddenDurationInput && hiddenDurationInput.value) {
                duration = hiddenDurationInput.value.trim();
                // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —á–∏—Å–ª–æ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
                const durationNum = parseInt(duration);
                if (isNaN(durationNum) || durationNum <= 0) {
                    duration = null;
                } else {
                    duration = durationNum.toString(); // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∫ —Å—Ç—Ä–æ–∫–µ
                }
            }
            
            // 2. –ï—Å–ª–∏ —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª—è –Ω–µ—Ç –∏–ª–∏ –æ–Ω–æ –ø—É—Å—Ç–æ–µ, –ø—Ä–æ–≤–µ—Ä—è–µ–º select (–¥–ª—è –æ–±—ã—á–Ω–æ–π —Ñ–æ—Ä–º—ã)
            if (!duration) {
                const durationSelect = document.getElementById('session_duration');
                if (durationSelect && durationSelect.value) {
                    const selectValue = durationSelect.value.trim();
                    const selectNum = parseInt(selectValue);
                    if (!isNaN(selectNum) && selectNum > 0) {
                        duration = selectNum.toString();
                    }
                }
            }
            
            // NOTE: –§–æ—Ä–º–∏—Ä—É–µ–º URL —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
            // –î–æ–±–∞–≤–ª—è–µ–º timestamp –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–æ–º
            const timestamp = new Date().getTime();
            let url = `/api/available-slots?date=${selectedDate}&_t=${timestamp}`;
            
            // –í–ê–ñ–ù–û: –í—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞–µ–º duration, –µ—Å–ª–∏ –æ–Ω–æ –Ω–∞–π–¥–µ–Ω–æ
            if (duration) {
                url += `&duration=${duration}`;
                console.log(`üïê –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ª–æ—Ç—ã –¥–ª—è –¥–∞—Ç—ã: ${selectedDate}, –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ${duration} –º–∏–Ω`);
            } else {
                console.warn(`‚ö†Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞! –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ª–æ—Ç—ã –¥–ª—è –¥–∞—Ç—ã: ${selectedDate} –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)`);
            }
            
            // NOTE: –û—Ç–∫–ª—é—á–∞–µ–º –∫—ç—à –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            const response = await fetch(url, {
                cache: 'no-store',
                headers: {
                    'Cache-Control': 'no-cache'
                }
            });
            
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }
            
            const data = await response.json();
            
            if (data.success) {
                this.populateTimeSlots(data.available_slots);
                const freeSlotsCount = data.available_slots.filter(slot => !slot.disabled).length;
                console.log(`‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${freeSlotsCount} –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –Ω–∞ ${data.date}`);
            } else {
                throw new Error(data.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞');
            }
            
        } catch (error) {
            console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ª–æ—Ç–æ–≤:', error);
            this.showErrorState(error.message);
        } finally {
            this.isLoading = false;
        }
    }
    
    populateTimeSlots(slots) {
        // NOTE: –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –æ–ø—Ü–∏–∏
        this.timeSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è</option>';
        
        if (slots.length === 0) {
            this.timeSelect.innerHTML = '<option value="" disabled>–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤</option>';
            this.timeSlotsHint.textContent = '–ù–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –¥–∞—Ç—É –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤';
            this.timeSlotsHint.className = 'form-hint text-warning';
            return;
        }
        
        // NOTE: –î–æ–±–∞–≤–ª—è–µ–º —Å–ª–æ—Ç—ã, –ø–æ–º–µ—á–∞—è –∑–∞–Ω—è—Ç—ã–µ –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å—Ç–∏–ª–µ–º
        slots.forEach(slot => {
            const option = document.createElement('option');
            const timeStr = this.formatTimeSlot(slot);
            option.value = timeStr;

            const isDisabled = slot.disabled === true || slot.disabled === 'true';

            if (isDisabled) {
                option.disabled = true;
                option.className = 'time-slot-busy';
                option.textContent = `üî¥ ${slot.display || timeStr}`;
            } else {
                option.disabled = false;
                option.className = 'time-slot-available';
                option.textContent = `üü¢ ${slot.display || timeStr}`;
            }

            this.timeSelect.appendChild(option);
        });

        // NOTE: –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å–ª–æ—Ç–æ–≤
        const freeSlotsCount = slots.filter(slot => !slot.disabled).length;
        const busySlotsCount = slots.length - freeSlotsCount;
        this.timeSlotsHint.textContent = `–°–≤–æ–±–æ–¥–Ω–æ ${freeSlotsCount}, –∑–∞–Ω—è—Ç–æ ${busySlotsCount}`;
    }
    
    formatTimeSlot(slot) {
        // NOTE: –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤—Ä–µ–º—è –∫–∞–∫ –µ—Å—Ç—å, —Ç–∞–∫ –∫–∞–∫ API —É–∂–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç
        return slot.time || slot;
    }
    
    clearTimeSlots() {
        this.timeSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è</option>';
        this.timeSlotsHint.textContent = '–í—Ä–µ–º—è –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã';
        this.timeSlotsHint.className = 'form-hint';
        // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –µ—Å–ª–∏ –¥–∞—Ç–∞ –Ω–µ –≤—ã–±—Ä–∞–Ω–∞
        this.stopAutoRefresh();
    }
    
    showLoadingState() {
        this.timeSelect.innerHTML = '<option value="" disabled>–ó–∞–≥—Ä—É–∑–∫–∞...</option>';
        this.timeSlotsHint.textContent = '–ó–∞–≥—Ä—É–∂–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã...';
        this.timeSlotsHint.className = 'form-hint text-info';
    }
    
    showErrorState(errorMessage) {
        this.timeSelect.innerHTML = '<option value="" disabled>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</option>';
        this.timeSlotsHint.textContent = `–û—à–∏–±–∫–∞: ${errorMessage}`;
        this.timeSlotsHint.className = 'form-hint text-danger';
    }
}

// ==================================================
// üöÄ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï DOM
// ==================================================

document.addEventListener('DOMContentLoaded', () => {
    // NOTE: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∑–∞–≥—Ä—É–∑—á–∏–∫ —Å–ª–æ—Ç–æ–≤ —Ç–æ–ª—å–∫–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    // –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ ID (–¥–ª—è –æ–±—ã—á–Ω–æ–π –∏ –º–Ω–æ–≥–æ—à–∞–≥–æ–≤–æ–π —Ñ–æ—Ä–º—ã)
    const timeSelect = document.getElementById('time') || document.getElementById('bookingTime');
    const dateInput = document.getElementById('date') || document.getElementById('bookingDate');
    
    if (timeSelect && dateInput) {
        console.log('üïê –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∑–∞–≥—Ä—É–∑—á–∏–∫ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤...');
        window.timeSlotLoader = new TimeSlotLoader();
        console.log('‚úÖ –ó–∞–≥—Ä—É–∑—á–∏–∫ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –≥–æ—Ç–æ–≤');
    }
});



================================================================================
–§–ê–ô–õ: static/js/phone-input-handler.js
================================================================================
// ==================================================
// üìû –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –í–°–¢–ê–í–ö–ê +7 –í –ü–û–õ–ï –¢–ï–õ–ï–§–û–ù–ê
// ==================================================

class PhoneInputHandler {
    constructor() {
        this.phoneInput = document.getElementById('phone');
        this.init();
    }
    
    init() {
        if (!this.phoneInput) {
            console.warn('‚ö†Ô∏è –ü–æ–ª–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ');
            return;
        }
        
        // NOTE: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        this.phoneInput.value = '+7';
        
        // NOTE: –°–ª—É—à–∞–µ–º —Å–æ–±—ã—Ç–∏—è –≤–≤–æ–¥–∞
        this.phoneInput.addEventListener('input', (e) => this.handleInput(e));
        this.phoneInput.addEventListener('keydown', (e) => this.handleKeydown(e));
        this.phoneInput.addEventListener('focus', (e) => this.handleFocus(e));
        this.phoneInput.addEventListener('blur', (e) => this.handleBlur(e));
        
        console.log('‚úÖ PhoneInputHandler –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
    }
    
    handleInput(event) {
        let value = event.target.value;
        const cursorPosition = event.target.selectionStart;
        
        // NOTE: –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª–∏–ª +7, –¥–æ–±–∞–≤–ª—è–µ–º –µ–≥–æ –æ–±—Ä–∞—Ç–Ω–æ
        if (!value.startsWith('+7')) {
            if (value.startsWith('7')) {
                value = '+' + value;
            } else if (value.startsWith('8')) {
                value = '+7' + value.substring(1);
            } else if (value.length > 0) {
                value = '+7' + value;
            } else {
                value = '+7';
            }
        }
        
        // NOTE: –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É (–º–∞–∫—Å–∏–º—É–º 18 —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è +7 (999) 123-45-67)
        if (value.length > 18) {
            value = value.substring(0, 18);
        }
        
        // NOTE: –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è
        event.target.value = value;
        
        // NOTE: –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –∫—É—Ä—Å–æ—Ä–∞
        this.setCursorPosition(event.target, cursorPosition);
    }
    
    handleKeydown(event) {
        // NOTE: –ó–∞–ø—Ä–µ—â–∞–µ–º —É–¥–∞–ª–µ–Ω–∏–µ +7
        if (event.key === 'Backspace' || event.key === 'Delete') {
            const value = event.target.value;
            const cursorPosition = event.target.selectionStart;
            
            // NOTE: –ï—Å–ª–∏ –∫—É—Ä—Å–æ—Ä –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –Ω–∞—á–∞–ª–µ –∏–ª–∏ –ø—ã—Ç–∞–µ–º—Å—è —É–¥–∞–ª–∏—Ç—å +7
            if (cursorPosition <= 2 || (cursorPosition === 2 && event.key === 'Backspace')) {
                event.preventDefault();
                return;
            }
        }
        
        // NOTE: –†–∞–∑—Ä–µ—à–∞–µ–º —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã, –ø—Ä–æ–±–µ–ª—ã, —Å–∫–æ–±–∫–∏, –¥–µ—Ñ–∏—Å—ã –∏ + –≤ –Ω–∞—á–∞–ª–µ
        const allowedKeys = ['Backspace', 'Delete', 'ArrowLeft', 'ArrowRight', 'Tab', 'Home', 'End'];
        const isDigit = /[0-9]/.test(event.key);
        const isAllowedChar = /[\s\(\)\-]/.test(event.key);
        
        if (!allowedKeys.includes(event.key) && !isDigit && !isAllowedChar) {
            event.preventDefault();
        }
    }
    
    handleFocus(event) {
        // NOTE: –ü—Ä–∏ —Ñ–æ–∫—É—Å–µ –≤—ã–¥–µ–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã –ø–æ—Å–ª–µ +7
        const value = event.target.value;
        if (value.startsWith('+7')) {
            event.target.setSelectionRange(2, value.length);
        }
    }
    
    handleBlur(event) {
        // NOTE: –ü—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Ñ–æ–∫—É—Å–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –Ω–æ–º–µ—Ä
        const value = event.target.value;
        const formatted = this.formatPhoneNumber(value);
        event.target.value = formatted;
        
        // NOTE: –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –Ω–æ–º–µ—Ä–∞
        this.validatePhoneNumber(formatted);
    }
    
    formatPhoneNumber(phone) {
        // NOTE: –£–±–∏—Ä–∞–µ–º –≤—Å–µ —Å–∏–º–≤–æ–ª—ã –∫—Ä–æ–º–µ —Ü–∏—Ñ—Ä –∏ +
        let cleaned = phone.replace(/[^\d+]/g, '');
        
        // NOTE: –£–±–µ–∂–¥–∞–µ–º—Å—è —á—Ç–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å +7
        if (!cleaned.startsWith('+7')) {
            if (cleaned.startsWith('7')) {
                cleaned = '+' + cleaned;
            } else if (cleaned.startsWith('8')) {
                cleaned = '+7' + cleaned.substring(1);
            } else {
                cleaned = '+7' + cleaned;
            }
        }
        
        // NOTE: –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –≤ +7 (999) 123-45-67
        if (cleaned.length > 2) {
            const digits = cleaned.substring(2);
            let formatted = '+7';
            
            if (digits.length > 0) {
                formatted += ' (' + digits.substring(0, 3);
            }
            if (digits.length > 3) {
                formatted += ') ' + digits.substring(3, 6);
            }
            if (digits.length > 6) {
                formatted += '-' + digits.substring(6, 8);
            }
            if (digits.length > 8) {
                formatted += '-' + digits.substring(8, 10);
            }
            
            return formatted;
        }
        
        return '+7';
    }
    
    validatePhoneNumber(phone) {
        // NOTE: –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –Ω–æ–º–µ—Ä —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–æ—Å—Å–∏–π—Å–∫–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É
        const phoneRegex = /^\+7\s?\(?[0-9]{3}\)?\s?[0-9]{3}[-]?[0-9]{2}[-]?[0-9]{2}$/;
        const isValid = phoneRegex.test(phone);
        
        // NOTE: –î–æ–±–∞–≤–ª—è–µ–º/—É–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å –≤–∞–ª–∏–¥–∞—Ü–∏–∏
        if (isValid) {
            this.phoneInput.classList.remove('is-invalid');
            this.phoneInput.classList.add('is-valid');
        } else {
            this.phoneInput.classList.remove('is-valid');
            this.phoneInput.classList.add('is-invalid');
        }
        
        return isValid;
    }
    
    setCursorPosition(input, position) {
        // NOTE: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫—É—Ä—Å–æ—Ä —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
        setTimeout(() => {
            input.setSelectionRange(position, position);
        }, 0);
    }
}

// NOTE: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
document.addEventListener('DOMContentLoaded', () => {
    new PhoneInputHandler();
});



================================================================================
–§–ê–ô–õ: static/js/fix-button.js
================================================================================
// –§–ò–ù–ê–õ–¨–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ö–ù–û–ü–ö–ò - —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—Å–µ–≥–¥–∞
(function() {
    'use strict';
    
    let fixAttempts = 0;
    const MAX_ATTEMPTS = 3; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
    const RETRY_INTERVAL = 1000; // –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏: 1 —Å–µ–∫—É–Ω–¥–∞
    
    function fixButton() {
        fixAttempts++;
        
        // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
        if (fixAttempts > MAX_ATTEMPTS) {
            console.warn(`‚ö†Ô∏è –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ (${MAX_ATTEMPTS}), –ø—Ä–µ–∫—Ä–∞—â–∞–µ–º –ø–æ–ø—ã—Ç–∫–∏`);
            return;
        }
        
        const btn = document.getElementById('submitBooking');
        const form = document.getElementById('bookingForm');
        
        // –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –ø—Ä–æ–±—É–µ–º –µ—â–µ —Ä–∞–∑ (–Ω–æ –Ω–µ –±–æ–ª–µ–µ MAX_ATTEMPTS —Ä–∞–∑)
        if (!btn) {
            if (fixAttempts < MAX_ATTEMPTS) {
                console.warn(`‚ö†Ô∏è –ö–Ω–æ–ø–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –ø–æ–ø—ã—Ç–∫–∞ ${fixAttempts}/${MAX_ATTEMPTS}... –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ ${RETRY_INTERVAL}–º—Å`);
                setTimeout(fixButton, RETRY_INTERVAL);
            } else {
                console.warn(`‚ö†Ô∏è –ö–Ω–æ–ø–∫–∞ submitBooking –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –ø–æ—Å–ª–µ ${MAX_ATTEMPTS} –ø–æ–ø—ã—Ç–æ–∫. –ü—Ä–µ–∫—Ä–∞—â–∞–µ–º –ø–æ–∏—Å–∫.`);
            }
            return;
        }
        
        if (!form) {
            console.warn('‚ö†Ô∏è –§–æ—Ä–º–∞ bookingForm –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
            return;
        }
        
        // –í–ê–ñ–ù–û: –î–ª—è type="submit" –∫–Ω–æ–ø–æ–∫ –ù–ï –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ submit
        if (btn.type === 'submit') {
            console.log('‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ö–Ω–æ–ø–∫–∞ type="submit" - –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É');
            // –¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É, –Ω–æ –ù–ï –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
            btn.disabled = false;
            btn.removeAttribute('disabled');
            btn.style.pointerEvents = 'auto';
            btn.style.cursor = 'pointer';
            btn.style.opacity = '1';
            return; // –í—ã—Ö–æ–¥–∏–º, –Ω–µ –¥–æ–±–∞–≤–ª—è—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ submit
        }
        
        console.log('üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ù–∞–π–¥–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞', btn);
        
        // 1. –£–±–∏—Ä–∞–µ–º disabled
        btn.disabled = false;
        btn.removeAttribute('disabled');
        btn.setAttribute('aria-disabled', 'false');
        
        // 2. –£–±–∏—Ä–∞–µ–º –≤—Å–µ –∫–ª–∞—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
        btn.classList.remove('disabled', 'inactive', 'btn-secondary');
        btn.classList.add('btn-primary', 'active');
        
        // 3. –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∏–ª–∏
        btn.style.cssText = `
            cursor: pointer !important;
            pointer-events: auto !important;
            opacity: 1 !important;
            display: inline-block !important;
            visibility: visible !important;
            position: relative !important;
            z-index: 999999 !important;
            min-width: 250px !important;
            padding: 15px 30px !important;
            font-size: 18px !important;
            font-weight: bold !important;
            border: 2px solid #056486 !important;
            background: linear-gradient(135deg, #056486, #0A7FA3) !important;
            color: white !important;
            border-radius: 10px !important;
            box-shadow: 0 6px 20px rgba(5, 100, 134, 0.5) !important;
            margin: 10px !important;
        `;
        
        // 4. –£–±–∏—Ä–∞–µ–º –í–°–ï –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
        btn.onclick = null;
        btn.onmousedown = null;
        btn.onmouseup = null;
        
        // 5. –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∞ –ª–∏ –∫–Ω–æ–ø–∫–∞
        const rect = btn.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        const elementAtPoint = document.elementFromPoint(centerX, centerY);
        
        if (elementAtPoint !== btn && !btn.contains(elementAtPoint)) {
            console.warn('‚ö†Ô∏è –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–º:', elementAtPoint);
            // –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–¥–Ω—è—Ç—å –∫–Ω–æ–ø–∫—É –≤—ã—à–µ
            btn.style.zIndex = '9999999';
            if (btn.parentElement) {
                btn.parentElement.style.zIndex = '9999999';
                btn.parentElement.style.position = 'relative';
            }
        }
        
        console.log('‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ö–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ');
    }
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', fixButton);
    } else {
        fixButton();
    }
})();




================================================================================
–§–ê–ô–õ: static/js/test-button.js
================================================================================
// –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –∫–Ω–æ–ø–∫–∏ - –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –æ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
(function() {
    'use strict';
    
    let testAttempts = 0;
    const MAX_ATTEMPTS = 2; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
    const RETRY_INTERVAL = 1500; // –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏: 1.5 —Å–µ–∫—É–Ω–¥—ã
    
    function testButton() {
        testAttempts++;
        
        // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
        if (testAttempts > MAX_ATTEMPTS) {
            console.warn(`‚ö†Ô∏è –¢–ï–°–¢: –î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ (${MAX_ATTEMPTS}), –ø—Ä–µ–∫—Ä–∞—â–∞–µ–º –ø–æ–ø—ã—Ç–∫–∏`);
            return;
        }
        
        const btn = document.getElementById('submitBooking');
        const form = document.getElementById('bookingForm');
        
        // –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –ø—Ä–æ–±—É–µ–º –µ—â–µ —Ä–∞–∑ (–Ω–æ –Ω–µ –±–æ–ª–µ–µ MAX_ATTEMPTS —Ä–∞–∑)
        if (!btn) {
            if (testAttempts < MAX_ATTEMPTS) {
                console.log(`‚ö†Ô∏è –¢–ï–°–¢: –ö–Ω–æ–ø–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –ø–æ–ø—ã—Ç–∫–∞ ${testAttempts}/${MAX_ATTEMPTS}... –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ ${RETRY_INTERVAL}–º—Å`);
                setTimeout(testButton, RETRY_INTERVAL);
            } else {
                console.warn(`‚ö†Ô∏è –¢–ï–°–¢: –ö–Ω–æ–ø–∫–∞ submitBooking –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –ø–æ—Å–ª–µ ${MAX_ATTEMPTS} –ø–æ–ø—ã—Ç–æ–∫. –ü—Ä–µ–∫—Ä–∞—â–∞–µ–º –ø–æ–∏—Å–∫.`);
            }
            return;
        }
        
        if (!form) {
            return;
        }
        
        // –í–ê–ñ–ù–û: –î–ª—è type="submit" –∫–Ω–æ–ø–æ–∫ –ù–ï –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ submit
        if (btn.type === 'submit') {
            console.log('‚úÖ –¢–ï–°–¢: –ö–Ω–æ–ø–∫–∞ type="submit" –Ω–∞–π–¥–µ–Ω–∞ –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞');
            // –¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
            btn.disabled = false;
            btn.removeAttribute('disabled');
            btn.style.pointerEvents = 'auto';
            btn.style.cursor = 'pointer';
            btn.style.opacity = '1';
            return; // –í—ã—Ö–æ–¥–∏–º, –Ω–µ –¥–æ–±–∞–≤–ª—è—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ submit
        }
        
        // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û
        btn.disabled = false;
        btn.removeAttribute('disabled');
        btn.style.pointerEvents = 'auto';
        btn.style.cursor = 'pointer';
        btn.style.opacity = '1';
        btn.style.display = 'inline-block';
        btn.style.visibility = 'visible';
        btn.style.zIndex = '99999';
        btn.style.position = 'relative';
        
        // –£–±–∏—Ä–∞–µ–º –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
        btn.onclick = null;
        btn.onmousedown = null;
        btn.onmouseup = null;
        
        console.log('‚úÖ –¢–ï–°–¢: –ö–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞');
    }
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', testButton);
    } else {
        testButton();
    }
})();




================================================================================
–§–ê–ô–õ: static/js/booking-form-handler.js
================================================================================
// ==================================================
// üìã –û–ë–†–ê–ë–û–¢–ß–ò–ö –§–û–†–ú–´ –ë–†–û–ù–ò–†–û–í–ê–ù–ò–Ø
// ==================================================

class BookingFormHandler {
    constructor() {
        this.form = document.getElementById('bookingForm');
        this.submitBtn = document.getElementById('submitBooking');
        this.isSubmitting = false;
        
        this.init();
    }
    
    init() {
        if (!this.form) {
            console.error('‚ùå –§–æ—Ä–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!');
            return;
        }
        
        console.log('üîç –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Ñ–æ—Ä–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è...');
        
        // –í–ê–ñ–ù–û: –î–ª—è –∫–Ω–æ–ø–∫–∏ type="submit" –ü–û–õ–ù–û–°–¢–¨–Æ –æ—Ç–∫–ª—é—á–∞–µ–º –≤—Å–µ JavaScript –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
        const submitBtn = document.getElementById('submitBooking');
        if (submitBtn && submitBtn.type === 'submit') {
            console.log('‚úÖ –ö–Ω–æ–ø–∫–∞ type="submit" –Ω–∞–π–¥–µ–Ω–∞ - –û–¢–ö–õ–Æ–ß–ê–ï–ú –≤—Å–µ JavaScript –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏');
            console.log('‚úÖ –§–æ—Ä–º–∞ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º –±—Ä–∞—É–∑–µ—Ä–∞');
            
            // –ö–†–ò–¢–ò–ß–ù–û: –£–¥–∞–ª—è–µ–º –í–°–ï –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ submit —Å —Ñ–æ—Ä–º—ã, —á—Ç–æ–±—ã –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É
            const formClone = this.form.cloneNode(true);
            this.form.parentNode.replaceChild(formClone, this.form);
            this.form = formClone;
            
            // –ù–ï –¥–æ–±–∞–≤–ª—è–µ–º –ù–ò–ö–ê–ö–ò–• –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è type="submit"
            // –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º –±—Ä–∞—É–∑–µ—Ä–∞
            return; // –í–ê–ñ–ù–û: –í—ã—Ö–æ–¥–∏–º –∏–∑ init, –Ω–µ –¥–æ–±–∞–≤–ª—è—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
        } else {
            // –¢–æ–ª—å–∫–æ –¥–ª—è type="button" –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
            console.log('‚ö†Ô∏è –ö–Ω–æ–ø–∫–∞ type="button" - –∏—Å–ø–æ–ª—å–∑—É–µ–º JavaScript –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏');
            
            this.form.addEventListener('click', (e) => {
                if (e.target && (e.target.id === 'submitBooking' || e.target.closest('#submitBooking'))) {
                    const btn = e.target.id === 'submitBooking' ? e.target : e.target.closest('#submitBooking');
                    if (btn.type === 'button') {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log('üîò –ö–Ω–æ–ø–∫–∞ type="button" –Ω–∞–∂–∞—Ç–∞!');
                        
                        if (btn.disabled) {
                            btn.disabled = false;
                        }
                        
                        const validation = this.validateForm();
                        if (!validation.isValid) {
                            this.showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
                            return false;
                        }
                        
                        this.handleSubmit(e);
                        return false;
                    }
                }
            });
        }
        
        // –í–ê–ñ–ù–û: –ù–ï –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ submit - –ø—É—Å—Ç—å —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º
        
        // –í–ê–ñ–ù–û: –î–ª—è type="submit" –∫–Ω–æ–ø–æ–∫ –ù–ï –±–ª–æ–∫–∏—Ä—É–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π - –ø—É—Å—Ç—å –±—Ä–∞—É–∑–µ—Ä —Å–∞–º –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —á–µ—Ä–µ–∑ HTML5
        // –ù–ï –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ input/change –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –µ—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ type="submit"
        if (submitBtn && submitBtn.type !== 'submit') {
            // –¢–æ–ª—å–∫–æ –¥–ª—è type="button" –¥–æ–±–∞–≤–ª—è–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏—é
            this.form.addEventListener('input', () => {
                const validation = this.validateForm();
                if (validation.isValid) {
                    this.clearAllFieldErrors();
                }
            });
            this.form.addEventListener('change', () => {
                const validation = this.validateForm();
                if (validation.isValid) {
                    this.clearAllFieldErrors();
                }
            });
        }
        
        // NOTE: –ù–∞—Ö–æ–¥–∏–º –∫–Ω–æ–ø–∫—É –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –µ—ë
        this.activateSubmitButton();
        
        // –í–ê–ñ–ù–û: –î–ª—è type="submit" –ù–ï –∑–∞–ø—É—Å–∫–∞–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏—é - –ø—É—Å—Ç—å –±—Ä–∞—É–∑–µ—Ä —Å–∞–º –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç
        if (!submitBtn || submitBtn.type !== 'submit') {
            // –¢–æ–ª—å–∫–æ –¥–ª—è type="button" –∑–∞–ø—É—Å–∫–∞–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏—é
            this.validateForm();
        }
        
        console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–æ—Ä–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
    }
    
    activateSubmitButton() {
        // NOTE: –ù–∞—Ö–æ–¥–∏–º –∫–Ω–æ–ø–∫—É –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –µ—ë
        const submitBtn = document.getElementById('submitBooking');
        if (submitBtn) {
            console.log('üîç –ö–Ω–æ–ø–∫–∞ –Ω–∞–π–¥–µ–Ω–∞:', submitBtn);
            console.log('üìç Type:', submitBtn.type);
            
            // –£–±–∏—Ä–∞–µ–º disabled
            submitBtn.disabled = false;
            submitBtn.removeAttribute('disabled');
            
            // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
            submitBtn.classList.remove('btn-secondary', 'disabled', 'inactive');
            submitBtn.classList.add('btn-primary');
            
            // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∏–ª–∏
            submitBtn.style.pointerEvents = 'auto';
            submitBtn.style.cursor = 'pointer';
            submitBtn.style.opacity = '1';
            submitBtn.style.display = 'inline-block';
            submitBtn.style.visibility = 'visible';
            
            // –í–ê–ñ–ù–û: –î–ª—è type="submit" –ù–ï –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ - –ø—É—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º
            if (submitBtn.type === 'submit') {
                console.log('‚úÖ –ö–Ω–æ–ø–∫–∞ type="submit" –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ - –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º');
            } else {
                console.log('‚úÖ –ö–Ω–æ–ø–∫–∞ type="button" –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ - –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JavaScript –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏');
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –∫–Ω–æ–ø–∫—É
            this.submitBtn = submitBtn;
        } else {
            console.warn('‚ö†Ô∏è –ö–Ω–æ–ø–∫–∞ submitBooking –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
        }
    }
    
    validateForm() {
        // –í–ê–ñ–ù–û: –î–ª—è type="submit" –∫–Ω–æ–ø–æ–∫ –ù–ï –≤–∞–ª–∏–¥–∏—Ä—É–µ–º - –ø—É—Å—Ç—å –±—Ä–∞—É–∑–µ—Ä —Å–∞–º –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —á–µ—Ä–µ–∑ HTML5
        const submitBtn = document.getElementById('submitBooking');
        if (submitBtn && submitBtn.type === 'submit') {
            // –î–ª—è type="submit" –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –≤—Å–µ–≥–¥–∞ true - –ø—É—Å—Ç—å –±—Ä–∞—É–∑–µ—Ä —Å–∞–º –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç
            return { isValid: true, errors: [] };
        }
        
        // NOTE: –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ ID –ø–æ–ª–µ–π –∏–∑ —Ñ–æ—Ä–º—ã
        const requiredFields = [
            { id: 'clientName', label: '–ò–º—è', name: 'client_name' },
            { id: 'clientPhone', label: '–¢–µ–ª–µ—Ñ–æ–Ω', name: 'client_phone' },
            { id: 'bookingDate', label: '–î–∞—Ç–∞', name: 'booking_date' },
            { id: 'bookingTime', label: '–í—Ä–µ–º—è', name: 'booking_time' }
        ];
        
        const privacyCheckbox = document.getElementById('privacy_agreement');
        
        let isValid = true;
        let firstEmptyField = null;
        
        // NOTE: –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—ã–±–æ—Ä —É—Å–ª—É–≥–∏ –æ—Ç–¥–µ–ª—å–Ω–æ (–º–æ–∂–µ—Ç –±—ã—Ç—å —á–µ—Ä–µ–∑ radio –∏–ª–∏ –¥—Ä—É–≥–æ–π —ç–ª–µ–º–µ–Ω—Ç)
        const serviceSelected = this.checkServiceSelection();
        if (!serviceSelected) {
            isValid = false;
            console.warn('‚ö†Ô∏è –£—Å–ª—É–≥–∞ –Ω–µ –≤—ã–±—Ä–∞–Ω–∞');
        }
        
        // NOTE: –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
        requiredFields.forEach(field => {
            const fieldElement = document.getElementById(field.id);
            let fieldIsValid = true;
            
            if (!fieldElement) {
                fieldIsValid = false;
            } else if (field.id === 'clientPhone') {
                // NOTE: –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞
                const phoneValue = fieldElement.value.trim();
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ç–µ–ª–µ—Ñ–æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∏–Ω–∏–º—É–º 10 —Ü–∏—Ñ—Ä
                const phoneDigits = phoneValue.replace(/\D/g, '');
                fieldIsValid = phoneDigits.length >= 10;
            } else {
                // NOTE: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
                fieldIsValid = fieldElement.value.trim().length > 0;
            }
            
            if (!fieldIsValid) {
                isValid = false;
                if (!firstEmptyField) {
                    firstEmptyField = fieldElement;
                }
                // NOTE: –î–æ–±–∞–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω—É—é –∏–Ω–¥–∏–∫–∞—Ü–∏—é –æ—à–∏–±–∫–∏
                this.highlightFieldError(fieldElement, field.label);
            } else {
                // NOTE: –£–±–∏—Ä–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ü–∏—é –æ—à–∏–±–∫–∏ –µ—Å–ª–∏ –ø–æ–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ
                this.clearFieldError(fieldElement);
            }
        });
        
        // NOTE: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–≥–ª–∞—Å–∏–µ —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π (–µ—Å–ª–∏ –ø–æ–ª–µ –µ—Å—Ç—å –≤ —Ñ–æ—Ä–º–µ)
        if (privacyCheckbox && !privacyCheckbox.checked) {
            isValid = false;
            if (!firstEmptyField) {
                firstEmptyField = privacyCheckbox;
            }
            this.highlightFieldError(privacyCheckbox, '–°–æ–≥–ª–∞—Å–∏–µ —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π');
        } else if (privacyCheckbox) {
            this.clearFieldError(privacyCheckbox);
        }
        
        // NOTE: –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏
        this.submitBtn.disabled = !isValid || this.isSubmitting;
        
        // NOTE: –î–æ–±–∞–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω—É—é –∏–Ω–¥–∏–∫–∞—Ü–∏—é
        if (isValid) {
            this.submitBtn.classList.remove('btn-secondary');
            this.submitBtn.classList.add('btn-primary');
        } else {
            this.submitBtn.classList.remove('btn-primary');
            this.submitBtn.classList.add('btn-secondary');
        }
        
        return { isValid, firstEmptyField };
    }
    
    async handleSubmit(event) {
        event.preventDefault();
        
        if (this.isSubmitting) {
            console.warn('‚ö†Ô∏è –§–æ—Ä–º–∞ —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è');
            return;
        }
        
        const validation = this.validateForm();
        if (!validation.isValid) {
            // NOTE: –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
            this.showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
            
            // NOTE: –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –ø–µ—Ä–≤–æ–º—É –Ω–µ–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–º—É –ø–æ–ª—é
            if (validation.firstEmptyField) {
                this.scrollToField(validation.firstEmptyField);
                validation.firstEmptyField.focus();
            }
            return;
        }
        
        this.isSubmitting = true;
        this.setSubmitState('–û—Ç–ø—Ä–∞–≤–∫–∞...');
        
        try {
            const formData = this.collectFormData();
            console.log('üìã –î–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã:', formData);
            
            const response = await fetch('/booking', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                    'Accept': 'application/json',
                },
                body: this.encodeFormData(formData)
            });
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø –æ—Ç–≤–µ—Ç–∞
            const contentType = response.headers.get('content-type');
            
            if (response.ok) {
                if (contentType && contentType.includes('application/json')) {
                    // JSON –æ—Ç–≤–µ—Ç
                    const data = await response.json();
                    console.log('‚úÖ –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:', data);
                    if (data.success) {
                        this.showSuccess(data.message || '–ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞!');
                        
                        // –ï—Å–ª–∏ –µ—Å—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏
                        if (data.redirect) {
                            setTimeout(() => {
                                window.location.href = data.redirect;
                            }, 1500);
                        } else {
                            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É—Å–ø–µ—Ö–∞, –µ—Å–ª–∏ –æ–Ω–æ –µ—Å—Ç—å
                            this.showSuccessModal(data);
                            this.resetForm();
                        }
                    } else {
                        this.showError(data.message || '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞');
                    }
                } else {
                    // HTML –æ—Ç–≤–µ—Ç (—Ä–µ–¥–∏—Ä–µ–∫—Ç)
                    const html = await response.text();
                    if (html.includes('–ó–∞–ø–∏—Å—å –ø—Ä–∏–Ω—è—Ç–∞') || html.includes('—É—Å–ø–µ—à–Ω–æ') || html.includes('thank-you')) {
                        // –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏
                        window.location.href = '/thank-you';
                    } else {
                        this.showError('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–∏');
                    }
                }
            } else {
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (–≤–∫–ª—é—á–∞—è 409 - –∫–æ–Ω—Ñ–ª–∏–∫—Ç)
                if (contentType && contentType.includes('application/json')) {
                    const data = await response.json();
                    this.showError(data.message || `–û—à–∏–±–∫–∞: HTTP ${response.status}`);
                } else {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
            }
            
        } catch (error) {
            console.error('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã:', error);
            this.showError(`–û—à–∏–±–∫–∞: ${error.message}`);
        } finally {
            this.isSubmitting = false;
            this.validateForm();
        }
    }
    
    collectFormData() {
        const formData = new FormData(this.form);
        const data = {};
        
        // NOTE: –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –∏–º–µ–Ω–∞ –ø–æ–ª–µ–π
        // –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –æ–∂–∏–¥–∞–Ω–∏—è–º —Å–µ—Ä–≤–µ—Ä–∞
        for (let [key, value] of formData.entries()) {
            // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –∏–º–µ–Ω–∞ –ø–æ–ª–µ–π –∏–∑ —Ñ–æ—Ä–º—ã –≤ —Ñ–æ—Ä–º–∞—Ç, –æ–∂–∏–¥–∞–µ–º—ã–π —Å–µ—Ä–≤–µ—Ä–æ–º
            if (key === 'client_name' || key === 'name') {
                data['name'] = value;
            } else if (key === 'client_phone' || key === 'phone') {
                data['phone'] = value;
            } else if (key === 'booking_date' || key === 'date') {
                data['date'] = value;
            } else if (key === 'booking_time' || key === 'time') {
                data['time'] = value;
            } else {
                // –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å
                data[key] = value;
            }
        }
        
        // NOTE: –î–æ–±–∞–≤–ª—è–µ–º service_id, –µ—Å–ª–∏ –æ–Ω –≤—ã–±—Ä–∞–Ω —á–µ—Ä–µ–∑ UI
        if (!data['service_id']) {
            const serviceInput = document.querySelector('input[name="service_id"]:checked') || 
                                document.querySelector('input[name="service_id"]') ||
                                document.querySelector('select[name="service_id"]');
            if (serviceInput) {
                data['service_id'] = serviceInput.value;
            } else {
                // –ü—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —É—Å–ª—É–≥–∏
                const selectedService = document.querySelector('.service-selection .selected');
                if (selectedService) {
                    data['service_id'] = selectedService.dataset.serviceId || selectedService.getAttribute('data-service-id');
                }
            }
        }
        
        // NOTE: –î–æ–±–∞–≤–ª—è–µ–º session_duration, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ
        if (!data['session_duration']) {
            data['session_duration'] = '60'; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 60 –º–∏–Ω—É—Ç
        }
        
        console.log('üìã –°–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã:', data);
        return data;
    }
    
    encodeFormData(data) {
        // NOTE: –ö–æ–¥–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–∞–∫ form-urlencoded
        return Object.keys(data)
            .map(key => encodeURIComponent(key) + '=' + encodeURIComponent(data[key]))
            .join('&');
    }
    
    setSubmitState(text) {
        this.submitBtn.innerHTML = `<span class="me-2">‚è≥</span>${text}`;
        this.submitBtn.disabled = true;
    }
    
    resetSubmitButton() {
        this.submitBtn.innerHTML = '<span class="me-2">üìÖ</span>–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Å–µ–∞–Ω—Å';
        this.validateForm();
    }
    
    showSuccess(message) {
        this.showMessage(message, 'success');
        this.resetSubmitButton();
    }
    
    showError(message) {
        this.showMessage(message, 'error');
        this.resetSubmitButton();
    }
    
    showMessage(message, type) {
        // NOTE: –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
        const existingMessages = document.querySelectorAll('.booking-message');
        existingMessages.forEach(msg => msg.remove());
        
        const messageDiv = document.createElement('div');
        messageDiv.className = `booking-message alert alert-${type === 'success' ? 'success' : 'danger'} alert-dismissible fade show`;
        messageDiv.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            max-width: 400px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        `;
        
        messageDiv.innerHTML = `
            ${message}
            <button type="button" class="btn-close" onclick="this.parentElement.remove()"></button>
        `;
        
        document.body.appendChild(messageDiv);
        
        // NOTE: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
        setTimeout(() => {
            if (messageDiv.parentElement) {
                messageDiv.remove();
            }
        }, 5000);
    }
    
    resetForm() {
        // NOTE: –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
        this.form.reset();
        
        // NOTE: –û—á–∏—â–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã
        const timeSelect = document.getElementById('time');
        if (timeSelect) {
            timeSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è</option>';
        }
        
        // NOTE: –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É
        const timeSlotsHint = document.getElementById('timeSlotsHint');
        if (timeSlotsHint) {
            timeSlotsHint.textContent = '–í—Ä–µ–º—è –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã –∏ –º–∞—Å—Ç–µ—Ä–∞';
            timeSlotsHint.className = 'form-hint';
        }
        
        // NOTE: –û—á–∏—â–∞–µ–º –≤—Å–µ –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ –æ—à–∏–±–æ–∫
        this.clearAllFieldErrors();
        
        this.validateForm();
    }
    
    // ==================================================
    // üéØ –ù–û–í–´–ï –§–£–ù–ö–¶–ò–ò –î–õ–Ø –£–ö–ê–ó–ê–ù–ò–Ø –ù–ê –û–®–ò–ë–ö–ò
    // ==================================================
    
    highlightFieldError(fieldElement, fieldLabel) {
        if (!fieldElement) return;
        
        // NOTE: –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –æ—à–∏–±–∫–∏
        fieldElement.classList.add('field-error');
        
        // NOTE: –î–æ–±–∞–≤–ª—è–µ–º –∫—Ä–∞—Å–Ω—É—é —Ä–∞–º–∫—É
        fieldElement.style.borderColor = '#dc3545';
        fieldElement.style.boxShadow = '0 0 0 0.2rem rgba(220, 53, 69, 0.25)';
        
        // NOTE: –°–æ–∑–¥–∞–µ–º –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
        this.createFieldErrorMessage(fieldElement, fieldLabel);
    }
    
    clearFieldError(fieldElement) {
        if (!fieldElement) return;
        
        // NOTE: –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å –æ—à–∏–±–∫–∏
        fieldElement.classList.remove('field-error');
        
        // NOTE: –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å—Ç–∏–ª–∏
        fieldElement.style.borderColor = '';
        fieldElement.style.boxShadow = '';
        
        // NOTE: –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
        this.removeFieldErrorMessage(fieldElement);
    }
    
    clearAllFieldErrors() {
        // NOTE: –û—á–∏—â–∞–µ–º –≤—Å–µ –ø–æ–ª—è –æ—Ç –∏–Ω–¥–∏–∫–∞—Ü–∏–π –æ—à–∏–±–æ–∫
        const allFields = this.form.querySelectorAll('input, select, textarea');
        allFields.forEach(field => this.clearFieldError(field));
        
        const privacyCheckbox = document.getElementById('privacy_agreement');
        if (privacyCheckbox) {
            this.clearFieldError(privacyCheckbox);
        }
    }
    
    createFieldErrorMessage(fieldElement, fieldLabel) {
        // NOTE: –£–¥–∞–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        this.removeFieldErrorMessage(fieldElement);
        
        // NOTE: –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
        const errorMessage = document.createElement('div');
        errorMessage.className = 'field-error-message';
        
        // NOTE: –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª–µ–π
        let errorText = `–ü–æ–ª–µ "${fieldLabel}" –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è`;
        if (fieldElement.id === 'phone') {
            errorText = '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–º–∏–Ω–∏–º—É–º 10 —Ü–∏—Ñ—Ä)';
        } else if (fieldElement.id === 'privacy_agreement') {
            errorText = '–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–≥–ª–∞—Å–∏—Ç—å—Å—è —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö';
        }
        
        errorMessage.textContent = errorText;
        errorMessage.style.cssText = `
            color: #dc3545;
            font-size: 0.875rem;
            margin-top: 0.25rem;
            display: block;
            animation: fadeInError 0.3s ease-in;
        `;
        
        // NOTE: –î–æ–±–∞–≤–ª—è–µ–º CSS –∞–Ω–∏–º–∞—Ü–∏—é
        if (!document.getElementById('errorAnimationStyle')) {
            const style = document.createElement('style');
            style.id = 'errorAnimationStyle';
            style.textContent = `
                @keyframes fadeInError {
                    from { opacity: 0; transform: translateY(-5px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                .field-error {
                    animation: shake 0.5s ease-in-out;
                }
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    25% { transform: translateX(-5px); }
                    75% { transform: translateX(5px); }
                }
            `;
            document.head.appendChild(style);
        }
        
        // NOTE: –í—Å—Ç–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–æ–ª—è
        fieldElement.parentNode.insertBefore(errorMessage, fieldElement.nextSibling);
    }
    
    removeFieldErrorMessage(fieldElement) {
        const errorMessage = fieldElement.parentNode.querySelector('.field-error-message');
        if (errorMessage) {
            errorMessage.remove();
        }
    }
    
    scrollToField(fieldElement) {
        if (!fieldElement) return;
        
        // NOTE: –ü–ª–∞–≤–Ω–æ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ –ø–æ–ª—é
        fieldElement.scrollIntoView({
            behavior: 'smooth',
            block: 'center'
        });
        
        // NOTE: –î–æ–±–∞–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∞–Ω–∏–º–∞—Ü–∏—é –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è –≤–Ω–∏–º–∞–Ω–∏—è
        setTimeout(() => {
            fieldElement.style.transform = 'scale(1.02)';
            setTimeout(() => {
                fieldElement.style.transform = '';
            }, 200);
        }, 300);
    }
    
    checkServiceSelection() {
        // NOTE: –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—ã–±–æ—Ä —É—Å–ª—É–≥–∏
        // –ú–æ–∂–µ—Ç –±—ã—Ç—å —á–µ—Ä–µ–∑ —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ, radio button –∏–ª–∏ –¥—Ä—É–≥–æ–π —ç–ª–µ–º–µ–Ω—Ç
        const serviceInput = document.querySelector('input[name="service_id"]:checked') || 
                            document.querySelector('input[name="service_id"]') ||
                            document.querySelector('select[name="service_id"]');
        
        if (serviceInput) {
            return serviceInput.value && serviceInput.value.trim() !== '';
        }
        
        // NOTE: –ü—Ä–æ–≤–µ—Ä—è–µ–º —á–µ—Ä–µ–∑ data-–∞—Ç—Ä–∏–±—É—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–π —É—Å–ª—É–≥–∏
        const selectedService = document.querySelector('.service-selection .selected');
        if (selectedService) {
            return true;
        }
        
        return false;
    }
    
    showSuccessModal(data) {
        // NOTE: –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É—Å–ø–µ—Ö–∞, –µ—Å–ª–∏ –æ–Ω–æ –µ—Å—Ç—å
        const successModal = document.getElementById('successModal');
        if (successModal) {
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
            if (data.booking_data) {
                const modalClientName = document.getElementById('modalClientName');
                const modalDateTime = document.getElementById('modalDateTime');
                const modalService = document.getElementById('modalService');
                
                if (modalClientName && data.booking_data.name) {
                    modalClientName.textContent = data.booking_data.name;
                }
                if (modalDateTime && data.booking_data.date && data.booking_data.time) {
                    modalDateTime.textContent = `${data.booking_data.date} ${data.booking_data.time}`;
                }
                if (modalService && data.booking_data.service_name) {
                    modalService.textContent = data.booking_data.service_name;
                }
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            successModal.style.display = 'flex';
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            const closeButtons = successModal.querySelectorAll('.close-button');
            closeButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    successModal.style.display = 'none';
                });
            });
        }
    }
}

// ==================================================
// üöÄ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï DOM
// ==================================================

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ DOM
function initBookingForm() {
    const form = document.getElementById('bookingForm');
    if (form) {
        console.log('üìã –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–æ—Ä–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è...');
        // –í–ê–ñ–ù–û: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –ù–ï type="submit"
        const submitBtn = document.getElementById('submitBooking');
        if (!submitBtn || submitBtn.type !== 'submit') {
            window.bookingFormHandler = new BookingFormHandler();
        } else {
            console.log('‚úÖ –ö–Ω–æ–ø–∫–∞ type="submit" - –ù–ï –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º BookingFormHandler, —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º');
        }
        console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–æ—Ä–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≥–æ—Ç–æ–≤');
    } else {
        console.warn('‚ö†Ô∏è –§–æ—Ä–º–∞ bookingForm –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ');
    }
}

// –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ DOM
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initBookingForm);
} else {
    // DOM —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω
    initBookingForm();
}

// –¢–∞–∫–∂–µ –ø—Ä–æ–±—É–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É (–Ω–∞ —Å–ª—É—á–∞–π –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏)
setTimeout(() => {
    if (!window.bookingFormHandler && document.getElementById('bookingForm')) {
        console.log('üîÑ –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ–æ—Ä–º—ã...');
        initBookingForm();
    }
}, 1000);

// –í–ê–ñ–ù–û: –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ü–û–õ–ù–û–°–¢–¨–Æ –û–¢–ö–õ–Æ–ß–ï–ù –¥–ª—è type="submit" –∫–Ω–æ–ø–æ–∫
// –ù–ï –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º —Å–æ–±—ã—Ç–∏—è –¥–ª—è submit –∫–Ω–æ–ø–æ–∫ –≤–æ–æ–±—â–µ



================================================================================
–§–ê–ô–õ: static/js/main.js
================================================================================
// –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π JavaScript –¥–ª—è –º–∞—Å—Å–∞–∂–Ω–æ–≥–æ —Å–∞–ª–æ–Ω–∞

document.addEventListener('DOMContentLoaded', function() {
// –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é (–≥–∞–º–±—É—Ä–≥–µ—Ä)
    const navbarToggler = document.getElementById('navbarToggler');
    const navbarCollapse = document.getElementById('navbarNav');
    
    const navbarOverlay = document.getElementById('navbarOverlay');
    
    function toggleMenu() {
        const isOpen = navbarCollapse.classList.contains('show');
        navbarToggler.classList.toggle('active');
        navbarCollapse.classList.toggle('show');
        if (navbarOverlay) {
            navbarOverlay.classList.toggle('active');
        }
        document.body.style.overflow = !isOpen ? 'hidden' : '';
    }
    
    function closeMenu() {
        navbarToggler.classList.remove('active');
        navbarCollapse.classList.remove('show');
        if (navbarOverlay) {
            navbarOverlay.classList.remove('active');
        }
        document.body.style.overflow = '';
    }
    
    if (navbarToggler && navbarCollapse) {
        navbarToggler.addEventListener('click', function(e) {
            e.stopPropagation();
            toggleMenu();
        });
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ
        if (navbarOverlay) {
            navbarOverlay.addEventListener('click', closeMenu);
        }
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É
        const navLinks = navbarCollapse.querySelectorAll('.nav-link');
        navLinks.forEach(link => {
            link.addEventListener('click', closeMenu);
        });
    }
    
    // –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –¥–ª—è —è–∫–æ—Ä–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
    const anchorLinks = document.querySelectorAll('a[href^="#"]');
    anchorLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            const targetElement = document.querySelector(targetId);
            
            if (targetElement) {
                const headerHeight = document.querySelector('.header').offsetHeight;
                const navbarHeight = document.querySelector('.navbar').offsetHeight;
                const offset = headerHeight + navbarHeight + 20;
                
                window.scrollTo({
                    top: targetElement.offsetTop - offset,
                    behavior: 'smooth'
                });
            }
        });
    });

// –≠—Ñ—Ñ–µ–∫—Ç –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –¥–ª—è header
    const header = document.getElementById('header');
    if (header) {
        window.addEventListener('scroll', function() {
            if (window.scrollY > 100) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });
    }
    
    // –ê–∫—Ç–∏–≤–Ω–∞—è —Å—Å—ã–ª–∫–∞ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
    const navLinks = document.querySelectorAll('.nav-link');
    const sections = document.querySelectorAll('section[id]');
    
    window.addEventListener('scroll', function() {
        let current = '';
        sections.forEach(section => {
            const sectionTop = section.offsetTop;
            const sectionHeight = section.clientHeight;
            if (window.scrollY >= (sectionTop - 200)) {
                current = section.getAttribute('id');
            }
        });
        
        navLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href') === '#' + current) {
                link.classList.add('active');
            }
        });
    });
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('animate-fade-in');
            }
        });
    }, observerOptions);
    
    // –ù–∞–±–ª—é–¥–∞–µ–º –∑–∞ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ —Å –∫–ª–∞—Å—Å–æ–º animate-on-scroll
    const animateElements = document.querySelectorAll('.animate-on-scroll');
    animateElements.forEach(el => observer.observe(el));
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–∑–∞–≥–ª—É—à–∫–∞)
    const bookingButtons = document.querySelectorAll('[data-modal="booking"]');
    bookingButtons.forEach(button => {
        button.addEventListener('click', function() {
            alert('–§—É–Ω–∫—Ü–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–∑–∂–µ!');
        });
    });
});


================================================================================
–§–ê–ô–õ: static/js/multi-step-form.js
================================================================================
// ==================================================
// üìã –ú–ù–û–ì–û–®–ê–ì–û–í–ê–Ø –§–û–†–ú–ê –ë–†–û–ù–ò–†–û–í–ê–ù–ò–Ø
// ==================================================

class MultiStepForm {
    constructor() {
        this.currentStep = 1;
        this.totalSteps = 7;
        this.form = document.getElementById('bookingForm');
        
        if (!this.form) {
            console.warn('‚ö†Ô∏è –§–æ—Ä–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
            return;
        }
        
        this.init();
    }
    
    init() {
        console.log('üîç –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–Ω–æ–≥–æ—à–∞–≥–æ–≤–æ–π —Ñ–æ—Ä–º—ã...');
        
        // –í–ê–ñ–ù–û: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø –∫–Ω–æ–ø–∫–∏ submit - –µ—Å–ª–∏ submit, –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
        const submitBtn = document.getElementById('submitBooking');
        if (submitBtn && submitBtn.type === 'submit') {
            console.log('‚úÖ –ö–Ω–æ–ø–∫–∞ type="submit" - –ù–ï –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–ª—è —Ñ–æ—Ä–º—ã');
            // –î–ª—è type="submit" –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É
            return;
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è type="button")
        this.form.addEventListener('click', (e) => {
            if (e.target.classList.contains('next-step')) {
                e.preventDefault();
                this.nextStep();
            } else if (e.target.classList.contains('prev-step')) {
                e.preventDefault();
                this.prevStep();
            }
        });
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–π —à–∞–≥
        this.showStep(1);
        
        console.log('‚úÖ –ú–Ω–æ–≥–æ—à–∞–≥–æ–≤–∞—è —Ñ–æ—Ä–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
    }
    
    showStep(step) {
        // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —à–∞–≥–∏
        const allSteps = this.form.querySelectorAll('.form-step');
        allSteps.forEach((stepEl, index) => {
            stepEl.classList.remove('active');
            if (index + 1 === step) {
                stepEl.classList.add('active');
            }
        });
        
        this.currentStep = step;
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        this.updateProgress();
        
        // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º —à–∞–≥–µ
        if (step === this.totalSteps) {
            this.activateSubmitButton();
        }
        
        console.log(`üìç –ü–æ–∫–∞–∑–∞–Ω —à–∞–≥ ${step} –∏–∑ ${this.totalSteps}`);
    }
    
    nextStep() {
        if (this.currentStep < this.totalSteps) {
            // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ —à–∞–≥–∞
            if (this.validateCurrentStep()) {
                this.showStep(this.currentStep + 1);
            } else {
                console.warn('‚ö†Ô∏è –¢–µ–∫—É—â–∏–π —à–∞–≥ –Ω–µ –≤–∞–ª–∏–¥–µ–Ω');
            }
        }
    }
    
    prevStep() {
        if (this.currentStep > 1) {
            this.showStep(this.currentStep - 1);
        }
    }
    
    validateCurrentStep() {
        const currentStepEl = this.form.querySelector(`.form-step[data-step="${this.currentStep}"]`);
        if (!currentStepEl) return true;
        
        const requiredFields = currentStepEl.querySelectorAll('[required]');
        let isValid = true;
        
        requiredFields.forEach(field => {
            if (!field.value || field.value.trim() === '') {
                isValid = false;
                field.classList.add('field-error');
            } else {
                field.classList.remove('field-error');
            }
        });
        
        return isValid;
    }
    
    updateProgress() {
        const progressFill = document.getElementById('progressFill');
        if (progressFill) {
            const progress = (this.currentStep / this.totalSteps) * 100;
            progressFill.style.width = `${progress}%`;
        }
    }
    
    activateSubmitButton() {
        const submitBtn = document.getElementById('submitBooking');
        if (submitBtn) {
            console.log('üîç –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º —à–∞–≥–µ...');
            
            // –£–±–∏—Ä–∞–µ–º disabled
            submitBtn.disabled = false;
            submitBtn.removeAttribute('disabled');
            
            // –£–±–∏—Ä–∞–µ–º –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –∫–ª–∞—Å—Å—ã
            submitBtn.classList.remove('btn-secondary', 'disabled');
            submitBtn.classList.add('btn-primary');
            
            // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∏–ª–∏
            submitBtn.style.pointerEvents = 'auto';
            submitBtn.style.cursor = 'pointer';
            submitBtn.style.opacity = '1';
            submitBtn.style.display = 'inline-block';
            submitBtn.style.visibility = 'visible';
            
            // –í–ê–ñ–ù–û: –î–ª—è type="submit" –∫–Ω–æ–ø–æ–∫ –ù–ï –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
            if (submitBtn.type === 'submit') {
                console.log('‚úÖ –ö–Ω–æ–ø–∫–∞ type="submit" - –ù–ï –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏, —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º');
                // –ù–ï –¥–æ–±–∞–≤–ª—è–µ–º onclick –∏ –¥—Ä—É–≥–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
            } else {
                // –¢–æ–ª—å–∫–æ –¥–ª—è type="button" –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
                if (!submitBtn.getAttribute('onclick')) {
                    submitBtn.setAttribute('onclick', 'window.submitBookingForm(event)');
                }
                
                submitBtn.onclick = (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('üîò –ö–Ω–æ–ø–∫–∞ type="button" –Ω–∞–∂–∞—Ç–∞ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º —à–∞–≥–µ!');
                    
                    if (window.submitBookingForm) {
                        window.submitBookingForm(e);
                    } else if (window.bookingFormHandler) {
                        window.bookingFormHandler.handleSubmit(e);
                    } else {
                        this.submitForm();
                    }
                    return false;
                };
            }
            
            console.log('‚úÖ –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞');
        }
    }
    
    submitForm() {
        const formData = new FormData(this.form);
        const data = {};
        
        for (let [key, value] of formData.entries()) {
            // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –∏–º–µ–Ω–∞ –ø–æ–ª–µ–π
            if (key === 'client_name' || key === 'name') data['name'] = value;
            else if (key === 'client_phone' || key === 'phone') data['phone'] = value;
            else if (key === 'booking_date' || key === 'date') data['date'] = value;
            else if (key === 'booking_time' || key === 'time') data['time'] = value;
            else data[key] = value;
        }
        
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
        fetch('/booking', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
                'Accept': 'application/json'
            },
            body: Object.keys(data).map(key => 
                encodeURIComponent(key) + '=' + encodeURIComponent(data[key])
            ).join('&')
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                if (data.redirect) {
                    window.location.href = data.redirect;
                } else {
                    alert('–ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞!');
                }
            } else {
                alert('–û—à–∏–±–∫–∞: ' + (data.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'));
            }
        })
        .catch(error => {
            console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã:', error);
            alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã');
        });
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
document.addEventListener('DOMContentLoaded', () => {
    if (document.getElementById('bookingForm')) {
        console.log('üìã –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—É—é —Ñ–æ—Ä–º—É...');
        // –í–ê–ñ–ù–û: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –ù–ï type="submit"
        const submitBtn = document.getElementById('submitBooking');
        if (!submitBtn || submitBtn.type !== 'submit') {
            window.multiStepForm = new MultiStepForm();
        } else {
            console.log('‚úÖ –ö–Ω–æ–ø–∫–∞ type="submit" - –ù–ï –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º MultiStepForm, —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º');
        }
    }
});




================================================================================
–§–ê–ô–õ: static/js/protection.js
================================================================================
/**
 * –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
 * –ó–∞—â–∏—â–∞–µ—Ç —Å–∞–π—Ç –æ—Ç –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –∫–æ–¥–∞
 */

(function() {
    'use strict';

    // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∞–≤–æ–≥–æ –∫–ª–∏–∫–∞ (–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é)
    document.addEventListener('contextmenu', function(e) {
        e.preventDefault();
        showProtectionMessage('–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–æ');
        return false;
    });

    // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤—ã–¥–µ–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
    document.addEventListener('selectstart', function(e) {
        e.preventDefault();
        return false;
    });

    // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è (drag & drop)
    document.addEventListener('dragstart', function(e) {
        e.preventDefault();
        return false;
    });

    // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à
    document.addEventListener('keydown', function(e) {
        // Ctrl+C (–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ)
        if (e.ctrlKey && e.key === 'c') {
            e.preventDefault();
            showProtectionMessage('–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–µ—â–µ–Ω–æ');
            return false;
        }
        
        // Ctrl+U (–ø—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞)
        if (e.ctrlKey && e.key === 'u') {
            e.preventDefault();
            showProtectionMessage('–ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –∑–∞–ø—Ä–µ—â–µ–Ω');
            return false;
        }
        
        // Ctrl+A (–≤—ã–¥–µ–ª–∏—Ç—å –≤—Å–µ)
        if (e.ctrlKey && e.key === 'a') {
            e.preventDefault();
            showProtectionMessage('–í—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–æ');
            return false;
        }
        
        // Ctrl+S (—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É)
        if (e.ctrlKey && e.key === 's') {
            e.preventDefault();
            showProtectionMessage('–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–ø—Ä–µ—â–µ–Ω–æ');
            return false;
        }
        
        // Ctrl+P (–ø–µ—á–∞—Ç—å)
        if (e.ctrlKey && e.key === 'p') {
            e.preventDefault();
            showProtectionMessage('–ü–µ—á–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞');
            return false;
        }
        
        // F12 (–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞)
        if (e.key === 'F12') {
            e.preventDefault();
            showProtectionMessage('–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã');
            return false;
        }
        
        // Ctrl+Shift+I (DevTools)
        if (e.ctrlKey && e.shiftKey && e.key === 'I') {
            e.preventDefault();
            showProtectionMessage('–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã');
            return false;
        }
        
        // Ctrl+Shift+J (Console)
        if (e.ctrlKey && e.shiftKey && e.key === 'J') {
            e.preventDefault();
            showProtectionMessage('–ö–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞');
            return false;
        }
        
        // Ctrl+Shift+C (Inspect Element)
        if (e.ctrlKey && e.shiftKey && e.key === 'C') {
            e.preventDefault();
            showProtectionMessage('–ò–Ω—Å–ø–µ–∫—Ç–æ—Ä —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω');
            return false;
        }
    });

    // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
    document.addEventListener('copy', function(e) {
        e.clipboardData.setData('text/plain', '');
        e.preventDefault();
        showProtectionMessage('–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–æ');
        return false;
    });

    // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤—ã—Ä–µ–∑–∞–Ω–∏—è
    document.addEventListener('cut', function(e) {
        e.clipboardData.setData('text/plain', '');
        e.preventDefault();
        showProtectionMessage('–í—ã—Ä–µ–∑–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–æ');
        return false;
    });

    // –ó–∞—â–∏—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –æ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
    document.addEventListener('DOMContentLoaded', function() {
        // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ –ø—Ä–∞–≤—ã–π –∫–ª–∏–∫
        const images = document.querySelectorAll('img');
        images.forEach(function(img) {
            img.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                showProtectionMessage('–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∑–∞–ø—Ä–µ—â–µ–Ω–æ');
                return false;
            });
            
            // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
            img.addEventListener('dragstart', function(e) {
                e.preventDefault();
                return false;
            });
        });
    });

    // –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—Ç–∫–ª—é—á–µ–Ω–∏—è JavaScript —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å (—Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞)
    (function() {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –º–æ–±–∏–ª—å–Ω—ã–º
        function isMobileDevice() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||
                   (window.innerWidth <= 768) ||
                   ('ontouchstart' in window) ||
                   (navigator.maxTouchPoints > 0);
        }
        
        // –û—Ç–∫–ª—é—á–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É DevTools –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
        if (isMobileDevice()) {
            return; // –ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º DevTools –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
        }
        
        function disableDevTools() {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏–µ DevTools (—Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞)
            const threshold = 160;
            const widthThreshold = window.outerWidth - window.innerWidth > threshold;
            const heightThreshold = window.outerHeight - window.innerHeight > threshold;
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å–ª–∏ –æ–∫–Ω–æ —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–æ–µ, –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ–º
            if (window.innerWidth < 768 || window.innerHeight < 400) {
                return;
            }
            
            if (widthThreshold || heightThreshold) {
                document.body.innerHTML = '<div style="display:flex;align-items:center;justify-content:center;height:100vh;font-size:24px;color:#333;">üîí –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã</div>';
            }
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 500ms (—Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞)
        setInterval(disableDevTools, 500);
    })();

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ –∑–∞—â–∏—Ç–µ
    function showProtectionMessage(message) {
        // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        const notification = document.createElement('div');
        notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: #ff4444;
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 10000;
            font-family: Arial, sans-serif;
            font-size: 14px;
            max-width: 300px;
            animation: slideIn 0.3s ease-out;
        `;
        notification.textContent = 'üîí ' + message;
        
        // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from {
                    transform: translateX(400px);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
        `;
        document.head.appendChild(style);
        
        document.body.appendChild(notification);
        
        // –£–¥–∞–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
        setTimeout(function() {
            notification.style.animation = 'slideIn 0.3s ease-out reverse';
            setTimeout(function() {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 300);
        }, 3000);
    }

    // –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å
    console.log('%cüîí –ó–∞—â–∏—Ç–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞', 'color: #ff4444; font-size: 20px; font-weight: bold;');
    console.log('%c–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–æ', 'color: #666; font-size: 12px;');
    
    // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π –∫–æ–Ω—Å–æ–ª–∏
    const noop = function() {};
    const methods = ['clear', 'log', 'info', 'warn', 'error', 'debug', 'table', 'trace'];
    methods.forEach(function(method) {
        console[method] = noop;
    });

    // –ó–∞—â–∏—Ç–∞ –æ—Ç –≤—Å—Ç–∞–≤–∫–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å
    document.addEventListener('paste', function(e) {
        // –†–∞–∑—Ä–µ—à–∞–µ–º –≤—Å—Ç–∞–≤–∫—É —Ç–æ–ª—å–∫–æ –≤ –ø–æ–ª—è –≤–≤–æ–¥–∞
        const target = e.target;
        if (target.tagName !== 'INPUT' && target.tagName !== 'TEXTAREA' && !target.isContentEditable) {
            e.preventDefault();
            showProtectionMessage('–í—Å—Ç–∞–≤–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–∞');
            return false;
        }
    });

})();




================================================================================
–§–ê–ô–õ: static/js/price-calculator.js
================================================================================
// ==================================================
// üí∞ –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† –°–¢–û–ò–ú–û–°–¢–ò –°–ï–ê–ù–°–ê
// ==================================================

class PriceCalculator {
    constructor() {
        this.sessionDurationSelect = document.getElementById('session_duration');
        this.priceCalculator = document.getElementById('priceCalculator');
        this.priceAmount = document.getElementById('priceAmount');
        this.pricePerMinute = document.getElementById('pricePerMinute');
        this.serviceSelect = document.getElementById('service_id');
        
        // NOTE: –¢–∞—Ä–∏—Ñ—ã –∑–∞ –º–∏–Ω—É—Ç—É –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Å–ª—É–≥ (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç SERVICES –≤ app.py)
        // –†–∞—Å—á–µ—Ç –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –±–∞–∑–æ–≤–æ–π —Ü–µ–Ω–µ –∑–∞ 60 –º–∏–Ω—É—Ç
        this.serviceRates = {
            '1': 50.00, // –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∞–∂: 3000 —Ä—É–± / 60 –º–∏–Ω
            '2': 58.33, // –õ–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂: 3500 —Ä—É–± / 60 –º–∏–Ω
            '3': 66.67, // –°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∞–∂: 4000 —Ä—É–± / 60 –º–∏–Ω
            '4': 75.00, // –ê–Ω—Ç–∏—Ü–µ–ª–ª—é–ª–∏—Ç–Ω—ã–π –º–∞—Å—Å–∞–∂: 4500 —Ä—É–± / 60 –º–∏–Ω
        };
        
        // NOTE: –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ü–µ–Ω—ã –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π (–µ—Å–ª–∏ –µ—Å—Ç—å —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)
        this.servicePrices = {
            '1': { // –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∞–∂
                60: 3000,
                90: 4500,
                120: 8000
            },
            '2': { // –õ–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂
                60: 3500,
                90: 5000,
                120: 9000
            },
            '3': { // –°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∞–∂
                60: 4000,
                90: 5500,
                120: 10000
            },
            '4': { // –ê–Ω—Ç–∏—Ü–µ–ª–ª—é–ª–∏—Ç–Ω—ã–π –º–∞—Å—Å–∞–∂
                60: 4500,
                90: 6000,
                120: 11000
            }
        };
        
        this.init();
    }
    
    init() {
        if (!this.sessionDurationSelect || !this.priceCalculator) {
            console.warn('‚ö†Ô∏è –≠–ª–µ–º–µ–Ω—Ç—ã –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');
            return;
        }
        
        // NOTE: –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–µ–∞–Ω—Å–∞
        this.sessionDurationSelect.addEventListener('change', () => {
            this.calculatePrice();
        });
        
        // NOTE: –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —É—Å–ª—É–≥–∏
        if (this.serviceSelect) {
            this.serviceSelect.addEventListener('change', () => {
                this.calculatePrice();
            });
        }
        
        console.log('‚úÖ PriceCalculator –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
    }
    
    calculatePrice() {
        const duration = parseInt(this.sessionDurationSelect.value);
        const serviceId = this.serviceSelect ? this.serviceSelect.value : '1';
        
        if (!duration) {
            this.hideCalculator();
            return;
        }
        
        // –í–ê–ñ–ù–û: –°–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å —Ü–µ–Ω—É –∏–∑ data-–∞—Ç—Ä–∏–±—É—Ç–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –æ–ø—Ü–∏–∏ (–∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)
        let totalPrice = 0;
        const selectedOption = this.sessionDurationSelect.options[this.sessionDurationSelect.selectedIndex];
        
        if (selectedOption && selectedOption.hasAttribute('data-price')) {
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ü–µ–Ω—É –∏–∑ data-–∞—Ç—Ä–∏–±—É—Ç–∞ (—Ä–µ–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)
            totalPrice = parseInt(selectedOption.getAttribute('data-price'));
            console.log(`üí∞ –¶–µ–Ω–∞ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: ${totalPrice} —Ä—É–±. –¥–ª—è ${duration} –º–∏–Ω—É—Ç`);
        } else {
            // Fallback: –ø—Ä–æ–≤–µ—Ä—è–µ–º –∂–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ü–µ–Ω—ã
            const servicePrices = this.servicePrices[serviceId];
            
            if (servicePrices && servicePrices[duration]) {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ü–µ–Ω—É, –µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å
                totalPrice = servicePrices[duration];
                console.log(`üí∞ –¶–µ–Ω–∞ –∏–∑ –∂–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö: ${totalPrice} —Ä—É–±. –¥–ª—è ${duration} –º–∏–Ω—É—Ç`);
            } else {
                // –ï—Å–ª–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ü–µ–Ω—ã –Ω–µ—Ç, —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –æ—Ç –±–∞–∑–æ–≤–æ–π —Ü–µ–Ω—ã –∑–∞ 60 –º–∏–Ω—É—Ç
                const ratePerMinute = this.serviceRates[serviceId] || this.serviceRates['1'];
                totalPrice = Math.round(duration * ratePerMinute);
                console.log(`üí∞ –¶–µ–Ω–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: ${totalPrice} —Ä—É–±. –¥–ª—è ${duration} –º–∏–Ω—É—Ç`);
            }
        }
        
        // NOTE: –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        this.updatePriceDisplay(totalPrice, null, duration);
        this.showCalculator();
    }
    
    updatePriceDisplay(totalPrice, ratePerMinute, duration) {
        // NOTE: –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ü–µ–Ω—É —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏ —Ç—ã—Å—è—á
        const formattedPrice = totalPrice.toLocaleString('ru-RU');
        
        this.priceAmount.textContent = `${formattedPrice} —Ä—É–±.`;
    }
    
    showCalculator() {
        this.priceCalculator.style.display = 'block';
        
        // NOTE: –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—è–≤–ª–µ–Ω–∏—è
        this.priceCalculator.style.opacity = '0';
        this.priceCalculator.style.transform = 'translateY(20px)';
        
        setTimeout(() => {
            this.priceCalculator.style.transition = 'all 0.5s ease-out';
            this.priceCalculator.style.opacity = '1';
            this.priceCalculator.style.transform = 'translateY(0)';
        }, 10);
    }
    
    hideCalculator() {
        this.priceCalculator.style.display = 'none';
    }
    
    // NOTE: –ú–µ—Ç–æ–¥ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–∞—Ä–∏—Ñ–æ–≤ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
    updateServiceRates(newRates) {
        this.serviceRates = { ...this.serviceRates, ...newRates };
        this.calculatePrice(); // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–∞—Ä–∏—Ñ–æ–≤
    }
    
    // NOTE: –ú–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏
    getCurrentPrice() {
        const duration = parseInt(this.sessionDurationSelect.value);
        const serviceId = this.serviceSelect ? this.serviceSelect.value : '1';
        
        if (!duration) return 0;
        
        // –í–ê–ñ–ù–û: –°–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å —Ü–µ–Ω—É –∏–∑ data-–∞—Ç—Ä–∏–±—É—Ç–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –æ–ø—Ü–∏–∏ (–∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)
        const selectedOption = this.sessionDurationSelect.options[this.sessionDurationSelect.selectedIndex];
        
        if (selectedOption && selectedOption.hasAttribute('data-price')) {
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ü–µ–Ω—É –∏–∑ data-–∞—Ç—Ä–∏–±—É—Ç–∞ (—Ä–µ–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)
            return parseInt(selectedOption.getAttribute('data-price'));
        }
        
        // Fallback: –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç—É –∂–µ –ª–æ–≥–∏–∫—É, —á—Ç–æ –∏ –≤ calculatePrice
        const servicePrices = this.servicePrices[serviceId];
        if (servicePrices && servicePrices[duration]) {
            return servicePrices[duration];
        } else {
            const ratePerMinute = this.serviceRates[serviceId] || this.serviceRates['1'];
            return Math.round(duration * ratePerMinute);
        }
    }
}

// NOTE: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
document.addEventListener('DOMContentLoaded', () => {
    window.priceCalculator = new PriceCalculator();
    console.log('‚úÖ PriceCalculator –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ window.priceCalculator');
});



================================================================================
–§–ê–ô–õ: static/js/simple-phone-input.js
================================================================================
// ==================================================
// üìû –ü–†–û–°–¢–û–ï –ü–û–õ–ï –¢–ï–õ–ï–§–û–ù–ê –° +7
// ==================================================

class SimplePhoneInput {
    constructor() {
        this.phoneInput = document.getElementById('phone');
        this.init();
    }
    
    init() {
        if (!this.phoneInput) {
            console.warn('‚ö†Ô∏è –ü–æ–ª–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ');
            return;
        }
        
        // NOTE: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        this.phoneInput.value = '+7';
        
        // NOTE: –°–ª—É—à–∞–µ–º —Ç–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏—è —Ñ–æ–∫—É—Å–∞ –∏ –ø–æ—Ç–µ—Ä–∏ —Ñ–æ–∫—É—Å–∞
        this.phoneInput.addEventListener('focus', (e) => this.handleFocus(e));
        this.phoneInput.addEventListener('blur', (e) => this.handleBlur(e));
        this.phoneInput.addEventListener('input', (e) => this.handleInput(e));
        
        console.log('‚úÖ SimplePhoneInput –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
    }
    
    handleInput(event) {
        let value = event.target.value;
        
        // NOTE: –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ - –µ—Å–ª–∏ –Ω–µ—Ç +7 –≤ –Ω–∞—á–∞–ª–µ, –¥–æ–±–∞–≤–ª—è–µ–º
        if (!value.startsWith('+7')) {
            if (value.startsWith('7')) {
                value = '+' + value;
            } else if (value.startsWith('8')) {
                value = '+7' + value.substring(1);
            } else if (value.length > 0) {
                value = '+7' + value;
            } else {
                value = '+7';
            }
            event.target.value = value;
        }
    }
    
    handleFocus(event) {
        // NOTE: –ü—Ä–∏ —Ñ–æ–∫—É—Å–µ –≤—ã–¥–µ–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã –ø–æ—Å–ª–µ +7
        const value = event.target.value;
        if (value.startsWith('+7')) {
            setTimeout(() => {
                event.target.setSelectionRange(2, value.length);
            }, 0);
        }
    }
    
    handleBlur(event) {
        // NOTE: –ü—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Ñ–æ–∫—É—Å–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –Ω–æ–º–µ—Ä
        const value = event.target.value;
        const formatted = this.formatPhone(value);
        event.target.value = formatted;
    }
    
    formatPhone(phone) {
        // NOTE: –£–±–∏—Ä–∞–µ–º –≤—Å–µ —Å–∏–º–≤–æ–ª—ã –∫—Ä–æ–º–µ —Ü–∏—Ñ—Ä –∏ +
        let cleaned = phone.replace(/[^\d+]/g, '');
        
        // NOTE: –£–±–µ–∂–¥–∞–µ–º—Å—è —á—Ç–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å +7
        if (!cleaned.startsWith('+7')) {
            if (cleaned.startsWith('7')) {
                cleaned = '+' + cleaned;
            } else if (cleaned.startsWith('8')) {
                cleaned = '+7' + cleaned.substring(1);
            } else {
                cleaned = '+7' + cleaned;
            }
        }
        
        // NOTE: –ü—Ä–æ—Å—Ç–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
        if (cleaned.length > 2) {
            const digits = cleaned.substring(2);
            let formatted = '+7';
            
            if (digits.length > 0) {
                formatted += ' (' + digits.substring(0, 3);
            }
            if (digits.length > 3) {
                formatted += ') ' + digits.substring(3, 6);
            }
            if (digits.length > 6) {
                formatted += '-' + digits.substring(6, 8);
            }
            if (digits.length > 8) {
                formatted += '-' + digits.substring(8, 10);
            }
            
            return formatted;
        }
        
        return '+7';
    }
}

// NOTE: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
document.addEventListener('DOMContentLoaded', () => {
    new SimplePhoneInput();
});






================================================================================
–§–ê–ô–õ: static/js/spam-protection.js
================================================================================
/**
 * –°–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—Ç—ã –æ—Ç —Å–ø–∞–º–∞ –¥–ª—è —Ñ–æ—Ä–º
 * –í–µ—Ä—Å–∏—è 1.0
 */

class SpamProtection {
    constructor() {
        this.attempts = 0;
        this.maxAttempts = 5;
        this.blockDuration = 10 * 60 * 1000; // 10 –º–∏–Ω—É—Ç
        this.lastSubmitTime = 0;
        this.init();
    }

    init() {
        this.addHoneypotFields();
        this.addTimingFields();
        this.setupFormProtection();
        this.recordStartTime();
        console.log('üõ°Ô∏è –°–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—Ç—ã –æ—Ç —Å–ø–∞–º–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞');
    }

    // –î–æ–±–∞–≤–ª—è–µ–º honeypot –ø–æ–ª—è (–ª–æ–≤—É—à–∫–∏ –¥–ª—è –±–æ—Ç–æ–≤)
    addHoneypotFields() {
        const honeypotFields = [
            { id: 'hp_name', name: 'hp_name', type: 'text', label: '–ù–µ –∑–∞–ø–æ–ª–Ω—è–π—Ç–µ —ç—Ç–æ –ø–æ–ª–µ' },
            { id: 'hp_email', name: 'hp_email', type: 'email', label: 'Leave this field empty' },
            { id: 'hp_website', name: 'hp_website', type: 'url', label: 'Do not enter anything here' }
        ];

        honeypotFields.forEach(field => {
            if (!document.getElementById(field.id)) {
                const fieldDiv = document.createElement('div');
                fieldDiv.className = 'hp-field';
                fieldDiv.style.cssText = 'display: none !important; opacity: 0 !important; position: absolute !important; left: -9999px !important; height: 0 !important; width: 0 !important; overflow: hidden !important;';
                
                fieldDiv.innerHTML = `
                    <label for="${field.id}">${field.label}</label>
                    <input type="${field.type}" id="${field.id}" name="${field.name}" tabindex="-1" autocomplete="off">
                `;
                
                document.body.appendChild(fieldDiv);
            }
        });
    }

    // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
    addTimingFields() {
        const timingFields = [
            { id: 'form_load_time', name: 'form_load_time' },
            { id: 'form_submit_time', name: 'form_submit_time' },
            { id: 'protection_token', name: 'protection_token' }
        ];

        timingFields.forEach(field => {
            if (!document.getElementById(field.id)) {
                const input = document.createElement('input');
                input.type = 'hidden';
                input.id = field.id;
                input.name = field.name;
                
                if (field.id === 'form_load_time') {
                    input.value = Date.now();
                } else if (field.id === 'protection_token') {
                    input.value = this.generateToken();
                }
                
                document.body.appendChild(input);
            }
        });
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞
    generateToken() {
        return Math.random().toString(36).substring(2) + Date.now().toString(36) + Math.random().toString(36).substring(2);
    }

    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞—â–∏—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Ñ–æ—Ä–º
    setupFormProtection() {
        const forms = document.querySelectorAll('form');
        
        forms.forEach(form => {
            // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Ñ–æ—Ä–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –Ω—É–∂–Ω–æ –∑–∞—â–∏—â–∞—Ç—å
            if (form.classList.contains('no-protection')) {
                return;
            }

            form.addEventListener('submit', (e) => {
                if (!this.validateSubmission(e, form)) {
                    e.preventDefault();
                    return false;
                }
            });
        });
    }

    // –í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
    validateSubmission(e, form) {
        const submitTime = Date.now();
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏
        const submitTimeField = document.getElementById('form_submit_time');
        if (submitTimeField) {
            submitTimeField.value = submitTime;
        }

        // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ honeypot –ø–æ–ª–µ–π
        if (!this.checkHoneypotFields()) {
            this.logSpamAttempt('honeypot');
            return false;
        }

        // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
        if (!this.checkTiming(form, submitTime)) {
            return false;
        }

        // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ –ø–æ–ø—ã—Ç–æ–∫
        if (!this.checkAttemptLimits()) {
            return false;
        }

        // 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è –º—ã—à–∏ (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞)
        if (!this.checkUserBehavior(form)) {
            this.logSpamAttempt('behavior');
            return false;
        }

        // –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
        this.recordSuccessfulSubmission();
        return true;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ honeypot –ø–æ–ª–µ–π
    checkHoneypotFields() {
        const honeypotFields = ['hp_name', 'hp_email', 'hp_website'];
        
        for (const fieldName of honeypotFields) {
            const field = document.getElementById(fieldName);
            if (field && field.value.trim() !== '') {
                return false;
            }
        }
        return true;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
    checkTiming(form, submitTime) {
        const loadTimeField = document.getElementById('form_load_time');
        
        if (loadTimeField && loadTimeField.value) {
            const loadTime = parseInt(loadTimeField.value);
            const timeSpent = (submitTime - loadTime) / 1000;
            
            // –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è: 3 —Å–µ–∫—É–Ω–¥—ã
            if (timeSpent < 3) {
                this.showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω—è–π—Ç–µ —Ñ–æ—Ä–º—É –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–µ–µ. –°–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞.');
                this.logSpamAttempt('timing', timeSpent);
                return false;
            }

            // –î–ª—è –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã—Ö —Ñ–æ—Ä–º - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
            if (this.isMultiStepForm(form) && timeSpent < 10) {
                this.showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–¥–µ–ª–∏—Ç–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã.');
                this.logSpamAttempt('multi_step_timing', timeSpent);
                return false;
            }
        }
        
        return true;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ –ø–æ–ø—ã—Ç–æ–∫
    checkAttemptLimits() {
        const now = Date.now();
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
        if (this.attempts >= this.maxAttempts) {
            if (now - this.lastSubmitTime < this.blockDuration) {
                const minutesLeft = Math.ceil((this.blockDuration - (now - this.lastSubmitTime)) / 60000);
                this.showError(`–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–ø—ã—Ç–æ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —á–µ—Ä–µ–∑ ${minutesLeft} –º–∏–Ω—É—Ç.`);
                return false;
            } else {
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –ø–æ—Å–ª–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
                this.attempts = 0;
            }
        }
        
        this.attempts++;
        this.lastSubmitTime = now;
        return true;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    checkUserBehavior(form) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –±—ã–ª–∞ –ª–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –º—ã—à–∏/—Ç–∞—á–∞ –Ω–∞ —Ñ–æ—Ä–º–µ
        let hasUserInteraction = false;
        
        form.addEventListener('mousemove', () => hasUserInteraction = true, { once: true });
        form.addEventListener('touchstart', () => hasUserInteraction = true, { once: true });
        form.addEventListener('keypress', () => hasUserInteraction = true, { once: true });

        // –î–∞–µ–º –Ω–µ–±–æ–ª—å—à–æ–π timeout –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
        return new Promise((resolve) => {
            setTimeout(() => {
                // –ï—Å–ª–∏ —ç—Ç–æ –±—ã—Å—Ç—Ä–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –±–µ–∑ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è - –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ
                const loadTimeField = document.getElementById('form_load_time');
                if (loadTimeField && loadTimeField.value) {
                    const timeSpent = (Date.now() - parseInt(loadTimeField.value)) / 1000;
                    resolve(hasUserInteraction || timeSpent > 10); // –ï—Å–ª–∏ –±–æ–ª—å—à–µ 10 —Å–µ–∫, —Ä–∞–∑—Ä–µ—à–∞–µ–º
                } else {
                    resolve(hasUserInteraction);
                }
            }, 100);
        });
    }

    // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–Ω–æ–≥–æ—à–∞–≥–æ–≤–æ–π —Ñ–æ—Ä–º—ã
    isMultiStepForm(form) {
        return form.querySelector('.form-step') !== null || 
               form.querySelector('[data-step]') !== null ||
               form.classList.contains('multi-step');
    }

    // –ó–∞–ø–∏—Å—å –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞—á–∞–ª–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
    recordStartTime() {
        sessionStorage.setItem('form_start_time', Date.now().toString());
    }

    // –ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
    recordSuccessfulSubmission() {
        this.attempts = 0; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ
        console.log('‚úÖ –§–æ—Ä–º–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç —Å–ø–∞–º–∞');
    }

    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ —Å–ø–∞–º–∞
    logSpamAttempt(type, data = null) {
        const logData = {
            type: type,
            timestamp: new Date().toISOString(),
            data: data,
            attempts: this.attempts
        };
        
        console.warn('üö´ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ —Å–ø–∞–º-–æ—Ç–ø—Ä–∞–≤–∫–∞:', logData);
        
        // –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
        this.reportSpamAttempt(logData);
    }

    // –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–∞ –æ —Å–ø–∞–º–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    reportSpamAttempt(logData) {
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
        if (typeof window.sendSpamReport === 'function') {
            window.sendSpamReport(logData);
        }
    }

    // –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    showError(message) {
        // –ü—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ—à–∏–±–æ–∫
        let errorContainer = document.getElementById('spam-protection-error');
        
        if (!errorContainer) {
            errorContainer = document.createElement('div');
            errorContainer.id = 'spam-protection-error';
            errorContainer.style.cssText = 'background: #fff3f3; border: 1px solid #ffcdd2; border-radius: 8px; padding: 15px; margin: 15px 0; color: #d32f2f;';
            document.body.insertBefore(errorContainer, document.body.firstChild);
        }
        
        errorContainer.innerHTML = `<strong>–û—à–∏–±–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:</strong> ${message}`;
        errorContainer.style.display = 'block';
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
        setTimeout(() => {
            errorContainer.style.display = 'none';
        }, 5000);
    }

    // –°–±—Ä–æ—Å –∑–∞—â–∏—Ç—ã (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
    reset() {
        this.attempts = 0;
        this.lastSubmitTime = 0;
        console.log('üîÑ –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ —Å–±—Ä–æ—à–µ–Ω–∞');
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞—â–∏—Ç—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', function() {
    window.spamProtection = new SpamProtection();
});

// –≠–∫—Å–ø–æ—Ä—Ç –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª—è—Ö
if (typeof module !== 'undefined' && module.exports) {
    module.exports = SpamProtection;
}


================================================================================
–§–ê–ô–õ: static/js/sections/services.js
================================================================================
// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —É—Å–ª—É–≥
function initServicesFilter() {
    const filterBtns = document.querySelectorAll('.filter-btn');
    const serviceCards = document.querySelectorAll('.service-card');

    filterBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            filterBtns.forEach(b => b.classList.remove('active'));
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Ç–µ–∫—É—â–µ–π –∫–Ω–æ–ø–∫–µ
            btn.classList.add('active');
            
            const filter = btn.getAttribute('data-filter');
            
            serviceCards.forEach(card => {
                if (filter === 'all' || card.getAttribute('data-category') === filter) {
                    card.style.display = 'block';
                    setTimeout(() => {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, 100);
                } else {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(20px)';
                    setTimeout(() => {
                        card.style.display = 'none';
                    }, 300);
                }
            });
        });
    });
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ –∫–Ω–æ–ø–∫–µ –∑–∞–ø–∏—Å–∏
function initServiceBooking() {
    const serviceBtns = document.querySelectorAll('.service-btn');
    
    serviceBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            const serviceName = btn.getAttribute('data-service');
            const serviceId = btn.getAttribute('data-service-id');
            
            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Ñ–æ—Ä–º–µ –∑–∞–ø–∏—Å–∏
            goToBookingForm(serviceName, serviceId);
        });
    });
}

// –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Ñ–æ—Ä–º–µ –∑–∞–ø–∏—Å–∏
function goToBookingForm(serviceName, serviceId) {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏–º—Å—è –ª–∏ –º—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
    const bookingSection = document.getElementById('booking');
    
    if (bookingSection) {
        // –ï—Å–ª–∏ —Ñ–æ—Ä–º–∞ –Ω–∞ —ç—Ç–æ–π –∂–µ —Å—Ç—Ä–∞–Ω–∏—Ü–µ, —Å–∫—Ä–æ–ª–ª–∏–º –∫ –Ω–µ–π
        bookingSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        
        // –ü—Ä–µ–¥–∑–∞–ø–æ–ª–Ω—è–µ–º —É—Å–ª—É–≥—É, –µ—Å–ª–∏ –µ—Å—Ç—å ID
        if (serviceId) {
            setTimeout(() => {
                const serviceSelect = document.getElementById('service_id');
                if (serviceSelect) {
                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ
                    serviceSelect.value = serviceId;
                    
                    // –¢—Ä–∏–≥–≥–µ—Ä–∏–º —Å–æ–±—ã—Ç–∏–µ change –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º—ã
                    const changeEvent = new Event('change', { bubbles: true });
                    serviceSelect.dispatchEvent(changeEvent);
                    
                    // –¢–∞–∫–∂–µ —Ç—Ä–∏–≥–≥–µ—Ä–∏–º —Å–æ–±—ã—Ç–∏–µ –¥–ª—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ —Ü–µ–Ω—ã, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
                    if (window.PriceCalculator) {
                        const priceCalculator = document.querySelector('.price-calculator');
                        if (priceCalculator) {
                            // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º —Ü–µ–Ω—É
                            const durationSelect = document.getElementById('session_duration');
                            if (durationSelect) {
                                durationSelect.dispatchEvent(new Event('change', { bubbles: true }));
                            }
                        }
                    }
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —É—Å–ª—É–≥–∏
                    serviceSelect.focus();
                    serviceSelect.style.borderColor = '#056486';
                    setTimeout(() => {
                        serviceSelect.style.borderColor = '';
                    }, 2000);
                }
            }, 500); // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–∫—Ä–æ–ª–ª–∞
        }
    } else {
        // –ï—Å–ª–∏ —Ñ–æ—Ä–º—ã –Ω–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∑–∞–ø–∏—Å–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º service_id
        const url = serviceId ? `/booking?service_id=${serviceId}` : '/booking';
        window.location.href = url;
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', function() {
    // –§–∏–ª—å—Ç—Ä—ã —É–±—Ä–∞–Ω—ã - –≤—Å–µ —É—Å–ª—É–≥–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    // initServicesFilter();
    initServiceBooking();
});


================================================================================
–§–ê–ô–õ: static/js/sections/reviews.js
================================================================================
// JavaScript –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤
let currentRating = 0;

// –ö–∞—Ä—É—Å–µ–ª—å –æ—Ç–∑—ã–≤–æ–≤
let currentReviewIndex = 0;
let reviewsCount = 0;
let autoPlayInterval = null;
let itemsPerView = 1;

// –î–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏
window.openReviewModal = function() {
    const modal = document.getElementById('reviewModal');
    if (modal) {
        modal.style.display = 'block';
        modal.style.visibility = 'visible';
        modal.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden'; // –ë–ª–æ–∫–∏—Ä—É–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É —Ñ–æ–Ω–∞
        console.log('‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ç–∫—Ä—ã—Ç–æ');
    } else {
        console.error('‚ùå –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ reviewModal –Ω–µ –Ω–∞–π–¥–µ–Ω–æ');
    }
};

window.closeReviewModal = function() {
    const modal = document.getElementById('reviewModal');
    if (modal) {
        modal.style.display = 'none';
        modal.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = ''; // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É
    }
    resetForm();
};

window.setRating = function(rating) {
    currentRating = rating;
    const stars = document.querySelectorAll('.rating-stars .star');
    const ratingInput = document.getElementById('reviewRating');
    
    stars.forEach((star, index) => {
        if (index < rating) {
            star.classList.add('active');
            star.style.opacity = '1';
        } else {
            star.classList.remove('active');
            star.style.opacity = '0.3';
        }
    });
    
    if (ratingInput) {
        ratingInput.value = rating;
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É
    const hint = document.querySelector('.rating-hint');
    if (hint) {
        hint.textContent = `–í—ã–±—Ä–∞–Ω–æ: ${rating} –∏–∑ 5 –∑–≤—ë–∑–¥`;
    }
};

function resetForm() {
    const form = document.getElementById('reviewForm');
    if (form) {
        form.reset();
    }
    currentRating = 0;
    const stars = document.querySelectorAll('.rating-stars .star');
    stars.forEach(star => {
        star.classList.remove('active');
        star.style.opacity = '0.3';
    });
    
    const ratingInput = document.getElementById('reviewRating');
    if (ratingInput) {
        ratingInput.value = '';
    }
    
    const hint = document.querySelector('.rating-hint');
    if (hint) {
        hint.textContent = '–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–≤—ë–∑–¥—ã, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å –æ—Ü–µ–Ω–∫—É';
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
document.addEventListener('DOMContentLoaded', function() {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–≤—ë–∑–¥ —Ä–µ–π—Ç–∏–Ω–≥–∞
    const stars = document.querySelectorAll('.rating-stars .star');
    stars.forEach(star => {
        star.style.cursor = 'pointer';
        star.style.opacity = '0.3';
        star.style.transition = 'opacity 0.3s ease';
        
        star.addEventListener('click', function() {
            const rating = parseInt(this.getAttribute('data-value'));
            setRating(rating);
        });
        
        star.addEventListener('mouseenter', function() {
            const rating = parseInt(this.getAttribute('data-value'));
            const allStars = document.querySelectorAll('.rating-stars .star');
            allStars.forEach((s, index) => {
                if (index < rating) {
                    s.style.opacity = '1';
                } else {
                    s.style.opacity = '0.3';
                }
            });
        });
    });
    
    const ratingContainer = document.querySelector('.rating-stars');
    if (ratingContainer) {
        ratingContainer.addEventListener('mouseleave', function() {
            const allStars = document.querySelectorAll('.rating-stars .star');
            allStars.forEach((star, index) => {
                if (index < currentRating) {
                    star.style.opacity = '1';
                } else {
                    star.style.opacity = '0.3';
                }
            });
        });
    }
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
    const reviewForm = document.getElementById('reviewForm');
    if (reviewForm) {
        reviewForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–π—Ç–∏–Ω–≥
            const ratingInput = document.getElementById('reviewRating');
            const rating = ratingInput ? parseInt(ratingInput.value) : currentRating;
            
            if (!rating || rating < 1 || rating > 5) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ—Å—Ç–∞–≤—å—Ç–µ –æ—Ü–µ–Ω–∫—É –æ—Ç 1 –¥–æ 5 –∑–≤—ë–∑–¥');
                return;
            }
            
            const form = this;
            const submitBtn = form.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            
            // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
            submitBtn.disabled = true;
            submitBtn.textContent = '–û—Ç–ø—Ä–∞–≤–∫–∞...';
            
            try {
                // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
                const formData = new FormData(form);
                formData.set('rating', rating); // –ò—Å–ø–æ–ª—å–∑—É–µ–º set –≤–º–µ—Å—Ç–æ append, —á—Ç–æ–±—ã –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–±—Ä–∞–Ω—ã
                const name = formData.get('name');
                const message = formData.get('message');
                const ratingValue = formData.get('rating');
                
                console.log('üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–∑—ã–≤–∞:', {
                    name: name,
                    rating: ratingValue,
                    message: message ? message.substring(0, 50) + '...' : '–ø—É—Å—Ç–æ'
                });
                
                if (!name || !message || !ratingValue) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è: –∏–º—è, –æ—Ü–µ–Ω–∫–∞ –∏ —Ç–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞');
                    submitBtn.disabled = false;
                    submitBtn.textContent = originalText;
                    return;
                }
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä
                const response = await fetch('/api/reviews', {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Accept': 'application/json'
                    }
                });
                
                console.log('üì• –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:', response.status, response.statusText);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞
                if (!response.ok) {
                    const errorText = await response.text();
                    console.error('‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:', errorText);
                    try {
                        const errorData = JSON.parse(errorText);
                        alert(errorData.message || `–û—à–∏–±–∫–∞ ${response.status}: ${response.statusText}`);
                    } catch (e) {
                        alert(`–û—à–∏–±–∫–∞ ${response.status}: ${response.statusText}\n${errorText.substring(0, 100)}`);
                    }
                    submitBtn.disabled = false;
                    submitBtn.textContent = originalText;
                    return;
                }
                
                const data = await response.json();
                console.log('‚úÖ –î–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞:', data);
                
                if (data.success) {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
                    alert(data.message || '–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –æ—Ç–∑—ã–≤! –ü–æ—Å–ª–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –æ–Ω –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ.');
                    closeReviewModal();
                    
                    // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –æ—Ç–∑—ã–≤—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                    // loadReviews();
                } else {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
                    alert(data.message || '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–∑—ã–≤–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.');
                }
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–∑—ã–≤–∞:', error);
                console.error('–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏:', error.stack);
                alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–∑—ã–≤–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.');
            } finally {
                // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
                submitBtn.disabled = false;
                submitBtn.textContent = originalText;
            }
        });
    } else {
        console.warn('–§–æ—Ä–º–∞ reviewForm –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ');
    }
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
    const reviewModal = document.getElementById('reviewModal');
    if (reviewModal) {
        reviewModal.addEventListener('click', function(event) {
            if (event.target === reviewModal) {
                closeReviewModal();
            }
        });
    }
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ –∫–ª–∞–≤–∏—à–µ ESC
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            const modal = document.getElementById('reviewModal');
            if (modal && modal.style.display === 'block') {
                closeReviewModal();
            }
        }
    });
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—É—Å–µ–ª–∏ –æ—Ç–∑—ã–≤–æ–≤
    initReviewsCarousel();
});

// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–∞—Ä—É—Å–µ–ª–∏ –æ—Ç–∑—ã–≤–æ–≤
function initReviewsCarousel() {
    const carouselTrack = document.getElementById('reviewsCarouselTrack');
    const prevBtn = document.getElementById('prevReview');
    const nextBtn = document.getElementById('nextReview');
    const indicators = document.querySelectorAll('.carousel-indicator');
    
    if (!carouselTrack) {
        console.log('–ö–∞—Ä—É—Å–µ–ª—å –æ—Ç–∑—ã–≤–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ');
        return;
    }
    
    const reviewCards = carouselTrack.querySelectorAll('.review-card');
    reviewsCount = reviewCards.length;
    itemsPerView = getItemsPerView(carouselTrack);
    
    if (reviewsCount === 0) {
        return;
    }
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –∫–∞—Ä—É—Å–µ–ª–∏
    function updateCarousel() {
        const translateX = -currentReviewIndex * (100 / itemsPerView);
        carouselTrack.style.transform = `translateX(${translateX}%)`;
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
        if (prevBtn) {
            prevBtn.disabled = currentReviewIndex <= 0;
        }
        if (nextBtn) {
            nextBtn.disabled = currentReviewIndex >= reviewsCount - itemsPerView;
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
        indicators.forEach((indicator, index) => {
            if (index >= currentReviewIndex && index < currentReviewIndex + itemsPerView) {
                indicator.classList.add('active');
            } else {
                indicator.classList.remove('active');
            }
        });
    }
    
    // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –æ—Ç–∑—ã–≤—É
    function nextReview() {
        if (currentReviewIndex < reviewsCount - itemsPerView) {
            currentReviewIndex++;
            updateCarousel();
        }
    }
    
    // –ü–µ—Ä–µ—Ö–æ–¥ –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É –æ—Ç–∑—ã–≤—É
    function prevReview() {
        if (currentReviewIndex > 0) {
            currentReviewIndex--;
            updateCarousel();
        }
    }
    
    // –ü–µ—Ä–µ—Ö–æ–¥ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –æ—Ç–∑—ã–≤—É
    function goToReview(index) {
        if (index >= 0 && index < reviewsCount) {
            const maxIndex = Math.max(0, reviewsCount - itemsPerView);
            currentReviewIndex = Math.min(index, maxIndex);
            updateCarousel();
        }
    }
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫
    if (prevBtn) {
        prevBtn.addEventListener('click', prevReview);
    }
    
    if (nextBtn) {
        nextBtn.addEventListener('click', nextReview);
    }
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
    indicators.forEach((indicator, index) => {
        indicator.addEventListener('click', () => goToReview(index));
    });
    
    // –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
    document.addEventListener('keydown', function(event) {
        const carouselWrapper = document.querySelector('.reviews-carousel-wrapper');
        if (!carouselWrapper) return;
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —Ñ–æ–∫—É—Å –≤ –æ–±–ª–∞—Å—Ç–∏ –∫–∞—Ä—É—Å–µ–ª–∏
        const isInCarousel = carouselWrapper.contains(document.activeElement) || 
                            document.activeElement.closest('.reviews-carousel-wrapper');
        
        if (isInCarousel || event.target === prevBtn || event.target === nextBtn) {
            if (event.key === 'ArrowLeft') {
                event.preventDefault();
                prevReview();
            } else if (event.key === 'ArrowRight') {
                event.preventDefault();
                nextReview();
            }
        }
    });
    
    // –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å)
    function startAutoPlay() {
        if (autoPlayInterval) {
            clearInterval(autoPlayInterval);
        }
        
        autoPlayInterval = setInterval(() => {
            if (currentReviewIndex < reviewsCount - itemsPerView) {
                nextReview();
            } else {
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ –ø–µ—Ä–≤–æ–º—É –æ—Ç–∑—ã–≤—É
                currentReviewIndex = 0;
                updateCarousel();
            }
        }, 5000); // –ú–µ–Ω—è–µ–º –æ—Ç–∑—ã–≤ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
    }
    
    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫—É –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
    const carouselWrapper = document.querySelector('.reviews-carousel-wrapper');
    if (carouselWrapper) {
        carouselWrapper.addEventListener('mouseenter', () => {
            if (autoPlayInterval) {
                clearInterval(autoPlayInterval);
                autoPlayInterval = null;
            }
        });
        
        // –ú–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫—É, —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–≤ —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–æ–∫—É:
        // carouselWrapper.addEventListener('mouseleave', startAutoPlay);
    }
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
    let resizeTimeout = null;
    window.addEventListener('resize', () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(() => {
            const newItemsPerView = getItemsPerView(carouselTrack);
            if (newItemsPerView !== itemsPerView) {
                itemsPerView = newItemsPerView;
                currentReviewIndex = Math.min(currentReviewIndex, Math.max(0, reviewsCount - itemsPerView));
                updateCarousel();
            }
        }, 150);
    });
    
    // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–≤–∞–π–ø–æ–≤ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
    let touchStartX = 0;
    let touchEndX = 0;
    let isDragging = false;
    
    if (carouselTrack) {
        carouselTrack.addEventListener('touchstart', function(e) {
            touchStartX = e.touches[0].clientX;
            isDragging = false;
        }, { passive: true });
        
        carouselTrack.addEventListener('touchmove', function(e) {
            isDragging = true;
            touchEndX = e.touches[0].clientX;
        }, { passive: true });
        
        carouselTrack.addEventListener('touchend', function(e) {
            if (!isDragging) return;
            
            const swipeDistance = touchStartX - touchEndX;
            const minSwipeDistance = 50; // –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Å–≤–∞–π–ø–∞
            
            if (Math.abs(swipeDistance) > minSwipeDistance) {
                if (swipeDistance > 0) {
                    // –°–≤–∞–π–ø –≤–ª–µ–≤–æ - —Å–ª–µ–¥—É—é—â–∏–π –æ—Ç–∑—ã–≤
                    nextReview();
                } else {
                    // –°–≤–∞–π–ø –≤–ø—Ä–∞–≤–æ - –ø—Ä–µ–¥—ã–¥—É—â–∏–π –æ—Ç–∑—ã–≤
                    prevReview();
                }
            }
            
            isDragging = false;
        }, { passive: true });
    }
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    updateCarousel();
    
    // –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∏ (—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ, –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –∞–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞)
    // startAutoPlay();
}

function getItemsPerView(trackElement) {
    if (!trackElement) {
        return 1;
    }
    const styles = window.getComputedStyle(trackElement);
    const cssValue = parseFloat(styles.getPropertyValue('--items-per-view')) || 1;
    return Math.max(1, Math.min(cssValue, reviewsCount || 1));
}


================================================================================
–§–ê–ô–õ: static/js/sections/masters.js
================================================================================
// –î–∞–Ω–Ω—ã–µ –º–∞—Å—Ç–µ—Ä–æ–≤ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
const mastersData = {
    1: {
        name: "–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞",
        specialization: "–ú–∞—Å—Å–∞–∂–∏—Å—Ç ‚Ä¢ SPA-—Ç–µ—Ä–∞–ø–µ–≤—Ç",
        experience: "8 –ª–µ—Ç",
        procedures: "2000+",
        education: "–í—ã—Å—à–µ–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ø–æ —Ç–∞–π—Å–∫–æ–º—É –º–∞—Å—Å–∞–∂—É –∏ –∞—Ä–æ–º–∞—Ç–µ—Ä–∞–ø–∏–∏",
        description: "–ê–Ω–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –≥–ª—É–±–æ–∫–æ–º —Ä–∞—Å—Å–ª–∞–±–ª—è—é—â–µ–º –º–∞—Å—Å–∞–∂–µ –∏ SPA-–ø—Ä–æ—Ü–µ–¥—É—Ä–∞—Ö. –ï–µ —Ç–µ—Ö–Ω–∏–∫–∏ —Å–æ—á–µ—Ç–∞—é—Ç –≤ —Å–µ–±–µ –¥—Ä–µ–≤–Ω–∏–µ –≤–æ—Å—Ç–æ—á–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –µ–≤—Ä–æ–ø–µ–π—Å–∫–∏–º–∏ –º–µ—Ç–æ–¥–∏–∫–∞–º–∏.",
        specialties: ["–¢–∞–π—Å–∫–∏–π –º–∞—Å—Å–∞–∂", "–õ–∏–º—Ñ–æ–¥—Ä–µ–Ω–∞–∂–Ω—ã–π –º–∞—Å—Å–∞–∂", "–ê—Ä–æ–º–∞—Ç–µ—Ä–∞–ø–∏—è", "SPA-—Ä–∏—Ç—É–∞–ª—ã"],
        achievements: ["–°–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∞–∂–∏—Å—Ç", "–ú–∞—Å—Ç–µ—Ä —Ç–∞–π—Å–∫–æ–≥–æ –º–∞—Å—Å–∞–∂–∞", "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –∞—Ä–æ–º–∞—Ç–µ—Ä–∞–ø–∏–∏"],
        image: "master1.jpg"
    },
    2: {
        name: "–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞",
        specialization: "SPA-—Ç–µ—Ä–∞–ø–µ–≤—Ç ‚Ä¢ –ö–æ—Å–º–µ—Ç–æ–ª–æ–≥",
        experience: "6 –ª–µ—Ç",
        procedures: "1500+",
        education: "–ö–æ—Å–º–µ—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ø–æ —ç—Å—Ç–µ—Ç–∏—á–µ—Å–∫–æ–º—É —É—Ö–æ–¥—É –∑–∞ —Ç–µ–ª–æ–º",
        description: "–ú–∞—Ä–∏—è —Å–æ–∑–¥–∞–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã —É—Ö–æ–¥–∞ –∑–∞ —Ç–µ–ª–æ–º, –∏—Å–ø–æ–ª—å–∑—É—è —Ç–æ–ª—å–∫–æ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—É—é –∏ —Å–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–æ—Å–º–µ—Ç–∏–∫—É.",
        specialties: ["–û–±–µ—Ä—Ç—ã–≤–∞–Ω–∏—è", "–£—Ö–æ–¥ –∑–∞ –ª–∏—Ü–æ–º", "–ê–Ω—Ç–∏—Ü–µ–ª–ª—é–ª–∏—Ç–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã", "–î–µ—Ç–æ–∫—Å-–ø—Ä–æ—Ü–µ–¥—É—Ä—ã"],
        achievements: ["–°–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ—Å–º–µ—Ç–æ–ª–æ–≥", "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –∞–Ω—Ç–∏—Ü–µ–ª–ª—é–ª–∏—Ç–Ω—ã–º –ø—Ä–æ–≥—Ä–∞–º–º–∞–º"],
        image: "master2.jpg"
    },
    3: {
        name: "–î–º–∏—Ç—Ä–∏–π –°–æ–∫–æ–ª–æ–≤",
        specialization: "–í–µ–ª–Ω–µ—Å-–∫–æ—É—á ‚Ä¢ –†–µ–∞–±–∏–ª–∏—Ç–æ–ª–æ–≥",
        experience: "10 –ª–µ—Ç",
        procedures: "3000+",
        education: "–í—ã—Å—à–µ–µ —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, —Ä–µ–∞–±–∏–ª–∏—Ç–æ–ª–æ–≥–∏—è",
        description: "–î–º–∏—Ç—Ä–∏–π –ø–æ–º–æ–≥–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –ø–æ—Å–ª–µ —Ç—Ä–∞–≤–º –∏ —É–ª—É—á—à–∏—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫—É—é —Ñ–æ—Ä–º—É —á–µ—Ä–µ–∑ –º–∞—Å—Å–∞–∂ –∏ –ª–µ—á–µ–±–Ω—É—é —Ñ–∏–∑–∫—É–ª—å—Ç—É—Ä—É.",
        specialties: ["–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∞–∂", "–†–µ–∞–±–∏–ª–∏—Ç–∞—Ü–∏—è", "–ü–æ—Å—Ç—Ç—Ä–∞–≤–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ", "–ö–æ—Ä—Ä–µ–∫—Ü–∏—è –æ—Å–∞–Ω–∫–∏"],
        achievements: ["–°–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∞–±–∏–ª–∏—Ç–æ–ª–æ–≥", "–ê–≤—Ç–æ—Ä –º–µ—Ç–æ–¥–∏–∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è"],
        image: "master3.jpg"
    },
    4: {
        name: "–û–ª—å–≥–∞ –ö–æ–≤–∞–ª–µ–≤–∞",
        specialization: "–†–µ–π–∫–∏-–º–∞—Å—Ç–µ—Ä ‚Ä¢ –ú–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω—ã–π –∫–æ—É—á",
        experience: "7 –ª–µ—Ç",
        procedures: "1200+",
        education: "–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ø–æ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º, –º–µ–¥–∏—Ç–∞—Ü–∏–∏",
        description: "–û–ª—å–≥–∞ –ø–æ–º–æ–≥–∞–µ—Ç –æ–±—Ä–µ—Å—Ç–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –≥–∞—Ä–º–æ–Ω–∏—é —á–µ—Ä–µ–∑ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ –º–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∞–∂.",
        specialties: ["–≠–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏", "–ú–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∞–∂", "–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ —á–∞–∫—Ä", "–ì–∞—Ä–º–æ–Ω–∏–∑–∞—Ü–∏—è"],
        achievements: ["–°–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–π–∫–∏-–º–∞—Å—Ç–µ—Ä", "–ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –º–µ–¥–∏—Ç–∞—Ü–∏–∏"],
        image: "master4.jpg"
    }
};

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
function initMastersFilter() {
    const filterBtns = document.querySelectorAll('.master-filter-btn');
    const masterCards = document.querySelectorAll('.master-card');

    filterBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            filterBtns.forEach(b => b.classList.remove('active'));
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Ç–µ–∫—É—â–µ–π –∫–Ω–æ–ø–∫–µ
            btn.classList.add('active');
            
            const filter = btn.getAttribute('data-filter');
            
            masterCards.forEach(card => {
                if (filter === 'all' || card.getAttribute('data-category') === filter) {
                    card.style.display = 'block';
                    setTimeout(() => {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, 100);
                } else {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(20px)';
                    setTimeout(() => {
                        card.style.display = 'none';
                    }, 300);
                }
            });
        });
    });
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
function initMasterModal() {
    const modal = document.getElementById('masterModal');
    const closeBtn = document.querySelector('.modal-close');
    const detailBtns = document.querySelectorAll('.master-detail-btn');
    const quickViewBtns = document.querySelectorAll('.master-quick-view');

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    closeBtn.addEventListener('click', () => {
        modal.style.display = 'none';
    });

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –æ–∫–Ω–∞
    window.addEventListener('click', (e) => {
        if (e.target === modal) {
            modal.style.display = 'none';
        }
    });

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–æ–∫ "–ü–æ–¥—Ä–æ–±–Ω–µ–µ"
    detailBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            const masterId = btn.getAttribute('data-master');
            showMasterModal(masterId);
        });
    });

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–æ–∫ –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
    quickViewBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            const masterId = btn.getAttribute('data-master');
            showMasterModal(masterId);
        });
    });
}

// –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –º–∞—Å—Ç–µ—Ä–∞
function showMasterModal(masterId) {
    const modal = document.getElementById('masterModal');
    const modalBody = document.querySelector('.modal-body');
    const master = mastersData[masterId];

    if (!master) return;

    modalBody.innerHTML = `
        <div class="modal-master">
            <div class="modal-header">
                <div class="modal-image">
                    <img src="{{ url_for('static', filename='img/masters/${master.image}') }}" 
                         alt="${master.name}" 
                         class="modal-photo">
                </div>
                <div class="modal-info">
                    <h2 class="modal-name">${master.name}</h2>
                    <p class="modal-specialization">${master.specialization}</p>
                    <div class="modal-stats">
                        <div class="modal-stat">
                            <span class="stat-value">${master.experience}</span>
                            <span class="stat-label">–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã</span>
                        </div>
                        <div class="modal-stat">
                            <span class="stat-value">${master.procedures}</span>
                            <span class="stat-label">–ü—Ä–æ—Ü–µ–¥—É—Ä</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-content">
                <div class="modal-section">
                    <h3>–û –º–∞—Å—Ç–µ—Ä–µ</h3>
                    <p>${master.description}</p>
                </div>
                
                <div class="modal-section">
                    <h3>–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</h3>
                    <p>${master.education}</p>
                </div>
                
                <div class="modal-section">
                    <h3>–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è</h3>
                    <div class="modal-skills">
                        ${master.specialties.map(skill => `<span class="modal-skill-tag">${skill}</span>`).join('')}
                    </div>
                </div>
                
                <div class="modal-section">
                    <h3>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
                    <ul class="modal-achievements">
                        ${master.achievements.map(achievement => `<li>${achievement}</li>`).join('')}
                    </ul>
                </div>
                
                <div class="modal-actions">
                    <button class="modal-btn modal-btn-primary" onclick="bookWithMaster('${master.name}')">
                        –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –∫ –º–∞—Å—Ç–µ—Ä—É
                    </button>
                </div>
            </div>
        </div>
    `;

    modal.style.display = 'block';
}

// –ó–∞–ø–∏—Å—å –∫ –º–∞—Å—Ç–µ—Ä—É
function bookWithMaster(masterName) {
    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
    document.getElementById('masterModal').style.display = 'none';
    
    // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª–µ –º–∞—Å—Ç–µ—Ä–∞ –≤ —Ñ–æ—Ä–º–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    const masterInput = document.querySelector('#booking-master');
    if (masterInput) {
        masterInput.value = masterName;
    }
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å –≤–∞—à–µ–π –º–æ–¥–∞–ª–∫–æ–π)
    console.log('–ó–∞–ø–∏—Å—å –∫ –º–∞—Å—Ç–µ—Ä—É:', masterName);
    // bookingModal.show();
    
     // –°–∫—Ä–æ–ª–ª –∫ —Ñ–æ—Ä–º–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    const bookingSection = document.getElementById('booking');
    if (bookingSection) {
        bookingSection.scrollIntoView({ 
            behavior: 'smooth',
            block: 'start'
        });
        
        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º —Ñ–æ—Ä–º—ã
        setTimeout(() => {
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º —Ñ–æ—Ä–º—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
            const bookingForm = document.querySelector('.booking-form');
            if (bookingForm) {
                bookingForm.classList.add('active');
                // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Å–≤–µ—Ç–∫—É –ø–æ–ª—è –º–∞—Å—Ç–µ—Ä–∞
                const masterField = bookingForm.querySelector('select[name="master"], input[name="master"]');
                if (masterField) {
                    masterField.focus();
                    masterField.style.borderColor = '#667eea';
                    masterField.style.boxShadow = '0 0 0 3px rgba(102, 126, 234, 0.1)';
                    
                    // –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
                    setTimeout(() => {
                        masterField.style.borderColor = '';
                        masterField.style.boxShadow = '';
                    }, 3000);
                }
            }
        }, 800);
    }
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–æ–∫ –∑–∞–ø–∏—Å–∏ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö
function initBookingButtons() {
    const bookingBtns = document.querySelectorAll('.master-btn-primary');
    
    bookingBtns.forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.stopPropagation();
            const masterName = btn.getAttribute('data-master');
            bookWithMaster(masterName);
        });
    });
}

// –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –º–∞—Å—Ç–µ—Ä–æ–≤ –ø–æ –æ–ø—ã—Ç—É –∏ —Ä–µ–π—Ç–∏–Ω–≥—É
function initMastersSorting() {
    const sortContainer = document.createElement('div');
    sortContainer.className = 'masters-sort';
    sortContainer.innerHTML = `
        <label for="sort-masters" class="sort-label">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</label>
        <select id="sort-masters" class="sort-select">
            <option value="default">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</option>
            <option value="experience-desc">–ü–æ –æ–ø—ã—Ç—É (—É–±—ã–≤–∞–Ω–∏–µ)</option>
            <option value="experience-asc">–ü–æ –æ–ø—ã—Ç—É (–≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏–µ)</option>
            <option value="rating-desc">–ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É (—É–±—ã–≤–∞–Ω–∏–µ)</option>
            <option value="name">–ü–æ –∏–º–µ–Ω–∏ (–ê-–Ø)</option>
        </select>
    `;
    
    // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
    const filters = document.querySelector('.masters-filters');
    if (filters) {
        filters.parentNode.insertBefore(sortContainer, filters.nextSibling);
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
        const style = document.createElement('style');
        style.textContent = `
            .masters-sort {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 10px;
                margin-bottom: 30px;
            }
            .sort-label {
                color: #6c757d;
                font-weight: 500;
            }
            .sort-select {
                padding: 8px 16px;
                border: 2px solid #e9ecef;
                border-radius: 8px;
                background: white;
                color: #495057;
                font-size: 0.9rem;
                cursor: pointer;
                transition: all 0.3s ease;
            }
            .sort-select:focus {
                outline: none;
                border-color: #667eea;
                box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            }
        `;
        document.head.appendChild(style);
    }
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
    const sortSelect = document.getElementById('sort-masters');
    if (sortSelect) {
        sortSelect.addEventListener('change', (e) => {
            sortMasters(e.target.value);
        });
    }
}

// –§—É–Ω–∫—Ü–∏—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –º–∞—Å—Ç–µ—Ä–æ–≤
function sortMasters(sortType) {
    const mastersGrid = document.querySelector('.masters-grid');
    const masterCards = Array.from(document.querySelectorAll('.master-card:not([style*="display: none"])'));
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    masterCards.forEach((card, index) => {
        card.dataset.originalOrder = index;
    });
    
    switch(sortType) {
        case 'experience-desc':
            masterCards.sort((a, b) => {
                const expA = parseInt(a.getAttribute('data-experience'));
                const expB = parseInt(b.getAttribute('data-experience'));
                return expB - expA;
            });
            break;
            
        case 'experience-asc':
            masterCards.sort((a, b) => {
                const expA = parseInt(a.getAttribute('data-experience'));
                const expB = parseInt(b.getAttribute('data-experience'));
                return expA - expB;
            });
            break;
            
        case 'rating-desc':
            masterCards.sort((a, b) => {
                const ratingA = getMasterRating(a);
                const ratingB = getMasterRating(b);
                return ratingB - ratingA;
            });
            break;
            
        case 'name':
            masterCards.sort((a, b) => {
                const nameA = a.querySelector('.master-name').textContent.toLowerCase();
                const nameB = b.querySelector('.master-name').textContent.toLowerCase();
                return nameA.localeCompare(nameB);
            });
            break;
            
        default:
            // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–∏—Å—Ö–æ–¥–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫)
            masterCards.sort((a, b) => {
                return parseInt(a.dataset.originalOrder) - parseInt(b.dataset.originalOrder);
            });
    }
    
    // –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞
    mastersGrid.innerHTML = '';
    masterCards.forEach((card, index) => {
        card.style.animationDelay = `${index * 0.1}s`;
        mastersGrid.appendChild(card);
    });
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–π—Ç–∏–Ω–≥–∞ –º–∞—Å—Ç–µ—Ä–∞
function getMasterRating(card) {
    const ratingElement = card.querySelector('.rating-value');
    if (ratingElement) {
        const ratingText = ratingElement.textContent;
        const match = ratingText.match(/(\d+\.\d+)/);
        return match ? parseFloat(match[1]) : 0;
    }
    return 0;
}

// –ü–æ–∏—Å–∫ –º–∞—Å—Ç–µ—Ä–∞ –ø–æ –∏–º–µ–Ω–∏
function initMasterSearch() {
    const searchContainer = document.createElement('div');
    searchContainer.className = 'masters-search';
    searchContainer.innerHTML = `
        <div class="search-box">
            <input type="text" id="search-master" placeholder="–ü–æ–∏—Å–∫ –º–∞—Å—Ç–µ—Ä–∞ –ø–æ –∏–º–µ–Ω–∏..." class="search-input">
            <span class="search-icon">üîç</span>
        </div>
    `;
    
    // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–∏—Å–∫ –ø–µ—Ä–µ–¥ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
    const filters = document.querySelector('.masters-filters');
    if (filters) {
        filters.parentNode.insertBefore(searchContainer, filters);
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞
        const style = document.createElement('style');
        style.textContent = `
            .masters-search {
                display: flex;
                justify-content: center;
                margin-bottom: 30px;
            }
            .search-box {
                position: relative;
                max-width: 400px;
                width: 100%;
            }
            .search-input {
                width: 100%;
                padding: 12px 45px 12px 20px;
                border: 2px solid #e9ecef;
                border-radius: 25px;
                font-size: 1rem;
                background: white;
                transition: all 0.3s ease;
            }
            .search-input:focus {
                outline: none;
                border-color: #667eea;
                box-shadow: 0 5px 15px rgba(102, 126, 234, 0.1);
            }
            .search-icon {
                position: absolute;
                right: 15px;
                top: 50%;
                transform: translateY(-50%);
                color: #6c757d;
            }
        `;
        document.head.appendChild(style);
    }
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–∏—Å–∫–∞
    const searchInput = document.getElementById('search-master');
    if (searchInput) {
        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase().trim();
            filterMastersByName(searchTerm);
        });
    }
}

// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –º–∞—Å—Ç–µ—Ä–æ–≤ –ø–æ –∏–º–µ–Ω–∏
function filterMastersByName(searchTerm) {
    const masterCards = document.querySelectorAll('.master-card');
    const noResults = document.getElementById('masters-no-results');
    
    let visibleCount = 0;
    
    masterCards.forEach(card => {
        const masterName = card.querySelector('.master-name').textContent.toLowerCase();
        const masterSpecialization = card.querySelector('.master-specialization').textContent.toLowerCase();
        
        if (masterName.includes(searchTerm) || masterSpecialization.includes(searchTerm) || searchTerm === '') {
            card.style.display = 'block';
            setTimeout(() => {
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, 100);
            visibleCount++;
        } else {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            setTimeout(() => {
                card.style.display = 'none';
            }, 300);
        }
    });
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ, –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
    showNoResultsMessage(visibleCount === 0 && searchTerm !== '');
}

// –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ "–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"
function showNoResultsMessage(show) {
    let noResults = document.getElementById('masters-no-results');
    
    if (show && !noResults) {
        noResults = document.createElement('div');
        noResults.id = 'masters-no-results';
        noResults.className = 'no-results';
        noResults.innerHTML = `
            <div class="no-results-content">
                <span class="no-results-icon">üòî</span>
                <h3>–ú–∞—Å—Ç–µ—Ä–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
                <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é</p>
            </div>
        `;
        
        const mastersGrid = document.querySelector('.masters-grid');
        mastersGrid.parentNode.insertBefore(noResults, mastersGrid.nextSibling);
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è
        const style = document.createElement('style');
        style.textContent = `
            .no-results {
                text-align: center;
                padding: 60px 20px;
                color: #6c757d;
            }
            .no-results-icon {
                font-size: 4rem;
                margin-bottom: 20px;
                display: block;
            }
            .no-results h3 {
                color: #495057;
                margin-bottom: 10px;
            }
        `;
        document.head.appendChild(style);
    } else if (!show && noResults) {
        noResults.remove();
    }
}

// –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
function initScrollAnimations() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);
    
    // –ù–∞–±–ª—é–¥–∞–µ–º –∑–∞ –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ –º–∞—Å—Ç–µ—Ä–æ–≤
    document.querySelectorAll('.master-card').forEach(card => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(30px)';
        card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(card);
    });
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ CTA –∫–Ω–æ–ø–æ–∫
function initCTAActions() {
    // –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è
    const consultationBtn = document.querySelector('.consultation-btn');
    if (consultationBtn) {
        consultationBtn.addEventListener('click', () => {
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏
            console.log('–ó–∞–ø—Ä–æ—Å –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é');
            // consultationModal.show();
        });
    }
    
    // –ü–æ–¥–±–æ—Ä –º–∞—Å—Ç–µ—Ä–∞
    const findMasterBtn = document.querySelector('.find-master-btn');
    if (findMasterBtn) {
        findMasterBtn.addEventListener('click', () => {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫
            const searchInput = document.getElementById('search-master');
            if (searchInput) {
                searchInput.focus();
            }
        });
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
function initMastersSection() {
    initMastersFilter();
    initMasterModal();
    initBookingButtons();
    initMastersSorting();
    initMasterSearch();
    initScrollAnimations();
    initCTAActions();
    
    // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ—Ä—è–¥–æ–∫ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫
    document.querySelectorAll('.master-card').forEach((card, index) => {
        card.dataset.originalOrder = index;
    });
}

// –ó–∞–ø—É—Å–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ DOM
document.addEventListener('DOMContentLoaded', initMastersSection);

// –î–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
window.bookWithMaster = bookWithMaster;
window.showMasterModal = showMasterModal;


================================================================================
–§–ê–ô–õ: static/js/sections/gallery.js
================================================================================
// –î–∞–Ω–Ω—ã–µ –≥–∞–ª–µ—Ä–µ–∏
const galleryData = {
    1: {
        title: "–ì–ª–∞–≤–Ω—ã–π –∑–∞–ª —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏",
        description: "–ü—Ä–æ—Å—Ç–æ—Ä–Ω—ã–π –∑–∞–ª —Å –º—è–≥–∫–∏–º –æ—Å–≤–µ—â–µ–Ω–∏–µ–º –∏ —É—é—Ç–Ω–æ–π –∞—Ç–º–æ—Å—Ñ–µ—Ä–æ–π, —Å–æ–∑–¥–∞–Ω–Ω–æ–π –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—è. –ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –ø—Ä–∏–≥–ª—É—à–µ–Ω–Ω—ã–π —Å–≤–µ—Ç —Å–ø–æ—Å–æ–±—Å—Ç–≤—É—é—Ç –≥–ª—É–±–æ–∫–æ–π —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏.",
        category: "interior",
        image: "interior1.jpg"
    },
    2: {
        title: "–°–µ–∞–Ω—Å –∞—Ä–æ–º–∞—Ç–µ—Ä–∞–ø–∏–∏",
        description: "–†–∞—Å—Å–ª–∞–±–ª—è—é—â–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —ç—Ñ–∏—Ä–Ω—ã—Ö –º–∞—Å–µ–ª –≤—ã—Å—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞. –ù–∞—à–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã –ø–æ–¥–±–∏—Ä–∞—é—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –∞—Ä–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞.",
        category: "procedures",
        image: "massage1.jpg"
    },
    3: {
        title: "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥",
        description: "–ù–∞—à–∏ –º–∞—Å—Ç–µ—Ä–∞ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã –∫ –∫–∞–∂–¥–æ–π –¥–µ—Ç–∞–ª–∏ –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏. –ú–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏–π –æ–ø—ã—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ—Å—Ç–∏–≥–∞—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞ –æ—Ç –ø—Ä–æ—Ü–µ–¥—É—Ä.",
        category: "masters",
        image: "master-work1.jpg"
    },
    4: {
        title: "–ó–æ–Ω–∞ –≥–∏–¥—Ä–æ–º–∞—Å—Å–∞–∂–∞",
        description: "–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –¥–∂–∞–∫—É–∑–∏ —Å –º–Ω–æ–≥–æ—Ü–≤–µ—Ç–Ω–æ–π –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π –∏ —Å–∏—Å—Ç–µ–º–æ–π –≥–∏–¥—Ä–æ–º–∞—Å—Å–∞–∂–∞. –ò–¥–µ–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è —Å–Ω—è—Ç–∏—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø–æ—Å–ª–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–Ω–æ–≥–æ –¥–Ω—è.",
        category: "spa",
        image: "spa-zone1.jpg"
    },
    5: {
        title: "–ó–æ–Ω–∞ —Ä–µ—Å–µ–ø—à–µ–Ω–∞",
        description: "–°—Ç–∏–ª—å–Ω–æ–µ –∏ —É–¥–æ–±–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è –≤—Å—Ç—Ä–µ—á–∏ –≥–æ—Å—Ç–µ–π. –î–∏–∑–∞–π–Ω –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞ —Å–æ—á–µ—Ç–∞–µ—Ç –≤ —Å–µ–±–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ–Ω–¥–µ–Ω—Ü–∏–∏ –∏ –≤–æ—Å—Ç–æ—á–Ω—ã–µ –º–æ—Ç–∏–≤—ã.",
        category: "interior",
        image: "interior2.jpg"
    },
    6: {
        title: "–í–æ—Å—Ç–æ—á–Ω—ã–µ –∞–∫—Ü–µ–Ω—Ç—ã",
        description: "–≠–ª–µ–º–µ–Ω—Ç—ã –¥–µ–∫–æ—Ä–∞ –≤ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–º –∞–∑–∏–∞—Ç—Å–∫–æ–º —Å—Ç–∏–ª–µ —Å–æ–∑–¥–∞—é—Ç –Ω–µ–ø–æ–≤—Ç–æ—Ä–∏–º—É—é –∞—Ç–º–æ—Å—Ñ–µ—Ä—É —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—è –∏ –≥–∞—Ä–º–æ–Ω–∏–∏. –ö–∞–∂–¥–∞—è –¥–µ—Ç–∞–ª—å –ø—Ä–æ–¥—É–º–∞–Ω–∞ –¥–æ –º–µ–ª–æ—á–µ–π.",
        category: "details",
        image: "details1.jpg"
    },
    7: {
        title: "–¢–∞–π—Å–∫–∏–π –º–∞—Å—Å–∞–∂",
        description: "–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ —Ä–∞—Å—Ç—è–∂–∫–∏ –∏ –∞–∫—É–ø—Ä–µ—Å—Å—É—Ä—ã, –ø—Ä–∏—à–µ–¥—à–∞—è –∏–∑ –¥—Ä–µ–≤–Ω–µ–≥–æ –¢–∞–∏–ª–∞–Ω–¥–∞. –ü–æ–º–æ–≥–∞–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π –±–∞–ª–∞–Ω—Å –∏ —É–ª—É—á—à–∏—Ç—å –≥–∏–±–∫–æ—Å—Ç—å.",
        category: "procedures",
        image: "massage2.jpg"
    },
    8: {
        title: "–§–∏–Ω—Å–∫–∞—è —Å–∞—É–Ω–∞",
        description: "–ê—É—Ç–µ–Ω—Ç–∏—á–Ω–∞—è –¥–µ—Ä–µ–≤—è–Ω–Ω–∞—è —Å–∞—É–Ω–∞ —Å –∞—Ä–æ–º–∞—Ç–∞–º–∏ —Ö–≤–æ–∏ –∏ —ç–≤–∫–∞–ª–∏–ø—Ç–∞. –ò–¥–µ–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è –¥–µ—Ç–æ–∫—Å–∞ –∏ –≥–ª—É–±–æ–∫–æ–≥–æ –æ—á–∏—â–µ–Ω–∏—è –æ—Ä–≥–∞–Ω–∏–∑–º–∞.",
        category: "spa",
        image: "spa-zone2.jpg"
    },
    9: {
        title: "–ì–æ—Ä—è—á–∏–µ –∫–∞–º–Ω–∏",
        description: "–ù–æ–≤–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—É–ª–∫–∞–Ω–∏—á–µ—Å–∫–∏—Ö –∫–∞–º–Ω–µ–π. –ì–ª—É–±–æ–∫–æ–µ –ø—Ä–æ–≥—Ä–µ–≤–∞–Ω–∏–µ –º—ã—à—Ü —Å–ø–æ—Å–æ–±—Å—Ç–≤—É–µ—Ç —Å–Ω—è—Ç–∏—é –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏—é –∫—Ä–æ–≤–æ–æ–±—Ä–∞—â–µ–Ω–∏—è.",
        category: "masters",
        image: "master-work2.jpg"
    }
};

// –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥–∞–ª–µ—Ä–µ–∏
let currentState = {
    currentFilter: 'all',
    currentImageIndex: 1,
    totalImages: Object.keys(galleryData).length,
    isLoading: false,
    visibleItems: 6 // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –≤–∏–¥–∏–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
};

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
function initGalleryFilter() {
    const filterBtns = document.querySelectorAll('.gallery-filter-btn');
    const galleryItems = document.querySelectorAll('.gallery-item');

    filterBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            filterBtns.forEach(b => b.classList.remove('active'));
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Ç–µ–∫—É—â–µ–π –∫–Ω–æ–ø–∫–µ
            btn.classList.add('active');
            
            const filter = btn.getAttribute('data-filter');
            currentState.currentFilter = filter;
            
            filterGalleryItems(filter);
        });
    });
}

// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≥–∞–ª–µ—Ä–µ–∏
function filterGalleryItems(filter) {
    const galleryItems = document.querySelectorAll('.gallery-item');
    let visibleCount = 0;
    
    galleryItems.forEach((item, index) => {
        const category = item.getAttribute('data-category');
        
        if (filter === 'all' || category === filter) {
            item.style.display = 'block';
            setTimeout(() => {
                item.style.opacity = '1';
                item.style.transform = 'translateY(0)';
            }, 100);
            visibleCount++;
            
            // –°–∫—Ä—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ—Å–ª–µ –ª–∏–º–∏—Ç–∞
            if (index >= currentState.visibleItems) {
                item.style.display = 'none';
            }
        } else {
            item.style.opacity = '0';
            item.style.transform = 'translateY(20px)';
            setTimeout(() => {
                item.style.display = 'none';
            }, 300);
        }
    });
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ "–ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ"
    updateLoadMoreButton(visibleCount);
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ "–ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ"
function updateLoadMoreButton(visibleCount) {
    const loadMoreBtn = document.getElementById('loadMore');
    const totalInFilter = document.querySelectorAll(`.gallery-item[data-category="${currentState.currentFilter}"], .gallery-item[data-category]`).length;
    
    if (visibleCount >= totalInFilter && currentState.currentFilter !== 'all') {
        loadMoreBtn.style.display = 'none';
    } else {
        loadMoreBtn.style.display = 'flex';
    }
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
function initLoadMore() {
    const loadMoreBtn = document.getElementById('loadMore');
    
    loadMoreBtn.addEventListener('click', () => {
        if (currentState.isLoading) return;
        
        currentState.isLoading = true;
        loadMoreBtn.disabled = true;
        loadMoreBtn.querySelector('.btn-text').style.display = 'none';
        loadMoreBtn.querySelector('.btn-loader').style.display = 'block';
        
        // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
        setTimeout(() => {
            currentState.visibleItems += 3;
            filterGalleryItems(currentState.currentFilter);
            
            currentState.isLoading = false;
            loadMoreBtn.disabled = false;
            loadMoreBtn.querySelector('.btn-text').style.display = 'block';
            loadMoreBtn.querySelector('.btn-loader').style.display = 'none';
        }, 1000);
    });
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
function initGalleryModal() {
    const modal = document.getElementById('galleryModal');
    const closeBtn = document.querySelector('.modal-close');
    const prevBtn = document.querySelector('.modal-prev');
    const nextBtn = document.querySelector('.modal-next');
    const galleryItems = document.querySelectorAll('.gallery-item');
    const viewBtns = document.querySelectorAll('.view-btn');
    const zoomBtns = document.querySelectorAll('.zoom-btn');

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    closeBtn.addEventListener('click', closeModal);

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –æ–∫–Ω–∞
    window.addEventListener('click', (e) => {
        if (e.target === modal) {
            closeModal();
        }
    });

    // –ù–∞–≤–∏–≥–∞—Ü–∏—è
    prevBtn.addEventListener('click', showPrevImage);
    nextBtn.addEventListener('click', showNextImage);

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º
    galleryItems.forEach(item => {
        item.addEventListener('click', (e) => {
            if (!e.target.closest('.gallery-action-btn')) {
                const index = item.getAttribute('data-index');
                showModal(parseInt(index));
            }
        });
    });

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–æ–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
    viewBtns.forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.stopPropagation();
            const item = btn.closest('.gallery-item');
            const index = item.getAttribute('data-index');
            showModal(parseInt(index));
        });
    });

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–æ–∫ —É–≤–µ–ª–∏—á–µ–Ω–∏—è
    zoomBtns.forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.stopPropagation();
            const item = btn.closest('.gallery-item');
            const index = item.getAttribute('data-index');
            showModal(parseInt(index));
        });
    });

    // –ù–∞–≤–∏–≥–∞—Ü–∏—è –∫–ª–∞–≤–∏—à–∞–º–∏
    document.addEventListener('keydown', (e) => {
        if (modal.style.display === 'block') {
            if (e.key === 'Escape') closeModal();
            if (e.key === 'ArrowLeft') showPrevImage();
            if (e.key === 'ArrowRight') showNextImage();
        }
    });
}

// –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
function showModal(index) {
    const modal = document.getElementById('galleryModal');
    const modalImage = document.getElementById('modalImage');
    const modalTitle = document.getElementById('modalTitle');
    const modalDescription = document.getElementById('modalDescription');
    const modalCategory = document.getElementById('modalCategory');
    const modalIndex = document.getElementById('modalIndex');
    const modalLoader = document.querySelector('.modal-loader');

    const imageData = galleryData[index];
    if (!imageData) return;

    currentState.currentImageIndex = index;

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑—á–∏–∫
    modalLoader.classList.add('loading');
    modalImage.style.opacity = '0';

    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ
    modalTitle.textContent = imageData.title;
    modalDescription.textContent = imageData.description;
    modalCategory.textContent = getCategoryName(imageData.category);
    modalIndex.textContent = `${index} / ${currentState.totalImages}`;

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
    const img = new Image();
    img.src = `/static/img/gallery/${imageData.image}`;
    img.onload = () => {
        modalImage.src = img.src;
        modalImage.style.opacity = '1';
        modalLoader.classList.remove('loading');
    };

    img.onerror = () => {
        modalImage.src = '/static/img/gallery/placeholder.jpg';
        modalImage.style.opacity = '1';
        modalLoader.classList.remove('loading');
    };

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
    modal.style.display = 'block';
    document.body.style.overflow = 'hidden';

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–∏–Ω–∏–∞—Ç—é—Ä—ã
    showThumbnails();
    updateThumbnails();
}

// –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
function closeModal() {
    const modal = document.getElementById('galleryModal');
    const thumbnails = document.getElementById('galleryThumbnails');
    
    modal.style.display = 'none';
    thumbnails.style.display = 'none';
    document.body.style.overflow = 'auto';
}

// –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
function showPrevImage() {
    let newIndex = currentState.currentImageIndex - 1;
    if (newIndex < 1) newIndex = currentState.totalImages;
    showModal(newIndex);
}

// –ü–æ–∫–∞–∑–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
function showNextImage() {
    let newIndex = currentState.currentImageIndex + 1;
    if (newIndex > currentState.totalImages) newIndex = 1;
    showModal(newIndex);
}

// –ü–æ–∫–∞–∑–∞—Ç—å –º–∏–Ω–∏–∞—Ç—é—Ä—ã
function showThumbnails() {
    const thumbnails = document.getElementById('galleryThumbnails');
    thumbnails.style.display = 'block';
}

// –û–±–Ω–æ–≤–∏—Ç—å –º–∏–Ω–∏–∞—Ç—é—Ä—ã
function updateThumbnails() {
    const thumbnailsContainer = document.querySelector('.thumbnails-container');
    thumbnailsContainer.innerHTML = '';

    Object.keys(galleryData).forEach(index => {
        const imageData = galleryData[index];
        const thumbnail = document.createElement('div');
        thumbnail.className = `thumbnail ${parseInt(index) === currentState.currentImageIndex ? 'active' : ''}`;
        thumbnail.setAttribute('data-index', index);
        
        thumbnail.innerHTML = `<img src="/static/img/gallery/thumbnails/${imageData.image}" alt="${imageData.title}">`;
        
        thumbnail.addEventListener('click', () => {
            showModal(parseInt(index));
        });
        
        thumbnailsContainer.appendChild(thumbnail);
    });
}

// –ü–æ–ª—É—á–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
function getCategoryName(category) {
    const categories = {
        'interior': '–ò–Ω—Ç–µ—Ä—å–µ—Ä',
        'procedures': '–ü—Ä–æ—Ü–µ–¥—É—Ä—ã',
        'masters': '–ú–∞—Å—Ç–µ—Ä–∞',
        'spa': 'SPA-–∑–æ–Ω—ã',
        'details': '–î–µ—Ç–∞–ª–∏'
    };
    return categories[category] || category;
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è CTA –¥–µ–π—Å—Ç–≤–∏–π
function initCTAActions() {
    const bookTourBtn = document.getElementById('bookTour');
    const virtualTourBtn = document.getElementById('virtualTour');

    if (bookTourBtn) {
        // –ö–Ω–æ–ø–∫–∞ —Ç–µ–ø–µ—Ä—å –≤–µ–¥–µ—Ç –Ω–∞ —Ñ–æ—Ä–º—É —á–µ—Ä–µ–∑ href="#booking", –Ω–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª
        bookTourBtn.addEventListener('click', (e) => {
            // –ï—Å–ª–∏ —ç—Ç–æ —Å—Å—ã–ª–∫–∞, –ø–æ–∑–≤–æ–ª—è–µ–º –µ–π —Ä–∞–±–æ—Ç–∞—Ç—å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º
            // –ù–æ –¥–æ–±–∞–≤–ª—è–µ–º –ø–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
            const href = bookTourBtn.getAttribute('href');
            if (href && href.startsWith('#')) {
                const targetId = href.substring(1);
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    e.preventDefault();
                    targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }
        });
    }

    if (virtualTourBtn) {
        virtualTourBtn.addEventListener('click', () => {
            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ –Ω–∞—á–∞–ª—É –≥–∞–ª–µ—Ä–µ–∏
            const gallerySection = document.getElementById('gallery');
            if (gallerySection) {
                gallerySection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
    }
}

// –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
function initScrollAnimations() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);
    
    // –ù–∞–±–ª—é–¥–∞–µ–º –∑–∞ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –≥–∞–ª–µ—Ä–µ–∏
    document.querySelectorAll('.gallery-item').forEach(item => {
        item.style.opacity = '0';
        item.style.transform = 'translateY(30px)';
        item.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(item);
    });
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ–π –≥–∞–ª–µ—Ä–µ–∏
function initGallery() {
    initGalleryFilter();
    initLoadMore();
    initGalleryModal();
    initCTAActions();
    initScrollAnimations();
    
    // –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º –ª–∏—à–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã
    filterGalleryItems('all');
}

// –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ DOM
document.addEventListener('DOMContentLoaded', initGallery);

// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö
window.showGalleryModal = showModal;
window.closeGalleryModal = closeModal;









================================================================================
–§–ê–ô–õ: static/js/utils/config.js
================================================================================
// static/js/utils/config.js - –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

// ===== GOOGLE CALENDAR CONFIGURATION =====
window.CALENDAR_CONFIG = {
    // –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
    calendarId: 'www.master.adv@gmail.com',
    timeZone: 'Europe/Moscow',
    clientId: '107142636126588244100',
    apiKey: 'AIzaSyDXFZ74WsZnr4MX5c9JCGo9Da1x1AwfktA',
    scopes: [
        'https://www.googleapis.com/auth/calendar.events',
        'https://www.googleapis.com/auth/calendar'
    ].join(' '),
    
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    discoveryDocs: ['https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest'],
    
    // –¶–≤–µ—Ç–∞ –¥–ª—è —Å–æ–±—ã—Ç–∏–π
    eventColors: {
        classic: '1',      // –õ–∞–≤–∞–Ω–¥–∞
        therapeutic: '2',  // –®–∞–ª—Ñ–µ–π  
        sports: '3',       // –í–∏–Ω–æ–≥—Ä–∞–¥
        relaxing: '4',     // –§–ª–∞–º–∏–Ω–≥–æ
        thai: '5',         // –ë–∞–Ω–∞–Ω
        'hot-stone': '11'  // –ö—Ä–∞—Å–Ω—ã–π
    },
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    defaultReminders: [
        { method: 'email', minutes: 24 * 60 },    // –ó–∞ –¥–µ–Ω—å
        { method: 'popup', minutes: 60 },         // –ó–∞ —á–∞—Å
        { method: 'popup', minutes: 15 }          // –ó–∞ 15 –º–∏–Ω—É—Ç
    ]
};

// ===== SERVICES CONFIGURATION =====
window.SERVICES = {
    classic: { 
        name: '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∞–∂', 
        duration: 60, 
        price: 2500,
        description: '–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –ª–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂ –¥–ª—è –æ–±—â–µ–≥–æ –æ–∑–¥–æ—Ä–æ–≤–ª–µ–Ω–∏—è',
        category: 'wellness'
    },
    therapeutic: { 
        name: '–õ–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂', 
        duration: 60, 
        price: 3000,
        description: '–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∞–∂ –¥–ª—è –ª–µ—á–µ–Ω–∏—è –±–æ–ª–µ–≤—ã—Ö —Å–∏–Ω–¥—Ä–æ–º–æ–≤',
        category: 'medical'
    },
    sports: { 
        name: '–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∞–∂', 
        duration: 60, 
        price: 3500,
        description: '–ú–∞—Å—Å–∞–∂ –¥–ª—è —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤ –∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ª—é–¥–µ–π',
        category: 'sports'
    },
    relaxing: { 
        name: '–†–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–π –º–∞—Å—Å–∞–∂', 
        duration: 90, 
        price: 2800,
        description: '–ù–µ–∂–Ω—ã–π –º–∞—Å—Å–∞–∂ –¥–ª—è —Å–Ω—è—Ç–∏—è —Å—Ç—Ä–µ—Å—Å–∞ –∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è',
        category: 'relax'
    },
    thai: { 
        name: '–¢–∞–π—Å–∫–∏–π –º–∞—Å—Å–∞–∂', 
        duration: 90, 
        price: 4000,
        description: '–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π —Ç–∞–π—Å–∫–∏–π –º–∞—Å—Å–∞–∂ —Å —Ä–∞—Å—Ç—è–∂–∫–∞–º–∏',
        category: 'exotic'
    },
    'hot-stone': { 
        name: '–ú–∞—Å—Å–∞–∂ –≥–æ—Ä—è—á–∏–º–∏ –∫–∞–º–Ω—è–º–∏', 
        duration: 90, 
        price: 4500,
        description: '–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∞–∂ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–∞–≥—Ä–µ—Ç—ã—Ö –∫–∞–º–Ω–µ–π',
        category: 'premium'
    }
};

// ===== MASTERS CONFIGURATION =====
window.MASTERS = {
    'anna-petrov': {
        name: '–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞',
        specialties: ['classic', 'therapeutic', 'relaxing'],
        experience: 8,
        rating: 4.9,
        workingHours: {
            monday: { start: '08:00', end: '20:00' },
            tuesday: { start: '08:00', end: '20:00' },
            wednesday: { start: '08:00', end: '20:00' },
            thursday: { start: '08:00', end: '20:00' },
            friday: { start: '08:00', end: '20:00' },
            saturday: { start: '10:00', end: '20:00' },
            sunday: null // –í—ã—Ö–æ–¥–Ω–æ–π
        }
    },
    'sergey-ivanov': {
        name: '–°–µ—Ä–≥–µ–π –ò–≤–∞–Ω–æ–≤',
        specialties: ['sports', 'therapeutic', 'classic'],
        experience: 12,
        rating: 4.8,
        workingHours: {
            monday: { start: '10:00', end: '19:00' },
            tuesday: { start: '10:00', end: '19:00' },
            wednesday: { start: '10:00', end: '19:00' },
            thursday: { start: '10:00', end: '19:00' },
            friday: { start: '10:00', end: '19:00' },
            saturday: { start: '11:00', end: '17:00' },
            sunday: { start: '11:00', end: '15:00' }
        }
    },
    'elena-kozlov': {
        name: '–ï–ª–µ–Ω–∞ –ö–æ–∑–ª–æ–≤–∞',
        specialties: ['thai', 'hot-stone', 'relaxing'],
        experience: 6,
        rating: 4.9,
        workingHours: {
            monday: { start: '11:00', end: '20:00' },
            tuesday: { start: '11:00', end: '20:00' },
            wednesday: { start: '11:00', end: '20:00' },
            thursday: { start: '11:00', end: '20:00' },
            friday: { start: '11:00', end: '20:00' },
            saturday: { start: '10:00', end: '20:00' },
            sunday: null // –í—ã—Ö–æ–¥–Ω–æ–π
        }
    }
};

// ===== FORM CONFIGURATION =====
window.FORM_CONFIG = {
    // –í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
    minBookingHour: 8,
    maxBookingHour: 20,
    maxBookingDaysAhead: 90,
    minBookingDaysAhead: 1,
    
    // –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –≤—Ä–µ–º–µ–Ω–∏ (–≤ –º–∏–Ω—É—Ç–∞—Ö)
    timeSlotInterval: 30,
    
    // –†–∞–±–æ—á–∏–µ –¥–Ω–∏ (0 = –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ, 1 = –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, ...)
    workingDays: [1, 2, 3, 4, 5, 6], // –ü–Ω-–°–±
    
    // –í—ã—Ö–æ–¥–Ω—ã–µ –¥–Ω–∏ (–º–∞—Å—Å–∏–≤ –¥–∞—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD)
    holidays: [
        '2025-01-01', '2025-01-02', '2025-01-03', '2025-01-04', '2025-01-05', '2025-01-06', '2025-01-07', '2025-01-08',
        '2025-02-23', '2025-03-08', '2025-05-01', '2025-05-09', '2025-06-12', '2025-11-04'
    ],
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è
    validation: {
        phoneRegex: /^(\+7|8)?[\s\-]?\(?\d{3}\)?[\s\-]?\d{3}[\s\-]?\d{2}[\s\-]?\d{2}$/,
        nameMinLength: 2,
        nameMaxLength: 50,
        commentsMaxLength: 500
    },
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ UI
    ui: {
        showPrices: true,
        showDuration: true,
        showMasterRating: true,
        enableTimeSlotSelection: true,
        autoUpdateSummary: true
    }
};

// ===== API ENDPOINTS =====
window.API_ENDPOINTS = {
    // –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
    bookings: '/api/bookings',
    calendar: '/api/calendar',
    services: '/api/services',
    masters: '/api/masters',
    
    // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
    availability: '/api/availability',
    timeslots: '/api/timeslots',
    validate: '/api/validate',
    
    // –ê–¥–º–∏–Ω—Å–∫–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
    admin: {
        bookings: '/admin/api/bookings',
        calendar: '/admin/api/calendar',
        settings: '/admin/api/settings'
    }
};

// ===== NOTIFICATION SETTINGS =====
window.NOTIFICATION_CONFIG = {
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    duration: {
        success: 7000,  // 7 —Å–µ–∫—É–Ω–¥
        error: 8000,    // 8 —Å–µ–∫—É–Ω–¥
        warning: 6000,  // 6 —Å–µ–∫—É–Ω–¥
        info: 5000      // 5 —Å–µ–∫—É–Ω–¥
    },
    
    // –ü–æ–∑–∏—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    position: 'top-right',
    
    // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    maxNotifications: 3,
    
    // –ê–Ω–∏–º–∞—Ü–∏–∏
    animations: {
        enter: 'slideInRight',
        exit: 'slideOutRight'
    }
};

// ===== BUSINESS SETTINGS =====
window.BUSINESS_CONFIG = {
    // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∞–ª–æ–Ω–µ
    name: '–ú–∞—Å—Å–∞–∂–Ω—ã–π —Å–∞–ª–æ–Ω "–†–µ–ª–∞–∫—Å"',
    phone: '+7 (495) 123-45-67',
    email: 'info@massage-salon.ru',
    address: '–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 123',
    
    // –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏
    social: {
        instagram: '@massage_salon_relax',
        vk: 'vk.com/massage_salon',
        telegram: '@massage_salon_bot'
    },
    
    // –†–∞–±–æ—á–∏–µ —á–∞—Å—ã —Å–∞–ª–æ–Ω–∞
    workingHours: {
        monday: '08:00-20:00',
        tuesday: '08:00-20:00',
        wednesday: '08:00-20:00',
        thursday: '08:00-20:00',
        friday: '08:00-20:00',
        saturday: '10:00-20:00',
        sunday: '11:00-20:00'
    }
};

// ===== UTILITY FUNCTIONS =====
window.CONFIG_UTILS = {
    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –ø–æ ID
    getService: (serviceId) => window.SERVICES[serviceId] || null,
    
    // –ü–æ–ª—É—á–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–∞ –ø–æ ID
    getMaster: (masterId) => window.MASTERS[masterId] || null,
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è
    isWorkingDay: (date) => {
        const dayOfWeek = new Date(date).getDay();
        return window.FORM_CONFIG.workingDays.includes(dayOfWeek);
    },
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–≥–æ –¥–Ω—è
    isHoliday: (date) => {
        const dateStr = new Date(date).toISOString().split('T')[0];
        return window.FORM_CONFIG.holidays.includes(dateStr);
    },
    
    // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤
    getAvailableTimeSlots: (date, duration = 60) => {
        const slots = [];
        const startHour = window.FORM_CONFIG.minBookingHour;
        const endHour = window.FORM_CONFIG.maxBookingHour;
        const interval = window.FORM_CONFIG.timeSlotInterval;
        
        for (let hour = startHour; hour <= endHour; hour++) {
            for (let minute = 0; minute < 60; minute += interval) {
                // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–ª–æ—Ç—ã –ø–æ—Å–ª–µ 20:00
                if (hour === endHour && minute > 0) {
                    break;
                }
                
                const slotTime = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;
                const slotEnd = new Date(`${date}T${slotTime}`);
                slotEnd.setMinutes(slotEnd.getMinutes() + duration);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–µ–∞–Ω—Å –Ω–µ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã
                if (slotEnd.getHours() <= endHour || (slotEnd.getHours() === endHour && slotEnd.getMinutes() === 0)) {
                    slots.push(slotTime);
                }
            }
        }
        
        return slots;
    },
    
    // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω—ã
    formatPrice: (price) => {
        return new Intl.NumberFormat('ru-RU', {
            style: 'currency',
            currency: 'RUB',
            minimumFractionDigits: 0
        }).format(price);
    },
    
    // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
    formatDuration: (minutes) => {
        const hours = Math.floor(minutes / 60);
        const mins = minutes % 60;
        
        if (hours > 0 && mins > 0) {
            return `${hours} —á ${mins} –º–∏–Ω`;
        } else if (hours > 0) {
            return `${hours} —á`;
        } else {
            return `${mins} –º–∏–Ω`;
        }
    }
};

// ===== DEBUGGING =====
if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
    window.DEBUG_MODE = true;
    console.log('üîß DEBUG MODE: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
    console.log('üìÖ Calendar Config:', window.CALENDAR_CONFIG);
    console.log('üíÜ‚Äç‚ôÄÔ∏è Services:', window.SERVICES);
    console.log('üë®‚Äç‚öïÔ∏è Masters:', window.MASTERS);
    console.log('‚öôÔ∏è Form Config:', window.FORM_CONFIG);
}

// –≠–∫—Å–ø–æ—Ä—Ç –¥–ª—è –º–æ–¥—É–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
if (typeof module !== 'undefined' && module.exports) {
    module.exports = {
        CALENDAR_CONFIG: window.CALENDAR_CONFIG,
        SERVICES: window.SERVICES,
        MASTERS: window.MASTERS,
        FORM_CONFIG: window.FORM_CONFIG,
        API_ENDPOINTS: window.API_ENDPOINTS,
        NOTIFICATION_CONFIG: window.NOTIFICATION_CONFIG,
        BUSINESS_CONFIG: window.BUSINESS_CONFIG,
        CONFIG_UTILS: window.CONFIG_UTILS
    };
}


================================================================================
–§–ê–ô–õ: static/js/utils/helpers.js
================================================================================
// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏









================================================================================
–§–ê–ô–õ: static/js/utils/api.js
================================================================================
/**
 * API —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Ä–≤–µ—Ä–æ–º
 * –û–±—Ä–∞–±–æ—Ç–∫–∞ AJAX –∑–∞–ø—Ä–æ—Å–æ–≤, –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º, —Ä–∞–±–æ—Ç–∞ —Å API
 */

class ApiClient {
    constructor() {
        this.baseUrl = '';
        this.csrfToken = this.getCSRFToken();
    }

    /**
     * –ü–æ–ª—É—á–µ–Ω–∏–µ CSRF —Ç–æ–∫–µ–Ω–∞ –∏–∑ –º–µ—Ç–∞-—Ç–µ–≥–∞
     */
    getCSRFToken() {
        const metaTag = document.querySelector('meta[name="csrf-token"]');
        return metaTag ? metaTag.getAttribute('content') : '';
    }

    /**
     * –ë–∞–∑–æ–≤—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
     * @param {string} url - URL –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
     * @param {Object} options - –û–ø—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–∞
     */
    async request(url, options = {}) {
        const defaultOptions = {
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': this.csrfToken
            }
        };

        const mergedOptions = { ...defaultOptions, ...options };
        
        if (mergedOptions.body && typeof mergedOptions.body === 'object') {
            mergedOptions.body = JSON.stringify(mergedOptions.body);
        }

        try {
            const response = await fetch(url, mergedOptions);
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const contentType = response.headers.get('content-type');
            if (contentType && contentType.includes('application/json')) {
                return await response.json();
            }
            
            return await response.text();
        } catch (error) {
            console.error('API request failed:', error);
            throw error;
        }
    }

    /**
     * GET –∑–∞–ø—Ä–æ—Å
     * @param {string} url - URL –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
     * @param {Object} params - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
     */
    async get(url, params = {}) {
        const queryString = new URLSearchParams(params).toString();
        const fullUrl = queryString ? `${url}?${queryString}` : url;
        
        return this.request(fullUrl, { method: 'GET' });
    }

    /**
     * POST –∑–∞–ø—Ä–æ—Å
     * @param {string} url - URL –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
     * @param {Object} data - –î–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
     */
    async post(url, data = {}) {
        return this.request(url, {
            method: 'POST',
            body: data
        });
    }

    /**
     * PUT –∑–∞–ø—Ä–æ—Å
     * @param {string} url - URL –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
     * @param {Object} data - –î–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
     */
    async put(url, data = {}) {
        return this.request(url, {
            method: 'PUT',
            body: data
        });
    }

    /**
     * DELETE –∑–∞–ø—Ä–æ—Å
     * @param {string} url - URL –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
     */
    async delete(url) {
        return this.request(url, { method: 'DELETE' });
    }
}

/**
 * –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API –º–∞—Å—Å–∞–∂–Ω–æ–≥–æ —Å–∞–ª–æ–Ω–∞
 */
class SalonAPI extends ApiClient {
    /**
     * –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏ –Ω–∞ –º–∞—Å—Å–∞–∂
     * @param {Object} bookingData - –î–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏
     */
    async createBooking(bookingData) {
        return this.post('/api/bookings', bookingData);
    }

    /**
     * –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–ø–∏—Å–µ–π
     */
    async getBookings() {
        return this.get('/api/bookings');
    }

    /**
     * –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
     * @param {Object} contactData - –î–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞
     */
    async sendContactForm(contactData) {
        return this.post('/api/contact', contactData);
    }

    /**
     * –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤
     * @param {string} date - –î–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD
     * @param {number} masterId - ID –º–∞—Å—Ç–µ—Ä–∞
     */
    async getAvailableSlots(date, masterId) {
        return this.get('/api/available-slots', { date, master_id: masterId });
    }
}

// –°–æ–∑–¥–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä API –∫–ª–∏–µ–Ω—Ç–∞
window.salonAPI = new SalonAPI();

/**
 * –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–æ—Ä–º–∞–º–∏
 */
class FormHandler {
    /**
     * –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –∑–∞–ø–∏—Å–∏
     * @param {HTMLFormElement} form - –≠–ª–µ–º–µ–Ω—Ç —Ñ–æ—Ä–º—ã
     */
    static async handleBookingForm(form) {
        const formData = new FormData(form);
        const bookingData = Object.fromEntries(formData.entries());
        
        try {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
            const submitBtn = form.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = '–û—Ç–ø—Ä–∞–≤–∫–∞...';
            submitBtn.disabled = true;

            const result = await window.salonAPI.createBooking(bookingData);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—à–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            this.showMessage('–ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.', 'success');
            
            // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
            form.reset();
            
        } catch (error) {
            console.error('Booking error:', error);
            this.showMessage('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.', 'error');
        } finally {
            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
            submitBtn.textContent = originalText;
            submitBtn.disabled = false;
        }
    }

    /**
     * –ü–æ–∫–∞–∑ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
     * @param {string} message - –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
     * @param {string} type - –¢–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è (success, error, info)
     */
    static showMessage(message, type = 'info') {
        // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
        const messageEl = document.createElement('div');
        messageEl.className = `flash-message flash-${type}`;
        messageEl.textContent = message;
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏
        messageEl.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            z-index: 1000;
            max-width: 400px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        `;
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–≤–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞
        if (type === 'success') {
            messageEl.style.backgroundColor = '#28a745';
        } else if (type === 'error') {
            messageEl.style.backgroundColor = '#dc3545';
        } else {
            messageEl.style.backgroundColor = '#17a2b8';
        }
        
        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
        document.body.appendChild(messageEl);
        
        // –£–¥–∞–ª—è–µ–º —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
        setTimeout(() => {
            if (messageEl.parentNode) {
                messageEl.parentNode.removeChild(messageEl);
            }
        }, 5000);
    }
}

// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª—è—Ö
window.FormHandler = FormHandler;





================================================================================
–§–ê–ô–õ: scripts/db_manager.py
================================================================================
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
üöÄ –£–õ–¨–¢–†–ê-–º–µ–Ω–µ–¥–∂–µ—Ä —É—Å–ª—É–≥ –∏ –º–∞—Å—Ç–µ—Ä–æ–≤ –¥–ª—è —Å–∞–ª–æ–Ω–∞ –º–∞—Å—Å–∞–∂–∞
–£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é –∏ –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é
"""

import os
import sys
import sqlite3
import argparse
import json
import csv
from pathlib import Path
from datetime import datetime, timedelta
from typing import List, Dict, Any, Optional
import re

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏
CURRENT_DIR = Path(__file__).resolve().parent
PROJECT_ROOT = CURRENT_DIR.parent
MAIN_DB_PATH = PROJECT_ROOT / 'instance' / 'massage_salon.db'

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –º–æ–¥–µ–ª–µ–π
sys.path.insert(0, str(PROJECT_ROOT))

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –º–æ–¥–µ–ª–∏ SQLAlchemy
try:
    from app import create_app
    from models import db, Service, Booking, Client, Review, Master
    SQLALCHEMY_AVAILABLE = True
except ImportError as e:
    print(f"‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: SQLAlchemy –º–æ–¥–µ–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã: {e}")
    print("   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ sqlite3")
    SQLALCHEMY_AVAILABLE = False
    db = None
    Service = None
    Booking = None
    Client = None
    Review = None
    Master = None

# –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
MAX_NAME_LENGTH = 100
MAX_PHONE_LENGTH = 20
MAX_DESCRIPTION_LENGTH = 500
MAX_SPECIALIZATION_LENGTH = 200

class ValidationError(Exception):
    """–ö–∞—Å—Ç–æ–º–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏"""
    pass

class DatabaseManager:
    """–£–ª—É—á—à–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö"""
    
    def __init__(self, db_path=MAIN_DB_PATH):
        self.db_path = db_path
        self._ensure_database()
    
    def _migrate_database(self):
        """–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏"""
        try:
            conn = self._get_connection()
            cursor = conn.cursor()
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã bookings
            cursor.execute("PRAGMA table_info(bookings)")
            columns = [col[1] for col in cursor.fetchall()]
            
            required_columns = ['client_phone', 'service_name', 'duration', 'price', 'status']
            missing_columns = [col for col in required_columns if col not in columns]
            
            if missing_columns:
                print(f"üîÑ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î. –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–ª–æ–Ω–∫–∏: {missing_columns}")
                
                # –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏
                if 'client_phone' not in columns:
                    cursor.execute("ALTER TABLE bookings ADD COLUMN client_phone TEXT")
                
                if 'service_name' not in columns:
                    cursor.execute("ALTER TABLE bookings ADD COLUMN service_name TEXT")
                
                if 'duration' not in columns:
                    cursor.execute("ALTER TABLE bookings ADD COLUMN duration INTEGER DEFAULT 60")
                
                if 'price' not in columns:
                    cursor.execute("ALTER TABLE bookings ADD COLUMN price INTEGER DEFAULT 0")
                
                if 'status' not in columns:
                    cursor.execute("ALTER TABLE bookings ADD COLUMN status TEXT DEFAULT 'pending'")
                
                # –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏
                cursor.execute("UPDATE bookings SET client_phone = '+79990000000' WHERE client_phone IS NULL")
                cursor.execute("UPDATE bookings SET duration = 60 WHERE duration IS NULL")
                cursor.execute("UPDATE bookings SET price = 1000 WHERE price IS NULL")
                cursor.execute("UPDATE bookings SET status = 'confirmed' WHERE status IS NULL")
                
                conn.commit()
                print("‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∞!")
            
            # –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã services –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
            cursor.execute("PRAGMA table_info(services)")
            service_columns = [col[1] for col in cursor.fetchall()]
            
            # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –ø–æ–ª—è –¥–ª—è –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã Service
            if 'category' not in service_columns:
                try:
                    cursor.execute("ALTER TABLE services ADD COLUMN category TEXT DEFAULT 'massage'")
                    print("‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ category –≤ —Ç–∞–±–ª–∏—Ü—É services")
                except sqlite3.OperationalError:
                    pass  # –ö–æ–ª–æ–Ω–∫–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
            
            if 'base_duration' not in service_columns:
                try:
                    cursor.execute("ALTER TABLE services ADD COLUMN base_duration INTEGER")
                    # –ö–æ–ø–∏—Ä—É–µ–º duration_minutes –≤ base_duration
                    cursor.execute("UPDATE services SET base_duration = duration_minutes WHERE base_duration IS NULL")
                    print("‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ base_duration –≤ —Ç–∞–±–ª–∏—Ü—É services")
                except sqlite3.OperationalError:
                    pass
            
            if 'duration_prices' not in service_columns:
                try:
                    cursor.execute("ALTER TABLE services ADD COLUMN duration_prices TEXT DEFAULT '{}'")
                    # –°–æ–∑–¥–∞–µ–º JSON –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö price –∏ duration_minutes
                    cursor.execute("""
                        UPDATE services 
                        SET duration_prices = json_object(
                            CAST(duration_minutes AS TEXT), price
                        )
                        WHERE duration_prices = '{}' OR duration_prices IS NULL
                    """)
                    print("‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ duration_prices –≤ —Ç–∞–±–ª–∏—Ü—É services")
                except sqlite3.OperationalError:
                    pass
            
            # –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã masters –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π
            cursor.execute("PRAGMA table_info(masters)")
            master_columns = [col[1] for col in cursor.fetchall()]
            
            if 'position' not in master_columns:
                try:
                    cursor.execute("ALTER TABLE masters ADD COLUMN position TEXT DEFAULT ''")
                    print("‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ position –≤ —Ç–∞–±–ª–∏—Ü—É masters")
                except sqlite3.OperationalError:
                    pass
            
            if 'experience' not in master_columns:
                try:
                    cursor.execute("ALTER TABLE masters ADD COLUMN experience TEXT DEFAULT ''")
                    print("‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ experience –≤ —Ç–∞–±–ª–∏—Ü—É masters")
                except sqlite3.OperationalError:
                    pass
            
            if 'photo' not in master_columns:
                try:
                    cursor.execute("ALTER TABLE masters ADD COLUMN photo TEXT")
                    print("‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ photo –≤ —Ç–∞–±–ª–∏—Ü—É masters")
                except sqlite3.OperationalError:
                    pass
            
            # –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É clients –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
            cursor.execute('''
                CREATE TABLE IF NOT EXISTS clients (
                    id INTEGER PRIMARY KEY,
                    name TEXT NOT NULL,
                    phone TEXT NOT NULL,
                    telegram_chat_id TEXT,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                )
            ''')
            
            # –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É reviews –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
            cursor.execute('''
                CREATE TABLE IF NOT EXISTS reviews (
                    id INTEGER PRIMARY KEY,
                    client_name TEXT NOT NULL,
                    client_photo TEXT,
                    rating INTEGER NOT NULL,
                    text TEXT NOT NULL,
                    master_id INTEGER,
                    service_id TEXT,
                    is_approved BOOLEAN DEFAULT 0,
                    is_featured BOOLEAN DEFAULT 0,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                )
            ''')
            
            conn.commit()
            conn.close()
            
        except Exception as e:
            print(f"‚ùå –û—à–∏–±–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î: {e}")
            import traceback
            traceback.print_exc()
    
    def _ensure_database(self):
        """–ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Ç–∞–±–ª–∏—Ü—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç"""
        try:
            self.db_path.parent.mkdir(exist_ok=True)
            
            conn = sqlite3.connect(self.db_path)
            cursor = conn.cursor()
            
            # –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É —É—Å–ª—É–≥ –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
            cursor.execute('''
                CREATE TABLE IF NOT EXISTS services (
                    id INTEGER PRIMARY KEY,
                    name TEXT NOT NULL,
                    price INTEGER NOT NULL,
                    duration_minutes INTEGER NOT NULL,
                    description TEXT DEFAULT '',
                    is_active BOOLEAN DEFAULT 1
                )
            ''')
            
            # –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É –º–∞—Å—Ç–µ—Ä–æ–≤ –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
            cursor.execute('''
                CREATE TABLE IF NOT EXISTS masters (
                    id INTEGER PRIMARY KEY,
                    name TEXT NOT NULL,
                    specialization TEXT DEFAULT '',
                    is_active BOOLEAN DEFAULT 1
                )
            ''')
            
            # –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É –∑–∞–ø–∏—Å–µ–π –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç (–±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)
            cursor.execute('''
                CREATE TABLE IF NOT EXISTS bookings (
                    id INTEGER PRIMARY KEY,
                    client_name TEXT NOT NULL,
                    client_phone TEXT,
                    service_id INTEGER,
                    service_name TEXT,
                    booking_date TEXT NOT NULL,
                    booking_time TEXT NOT NULL,
                    duration INTEGER DEFAULT 60,
                    price INTEGER DEFAULT 0,
                    status TEXT DEFAULT 'pending',
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                )
            ''')
            
            conn.commit()
            conn.close()
            print(f"‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ç–æ–≤–∞: {self.db_path}")
            
            # –í—ã–ø–æ–ª–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏—é –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
            self._migrate_database()
            
        except Exception as e:
            print(f"‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ë–î: {e}")
            sys.exit(1)
    
    def _get_connection(self):
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫"""
        try:
            conn = sqlite3.connect(self.db_path)
            conn.row_factory = sqlite3.Row  # –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–ª–æ–Ω–∫–∞–º –ø–æ –∏–º–µ–Ω–∏
            return conn
        except sqlite3.Error as e:
            print(f"‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: {e}")
            raise

class DataValidator:
    """–ö–ª–∞—Å—Å –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö"""
    
    @staticmethod
    def validate_name(name: str, field_name: str = "–ò–º—è") -> bool:
        """–í–∞–ª–∏–¥–∞—Ü–∏—è –∏–º–µ–Ω–∏"""
        if not name or len(name.strip()) < 2:
            raise ValidationError(f"{field_name} –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞")
        if len(name) > MAX_NAME_LENGTH:
            raise ValidationError(f"{field_name} —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ (–º–∞–∫—Å. {MAX_NAME_LENGTH} —Å–∏–º–≤–æ–ª–æ–≤)")
        return True
    
    @staticmethod
    def validate_phone(phone: str) -> bool:
        """–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞"""
        if not phone:
            raise ValidationError("–¢–µ–ª–µ—Ñ–æ–Ω –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
        
        # –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –Ω–æ–º–µ—Ä–æ–≤
        clean_phone = re.sub(r'[\s\-\(\)\+]', '', phone)
        if not re.match(r'^(\+7|7|8)?\d{10}$', clean_phone):
            raise ValidationError("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ç–µ–ª–µ—Ñ–æ–Ω–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ +7XXX... –∏–ª–∏ 8XXX...")
        
        return True
    
    @staticmethod
    def validate_email(email: str) -> bool:
        """–í–∞–ª–∏–¥–∞—Ü–∏—è email"""
        if email and not re.match(r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$', email):
            raise ValidationError("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç email")
        return True
    
    @staticmethod
    def validate_price(price: int) -> bool:
        """–í–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–Ω—ã"""
        if price < 0:
            raise ValidationError("–¶–µ–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π")
        if price > 1000000:  # 1 –º–∏–ª–ª–∏–æ–Ω
            raise ValidationError("–¶–µ–Ω–∞ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∞—è")
        return True
    
    @staticmethod
    def validate_duration(duration: int) -> bool:
        """–í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏"""
        if duration <= 0:
            raise ValidationError("–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π")
        if duration > 480:  # 8 —á–∞—Å–æ–≤
            raise ValidationError("–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∞—è")
        return True
    
    @staticmethod
    def validate_date(date_string: str) -> bool:
        """–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç—ã"""
        try:
            date = datetime.strptime(date_string, '%Y-%m-%d').date()
            if date < datetime.now().date():
                raise ValidationError("–î–∞—Ç–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ø—Ä–æ—à–ª–æ–º")
            return True
        except ValueError:
            raise ValidationError("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ì–ì–ì–ì-–ú–ú-–î–î")
    
    @staticmethod
    def validate_time(time_string: str) -> bool:
        """–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏"""
        try:
            datetime.strptime(time_string, '%H:%M')
            return True
        except ValueError:
            raise ValidationError("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ß–ß:–ú–ú")

# –°–æ–∑–¥–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã
db_manager = DatabaseManager()
validator = DataValidator()

def safe_parse_json(json_str: str) -> Dict[str, Any]:
    """–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ JSON —Å—Ç—Ä–æ–∫–∏"""
    try:
        return json.loads(json_str) if json_str else {}
    except (json.JSONDecodeError, TypeError) as e:
        print(f"‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON: {e}")
        return {}

def format_phone(phone: str) -> str:
    """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç"""
    clean_phone = re.sub(r'[\s\-\(\)\+]', '', phone)
    if clean_phone.startswith('8'):
        clean_phone = '7' + clean_phone[1:]
    elif clean_phone.startswith('9') and len(clean_phone) == 10:
        clean_phone = '7' + clean_phone
    return f"+7{clean_phone[1:]}"

def get_next_available_time(booking_date: str, duration: int = 60) -> List[str]:
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω –¥–ª—è –∑–∞–ø–∏—Å–∏"""
    conn = db_manager._get_connection()
    cursor = conn.cursor()
    
    try:
        # –ü–æ–ª—É—á–∞–µ–º –∑–∞–Ω—è—Ç—ã–µ –≤—Ä–µ–º–µ–Ω–∞
        cursor.execute('''
            SELECT booking_time, duration FROM bookings 
            WHERE booking_date = ? AND status IN ('pending', 'confirmed')
            ORDER BY booking_time
        ''', (booking_date,))
        
        busy_slots = cursor.fetchall()
        
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∞ (—Å 8:00 –¥–æ 20:00)
        start_time = datetime.strptime('08:00', '%H:%M')
        end_time = datetime.strptime('20:00', '%H:%M')
        time_slots = []
        
        current_time = start_time
        while current_time + timedelta(minutes=duration) <= end_time:
            time_slots.append(current_time.strftime('%H:%M'))
            current_time += timedelta(minutes=30)  # –°–ª–æ—Ç—ã –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
        
        # –§–∏–ª—å—Ç—Ä—É–µ–º –∑–∞–Ω—è—Ç—ã–µ –≤—Ä–µ–º–µ–Ω–∞
        for busy_time, busy_duration in busy_slots:
            busy_start = datetime.strptime(busy_time, '%H:%M')
            busy_end = busy_start + timedelta(minutes=busy_duration)
            
            time_slots = [
                slot for slot in time_slots 
                if not is_time_overlap(
                    datetime.strptime(slot, '%H:%M'),
                    duration,
                    busy_start,
                    busy_duration
                )
            ]
        
        return time_slots[:10]  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–µ—Ä–≤—ã–µ 10 –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤
        
    finally:
        conn.close()

def is_time_overlap(start1: datetime, duration1: int, start2: datetime, duration2: int) -> bool:
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤"""
    end1 = start1 + timedelta(minutes=duration1)
    end2 = start2 + timedelta(minutes=duration2)
    return start1 < end2 and start2 < end1

def list_services(args):
    """–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —É—Å–ª—É–≥–∏ —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º"""
    conn = db_manager._get_connection()
    cursor = conn.cursor()
    
    try:
        if args.all:
            cursor.execute("SELECT * FROM services ORDER BY id")
        else:
            cursor.execute("SELECT * FROM services WHERE is_active = 1 ORDER BY id")
        
        services = cursor.fetchall()
        
        if not services:
            print("üì≠ –£—Å–ª—É–≥ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")
            return
        
        print(f"üìã –£–°–õ–£–ì–ò ({len(services)}):")
        print("=" * 80)
        
        for service in services:
            # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º Row –≤ —Å–ª–æ–≤–∞—Ä—å –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
            service_dict = dict(service)
            
            status = "üü¢" if service_dict.get('is_active', 1) else "üî¥"
            print(f"{status} ID: {service_dict['id']}")
            print(f"   üìõ –ù–∞–∑–≤–∞–Ω–∏–µ: {service_dict['name']}")
            
            # –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å duration_prices
            duration_prices_val = service_dict.get('duration_prices')
            if duration_prices_val:
                try:
                    duration_prices = json.loads(duration_prices_val) if isinstance(duration_prices_val, str) else duration_prices_val
                    if duration_prices and isinstance(duration_prices, dict) and duration_prices:
                        print(f"   üí∞ –¶–µ–Ω—ã:")
                        for duration, price in sorted(duration_prices.items(), key=lambda x: int(x[0])):
                            print(f"      - {duration} –º–∏–Ω: {price} ‚ÇΩ")
                        base_duration = service_dict.get('base_duration') or service_dict.get('duration_minutes', 60)
                        print(f"   ‚è±Ô∏è –ë–∞–∑–æ–≤–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {base_duration} –º–∏–Ω")
                    else:
                        # –°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
                        price = service_dict.get('price', 0)
                        duration = service_dict.get('duration_minutes', 60)
                        print(f"   üí∞ –¶–µ–Ω–∞: {price} ‚ÇΩ")
                        print(f"   ‚è±Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {duration} –º–∏–Ω")
                except (json.JSONDecodeError, TypeError, AttributeError):
                    # –°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
                    price = service_dict.get('price', 0)
                    duration = service_dict.get('duration_minutes', 60)
                    print(f"   üí∞ –¶–µ–Ω–∞: {price} ‚ÇΩ")
                    print(f"   ‚è±Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {duration} –º–∏–Ω")
            else:
                # –°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
                price = service_dict.get('price', 0)
                duration = service_dict.get('duration_minutes', 60)
                print(f"   üí∞ –¶–µ–Ω–∞: {price} ‚ÇΩ")
                print(f"   ‚è±Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {duration} –º–∏–Ω")
            
            category = service_dict.get('category')
            if category:
                print(f"   üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {category}")
            
            description = service_dict.get('description')
            if description:
                desc = description[:100] + '...' if len(description) > 100 else description
                print(f"   üìù –û–ø–∏—Å–∞–Ω–∏–µ: {desc}")
            print("-" * 80)
            
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —É—Å–ª—É–≥: {e}")
        import traceback
        traceback.print_exc()
    finally:
        conn.close()

def add_service_flexible(args):
    """–î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É —Å —Ä–∞–∑–Ω—ã–º–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—è–º–∏ –∏ —Ü–µ–Ω–∞–º–∏"""
    try:
        # –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        validator.validate_name(args.name, "–ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏")
        
        # –ü–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –∏ —Ü–µ–Ω
        durations = [int(d.strip()) for d in args.durations.split(',')]
        prices = [int(p.strip()) for p in args.prices.split(',')]
        
        if len(durations) != len(prices):
            raise ValidationError("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –∏ —Ü–µ–Ω –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å")
        
        for duration in durations:
            validator.validate_duration(duration)
        
        for price in prices:
            validator.validate_price(price)
        
        # –°–æ–∑–¥–∞–µ–º JSON —Å —Ü–µ–Ω–∞–º–∏
        duration_prices = {str(d): p for d, p in zip(durations, prices)}
        base_duration = durations[0]
        base_price = prices[0]
        
        conn = db_manager._get_connection()
        cursor = conn.cursor()
        
        try:
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ—Ç –ª–∏ —É—Å–ª—É–≥–∏ —Å —Ç–∞–∫–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º
            cursor.execute("SELECT id FROM services WHERE name = ?", (args.name,))
            if cursor.fetchone():
                raise ValidationError(f"–£—Å–ª—É–≥–∞ '{args.name}' —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç")
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–ª–µ–¥—É—é—â–∏–π ID
            cursor.execute("SELECT MAX(id) FROM services")
            max_id = cursor.fetchone()[0] or 0
            new_id = max_id + 1
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π
            cursor.execute("PRAGMA table_info(services)")
            columns = [col[1] for col in cursor.fetchall()]
            
            # –î–æ–±–∞–≤–ª—è–µ–º —É—Å–ª—É–≥—É —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
            if 'duration_prices' in columns and 'base_duration' in columns:
                # –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–±–µ–∑ duration_minutes)
                category = getattr(args, 'category', 'massage')
                cursor.execute('''
                    INSERT INTO services (id, name, price, base_duration, 
                                        duration_prices, category, description, is_active)
                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                ''', (new_id, args.name, base_price, base_duration, 
                      json.dumps(duration_prices), category, args.description, 0 if args.inactive else 1))
            elif 'base_duration' in columns:
                # –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å base_duration, –Ω–æ –±–µ–∑ duration_prices
                category = getattr(args, 'category', 'massage') if 'category' in columns else 'massage'
                if 'category' in columns:
                    cursor.execute('''
                        INSERT INTO services (id, name, price, base_duration, category, description, is_active)
                        VALUES (?, ?, ?, ?, ?, ?, ?)
                    ''', (new_id, args.name, base_price, base_duration, category, args.description, 0 if args.inactive else 1))
                else:
                    cursor.execute('''
                        INSERT INTO services (id, name, price, base_duration, description, is_active)
                        VALUES (?, ?, ?, ?, ?, ?)
                    ''', (new_id, args.name, base_price, base_duration, args.description, 0 if args.inactive else 1))
            elif 'duration_minutes' in columns:
                # –°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å duration_minutes
                cursor.execute('''
                    INSERT INTO services (id, name, price, duration_minutes, description, is_active)
                    VALUES (?, ?, ?, ?, ?, ?)
                ''', (new_id, args.name, base_price, base_duration, args.description, 0 if args.inactive else 1))
            else:
                raise ValidationError("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã services")
            
            conn.commit()
            
            print(f"‚úÖ –£–°–õ–£–ì–ê –î–û–ë–ê–í–õ–ï–ù–ê (–≥–∏–±–∫–∏–µ —Ü–µ–Ω—ã)!")
            print(f"üÜî ID: {new_id}")
            print(f"üìõ –ù–∞–∑–≤–∞–Ω–∏–µ: {args.name}")
            print(f"‚è±Ô∏è –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {base_duration} –º–∏–Ω")
            print("üí∞ –¶–µ–Ω—ã:")
            for duration, price in sorted(duration_prices.items(), key=lambda x: int(x[0])):
                print(f"   - {duration} –º–∏–Ω: {price} ‚ÇΩ")
                
        except sqlite3.IntegrityError as e:
            raise ValidationError(f"–û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: {e}")
        finally:
            conn.close()
            
    except (ValidationError, ValueError) as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")

def update_service_prices(args):
    """–û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π"""
    try:
        validator.validate_duration(args.base_duration)
        validator.validate_price(args.base_price)
        
        # –ü–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –∏ —Ü–µ–Ω
        durations = [int(d.strip()) for d in args.durations.split(',')]
        prices = [int(p.strip()) for p in args.prices.split(',')]
        
        if len(durations) != len(prices):
            raise ValidationError("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –∏ —Ü–µ–Ω –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å")
        
        for duration in durations:
            validator.validate_duration(duration)
        
        for price in prices:
            validator.validate_price(price)
        
        conn = db_manager._get_connection()
        cursor = conn.cursor()
        
        try:
            # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é —É—Å–ª—É–≥—É
            cursor.execute("SELECT * FROM services WHERE id = ?", (args.id,))
            result = cursor.fetchone()
            
            if not result:
                raise ValidationError(f"–£—Å–ª—É–≥–∞ —Å ID {args.id} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π
            cursor.execute("PRAGMA table_info(services)")
            columns = [col[1] for col in cursor.fetchall()]
            
            # –°–æ–∑–¥–∞–µ–º JSON —Å —Ü–µ–Ω–∞–º–∏
            duration_prices = {str(d): p for d, p in zip(durations, prices)}
            
            # –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—ã
            if 'duration_prices' in columns and 'base_duration' in columns:
                # –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–±–µ–∑ duration_minutes)
                cursor.execute('''
                    UPDATE services 
                    SET price = ?, base_duration = ?, duration_prices = ?
                    WHERE id = ?
                ''', (args.base_price, args.base_duration, 
                      json.dumps(duration_prices), args.id))
            elif 'base_duration' in columns:
                # –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å base_duration, –Ω–æ –±–µ–∑ duration_prices
                cursor.execute('''
                    UPDATE services 
                    SET price = ?, base_duration = ?
                    WHERE id = ?
                ''', (args.base_price, args.base_duration, args.id))
            elif 'duration_minutes' in columns:
                # –°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å duration_minutes
                cursor.execute('''
                    UPDATE services 
                    SET price = ?, duration_minutes = ?
                    WHERE id = ?
                ''', (args.base_price, args.base_duration, args.id))
            else:
                raise ValidationError("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã services")
            
            conn.commit()
            
            print(f"‚úÖ –¶–µ–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è —É—Å–ª—É–≥–∏ ID {args.id}:")
            print(f"   - –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞: {args.base_price} ‚ÇΩ")
            print(f"   - –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {args.base_duration} –º–∏–Ω")
            print("üí∞ –í—Å–µ —Ü–µ–Ω—ã:")
            for duration, price in sorted(duration_prices.items(), key=lambda x: int(x[0])):
                print(f"   - {duration} –º–∏–Ω: {price} ‚ÇΩ")
                
        finally:
            conn.close()
            
    except (ValidationError, ValueError) as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")

def add_service(args):
    """–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —É—Å–ª—É–≥—É (—É–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)"""
    try:
        validator.validate_name(args.name, "–ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏")
        validator.validate_price(args.price)
        validator.validate_duration(args.duration)
        
        conn = db_manager._get_connection()
        cursor = conn.cursor()
        
        try:
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ—Ç –ª–∏ —É—Å–ª—É–≥–∏ —Å —Ç–∞–∫–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º
            cursor.execute("SELECT id FROM services WHERE name = ?", (args.name,))
            if cursor.fetchone():
                raise ValidationError(f"–£—Å–ª—É–≥–∞ '{args.name}' —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç")
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–ª–µ–¥—É—é—â–∏–π ID
            cursor.execute("SELECT MAX(id) FROM services")
            max_id = cursor.fetchone()[0] or 0
            new_id = max_id + 1
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã
            cursor.execute("PRAGMA table_info(services)")
            columns = [col[1] for col in cursor.fetchall()]
            
            # –î–æ–±–∞–≤–ª—è–µ–º —É—Å–ª—É–≥—É —Å —É—á–µ—Ç–æ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü—ã
            if 'base_duration' in columns:
                # –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å base_duration
                category = getattr(args, 'category', 'massage') if 'category' in columns else None
                duration_prices = json.dumps({str(args.duration): args.price}) if 'duration_prices' in columns else None
                
                if 'duration_prices' in columns and 'category' in columns:
                    cursor.execute('''
                        INSERT INTO services (id, name, price, base_duration, duration_prices, category, description, is_active)
                        VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                    ''', (new_id, args.name, args.price, args.duration, duration_prices, category, args.description, 0 if args.inactive else 1))
                elif 'category' in columns:
                    cursor.execute('''
                        INSERT INTO services (id, name, price, base_duration, category, description, is_active)
                        VALUES (?, ?, ?, ?, ?, ?, ?)
                    ''', (new_id, args.name, args.price, args.duration, category, args.description, 0 if args.inactive else 1))
                else:
                    cursor.execute('''
                        INSERT INTO services (id, name, price, base_duration, description, is_active)
                        VALUES (?, ?, ?, ?, ?, ?)
                    ''', (new_id, args.name, args.price, args.duration, args.description, 0 if args.inactive else 1))
            elif 'duration_minutes' in columns:
                # –°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å duration_minutes
                cursor.execute('''
                    INSERT INTO services (id, name, price, duration_minutes, description, is_active)
                    VALUES (?, ?, ?, ?, ?, ?)
                ''', (new_id, args.name, args.price, args.duration, args.description, 0 if args.inactive else 1))
            else:
                raise ValidationError("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã services")
            
            conn.commit()
            
            print(f"‚úÖ –£–°–õ–£–ì–ê –î–û–ë–ê–í–õ–ï–ù–ê!")
            print(f"üÜî ID: {new_id}")
            print(f"üìõ –ù–∞–∑–≤–∞–Ω–∏–µ: {args.name}")
            print(f"üí∞ –¶–µ–Ω–∞: {args.price} ‚ÇΩ")
            print(f"‚è±Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {args.duration} –º–∏–Ω")
            if args.description:
                print(f"üìù –û–ø–∏—Å–∞–Ω–∏–µ: {args.description}")
                
        except sqlite3.IntegrityError as e:
            raise ValidationError(f"–û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: {e}")
        finally:
            conn.close()
            
    except ValidationError as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")

def export_services_to_csv(args):
    """–≠–∫—Å–ø–æ—Ä—Ç —É—Å–ª—É–≥ –≤ CSV —Ñ–∞–π–ª"""
    conn = db_manager._get_connection()
    cursor = conn.cursor()
    
    try:
        cursor.execute('''
            SELECT id, name, price, duration_minutes, description, is_active
            FROM services 
            ORDER BY id
        ''')
        
        services = cursor.fetchall()
        
        if not services:
            print("üì≠ –ù–µ—Ç —É—Å–ª—É–≥ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞")
            return
        
        filename = f"services_export_{datetime.now().strftime('%Y%m%d_%H%M%S')}.csv"
        
        with open(filename, 'w', newline='', encoding='utf-8') as csvfile:
            fieldnames = ['ID', '–ù–∞–∑–≤–∞–Ω–∏–µ', '–¶–µ–Ω–∞', '–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', '–û–ø–∏—Å–∞–Ω–∏–µ', '–°—Ç–∞—Ç—É—Å']
            writer = csv.DictWriter(csvfile, fieldnames=fieldnames)
            
            writer.writeheader()
            for service in services:
                writer.writerow({
                    'ID': service['id'],
                    '–ù–∞–∑–≤–∞–Ω–∏–µ': service['name'],
                    '–¶–µ–Ω–∞': service['price'],
                    '–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å': service['duration_minutes'],
                    '–û–ø–∏—Å–∞–Ω–∏–µ': service['description'],
                    '–°—Ç–∞—Ç—É—Å': '–ê–∫—Ç–∏–≤–Ω–∞' if service['is_active'] else '–ù–µ–∞–∫—Ç–∏–≤–Ω–∞'
                })
        
        print(f"‚úÖ –£—Å–ª—É–≥–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ —Ñ–∞–π–ª: {filename}")
        print(f"üìä –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –∑–∞–ø–∏—Å–µ–π: {len(services)}")
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ: {e}")
    finally:
        conn.close()

def get_service_stats(args):
    """–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —É—Å–ª—É–≥–∞–º"""
    conn = db_manager._get_connection()
    cursor = conn.cursor()
    
    try:
        # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º —É—Å–ª—É–≥
        cursor.execute('''
            SELECT 
                s.name as service_name,
                COUNT(b.id) as booking_count,
                SUM(b.price) as total_revenue,
                AVG(b.price) as avg_price
            FROM services s
            LEFT JOIN bookings b ON s.id = b.service_id AND b.status IN ('confirmed', 'completed')
            GROUP BY s.id
            ORDER BY total_revenue DESC
        ''')
        
        stats = cursor.fetchall()
        
        print("üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –£–°–õ–£–ì:")
        print("=" * 70)
        
        total_revenue = 0
        total_bookings = 0
        
        for stat in stats:
            service_name = stat['service_name']
            booking_count = stat['booking_count'] or 0
            revenue = stat['total_revenue'] or 0
            avg_price = stat['avg_price'] or 0
            
            total_revenue += revenue
            total_bookings += booking_count
            
            print(f"üìõ {service_name}")
            print(f"   üìÖ –ó–∞–ø–∏—Å–µ–π: {booking_count}")
            print(f"   üí∞ –û–±—â–∏–π –¥–æ—Ö–æ–¥: {revenue} ‚ÇΩ")
            print(f"   üìà –°—Ä–µ–¥–Ω–∏–π —á–µ–∫: {avg_price:.0f} ‚ÇΩ")
            print("-" * 50)
        
        print(f"üéØ –û–ë–©–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê:")
        print(f"   üìä –í—Å–µ–≥–æ —É—Å–ª—É–≥: {len(stats)}")
        print(f"   üìÖ –í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π: {total_bookings}")
        print(f"   üí∞ –û–±—â–∏–π –¥–æ—Ö–æ–¥: {total_revenue} ‚ÇΩ")
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: {e}")
    finally:
        conn.close()

def list_masters(args):
    """–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö –º–∞—Å—Ç–µ—Ä–æ–≤ —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π"""
    conn = db_manager._get_connection()
    cursor = conn.cursor()
    
    try:
        if args.all:
            cursor.execute("SELECT * FROM masters ORDER BY id")
        else:
            cursor.execute("SELECT * FROM masters WHERE is_active = 1 ORDER BY id")
        
        masters = cursor.fetchall()
        
        if not masters:
            print("üë• –ú–∞—Å—Ç–µ—Ä–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")
            return
        
        print(f"üë• –ú–ê–°–¢–ï–†–ê ({len(masters)}):")
        print("=" * 50)
        
        for master in masters:
            status = "üü¢" if master['is_active'] else "üî¥"
            print(f"{status} ID: {master['id']}")
            print(f"   üë§ –ò–º—è: {master['name']}")
            print(f"   üéØ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: {master['specialization']}")
            print("-" * 30)
            
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –º–∞—Å—Ç–µ—Ä–æ–≤: {e}")
    finally:
        conn.close()

def add_master(args):
    """–î–æ–±–∞–≤–∏—Ç—å –º–∞—Å—Ç–µ—Ä–∞ —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π"""
    try:
        validator.validate_name(args.name, "–ò–º—è –º–∞—Å—Ç–µ—Ä–∞")
        if args.phone:
            validator.validate_phone(args.phone)
        if args.email:
            validator.validate_email(args.email)
        
        conn = db_manager._get_connection()
        cursor = conn.cursor()
        
        try:
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–ª–µ–¥—É—é—â–∏–π ID
            cursor.execute("SELECT MAX(id) FROM masters")
            max_id = cursor.fetchone()[0] or 0
            new_id = max_id + 1
            
            # –î–æ–±–∞–≤–ª—è–µ–º –º–∞—Å—Ç–µ—Ä–∞
            cursor.execute('''
                INSERT INTO masters (id, name, specialization, is_active)
                VALUES (?, ?, ?, ?)
            ''', (new_id, args.name, args.specialization, 0 if args.inactive else 1))
            
            conn.commit()
            
            print(f"‚úÖ –ú–ê–°–¢–ï–† –î–û–ë–ê–í–õ–ï–ù!")
            print(f"üÜî ID: {new_id}")
            print(f"üë§ –ò–º—è: {args.name}")
            print(f"üéØ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: {args.specialization}")
                
        except sqlite3.IntegrityError as e:
            raise ValidationError(f"–û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: {e}")
        finally:
            conn.close()
            
    except ValidationError as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")

def list_bookings(args):
    """–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏ —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º"""
    conn = db_manager._get_connection()
    cursor = conn.cursor()
    
    try:
        # –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∏–º —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã bookings
        cursor.execute("PRAGMA table_info(bookings)")
        columns_info = cursor.fetchall()
        actual_columns = [col[1] for col in columns_info]
        print(f"üîç –†–µ–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã bookings: {actual_columns}")
        
        # –°—Ç—Ä–æ–∏–º –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫
        select_fields = ['b.id', 'b.booking_date', 'b.booking_time', 'b.status']
        
        # –î–æ–±–∞–≤–ª—è–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏
        if 'client_id' in actual_columns:
            select_fields.extend(['b.client_id', 'c.name as client_name', 'c.phone as client_phone'])
        elif 'client_name' in actual_columns:
            select_fields.append('b.client_name')
            if 'client_phone' in actual_columns:
                select_fields.append('b.client_phone')
        
        if 'service_id' in actual_columns:
            select_fields.extend(['b.service_id', 's.name as service_name'])
        elif 'service_name' in actual_columns:
            select_fields.append('b.service_name')
        
        if 'duration_minutes' in actual_columns:
            select_fields.append('b.duration_minutes as duration')
        elif 'duration' in actual_columns:
            select_fields.append('b.duration')
        
        if 'price' in actual_columns:
            select_fields.append('b.price')
        
        # –°–æ–±–∏—Ä–∞–µ–º –±–∞–∑–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
        base_query = f"SELECT {', '.join(select_fields)} FROM bookings b"
        
        # –î–æ–±–∞–≤–ª—è–µ–º JOIN –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –µ—Å–ª–∏ –µ—Å—Ç—å client_id
        if 'client_id' in actual_columns:
            base_query += " LEFT JOIN clients c ON b.client_id = c.id"
        
        # –î–æ–±–∞–≤–ª—è–µ–º JOIN –¥–ª—è —É—Å–ª—É–≥ –µ—Å–ª–∏ –µ—Å—Ç—å service_id
        if 'service_id' in actual_columns:
            base_query += " LEFT JOIN services s ON b.service_id = s.id"
        
        # –î–æ–±–∞–≤–ª—è–µ–º —É—Å–ª–æ–≤–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É
        if args.all:
            query = f"{base_query} ORDER BY b.booking_date DESC, b.booking_time DESC"
        else:
            query = f"{base_query} WHERE b.booking_date >= date('now') ORDER BY b.booking_date, b.booking_time"
        
        print(f"üîç –í—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–ø—Ä–æ—Å: {query[:100]}...")  # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª–æ –∑–∞–ø—Ä–æ—Å–∞
        cursor.execute(query)
        bookings = cursor.fetchall()
        
        if not bookings:
            print("üì≠ –ó–∞–ø–∏—Å–µ–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")
            return
        
        print(f"üìÖ –ó–ê–ü–ò–°–ò ({len(bookings)}):")
        
        # –°—á–∏—Ç–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
        status_stats = {}
        for booking in bookings:
            # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —Å–ª–æ–≤–∞—Ä—å –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
            booking_dict = dict(booking)
            status = booking_dict.get('status', 'unknown')
            status_stats[status] = status_stats.get(status, 0) + 1
        
        if status_stats:
            print("–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º:", " | ".join([f"{status}: {count}" for status, count in status_stats.items()]))
        
        print("=" * 80)
        
        for booking in bookings:
            try:
                # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —Å–ª–æ–≤–∞—Ä—å –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
                booking_dict = dict(booking)
                booking_id = booking_dict.get('id', 'N/A')
                status = booking_dict.get('status', 'unknown')
                
                status_icons = {
                    'pending': 'üü°', 
                    'confirmed': 'üü¢', 
                    'completed': 'üîµ', 
                    'cancelled': 'üî¥',
                    'no-show': '‚ö´'
                }
                status_icon = status_icons.get(status, '‚ö™')
                
                print(f"{status_icon} ID: {booking_id}")
                
                # –ö–ª–∏–µ–Ω—Ç - –ø—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
                client_name = None
                client_phone = None
                
                if 'client_name' in booking_dict:
                    client_name = booking_dict['client_name']
                elif 'client_id' in booking_dict and booking_dict['client_id']:
                    # –ï—Å–ª–∏ –µ—Å—Ç—å client_id, –Ω–æ –Ω–µ—Ç –∏–º–µ–Ω–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ JOIN
                    client_name = f"–ö–ª–∏–µ–Ω—Ç ID: {booking_dict['client_id']}"
                
                if 'client_phone' in booking_dict:
                    client_phone = booking_dict['client_phone']
                
                print(f"   üë§ –ö–ª–∏–µ–Ω—Ç: {client_name or '–ù–µ —É–∫–∞–∑–∞–Ω'}")
                if client_phone:
                    print(f"   üìû –¢–µ–ª–µ—Ñ–æ–Ω: {client_phone}")
                
                # –£—Å–ª—É–≥–∞ - –ø—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
                service_name = None
                if 'service_name' in booking_dict:
                    service_name = booking_dict['service_name']
                elif 'service_id' in booking_dict and booking_dict['service_id']:
                    service_name = f"–£—Å–ª—É–≥–∞ ID: {booking_dict['service_id']}"
                
                print(f"   üíÜ –£—Å–ª—É–≥–∞: {service_name or '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}")
                
                # –í—Ä–µ–º—è –∏ –¥–∞—Ç–∞
                print(f"   üìÖ –î–∞—Ç–∞: {booking_dict.get('booking_date', 'N/A')}")
                print(f"   ‚è∞ –í—Ä–µ–º—è: {booking_dict.get('booking_time', 'N/A')}")
                
                # –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
                duration = None
                if 'duration' in booking_dict:
                    duration = booking_dict['duration']
                elif 'duration_minutes' in booking_dict:
                    duration = booking_dict['duration_minutes']
                
                if duration:
                    print(f"   ‚è±Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {duration} –º–∏–Ω")
                
                # –¶–µ–Ω–∞
                if 'price' in booking_dict and booking_dict['price']:
                    print(f"   üí∞ –¶–µ–Ω–∞: {booking_dict['price']} ‚ÇΩ")
                
                print(f"   üìä –°—Ç–∞—Ç—É—Å: {status}")
                print("-" * 80)
                
            except Exception as e:
                print(f"‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø–∏—Å–∏ ID {booking_dict.get('id', 'N/A')}: {e}")
                print(f"   –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ–ª—è: {list(booking_dict.keys())}")
                print(f"   –î–∞–Ω–Ω—ã–µ: {booking_dict}")
                print("-" * 80)
            
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø–∏—Å–µ–π: {e}")
        import traceback
        traceback.print_exc()
    finally:
        conn.close()

def add_booking(args):
    """–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π"""
    try:
        validator.validate_name(args.client_name, "–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞")
        validator.validate_phone(args.client_phone)
        validator.validate_date(args.booking_date)
        validator.validate_time(args.booking_time)
        validator.validate_duration(args.duration)
        validator.validate_price(args.price)
        
        conn = db_manager._get_connection()
        cursor = conn.cursor()
        
        try:
            # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–µ–ª–µ—Ñ–æ–Ω
            formatted_phone = format_phone(args.client_phone)
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–ª–µ–¥—É—é—â–∏–π ID
            cursor.execute("SELECT MAX(id) FROM bookings")
            max_id = cursor.fetchone()[0] or 0
            new_id = max_id + 1
            
            # –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—Å–ª—É–≥–µ –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–∞
            service_name = None
            if args.service_id:
                cursor.execute("SELECT name FROM services WHERE id = ? AND is_active = 1", (args.service_id,))
                service = cursor.fetchone()
                if service:
                    service_name = service['name']
                else:
                    print(f"‚ö†Ô∏è –£—Å–ª—É–≥–∞ —Å ID {args.service_id} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –∏–ª–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞")
            
            cursor.execute('''
                INSERT INTO bookings (
                    id, client_name, client_phone, service_id, service_name,
                    booking_date, booking_time, duration, price, status
                ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
            ''', (
                new_id, args.client_name, formatted_phone, args.service_id, service_name,
                args.booking_date, args.booking_time, args.duration, args.price, args.status
            ))
            
            conn.commit()
            
            print(f"‚úÖ –ó–ê–ü–ò–°–¨ –î–û–ë–ê–í–õ–ï–ù–ê!")
            print(f"üÜî ID: {new_id}")
            print(f"üë§ –ö–ª–∏–µ–Ω—Ç: {args.client_name}")
            print(f"üìû –¢–µ–ª–µ—Ñ–æ–Ω: {formatted_phone}")
            print(f"üíÜ –£—Å–ª—É–≥–∞: {service_name or '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}")
            print(f"üìÖ –î–∞—Ç–∞: {args.booking_date}")
            print(f"‚è∞ –í—Ä–µ–º—è: {args.booking_time}")
            print(f"‚è±Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {args.duration} –º–∏–Ω")
            print(f"üí∞ –¶–µ–Ω–∞: {args.price} ‚ÇΩ")
            print(f"üìä –°—Ç–∞—Ç—É—Å: {args.status}")
                
        except sqlite3.IntegrityError as e:
            raise ValidationError(f"–û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: {e}")
        finally:
            conn.close()
            
    except ValidationError as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")

def add_booking_flexible(args):
    """–î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π —Å —Ä–∞–∑–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º"""
    try:
        validator.validate_name(args.client_name, "–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞")
        validator.validate_phone(args.client_phone)
        validator.validate_date(args.booking_date)
        validator.validate_duration(args.duration)
        
        # –ü–∞—Ä—Å–∏–Ω–≥ –≤—Ä–µ–º–µ–Ω –∏ —Ü–µ–Ω
        times = [t.strip() for t in args.times.split(',')]
        for time in times:
            validator.validate_time(time)
        
        if args.prices:
            prices = [int(p.strip()) for p in args.prices.split(',')]
            if len(times) != len(prices):
                raise ValidationError("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ä–µ–º–µ–Ω –∏ —Ü–µ–Ω –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å")
            for price in prices:
                validator.validate_price(price)
        else:
            prices = [args.price] * len(times)
            validator.validate_price(args.price)
        
        conn = db_manager._get_connection()
        cursor = conn.cursor()
        
        try:
            formatted_phone = format_phone(args.client_phone)
            added_count = 0
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π ID
            cursor.execute("SELECT MAX(id) FROM bookings")
            max_id = cursor.fetchone()[0] or 0
            current_id = max_id + 1
            
            for i, (time, price) in enumerate(zip(times, prices)):
                try:
                    cursor.execute('''
                        INSERT INTO bookings (
                            id, client_name, client_phone, service_id, service_name,
                            booking_date, booking_time, duration, price, status
                        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
                    ''', (
                        current_id + i, args.client_name, formatted_phone, args.service_id, None,
                        args.booking_date, time, args.duration, price, args.status
                    ))
                    
                    added_count += 1
                    print(f"‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–ø–∏—Å—å: {args.booking_date} {time} - {price} ‚ÇΩ")
                    
                except sqlite3.IntegrityError:
                    print(f"‚ö†Ô∏è –ó–∞–ø–∏—Å—å –Ω–∞ {time} —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º")
            
            conn.commit()
            print(f"\nüéâ –î–û–ë–ê–í–õ–ï–ù–û –ó–ê–ü–ò–°–ï–ô: {added_count} –∏–∑ {len(times)}")
            
        finally:
            conn.close()
            
    except ValidationError as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")

def get_available_slots(args):
    """–ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã"""
    try:
        validator.validate_date(args.date)
        
        slots = get_next_available_time(args.date, args.duration)
        
        if not slots:
            print(f"‚ùå –ù–∞ {args.date} –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤")
            return
        
        print(f"üïê –î–û–°–¢–£–ü–ù–´–ï –í–†–ï–ú–ï–ù–ê –ù–ê {args.date}:")
        print("–°–ª–æ—Ç—ã –ø–æ 30 –º–∏–Ω—É—Ç:" if not args.duration else f"–°–ª–æ—Ç—ã –¥–ª—è —É—Å–ª—É–≥–∏ {args.duration} –º–∏–Ω:")
        for i, slot in enumerate(slots, 1):
            print(f"  {i:2d}. {slot}")
            
    except ValidationError as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")

def update_service(args):
    """–û–±–Ω–æ–≤–∏—Ç—å —É—Å–ª—É–≥—É"""
    try:
        conn = db_manager._get_connection()
        cursor = conn.cursor()
        
        try:
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏
            cursor.execute("SELECT * FROM services WHERE id = ?", (args.id,))
            service = cursor.fetchone()
            if not service:
                raise ValidationError(f"–£—Å–ª—É–≥–∞ —Å ID {args.id} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
            
            # –°–æ–±–∏—Ä–∞–µ–º –ø–æ–ª—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
            updates = []
            values = []
            
            if args.name:
                validator.validate_name(args.name, "–ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏")
                updates.append("name = ?")
                values.append(args.name)
            
            if args.price is not None:
                validator.validate_price(args.price)
                updates.append("price = ?")
                values.append(args.price)
            
            if args.duration is not None:
                validator.validate_duration(args.duration)
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã
                cursor.execute("PRAGMA table_info(services)")
                columns = [col[1] for col in cursor.fetchall()]
                
                if 'base_duration' in columns:
                    # –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å base_duration
                    updates.append("base_duration = ?")
                    values.append(args.duration)
                elif 'duration_minutes' in columns:
                    # –°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å duration_minutes
                    updates.append("duration_minutes = ?")
                    values.append(args.duration)
            
            if args.description is not None:
                updates.append("description = ?")
                values.append(args.description)
            
            if args.category:
                updates.append("category = ?")
                values.append(args.category)
            
            if hasattr(args, 'active') and args.active is not None:
                updates.append("is_active = ?")
                values.append(1 if args.active else 0)
            
            if not updates:
                print("‚ö†Ô∏è –ù–µ—á–µ–≥–æ –æ–±–Ω–æ–≤–ª—è—Ç—å")
                return
            
            values.append(args.id)
            query = f"UPDATE services SET {', '.join(updates)} WHERE id = ?"
            cursor.execute(query, values)
            conn.commit()
            
            print(f"‚úÖ –£—Å–ª—É–≥–∞ ID {args.id} –æ–±–Ω–æ–≤–ª–µ–Ω–∞!")
            
        finally:
            conn.close()
            
    except (ValidationError, ValueError) as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")

def delete_service(args):
    """–£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —É—Å–ª—É–≥—É"""
    try:
        conn = db_manager._get_connection()
        cursor = conn.cursor()
        
        try:
            cursor.execute("SELECT * FROM services WHERE id = ?", (args.id,))
            service = cursor.fetchone()
            if not service:
                raise ValidationError(f"–£—Å–ª—É–≥–∞ —Å ID {args.id} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
            
            if args.force:
                # –ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
                cursor.execute("DELETE FROM services WHERE id = ?", (args.id,))
                conn.commit()
                print(f"‚úÖ –£—Å–ª—É–≥–∞ ID {args.id} —É–¥–∞–ª–µ–Ω–∞!")
            else:
                # –î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è
                cursor.execute("UPDATE services SET is_active = 0 WHERE id = ?", (args.id,))
                conn.commit()
                print(f"‚úÖ –£—Å–ª—É–≥–∞ ID {args.id} –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞!")
                
        finally:
            conn.close()
            
    except ValidationError as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")

def update_master(args):
    """–û–±–Ω–æ–≤–∏—Ç—å –º–∞—Å—Ç–µ—Ä–∞"""
    try:
        conn = db_manager._get_connection()
        cursor = conn.cursor()
        
        try:
            cursor.execute("SELECT * FROM masters WHERE id = ?", (args.id,))
            master = cursor.fetchone()
            if not master:
                raise ValidationError(f"–ú–∞—Å—Ç–µ—Ä —Å ID {args.id} –Ω–µ –Ω–∞–π–¥–µ–Ω")
            
            updates = []
            values = []
            
            if args.name:
                validator.validate_name(args.name, "–ò–º—è –º–∞—Å—Ç–µ—Ä–∞")
                updates.append("name = ?")
                values.append(args.name)
            
            if args.specialization:
                updates.append("specialization = ?")
                values.append(args.specialization)
            
            if hasattr(args, 'active') and args.active is not None:
                updates.append("is_active = ?")
                values.append(1 if args.active else 0)
            
            if not updates:
                print("‚ö†Ô∏è –ù–µ—á–µ–≥–æ –æ–±–Ω–æ–≤–ª—è—Ç—å")
                return
            
            values.append(args.id)
            query = f"UPDATE masters SET {', '.join(updates)} WHERE id = ?"
            cursor.execute(query, values)
            conn.commit()
            
            print(f"‚úÖ –ú–∞—Å—Ç–µ—Ä ID {args.id} –æ–±–Ω–æ–≤–ª–µ–Ω!")
            
        finally:
            conn.close()
            
    except ValidationError as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")

def delete_master(args):
    """–£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—Ç–µ—Ä–∞"""
    try:
        conn = db_manager._get_connection()
        cursor = conn.cursor()
        
        try:
            cursor.execute("SELECT * FROM masters WHERE id = ?", (args.id,))
            master = cursor.fetchone()
            if not master:
                raise ValidationError(f"–ú–∞—Å—Ç–µ—Ä —Å ID {args.id} –Ω–µ –Ω–∞–π–¥–µ–Ω")
            
            if args.force:
                cursor.execute("DELETE FROM masters WHERE id = ?", (args.id,))
                conn.commit()
                print(f"‚úÖ –ú–∞—Å—Ç–µ—Ä ID {args.id} —É–¥–∞–ª–µ–Ω!")
            else:
                cursor.execute("UPDATE masters SET is_active = 0 WHERE id = ?", (args.id,))
                conn.commit()
                print(f"‚úÖ –ú–∞—Å—Ç–µ—Ä ID {args.id} –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!")
                
        finally:
            conn.close()
            
    except ValidationError as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")

def update_booking(args):
    """–û–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å"""
    try:
        conn = db_manager._get_connection()
        cursor = conn.cursor()
        
        try:
            cursor.execute("SELECT * FROM bookings WHERE id = ?", (args.id,))
            booking = cursor.fetchone()
            if not booking:
                raise ValidationError(f"–ó–∞–ø–∏—Å—å —Å ID {args.id} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
            
            updates = []
            values = []
            
            if args.status:
                updates.append("status = ?")
                values.append(args.status)
            
            if args.booking_date:
                validator.validate_date(args.booking_date)
                updates.append("booking_date = ?")
                values.append(args.booking_date)
            
            if args.booking_time:
                validator.validate_time(args.booking_time)
                updates.append("booking_time = ?")
                values.append(args.booking_time)
            
            if args.duration is not None:
                validator.validate_duration(args.duration)
                updates.append("duration = ?")
                values.append(args.duration)
            
            if args.price is not None:
                validator.validate_price(args.price)
                updates.append("price = ?")
                values.append(args.price)
            
            if not updates:
                print("‚ö†Ô∏è –ù–µ—á–µ–≥–æ –æ–±–Ω–æ–≤–ª—è—Ç—å")
                return
            
            values.append(args.id)
            query = f"UPDATE bookings SET {', '.join(updates)} WHERE id = ?"
            cursor.execute(query, values)
            conn.commit()
            
            print(f"‚úÖ –ó–∞–ø–∏—Å—å ID {args.id} –æ–±–Ω–æ–≤–ª–µ–Ω–∞!")
            
        finally:
            conn.close()
            
    except ValidationError as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")

def delete_booking(args):
    """–£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å"""
    try:
        conn = db_manager._get_connection()
        cursor = conn.cursor()
        
        try:
            cursor.execute("SELECT * FROM bookings WHERE id = ?", (args.id,))
            booking = cursor.fetchone()
            if not booking:
                raise ValidationError(f"–ó–∞–ø–∏—Å—å —Å ID {args.id} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
            
            if args.force:
                cursor.execute("DELETE FROM bookings WHERE id = ?", (args.id,))
                conn.commit()
                print(f"‚úÖ –ó–∞–ø–∏—Å—å ID {args.id} —É–¥–∞–ª–µ–Ω–∞!")
            else:
                cursor.execute("UPDATE bookings SET status = 'cancelled' WHERE id = ?", (args.id,))
                conn.commit()
                print(f"‚úÖ –ó–∞–ø–∏—Å—å ID {args.id} –æ—Ç–º–µ–Ω–µ–Ω–∞!")
                
        finally:
            conn.close()
            
    except ValidationError as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")

def list_clients(args):
    """–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤"""
    conn = db_manager._get_connection()
    cursor = conn.cursor()
    
    try:
        cursor.execute("SELECT * FROM clients ORDER BY created_at DESC")
        clients = cursor.fetchall()
        
        if not clients:
            print("üë• –ö–ª–∏–µ–Ω—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")
            return
        
        print(f"üë• –ö–õ–ò–ï–ù–¢–´ ({len(clients)}):")
        print("=" * 60)
        
        for client in clients:
            client_dict = dict(client)
            print(f"üÜî ID: {client_dict['id']}")
            print(f"   üë§ –ò–º—è: {client_dict['name']}")
            print(f"   üìû –¢–µ–ª–µ—Ñ–æ–Ω: {client_dict['phone']}")
            if client_dict.get('telegram_chat_id'):
                print(f"   üì± Telegram: {client_dict['telegram_chat_id']}")
            if client_dict.get('created_at'):
                print(f"   üìÖ –°–æ–∑–¥–∞–Ω: {client_dict['created_at']}")
            print("-" * 60)
            
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤: {e}")
    finally:
        conn.close()

def add_client(args):
    """–î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞"""
    try:
        validator.validate_name(args.name, "–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞")
        validator.validate_phone(args.phone)
        
        conn = db_manager._get_connection()
        cursor = conn.cursor()
        
        try:
            formatted_phone = format_phone(args.phone)
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
            cursor.execute("SELECT id FROM clients WHERE phone = ?", (formatted_phone,))
            existing = cursor.fetchone()
            if existing:
                print(f"‚ö†Ô∏è –ö–ª–∏–µ–Ω—Ç —Å —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º {formatted_phone} —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (ID: {existing['id']})")
                if not args.force:
                    return
            
            cursor.execute("SELECT MAX(id) FROM clients")
            max_id = cursor.fetchone()[0] or 0
            new_id = max_id + 1
            
            cursor.execute('''
                INSERT INTO clients (id, name, phone, telegram_chat_id)
                VALUES (?, ?, ?, ?)
            ''', (new_id, args.name, formatted_phone, args.telegram_chat_id))
            
            conn.commit()
            
            print(f"‚úÖ –ö–õ–ò–ï–ù–¢ –î–û–ë–ê–í–õ–ï–ù!")
            print(f"üÜî ID: {new_id}")
            print(f"üë§ –ò–º—è: {args.name}")
            print(f"üìû –¢–µ–ª–µ—Ñ–æ–Ω: {formatted_phone}")
            
        finally:
            conn.close()
            
    except ValidationError as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")

def list_reviews(args):
    """–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –æ—Ç–∑—ã–≤—ã"""
    conn = db_manager._get_connection()
    cursor = conn.cursor()
    
    try:
        if args.all:
            cursor.execute("SELECT * FROM reviews ORDER BY created_at DESC")
        else:
            cursor.execute("SELECT * FROM reviews WHERE is_approved = 1 ORDER BY created_at DESC")
        
        reviews = cursor.fetchall()
        
        if not reviews:
            print("‚≠ê –û—Ç–∑—ã–≤–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")
            return
        
        print(f"‚≠ê –û–¢–ó–´–í–´ ({len(reviews)}):")
        print("=" * 80)
        
        for review in reviews:
            review_dict = dict(review)
            approved = "‚úÖ" if review_dict.get('is_approved') else "‚è≥"
            featured = "‚≠ê" if review_dict.get('is_featured') else ""
            print(f"{approved}{featured} ID: {review_dict['id']}")
            print(f"   üë§ –ö–ª–∏–µ–Ω—Ç: {review_dict['client_name']}")
            print(f"   ‚≠ê –†–µ–π—Ç–∏–Ω–≥: {'‚òÖ' * review_dict['rating']}{'‚òÜ' * (5 - review_dict['rating'])}")
            print(f"   üìù –¢–µ–∫—Å—Ç: {review_dict['text'][:100]}{'...' if len(review_dict['text']) > 100 else ''}")
            if review_dict.get('master_id'):
                print(f"   üë®‚Äç‚öïÔ∏è –ú–∞—Å—Ç–µ—Ä ID: {review_dict['master_id']}")
            if review_dict.get('created_at'):
                print(f"   üìÖ –î–∞—Ç–∞: {review_dict['created_at']}")
            print("-" * 80)
            
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ—Ç–∑—ã–≤–æ–≤: {e}")
    finally:
        conn.close()

def add_review(args):
    """–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤"""
    try:
        validator.validate_name(args.client_name, "–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞")
        if not (1 <= args.rating <= 5):
            raise ValidationError("–†–µ–π—Ç–∏–Ω–≥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 1 –¥–æ 5")
        if not args.text or len(args.text.strip()) < 10:
            raise ValidationError("–¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤")
        
        conn = db_manager._get_connection()
        cursor = conn.cursor()
        
        try:
            cursor.execute("SELECT MAX(id) FROM reviews")
            max_id = cursor.fetchone()[0] or 0
            new_id = max_id + 1
            
            cursor.execute('''
                INSERT INTO reviews (id, client_name, client_photo, rating, text, 
                                   master_id, service_id, is_approved, is_featured)
                VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
            ''', (new_id, args.client_name, args.client_photo, args.rating, args.text,
                  args.master_id, args.service_id, 1 if args.approved else 0, 1 if args.featured else 0))
            
            conn.commit()
            
            print(f"‚úÖ –û–¢–ó–´–í –î–û–ë–ê–í–õ–ï–ù!")
            print(f"üÜî ID: {new_id}")
            print(f"üë§ –ö–ª–∏–µ–Ω—Ç: {args.client_name}")
            print(f"‚≠ê –†–µ–π—Ç–∏–Ω–≥: {'‚òÖ' * args.rating}{'‚òÜ' * (5 - args.rating)}")
            
        finally:
            conn.close()
            
    except ValidationError as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")
        
def list_procedures(args):
    """–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã"""
    conn = db_manager._get_connection()
    cursor = conn.cursor()
    try:
        if args.all:
            cursor.execute("SELECT * FROM procedures ORDER BY id")
        else:
            cursor.execute("SELECT * FROM procedures WHERE is_active = 1 ORDER BY id")
        procedures = cursor.fetchall()
        if not procedures:
            print("üì≠ –ü—Ä–æ—Ü–µ–¥—É—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")
            return
        print(f"üìã –ü–†–û–¶–ï–î–£–†–´ ({len(procedures)}):")
        print("=" * 80)
        for proc in procedures:
            proc_dict = dict(proc)
            status = "üü¢" if proc_dict.get('is_active', 1) else "üî¥"
            print(f"{status} ID: {proc_dict['id']}")
            print(f"   üìõ –ù–∞–∑–≤–∞–Ω–∏–µ: {proc_dict['name']}")
            print(f"   üí∞ –¶–µ–Ω–∞: {proc_dict.get('price', 0)} ‚ÇΩ")
            print(f"   ‚è±Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {proc_dict.get('duration_minutes', 60)} –º–∏–Ω")
            category = proc_dict.get('category', 'general')
            print(f"   üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {category}")
            if proc_dict.get('description'):
                desc = proc_dict['description'][:100] + '...' if len(proc_dict['description']) > 100 else proc_dict['description']
                print(f"   üìù –û–ø–∏—Å–∞–Ω–∏–µ: {desc}")
            print("-" * 80)
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä: {e}")
        import traceback
        traceback.print_exc()
    finally:
        conn.close()

def import_from_json(args):
    """–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON —Ñ–∞–π–ª–∞"""
    try:
        json_path = Path(args.file)
        if not json_path.exists():
            raise ValidationError(f"–§–∞–π–ª {args.file} –Ω–µ –Ω–∞–π–¥–µ–Ω")
        
        with open(json_path, 'r', encoding='utf-8') as f:
            data = json.load(f)
        
        conn = db_manager._get_connection()
        cursor = conn.cursor()
        
        try:
            imported = {'services': 0, 'masters': 0, 'clients': 0, 'reviews': 0}
            
            # –ò–º–ø–æ—Ä—Ç —É—Å–ª—É–≥
            if 'services' in data:
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã –æ–¥–∏–Ω —Ä–∞–∑
                cursor.execute("PRAGMA table_info(services)")
                columns = [col[1] for col in cursor.fetchall()]
                
                for service in data['services']:
                    try:
                        cursor.execute("SELECT MAX(id) FROM services")
                        max_id = cursor.fetchone()[0] or 0
                        new_id = max_id + 1
                        
                        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Ü–µ–Ω—É
                        duration = service.get('duration_minutes') or service.get('base_duration') or service.get('duration', 60)
                        price = service.get('price', 0)
                        description = service.get('description', '')
                        is_active = service.get('is_active', 1)
                        category = service.get('category', 'massage')
                        
                        # –í—Å—Ç–∞–≤–ª—è–µ–º —Å —É—á–µ—Ç–æ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü—ã
                        if 'base_duration' in columns:
                            # –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
                            duration_prices = json.dumps({str(duration): price}) if 'duration_prices' in columns else None
                            
                            if 'duration_prices' in columns and 'category' in columns:
                                cursor.execute('''
                                    INSERT INTO services (id, name, price, base_duration, duration_prices, category, description, is_active)
                                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                                ''', (new_id, service['name'], price, duration, duration_prices, category, description, is_active))
                            elif 'category' in columns:
                                cursor.execute('''
                                    INSERT INTO services (id, name, price, base_duration, category, description, is_active)
                                    VALUES (?, ?, ?, ?, ?, ?, ?)
                                ''', (new_id, service['name'], price, duration, category, description, is_active))
                            else:
                                cursor.execute('''
                                    INSERT INTO services (id, name, price, base_duration, description, is_active)
                                    VALUES (?, ?, ?, ?, ?, ?)
                                ''', (new_id, service['name'], price, duration, description, is_active))
                        elif 'duration_minutes' in columns:
                            # –°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
                            cursor.execute('''
                                INSERT INTO services (id, name, price, duration_minutes, description, is_active)
                                VALUES (?, ?, ?, ?, ?, ?)
                            ''', (new_id, service['name'], price, duration, description, is_active))
                        else:
                            print(f"‚ö†Ô∏è –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã services, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º {service.get('name')}")
                            continue
                            
                        imported['services'] += 1
                    except Exception as e:
                        print(f"‚ö†Ô∏è –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ —É—Å–ª—É–≥–∏ {service.get('name')}: {e}")
            
            # –ò–º–ø–æ—Ä—Ç –º–∞—Å—Ç–µ—Ä–æ–≤
            if 'masters' in data:
                for master in data['masters']:
                    try:
                        cursor.execute("SELECT MAX(id) FROM masters")
                        max_id = cursor.fetchone()[0] or 0
                        new_id = max_id + 1
                        
                        cursor.execute('''
                            INSERT INTO masters (id, name, specialization, is_active)
                            VALUES (?, ?, ?, ?)
                        ''', (new_id, master['name'], master.get('specialization', ''),
                              master.get('is_active', 1)))
                        imported['masters'] += 1
                    except Exception as e:
                        print(f"‚ö†Ô∏è –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –º–∞—Å—Ç–µ—Ä–∞ {master.get('name')}: {e}")
            
            conn.commit()
            
            print(f"‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!")
            print(f"   üìã –£—Å–ª—É–≥: {imported['services']}")
            print(f"   üë• –ú–∞—Å—Ç–µ—Ä–æ–≤: {imported['masters']}")
            print(f"   üë§ –ö–ª–∏–µ–Ω—Ç–æ–≤: {imported['clients']}")
            print(f"   ‚≠ê –û—Ç–∑—ã–≤–æ–≤: {imported['reviews']}")
            
        finally:
            conn.close()
            
    except (ValidationError, json.JSONDecodeError) as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")

def backup_database(args):
    """–°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"""
    backup_dir = PROJECT_ROOT / 'backups'
    backup_dir.mkdir(exist_ok=True)
    
    timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
    backup_path = backup_dir / f"salon_backup_{timestamp}.db"
    
    try:
        import shutil
        shutil.copy2(MAIN_DB_PATH, backup_path)
        print(f"‚úÖ –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —Å–æ–∑–¥–∞–Ω–∞: {backup_path}")
        
        # –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –±—ç–∫–∞–ø—ã (–æ—Å—Ç–∞–≤–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10)
        backup_files = sorted(backup_dir.glob("salon_backup_*.db"), key=os.path.getmtime)
        if len(backup_files) > 10:
            for old_backup in backup_files[:-10]:
                old_backup.unlink()
                print(f"üóëÔ∏è –£–¥–∞–ª–µ–Ω —Å—Ç–∞—Ä—ã–π –±—ç–∫–∞–ø: {old_backup.name}")
                
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏: {e}")

def main():
    parser = argparse.ArgumentParser(
        description="üöÄ –£–õ–¨–¢–†–ê-–º–µ–Ω–µ–¥–∂–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å–∞–ª–æ–Ω–∞ –º–∞—Å—Å–∞–∂–∞ - –£–õ–£–ß–®–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø",
        formatter_class=argparse.RawDescriptionHelpFormatter,
        epilog="""
üéØ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò:

üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò –û–¢–ß–ï–¢–´:
  python db_manager.py stats services          # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —É—Å–ª—É–≥–∞–º
  python db_manager.py service export          # –≠–∫—Å–ø–æ—Ä—Ç —É—Å–ª—É–≥ –≤ CSV

üïê –†–ê–ë–û–¢–ê –°–û –í–†–ï–ú–ï–ù–ï–ú:
  python db_manager.py slots --date 2024-12-25          # –ü–æ–∫–∞–∑–∞—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–µ —Å–ª–æ—Ç—ã
  python db_manager.py slots --date 2024-12-25 --duration 90  # –°–ª–æ—Ç—ã –¥–ª—è —É—Å–ª—É–≥–∏ 90 –º–∏–Ω

‚úèÔ∏è –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò –£–î–ê–õ–ï–ù–ò–ï:
  python db_manager.py service update --id 1 --name "–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ" --price 2500
  python db_manager.py service delete --id 1            # –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
  python db_manager.py service delete --id 1 --force    # –ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
  python db_manager.py master update --id 1 --name "–ù–æ–≤–æ–µ –∏–º—è"
  python db_manager.py booking update --id 1 --status cancelled
  python db_manager.py booking delete --id 1            # –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å

üë• –†–ê–ë–û–¢–ê –° –ö–õ–ò–ï–ù–¢–ê–ú–ò:
  python db_manager.py client list                      # –°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤
  python db_manager.py client add --name "–ò–≤–∞–Ω" --phone "+79161234567"

‚≠ê –†–ê–ë–û–¢–ê –° –û–¢–ó–´–í–ê–ú–ò:
  python db_manager.py review list                      # –°–ø–∏—Å–æ–∫ –æ—Ç–∑—ã–≤–æ–≤
  python db_manager.py review list --all                # –í—Å–µ –æ—Ç–∑—ã–≤—ã
  python db_manager.py review add --client-name "–ú–∞—Ä–∏—è" --rating 5 --text "–û—Ç–ª–∏—á–Ω—ã–π –º–∞—Å—Å–∞–∂!"

üì• –ò–ú–ü–û–†–¢ –î–ê–ù–ù–´–•:
  python db_manager.py import --file data/services.json # –ò–º–ø–æ—Ä—Ç –∏–∑ JSON

üîß –°–õ–£–ñ–ï–ë–ù–´–ï –ö–û–ú–ê–ù–î–´:
  python db_manager.py backup                           # –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ë–î

üí° –ü–†–ò–ú–ï–†–´ –°–õ–û–ñ–ù–´–• –°–¶–ï–ù–ê–†–ò–ï–í:
  # –î–æ–±–∞–≤–∏—Ç—å –º–∞—Å—Ç–µ—Ä–∞
  python db_manager.py master add --name "–ê–Ω–Ω–∞" --specialization "–ú–∞—Å—Å–∞–∂"

  # –ù–∞–π—Ç–∏ —Å–≤–æ–±–æ–¥–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∞ –∏ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å
  python db_manager.py slots --date 2024-12-25
  python db_manager.py booking add-flex \\
      --client-name "–ú–∞—Ä–∏—è" --client-phone "+79167654321" \\
      --service-id 1 \\
      --booking-date 2024-12-25 \\
      --times "10:00,11:00,12:00" \\
      --duration 60 --price 2000

  # –û–±–Ω–æ–≤–∏—Ç—å —É—Å–ª—É–≥—É
  python db_manager.py service update --id 1 --price 3000 --duration 90

  # –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
  python db_manager.py stats services
  python db_manager.py service export
"""
    )
    
    subparsers = parser.add_subparsers(dest='main_command', title='–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã')
    
    # SERVICE commands
    service_parser = subparsers.add_parser('service', help='–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥–∞–º–∏')
    service_subparsers = service_parser.add_subparsers(dest='service_command')
    
    # service list
    service_list = service_subparsers.add_parser('list', help='–ü–æ–∫–∞–∑–∞—Ç—å —É—Å–ª—É–≥–∏')
    service_list.add_argument('--all', action='store_true', help='–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —É—Å–ª—É–≥–∏')
    service_list.set_defaults(func=list_services)
    
    # service add
    service_add = service_subparsers.add_parser('add', help='–î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É')
    service_add.add_argument('--name', required=True, help='–ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏')
    service_add.add_argument('--price', type=int, required=True, help='–¶–µ–Ω–∞')
    service_add.add_argument('--duration', type=int, required=True, help='–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∏–Ω—É—Ç–∞—Ö')
    service_add.add_argument('--description', default='', help='–û–ø–∏—Å–∞–Ω–∏–µ')
    service_add.add_argument('--inactive', action='store_true', help='–°–æ–∑–¥–∞—Ç—å –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π')
    service_add.set_defaults(func=add_service)
    
    # service add-flex
    service_add_flex = service_subparsers.add_parser('add-flex', help='–î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É —Å –≥–∏–±–∫–∏–º–∏ —Ü–µ–Ω–∞–º–∏')
    service_add_flex.add_argument('--name', required=True, help='–ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏')
    service_add_flex.add_argument('--durations', required=True, help='–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (30,60,90)')
    service_add_flex.add_argument('--prices', required=True, help='–¶–µ–Ω—ã —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (500,1000,1500)')
    service_add_flex.add_argument('--description', default='', help='–û–ø–∏—Å–∞–Ω–∏–µ')
    service_add_flex.add_argument('--inactive', action='store_true', help='–°–æ–∑–¥–∞—Ç—å –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π')
    service_add_flex.set_defaults(func=add_service_flexible)
    
    # service update-prices
    service_update_prices = service_subparsers.add_parser('update-prices', help='–û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π')
    service_update_prices.add_argument('--id', type=int, required=True, help='ID —É—Å–ª—É–≥–∏')
    service_update_prices.add_argument('--durations', required=True, help='–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é')
    service_update_prices.add_argument('--prices', required=True, help='–¶–µ–Ω—ã —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é')
    service_update_prices.add_argument('--base-duration', type=int, required=True, help='–ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å')
    service_update_prices.add_argument('--base-price', type=int, required=True, help='–ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞')
    service_update_prices.set_defaults(func=update_service_prices)
    
    # service update
    service_update = service_subparsers.add_parser('update', help='–û–±–Ω–æ–≤–∏—Ç—å —É—Å–ª—É–≥—É')
    service_update.add_argument('--id', type=int, required=True, help='ID —É—Å–ª—É–≥–∏')
    service_update.add_argument('--name', help='–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ')
    service_update.add_argument('--price', type=int, help='–ù–æ–≤–∞—è —Ü–µ–Ω–∞')
    service_update.add_argument('--duration', type=int, help='–ù–æ–≤–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å')
    service_update.add_argument('--description', help='–ù–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ')
    service_update.add_argument('--category', help='–ö–∞—Ç–µ–≥–æ—Ä–∏—è')
    service_update.add_argument('--active', type=bool, help='–ê–∫—Ç–∏–≤–Ω–∞ (True/False)')
    service_update.set_defaults(func=update_service)
    
    # service delete
    service_delete = service_subparsers.add_parser('delete', help='–£–¥–∞–ª–∏—Ç—å/–¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —É—Å–ª—É–≥—É')
    service_delete.add_argument('--id', type=int, required=True, help='ID —É—Å–ª—É–≥–∏')
    service_delete.add_argument('--force', action='store_true', help='–ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (–∏–Ω–∞—á–µ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è)')
    service_delete.set_defaults(func=delete_service)
    
    # service export
    service_export = service_subparsers.add_parser('export', help='–≠–∫—Å–ø–æ—Ä—Ç —É—Å–ª—É–≥ –≤ CSV')
    service_export.set_defaults(func=export_services_to_csv)
    
    # MASTER commands  
    master_parser = subparsers.add_parser('master', help='–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–∞–º–∏')
    master_subparsers = master_parser.add_subparsers(dest='master_command')
    
    # master list
    master_list = master_subparsers.add_parser('list', help='–ü–æ–∫–∞–∑–∞—Ç—å –º–∞—Å—Ç–µ—Ä–æ–≤')
    master_list.add_argument('--all', action='store_true', help='–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö –º–∞—Å—Ç–µ—Ä–æ–≤')
    master_list.set_defaults(func=list_masters)
    
    # master add
    master_add = master_subparsers.add_parser('add', help='–î–æ–±–∞–≤–∏—Ç—å –º–∞—Å—Ç–µ—Ä–∞')
    master_add.add_argument('--name', required=True, help='–ò–º—è –º–∞—Å—Ç–µ—Ä–∞')
    master_add.add_argument('--specialization', required=True, help='–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è')
    master_add.add_argument('--phone', help='–¢–µ–ª–µ—Ñ–æ–Ω –º–∞—Å—Ç–µ—Ä–∞')
    master_add.add_argument('--email', help='Email –º–∞—Å—Ç–µ—Ä–∞')
    master_add.add_argument('--experience', type=int, help='–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã –≤ –≥–æ–¥–∞—Ö')
    master_add.add_argument('--services', help='ID —É—Å–ª—É–≥ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (1,2,3)')
    master_add.add_argument('--inactive', action='store_true', help='–°–æ–∑–¥–∞—Ç—å –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–º')
    master_add.set_defaults(func=add_master)
    
    # master update
    master_update = master_subparsers.add_parser('update', help='–û–±–Ω–æ–≤–∏—Ç—å –º–∞—Å—Ç–µ—Ä–∞')
    master_update.add_argument('--id', type=int, required=True, help='ID –º–∞—Å—Ç–µ—Ä–∞')
    master_update.add_argument('--name', help='–ù–æ–≤–æ–µ –∏–º—è')
    master_update.add_argument('--specialization', help='–ù–æ–≤–∞—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è')
    master_update.add_argument('--active', type=bool, help='–ê–∫—Ç–∏–≤–µ–Ω (True/False)')
    master_update.set_defaults(func=update_master)
    
    # master delete
    master_delete = master_subparsers.add_parser('delete', help='–£–¥–∞–ª–∏—Ç—å/–¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—Ç–µ—Ä–∞')
    master_delete.add_argument('--id', type=int, required=True, help='ID –º–∞—Å—Ç–µ—Ä–∞')
    master_delete.add_argument('--force', action='store_true', help='–ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (–∏–Ω–∞—á–µ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è)')
    master_delete.set_defaults(func=delete_master)
    
    # BOOKING commands
    booking_parser = subparsers.add_parser('booking', help='–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å—è–º–∏')
    booking_subparsers = booking_parser.add_subparsers(dest='booking_command')
    
    # booking list
    booking_list = booking_subparsers.add_parser('list', help='–ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–ø–∏—Å–∏')
    booking_list.add_argument('--all', action='store_true', help='–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏')
    booking_list.set_defaults(func=list_bookings)
    
    # booking add
    booking_add = booking_subparsers.add_parser('add', help='–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å')
    booking_add.add_argument('--client-name', required=True, help='–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞')
    booking_add.add_argument('--client-phone', required=True, help='–¢–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞')
    booking_add.add_argument('--service-id', type=int, help='ID —É—Å–ª—É–≥–∏')
    booking_add.add_argument('--booking-date', required=True, help='–î–∞—Ç–∞ (–ì–ì–ì–ì-–ú–ú-–î–î)')
    booking_add.add_argument('--booking-time', required=True, help='–í—Ä–µ–º—è (–ß–ß:–ú–ú)')
    booking_add.add_argument('--duration', type=int, default=60, help='–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∏–Ω—É—Ç–∞—Ö')
    booking_add.add_argument('--price', type=int, required=True, help='–¶–µ–Ω–∞')
    booking_add.add_argument('--status', default='confirmed', 
                           choices=['pending', 'confirmed', 'cancelled', 'completed', 'no-show'],
                           help='–°—Ç–∞—Ç—É—Å –∑–∞–ø–∏—Å–∏')
    booking_add.set_defaults(func=add_booking)
    
    # booking add-flex
    booking_add_flex = booking_subparsers.add_parser('add-flex', help='–î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π')
    booking_add_flex.add_argument('--client-name', required=True, help='–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞')
    booking_add_flex.add_argument('--client-phone', required=True, help='–¢–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞')
    booking_add_flex.add_argument('--service-id', type=int, help='ID —É—Å–ª—É–≥–∏')
    booking_add_flex.add_argument('--booking-date', required=True, help='–î–∞—Ç–∞ (–ì–ì–ì–ì-–ú–ú-–î–î)')
    booking_add_flex.add_argument('--times', required=True, help='–í—Ä–µ–º–µ–Ω–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (10:00,11:00,12:00)')
    booking_add_flex.add_argument('--prices', help='–¶–µ–Ω—ã —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (1000,1200,1500)')
    booking_add_flex.add_argument('--price', type=int, help='–ï–¥–∏–Ω–∞—è —Ü–µ–Ω–∞ –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π')
    booking_add_flex.add_argument('--duration', type=int, default=60, help='–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∏–Ω—É—Ç–∞—Ö')
    booking_add_flex.add_argument('--status', default='confirmed', help='–°—Ç–∞—Ç—É—Å')
    booking_add_flex.set_defaults(func=add_booking_flexible)
    
    # booking update
    booking_update = booking_subparsers.add_parser('update', help='–û–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å')
    booking_update.add_argument('--id', type=int, required=True, help='ID –∑–∞–ø–∏—Å–∏')
    booking_update.add_argument('--status', choices=['pending', 'confirmed', 'cancelled', 'completed', 'no-show'], help='–ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å')
    booking_update.add_argument('--booking-date', help='–ù–æ–≤–∞—è –¥–∞—Ç–∞ (–ì–ì–ì–ì-–ú–ú-–î–î)')
    booking_update.add_argument('--booking-time', help='–ù–æ–≤–æ–µ –≤—Ä–µ–º—è (–ß–ß:–ú–ú)')
    booking_update.add_argument('--duration', type=int, help='–ù–æ–≤–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å')
    booking_update.add_argument('--price', type=int, help='–ù–æ–≤–∞—è —Ü–µ–Ω–∞')
    booking_update.set_defaults(func=update_booking)
    
    # booking delete
    booking_delete = booking_subparsers.add_parser('delete', help='–£–¥–∞–ª–∏—Ç—å/–æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å')
    booking_delete.add_argument('--id', type=int, required=True, help='ID –∑–∞–ø–∏—Å–∏')
    booking_delete.add_argument('--force', action='store_true', help='–ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (–∏–Ω–∞—á–µ –æ—Ç–º–µ–Ω–∞)')
    booking_delete.set_defaults(func=delete_booking)
    
    # STATS commands
    stats_parser = subparsers.add_parser('stats', help='–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã')
    stats_subparsers = stats_parser.add_subparsers(dest='stats_command')
    
    stats_services = stats_subparsers.add_parser('services', help='–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —É—Å–ª—É–≥–∞–º')
    stats_services.set_defaults(func=get_service_stats)
    
    # SLOTS commands
    slots_parser = subparsers.add_parser('slots', help='–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Å–ª–æ—Ç–∞–º–∏')
    slots_parser.add_argument('--date', required=True, help='–î–∞—Ç–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–ª–æ—Ç–æ–≤ (–ì–ì–ì–ì-–ú–ú-–î–î)')
    slots_parser.add_argument('--duration', type=int, default=60, help='–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É—Å–ª—É–≥–∏ –≤ –º–∏–Ω—É—Ç–∞—Ö')
    slots_parser.set_defaults(func=get_available_slots)
    
    # CLIENT commands
    client_parser = subparsers.add_parser('client', help='–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏')
    client_subparsers = client_parser.add_subparsers(dest='client_command')
    
    client_list = client_subparsers.add_parser('list', help='–ü–æ–∫–∞–∑–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤')
    client_list.set_defaults(func=list_clients)
    
    client_add = client_subparsers.add_parser('add', help='–î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞')
    client_add.add_argument('--name', required=True, help='–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞')
    client_add.add_argument('--phone', required=True, help='–¢–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞')
    client_add.add_argument('--telegram-chat-id', help='Telegram Chat ID')
    client_add.add_argument('--force', action='store_true', help='–î–æ–±–∞–≤–∏—Ç—å –¥–∞–∂–µ –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç')
    client_add.set_defaults(func=add_client)
    
    # REVIEW commands
    review_parser = subparsers.add_parser('review', help='–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞–º–∏')
    review_subparsers = review_parser.add_subparsers(dest='review_command')
    
    review_list = review_subparsers.add_parser('list', help='–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–∑—ã–≤—ã')
    review_list.add_argument('--all', action='store_true', help='–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –æ—Ç–∑—ã–≤—ã (–≤–∫–ª—é—á–∞—è –Ω–µ–æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ)')
    review_list.set_defaults(func=list_reviews)
    
    review_add = review_subparsers.add_parser('add', help='–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤')
    review_add.add_argument('--client-name', required=True, help='–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞')
    review_add.add_argument('--rating', type=int, required=True, choices=[1, 2, 3, 4, 5], help='–†–µ–π—Ç–∏–Ω–≥ (1-5)')
    review_add.add_argument('--text', required=True, help='–¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞')
    review_add.add_argument('--client-photo', help='–§–æ—Ç–æ –∫–ª–∏–µ–Ω—Ç–∞')
    review_add.add_argument('--master-id', type=int, help='ID –º–∞—Å—Ç–µ—Ä–∞')
    review_add.add_argument('--service-id', help='ID —É—Å–ª—É–≥–∏')
    review_add.add_argument('--approved', action='store_true', help='–û–¥–æ–±—Ä–µ–Ω —Å—Ä–∞–∑—É')
    review_add.add_argument('--featured', action='store_true', help='–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –æ—Ç–∑—ã–≤')
    review_add.set_defaults(func=add_review)
    
    # IMPORT command
    import_parser = subparsers.add_parser('import', help='–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON')
    import_parser.add_argument('--file', required=True, help='–ü—É—Ç—å –∫ JSON —Ñ–∞–π–ª—É')
    import_parser.set_defaults(func=import_from_json)
    
    # BACKUP command
    backup_parser = subparsers.add_parser('backup', help='–°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ë–î')
    backup_parser.set_defaults(func=backup_database)
    
    args = parser.parse_args()
    
    if hasattr(args, 'func'):
        print(f"üîó –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: {MAIN_DB_PATH}")
        print("=" * 60)
        args.func(args)
    else:
        parser.print_help()

if __name__ == "__main__":
    main()


================================================================================
–§–ê–ô–õ: scripts/init_categories_and_services.py
================================================================================
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ —É—Å–ª—É–≥ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
"""

import sys
import os

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

from app import create_app, db
from models.category import Category
from models.service import Service

def init_categories():
    """–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö"""
    categories_data = [
        {'id': 1, 'name': '–ú–∞—Å—Å–∞–∂–∏', 'order': 1},
        {'id': 2, 'name': '–î–µ—Ç—Å–∫–∏–π –º–∞—Å—Å–∞–∂', 'order': 2},
        {'id': 3, 'name': '–û–±—â–∏–π –º–∞—Å—Å–∞–∂', 'order': 3},
        {'id': 4, 'name': '–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã', 'order': 4},
        {'id': 5, 'name': '–°–ü–ê-–ø—Ä–æ—Ü–µ–¥—É—Ä—ã', 'order': 5},
        {'id': 6, 'name': '–û–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏', 'order': 6},
        {'id': 7, 'name': '–ö–æ–º–ø–ª–µ–∫—Å—ã', 'order': 7}
    ]
    
    print("–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π...")
    for cat_data in categories_data:
        category = Category.query.get(cat_data['id'])
        if category:
            category.name = cat_data['name']
            category.order = cat_data['order']
            print(f"  –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è: {cat_data['name']}")
        else:
            category = Category(
                id=cat_data['id'],
                name=cat_data['name'],
                order=cat_data['order']
            )
            db.session.add(category)
            print(f"  –°–æ–∑–¥–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è: {cat_data['name']}")
    
    db.session.commit()
    print(f"‚úÖ –°–æ–∑–¥–∞–Ω–æ/–æ–±–Ω–æ–≤–ª–µ–Ω–æ {len(categories_data)} –∫–∞—Ç–µ–≥–æ—Ä–∏–π\n")

def init_services():
    """–°–æ–∑–¥–∞–Ω–∏–µ —É—Å–ª—É–≥ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö"""
    services_data = [
        # –ú–ê–°–°–ê–ñ–ò (category_id = 1)
        {'id': 1, 'name': '–ú–∞—Å—Å–∞–∂ –ª–∏—Ü–∞ —Ä—É—á–Ω–æ–π + –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π', 'category_id': 1, 'duration': 30, 'price': 1100},
        {'id': 2, 'name': '–ú–∞—Å—Å–∞–∂ –®–í–ó', 'category_id': 1, 'duration': 20, 'price': 800},
        {'id': 3, 'name': '–ú–∞—Å—Å–∞–∂ —Å–ø–∏–Ω—ã —Ä—É—á–Ω–æ–π', 'category_id': 1, 'duration': 30, 'price': 1500},
        {'id': 4, 'name': '–ú–∞—Å—Å–∞–∂ –Ω–æ–≥ —Ä—É—á–Ω–æ–π', 'category_id': 1, 'duration': 30, 'price': 1500},
        
        # –î–ï–¢–°–ö–ò–ô –ú–ê–°–°–ê–ñ (category_id = 2)
        {'id': 5, 'name': '–î–µ—Ç—Å–∫–∏–π –º–∞—Å—Å–∞–∂ 1-12 –º–µ—Å—è—Ü–µ–≤', 'category_id': 2, 'duration': 15, 'price': 600},
        {'id': 6, 'name': '–î–µ—Ç—Å–∫–∏–π –º–∞—Å—Å–∞–∂ 1-5 –ª–µ—Ç', 'category_id': 2, 'duration': 25, 'price': 800},
        {'id': 7, 'name': '–î–µ—Ç—Å–∫–∏–π –º–∞—Å—Å–∞–∂ 6-12 –ª–µ—Ç', 'category_id': 2, 'duration': 30, 'price': 1300},
        {'id': 8, 'name': '–î–µ—Ç—Å–∫–∏–π –º–∞—Å—Å–∞–∂ 13-16 –ª–µ—Ç', 'category_id': 2, 'duration': 45, 'price': 1500},
        
        # –û–ë–©–ò–ô –ú–ê–°–°–ê–ñ (category_id = 3)
        {'id': 9, 'name': '–û–±—â–∏–π –õ–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂', 'category_id': 3, 'duration': 60, 'price': 3500},
        {'id': 10, 'name': '–û–±—â–∏–π –†–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–π –º–∞—Å—Å–∞–∂', 'category_id': 3, 'duration': 60, 'price': 2800},
        {'id': 11, 'name': '–û–±—â–∏–π –õ–∏–º—Ñ–æ–¥—Ä–µ–Ω–∞–∂–Ω—ã–π –º–∞—Å—Å–∞–∂', 'category_id': 3, 'duration': 90, 'price': 3500},
        {'id': 12, 'name': '–û–±—â–∏–π –°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∞–∂', 'category_id': 3, 'duration': 60, 'price': 3500},
        
        # –ê–ü–ü–ê–†–ê–¢–ù–´–ï –ü–†–û–¶–ï–î–£–†–´ (category_id = 4)
        {'id': 13, 'name': '–í–∏–±—Ä–æ–º–∞—Å—Å–∞–∂ + –≤–∞–∫—É—É–º–Ω—ã–π –º–∞—Å—Å–∞–∂', 'category_id': 4, 'duration': 30, 'price': 1700},
        {'id': 14, 'name': 'LPG –º–∞—Å—Å–∞–∂ –Ω–∞ –≤—Å–µ —Ç–µ–ª–æ –∏ –ª–∏—Ü–æ', 'category_id': 4, 'duration': 30, 'price': 1500},
        {'id': 15, 'name': '–£–ó –∫–∞–≤–∏—Ç–∞—Ü–∏—è', 'category_id': 4, 'duration': 20, 'price': 1000},
        {'id': 16, 'name': 'RF –ª–∏—Ñ—Ç–∏–Ω–≥', 'category_id': 4, 'duration': 20, 'price': 1000},
        
        # –°–ü–ê-–ü–†–û–¶–ï–î–£–†–´ (category_id = 5)
        {'id': 17, 'name': '–ö–µ–¥—Ä–æ–≤–∞—è –±–æ—á–∫–∞ –Ω–∞ –ê–ª—Ç–∞–π—Å–∫–∏—Ö —Ç—Ä–∞–≤–∞—Ö', 'category_id': 5, 'duration': 300, 'price': 700},
        {'id': 18, 'name': '–ü–∏–ª–∏–Ω–≥ —Ç–µ–ª–∞', 'category_id': 5, 'duration': 10, 'price': 1000},
        {'id': 19, 'name': '–û–±–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Ç–µ–ª–∞ (—à–æ–∫–æ–ª–∞–¥–Ω–æ–µ/–≤–æ–¥–æ—Ä–æ—Å–ª–µ–≤–æ–µ/–∞–Ω—Ç–∏—Ü–µ–ª–ª—é–ª–∏—Ç–Ω–æ–µ)', 'category_id': 5, 'duration': 25, 'price': 1400},
        
        # –û–ó–î–û–†–û–í–ò–¢–ï–õ–¨–ù–´–ï –¢–ï–•–ù–ò–ö–ò (category_id = 6)
        {'id': 20, 'name': '–ú–∞—Å—Å–∞–∂ —Å–ø–∏–Ω—ã + –∏—Å—Ü–µ–ª—è—é—â–∞—è —Ç–µ—Ö–Ω–∏–∫–∞', 'category_id': 6, 'duration': 60, 'price': 3500},
        {'id': 21, 'name': '–ú–∞—Å—Å–∞–∂ –Ω–æ–≥ + –∏—Å—Ü–µ–ª—è—é—â–∞—è —Ç–µ—Ö–Ω–∏–∫–∞', 'category_id': 6, 'duration': 60, 'price': 3500},
        {'id': 22, 'name': '–û–±—â–∏–π –º–∞—Å—Å–∞–∂ + –∏—Å—Ü–µ–ª—è—é—â–∞—è —Ç–µ—Ö–Ω–∏–∫–∞', 'category_id': 6, 'duration': 120, 'price': 7000},
        {'id': 23, 'name': '–û–º–æ–ª–æ–∂–µ–Ω–∏–µ –ª–∏—Ü–∞ –∏ —Ç–µ–ª–∞', 'category_id': 6, 'duration': 120, 'price': 7000},
        {'id': 24, 'name': '–ö–æ—Ä—Ä–µ–∫—Ü–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –æ—Ä–≥–∞–Ω–æ–≤ –∏ —Å–∏—Å—Ç–µ–º', 'category_id': 6, 'duration': 90, 'price': 7000},
        {'id': 25, 'name': '–†–∞—Å–∫—Ä—ã—Ç–∏–µ –∂–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (–∂–µ–Ω—Å–∫–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª)', 'category_id': 6, 'duration': 90, 'price': 5000},
        {'id': 26, 'name': '–°–µ–∫—Ä–µ—Ç —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏, —Å–∫—É–ª—å–ø—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–∏—Ü–∞', 'category_id': 6, 'duration': 90, 'price': 5000},
        {'id': 27, 'name': '–ê–∫—Å–µ—Å—Å –±–∞—Ä—Å', 'category_id': 6, 'duration': 60, 'price': 5000},
        
        # –ö–û–ú–ü–õ–ï–ö–°–´ (category_id = 7)
        {'id': 28, 'name': '–°–ü–ê –∫–æ–º–ø–ª–µ–∫—Å', 'category_id': 7, 'duration': 150, 'price': 5500},
        {'id': 29, 'name': '"–ö–∞–∫ –ø–æ—Å–ª–µ –æ—Ç–¥—ã—Ö–∞ –Ω–∞ –º–æ—Ä–µ"', 'category_id': 7, 'duration': 120, 'price': 7000},
        {'id': 30, 'name': '"–£–¥–∞—Ä –ø–æ —Ü–µ–ª–ª—é–ª–∏—Ç—É" (15 –¥–Ω–µ–π)', 'category_id': 7, 'duration': 0, 'price': 17900}
    ]
    
    print("–°–æ–∑–¥–∞–Ω–∏–µ —É—Å–ª—É–≥...")
    for service_data in services_data:
        service = Service.query.get(service_data['id'])
        
        # –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
        category = Category.query.get(service_data['category_id'])
        category_name = category.name if category else '–ú–∞—Å—Å–∞–∂–∏'
        
        # –°–æ–∑–¥–∞–µ–º duration_prices –∏–∑ price –∏ duration
        duration_prices = {str(service_data['duration']): float(service_data['price'])}
        
        if service:
            service.name = service_data['name']
            service.category_id = service_data['category_id']
            service.category = category_name
            service.base_duration = service_data['duration']
            service.duration_prices = duration_prices
            service.is_active = True
            print(f"  –û–±–Ω–æ–≤–ª–µ–Ω–∞ —É—Å–ª—É–≥–∞: {service_data['name']}")
        else:
            service = Service(
                id=service_data['id'],
                name=service_data['name'],
                category_id=service_data['category_id'],
                category=category_name,
                base_duration=service_data['duration'],
                duration_prices=duration_prices,
                is_active=True
            )
            db.session.add(service)
            print(f"  –°–æ–∑–¥–∞–Ω–∞ —É—Å–ª—É–≥–∞: {service_data['name']}")
    
    db.session.commit()
    print(f"‚úÖ –°–æ–∑–¥–∞–Ω–æ/–æ–±–Ω–æ–≤–ª–µ–Ω–æ {len(services_data)} —É—Å–ª—É–≥\n")

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è"""
    app = create_app()
    
    with app.app_context():
        # –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—ã, –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
        db.create_all()
        print("‚úÖ –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã/–ø—Ä–æ–≤–µ—Ä–µ–Ω—ã\n")
        
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        init_categories()
        
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —É—Å–ª—É–≥–∏
        init_services()
        
        print("‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!")

if __name__ == '__main__':
    main()










================================================================================
–§–ê–ô–õ: scripts/migrate_add_categories.py
================================================================================
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã categories –∏ –ø–æ–ª—è category_id –≤ services
"""

import sys
import os
import sqlite3

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

def migrate_database():
    """–î–æ–±–∞–≤–ª—è–µ—Ç —Ç–∞–±–ª–∏—Ü—É categories –∏ –ø–æ–ª–µ category_id –≤ services"""
    db_path = os.path.join(os.path.dirname(os.path.dirname(__file__)), 'instance', 'massage_salon.db')
    
    if not os.path.exists(db_path):
        print(f"‚ùå –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: {db_path}")
        return
    
    conn = sqlite3.connect(db_path)
    cursor = conn.cursor()
    
    try:
        # 1. –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É categories, –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
        cursor.execute("""
            CREATE TABLE IF NOT EXISTS categories (
                id INTEGER PRIMARY KEY,
                name VARCHAR(100) NOT NULL UNIQUE,
                description TEXT,
                "order" INTEGER DEFAULT 0,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
            )
        """)
        print("‚úÖ –¢–∞–±–ª–∏—Ü–∞ categories —Å–æ–∑–¥–∞–Ω–∞/–ø—Ä–æ–≤–µ—Ä–µ–Ω–∞")
        
        # 2. –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª–µ category_id –≤ —Ç–∞–±–ª–∏—Ü—É services, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
        cursor.execute("PRAGMA table_info(services)")
        columns = [col[1] for col in cursor.fetchall()]
        
        if 'category_id' not in columns:
            cursor.execute("ALTER TABLE services ADD COLUMN category_id INTEGER")
            print("‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ category_id –≤ —Ç–∞–±–ª–∏—Ü—É services")
        else:
            print("‚úÖ –ü–æ–ª–µ category_id —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ services")
        
        # 3. –°–æ–∑–¥–∞–µ–º –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á (SQLite –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç ADD CONSTRAINT, –Ω–æ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å)
        # –í SQLite –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏ –Ω—É–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å —á–µ—Ä–µ–∑ PRAGMA foreign_keys = ON
        
        conn.commit()
        print("‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ")
        
    except Exception as e:
        conn.rollback()
        print(f"‚ùå –û—à–∏–±–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏: {e}")
        import traceback
        traceback.print_exc()
    finally:
        conn.close()

if __name__ == '__main__':
    migrate_database()










================================================================================
–§–ê–ô–õ: scripts/optimize_service_images.py
================================================================================
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–°–∫—Ä–∏–ø—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —É—Å–ª—É–≥ –¥–ª—è production —Å–µ—Ä–≤–µ—Ä–∞
–£–º–µ–Ω—å—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –≤–∏–¥–∏–º–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
"""

import os
import sys
from pathlib import Path
from PIL import Image
import shutil
from datetime import datetime

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
MAX_WIDTH = 1200  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –≤ –ø–∏–∫—Å–µ–ª—è—Ö
MAX_HEIGHT = 1200  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –≤ –ø–∏–∫—Å–µ–ª—è—Ö
JPEG_QUALITY = 85  # –ö–∞—á–µ—Å—Ç–≤–æ JPEG (0-100)
PNG_QUALITY = 85  # –ö–∞—á–µ—Å—Ç–≤–æ PNG –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ JPEG
BACKUP_SUFFIX = '_backup'

def get_file_size_mb(filepath):
    """–ü–æ–ª—É—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –º–µ–≥–∞–±–∞–π—Ç–∞—Ö"""
    return os.path.getsize(filepath) / (1024 * 1024)

def create_backup(filepath):
    """–°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Ñ–∞–π–ª–∞"""
    backup_path = filepath.replace('.jpg', f'{BACKUP_SUFFIX}.jpg')
    backup_path = backup_path.replace('.jpeg', f'{BACKUP_SUFFIX}.jpeg')
    backup_path = backup_path.replace('.png', f'{BACKUP_SUFFIX}.png')
    shutil.copy2(filepath, backup_path)
    return backup_path

def optimize_image(filepath, max_width=MAX_WIDTH, max_height=MAX_HEIGHT, quality=JPEG_QUALITY):
    """
    –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:
    - –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä –µ—Å–ª–∏ –±–æ–ª—å—à–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ
    - –°–∂–∞—Ç—å —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∫–∞—á–µ—Å—Ç–≤–æ–º
    - –£–¥–∞–ª–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
    """
    try:
        # –û—Ç–∫—Ä—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        with Image.open(filepath) as img:
            original_size = img.size
            original_format = img.format
            original_file_size = get_file_size_mb(filepath)
            
            # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º RGBA –≤ RGB –¥–ª—è JPEG
            if img.mode in ('RGBA', 'LA', 'P'):
                # –°–æ–∑–¥–∞–µ–º –±–µ–ª—ã–π —Ñ–æ–Ω
                background = Image.new('RGB', img.size, (255, 255, 255))
                if img.mode == 'P':
                    img = img.convert('RGBA')
                background.paste(img, mask=img.split()[-1] if img.mode in ('RGBA', 'LA') else None)
                img = background
            
            # –ò–∑–º–µ–Ω—è–µ–º —Ä–∞–∑–º–µ—Ä –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
            if img.width > max_width or img.height > max_height:
                img.thumbnail((max_width, max_height), Image.Resampling.LANCZOS)
            
            # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π
            save_kwargs = {
                'optimize': True,
                'quality': quality,
            }
            
            # –î–ª—è JPEG
            if original_format in ('JPEG', 'JPG') or filepath.lower().endswith(('.jpg', '.jpeg')):
                save_kwargs['progressive'] = True
                save_kwargs['format'] = 'JPEG'
            # –î–ª—è PNG - –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ JPEG –¥–ª—è –ª—É—á—à–µ–≥–æ —Å–∂–∞—Ç–∏—è
            elif original_format == 'PNG' or filepath.lower().endswith('.png'):
                save_kwargs['format'] = 'JPEG'
                # –ú–µ–Ω—è–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–∞ .jpg
                if filepath.lower().endswith('.png'):
                    filepath = filepath[:-4] + '.jpg'
            
            # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            img.save(filepath, **save_kwargs)
            
            new_size = img.size
            new_file_size = get_file_size_mb(filepath)
            reduction = ((original_file_size - new_file_size) / original_file_size) * 100
            
            return {
                'success': True,
                'original_size': original_size,
                'new_size': new_size,
                'original_file_size': original_file_size,
                'new_file_size': new_file_size,
                'reduction': reduction,
                'format': original_format
            }
            
    except Exception as e:
        return {
            'success': False,
            'error': str(e)
        }

def optimize_service_images(services_dir=None, create_backups=True, max_width=MAX_WIDTH, max_height=MAX_HEIGHT, quality=JPEG_QUALITY):
    """
    –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —É—Å–ª—É–≥
    
    Args:
        services_dir: –ü—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ —É—Å–ª—É–≥
        create_backups: –°–æ–∑–¥–∞–≤–∞—Ç—å –ª–∏ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏
        max_width: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞
        max_height: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞
        quality: –ö–∞—á–µ—Å—Ç–≤–æ JPEG
    """
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
    if services_dir is None:
        # –ü—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ –ø–∞–ø–∫—É –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å–∫—Ä–∏–ø—Ç–∞
        script_dir = Path(__file__).parent.parent
        services_dir = script_dir / 'static' / 'img' / 'services'
    else:
        services_dir = Path(services_dir)
    
    if not services_dir.exists():
        print(f"‚ùå –ü–∞–ø–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: {services_dir}")
        return False
    
    print(f"üìÅ –ü–∞–ø–∫–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏: {services_dir}")
    print(f"‚öôÔ∏è  –ù–∞—Å—Ç—Ä–æ–π–∫–∏: –º–∞–∫—Å. —Ä–∞–∑–º–µ—Ä {max_width}x{max_height}px, –∫–∞—á–µ—Å—Ç–≤–æ {quality}%")
    print()
    
    # –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    image_extensions = ('.jpg', '.jpeg', '.png', '.JPG', '.JPEG', '.PNG')
    image_files = []
    for ext in image_extensions:
        image_files.extend(services_dir.glob(f'*{ext}'))
    
    # –ò—Å–∫–ª—é—á–∞–µ–º backup —Ñ–∞–π–ª—ã –∏ —Å–ª—É–∂–µ–±–Ω—ã–µ —Ñ–∞–π–ª—ã macOS (._*)
    image_files = [
        f for f in image_files 
        if BACKUP_SUFFIX not in f.name 
        and not f.name.startswith('._')
    ]
    
    if not image_files:
        print("‚ö†Ô∏è  –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã")
        return False
    
    print(f"üì∏ –ù–∞–π–¥–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: {len(image_files)}")
    print()
    
    total_original_size = 0
    total_new_size = 0
    success_count = 0
    failed_count = 0
    
    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
    for image_file in image_files:
        print(f"üîÑ –û–±—Ä–∞–±–æ—Ç–∫–∞: {image_file.name}")
        
        original_size_mb = get_file_size_mb(image_file)
        total_original_size += original_size_mb
        
        # –°–æ–∑–¥–∞–µ–º backup –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
        if create_backups:
            backup_path = create_backup(str(image_file))
            print(f"   üíæ –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è: {Path(backup_path).name}")
        
        # –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º
        result = optimize_image(str(image_file), max_width=max_width, max_height=max_height, quality=quality)
        
        if result['success']:
            success_count += 1
            new_size_mb = result['new_file_size']
            total_new_size += new_size_mb
            
            print(f"   ‚úÖ –£—Å–ø–µ—à–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ")
            print(f"   üìè –†–∞–∑–º–µ—Ä: {result['original_size'][0]}x{result['original_size'][1]} ‚Üí {result['new_size'][0]}x{result['new_size'][1]}")
            print(f"   üíæ –í–µ—Å: {original_size_mb:.2f} MB ‚Üí {new_size_mb:.2f} MB (—É–º–µ–Ω—å—à–µ–Ω–æ –Ω–∞ {result['reduction']:.1f}%)")
        else:
            failed_count += 1
            print(f"   ‚ùå –û—à–∏–±–∫–∞: {result.get('error', '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞')}")
        
        print()
    
    # –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    print("=" * 60)
    print("üìä –ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê:")
    print(f"   ‚úÖ –£—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: {success_count}")
    if failed_count > 0:
        print(f"   ‚ùå –û—à–∏–±–æ–∫: {failed_count}")
    print(f"   üíæ –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä –¥–æ: {total_original_size:.2f} MB")
    print(f"   üíæ –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä –ø–æ—Å–ª–µ: {total_new_size:.2f} MB")
    if total_original_size > 0:
        total_reduction = ((total_original_size - total_new_size) / total_original_size) * 100
        print(f"   üìâ –û–±—â–µ–µ —É–º–µ–Ω—å—à–µ–Ω–∏–µ: {total_reduction:.1f}%")
        print(f"   üí∞ –°—ç–∫–æ–Ω–æ–º–ª–µ–Ω–æ: {total_original_size - total_new_size:.2f} MB")
    print("=" * 60)
    
    return success_count > 0

def main():
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è"""
    import argparse
    
    parser = argparse.ArgumentParser(description='–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —É—Å–ª—É–≥')
    parser.add_argument(
        '--dir',
        type=str,
        default=None,
        help='–ü—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: static/img/services)'
    )
    parser.add_argument(
        '--no-backup',
        action='store_true',
        help='–ù–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏'
    )
    parser.add_argument(
        '--max-width',
        type=int,
        default=MAX_WIDTH,
        help=f'–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: {MAX_WIDTH})'
    )
    parser.add_argument(
        '--max-height',
        type=int,
        default=MAX_HEIGHT,
        help=f'–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: {MAX_HEIGHT})'
    )
    parser.add_argument(
        '--quality',
        type=int,
        default=JPEG_QUALITY,
        help=f'–ö–∞—á–µ—Å—Ç–≤–æ JPEG (0-100, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: {JPEG_QUALITY})'
    )
    
    args = parser.parse_args()
    
    print("=" * 60)
    print("üñºÔ∏è  –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô –£–°–õ–£–ì")
    print("=" * 60)
    print()
    
    success = optimize_service_images(
        services_dir=args.dir,
        create_backups=not args.no_backup,
        max_width=args.max_width,
        max_height=args.max_height,
        quality=args.quality
    )
    
    if success:
        print()
        print("‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!")
        sys.exit(0)
    else:
        print()
        print("‚ùå –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Å –æ—à–∏–±–∫–∞–º–∏")
        sys.exit(1)

if __name__ == '__main__':
    main()




================================================================================
–§–ê–ô–õ: scripts/migrate_database.py
================================================================================
#!/usr/bin/env python3
"""
–°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π
"""

import sqlite3
import sys
from pathlib import Path

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏
CURRENT_DIR = Path(__file__).resolve().parent
PROJECT_ROOT = CURRENT_DIR.parent
MAIN_DB_PATH = PROJECT_ROOT / 'instance' / 'massage_salon.db'

def migrate_database():
    """–ú–∏–≥—Ä–∏—Ä—É–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã"""
    
    print("üîÑ –ù–∞—á–∏–Ω–∞–µ–º –º–∏–≥—Ä–∞—Ü–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...")
    print(f"üìÅ –ü—É—Ç—å –∫ –ë–î: {MAIN_DB_PATH}")
    
    if not MAIN_DB_PATH.exists():
        print("‚ùå –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–∞! –°–æ–∑–¥–∞–π—Ç–µ —Å–Ω–∞—á–∞–ª–∞ –±–∞–∑—É —á–µ—Ä–µ–∑ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç.")
        return False
    
    conn = sqlite3.connect(MAIN_DB_PATH)
    cursor = conn.cursor()
    
    try:
        # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü
        cursor.execute("SELECT name FROM sqlite_master WHERE type='table'")
        tables = [row[0] for row in cursor.fetchall()]
        print(f"üìä –ù–∞–π–¥–µ–Ω—ã —Ç–∞–±–ª–∏—Ü—ã: {', '.join(tables)}")
        
        # 1. –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã bookings
        if 'bookings' in tables:
            print("\nüîß –ú–∏–≥—Ä–∏—Ä—É–µ–º —Ç–∞–±–ª–∏—Ü—É bookings...")
            
            # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏
            cursor.execute("PRAGMA table_info(bookings)")
            columns = [col[1] for col in cursor.fetchall()]
            print(f"–¢–µ–∫—É—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏: {columns}")
            
            # –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏
            if 'client_phone' not in columns:
                print("‚ûï –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–ª–æ–Ω–∫—É client_phone")
                cursor.execute("ALTER TABLE bookings ADD COLUMN client_phone TEXT")
            
            if 'service_name' not in columns:
                print("‚ûï –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–ª–æ–Ω–∫—É service_name")
                cursor.execute("ALTER TABLE bookings ADD COLUMN service_name TEXT")
            
            if 'duration' not in columns:
                print("‚ûï –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–ª–æ–Ω–∫—É duration")
                cursor.execute("ALTER TABLE bookings ADD COLUMN duration INTEGER DEFAULT 60")
            
            if 'price' not in columns:
                print("‚ûï –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–ª–æ–Ω–∫—É price")
                cursor.execute("ALTER TABLE bookings ADD COLUMN price INTEGER DEFAULT 0")
            
            if 'status' not in columns:
                print("‚ûï –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–ª–æ–Ω–∫—É status")
                cursor.execute("ALTER TABLE bookings ADD COLUMN status TEXT DEFAULT 'pending'")
            
            if 'created_at' not in columns:
                print("‚ûï –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–ª–æ–Ω–∫—É created_at")
                cursor.execute("ALTER TABLE bookings ADD COLUMN created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP")
        
        # 2. –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã services
        if 'services' in tables:
            print("\nüîß –ú–∏–≥—Ä–∏—Ä—É–µ–º —Ç–∞–±–ª–∏—Ü—É services...")
            
            cursor.execute("PRAGMA table_info(services)")
            columns = [col[1] for col in cursor.fetchall()]
            print(f"–¢–µ–∫—É—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏: {columns}")
            
            # –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º —Å—Ç–∞—Ä—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
            if 'price' in columns and 'base_price' not in columns:
                print("üîÑ –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º price -> base_price")
                cursor.execute("ALTER TABLE bookings RENAME COLUMN price TO base_price")
            
            if 'duration_minutes' in columns and 'base_duration' not in columns:
                print("üîÑ –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º duration_minutes -> base_duration")
                cursor.execute("ALTER TABLE services RENAME COLUMN duration_minutes TO base_duration")
            
            # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏
            new_columns = [
                ('category', 'TEXT DEFAULT "general"'),
                ('duration_prices', 'TEXT DEFAULT "{}"'),
                ('created_at', 'TIMESTAMP DEFAULT CURRENT_TIMESTAMP'),
                ('updated_at', 'TIMESTAMP DEFAULT CURRENT_TIMESTAMP')
            ]
            
            for col_name, col_type in new_columns:
                if col_name not in columns:
                    print(f"‚ûï –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–ª–æ–Ω–∫—É {col_name}")
                    cursor.execute(f"ALTER TABLE services ADD COLUMN {col_name} {col_type}")
        
        # 3. –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã masters
        if 'masters' in tables:
            print("\nüîß –ú–∏–≥—Ä–∏—Ä—É–µ–º —Ç–∞–±–ª–∏—Ü—É masters...")
            
            cursor.execute("PRAGMA table_info(masters)")
            columns = [col[1] for col in cursor.fetchall()]
            print(f"–¢–µ–∫—É—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏: {columns}")
            
            # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏
            new_columns = [
                ('phone', 'TEXT DEFAULT ""'),
                ('email', 'TEXT DEFAULT ""'),
                ('experience_years', 'INTEGER DEFAULT 0'),
                ('created_at', 'TIMESTAMP DEFAULT CURRENT_TIMESTAMP'),
                ('updated_at', 'TIMESTAMP DEFAULT CURRENT_TIMESTAMP')
            ]
            
            for col_name, col_type in new_columns:
                if col_name not in columns:
                    print(f"‚ûï –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–ª–æ–Ω–∫—É {col_name}")
                    cursor.execute(f"ALTER TABLE masters ADD COLUMN {col_name} {col_type}")
        
        # 4. –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É master_services –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
        if 'master_services' not in tables:
            print("\nüîß –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É master_services...")
            cursor.execute('''
                CREATE TABLE master_services (
                    master_id INTEGER,
                    service_id INTEGER,
                    PRIMARY KEY (master_id, service_id),
                    FOREIGN KEY (master_id) REFERENCES masters (id),
                    FOREIGN KEY (service_id) REFERENCES services (id)
                )
            ''')
        
        # 5. –°–æ–∑–¥–∞–µ–º –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        print("\nüîß –°–æ–∑–¥–∞–µ–º –∏–Ω–¥–µ–∫—Å—ã...")
        
        indexes = [
            "CREATE INDEX IF NOT EXISTS idx_services_active ON services(is_active)",
            "CREATE INDEX IF NOT EXISTS idx_masters_active ON masters(is_active)",
            "CREATE INDEX IF NOT EXISTS idx_bookings_date ON bookings(booking_date)",
            "CREATE INDEX IF NOT EXISTS idx_bookings_status ON bookings(status)",
            "CREATE INDEX IF NOT EXISTS idx_bookings_client_phone ON bookings(client_phone)"
        ]
        
        for index_sql in indexes:
            try:
                cursor.execute(index_sql)
                print(f"‚úÖ –°–æ–∑–¥–∞–Ω –∏–Ω–¥–µ–∫—Å: {index_sql}")
            except sqlite3.Error as e:
                print(f"‚ö†Ô∏è –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞: {e}")
        
        # –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ
        print("\nüîÑ –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ...")
        
        # –î–ª—è bookings: —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        updates = [
            "UPDATE bookings SET client_phone = '+79990000000' WHERE client_phone IS NULL",
            "UPDATE bookings SET duration = 60 WHERE duration IS NULL",
            "UPDATE bookings SET price = 1000 WHERE price IS NULL",
            "UPDATE bookings SET status = 'confirmed' WHERE status IS NULL",
            "UPDATE services SET category = 'massage' WHERE category IS NULL",
            "UPDATE services SET duration_prices = '{}' WHERE duration_prices IS NULL"
        ]
        
        for update_sql in updates:
            try:
                cursor.execute(update_sql)
                print(f"‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: {update_sql}")
            except sqlite3.Error as e:
                print(f"‚ö†Ô∏è –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: {e}")
        
        conn.commit()
        print("\nüéâ –ú–∏–≥—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!")
        return True
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏: {e}")
        conn.rollback()
        return False
    finally:
        conn.close()

def check_database_structure():
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ–∫—É—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"""
    
    print("üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...")
    
    if not MAIN_DB_PATH.exists():
        print("‚ùå –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!")
        return False
    
    conn = sqlite3.connect(MAIN_DB_PATH)
    cursor = conn.cursor()
    
    try:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∞–±–ª–∏—Ü—É bookings
        cursor.execute("PRAGMA table_info(bookings)")
        booking_columns = [col[1] for col in cursor.fetchall()]
        print(f"\nüìä –¢–∞–±–ª–∏—Ü–∞ bookings: {booking_columns}")
        
        required_booking_columns = ['client_phone', 'service_name', 'duration', 'price', 'status']
        missing_booking = [col for col in required_booking_columns if col not in booking_columns]
        
        if missing_booking:
            print(f"‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∫–æ–ª–æ–Ω–∫–∏ –≤ bookings: {missing_booking}")
        else:
            print("‚úÖ –¢–∞–±–ª–∏—Ü–∞ bookings –≤ –ø–æ—Ä—è–¥–∫–µ")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∞–±–ª–∏—Ü—É services
        cursor.execute("PRAGMA table_info(services)")
        service_columns = [col[1] for col in cursor.fetchall()]
        print(f"\nüìä –¢–∞–±–ª–∏—Ü–∞ services: {service_columns}")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∞–±–ª–∏—Ü—É masters
        cursor.execute("PRAGMA table_info(masters)")
        master_columns = [col[1] for col in cursor.fetchall()]
        print(f"\nüìä –¢–∞–±–ª–∏—Ü–∞ masters: {master_columns}")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∞–±–ª–∏—Ü—É master_services
        cursor.execute("SELECT name FROM sqlite_master WHERE type='table' AND name='master_services'")
        has_master_services = cursor.fetchone() is not None
        print(f"\nüìä –¢–∞–±–ª–∏—Ü–∞ master_services: {'‚úÖ –Ω–∞–π–¥–µ–Ω–∞' if has_master_services else '‚ùå –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç'}")
        
        return len(missing_booking) == 0
        
    finally:
        conn.close()

if __name__ == "__main__":
    print("üöÄ –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö")
    print("=" * 50)
    
    if len(sys.argv) > 1 and sys.argv[1] == 'check':
        check_database_structure()
    else:
        if check_database_structure():
            print("\n‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É–∂–µ –∏–º–µ–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É!")
        else:
            print("\nüîÑ –¢—Ä–µ–±—É–µ—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏—è...")
            migrate_database()
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏
            print("\n" + "=" * 50)
            print("üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏...")
            check_database_structure()


================================================================================
–§–ê–ô–õ: scripts/update_massage_category.py
================================================================================
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ú–∞—Å—Å–∞–∂–∏ - –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ 4 —É–∫–∞–∑–∞–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏
"""

import sys
import os

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

from app import create_app, db
from models.category import Category
from models.service import Service

def update_massage_category():
    """–û—Å—Ç–∞–≤–ª—è–µ—Ç –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ú–∞—Å—Å–∞–∂–∏ —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã–µ 4 —É—Å–ª—É–≥–∏"""
    app = create_app()
    
    with app.app_context():
        # –ù–∞—Ö–æ–¥–∏–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ú–∞—Å—Å–∞–∂–∏
        massage_category = Category.query.filter_by(name='–ú–∞—Å—Å–∞–∂–∏').first()
        if not massage_category:
            print("‚ùå –ö–∞—Ç–µ–≥–æ—Ä–∏—è '–ú–∞—Å—Å–∞–∂–∏' –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
            return
        
        print(f"‚úÖ –ù–∞–π–¥–µ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è: {massage_category.name} (id: {massage_category.id})")
        
        # –°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞—Ç—å—Å—è –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ú–∞—Å—Å–∞–∂–∏
        allowed_services = [
            '–ú–∞—Å—Å–∞–∂ –ª–∏—Ü–∞ —Ä—É—á–Ω–æ–π + –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π',
            '–ú–∞—Å—Å–∞–∂ –®–í–ó',
            '–ú–∞—Å—Å–∞–∂ —Å–ø–∏–Ω—ã —Ä—É—á–Ω–æ–π',
            '–ú–∞—Å—Å–∞–∂ –Ω–æ–≥ —Ä—É—á–Ω–æ–π'
        ]
        
        # –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ —É—Å–ª—É–≥–∏ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ú–∞—Å—Å–∞–∂–∏
        services_in_category = Service.query.filter_by(category_id=massage_category.id).all()
        print(f"\nüìã –ù–∞–π–¥–µ–Ω–æ —É—Å–ª—É–≥ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: {len(services_in_category)}")
        
        # –ù–∞—Ö–æ–¥–∏–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é "–û–±—â–∏–π –º–∞—Å—Å–∞–∂" –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —É—Å–ª—É–≥
        general_category = Category.query.filter_by(name='–û–±—â–∏–π –º–∞—Å—Å–∞–∂').first()
        if not general_category:
            print("‚ö†Ô∏è –ö–∞—Ç–µ–≥–æ—Ä–∏—è '–û–±—â–∏–π –º–∞—Å—Å–∞–∂' –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, —É—Å–ª—É–≥–∏ –±—É–¥—É—Ç –ø–µ—Ä–µ–º–µ—â–µ–Ω—ã –≤ –ø–µ—Ä–≤—É—é –¥–æ—Å—Ç—É–ø–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é")
            general_category = Category.query.first()
        
        moved_count = 0
        kept_count = 0
        
        for service in services_in_category:
            if service.name in allowed_services:
                # –û—Å—Ç–∞–≤–ª—è–µ–º —É—Å–ª—É–≥—É –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ú–∞—Å—Å–∞–∂–∏
                kept_count += 1
                print(f"  ‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω–∞: {service.name}")
            else:
                # –ü–µ—Ä–µ–º–µ—â–∞–µ–º –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –û–±—â–∏–π –º–∞—Å—Å–∞–∂
                service.category_id = general_category.id
                service.category = general_category.name
                moved_count += 1
                print(f"  ‚û°Ô∏è –ü–µ—Ä–µ–º–µ—â–µ–Ω–∞ –≤ '{general_category.name}': {service.name}")
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
        if moved_count > 0:
            db.session.commit()
            print(f"\n‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω–æ —É—Å–ª—É–≥: {moved_count}")
        else:
            print(f"\n‚úÖ –í—Å–µ —É—Å–ª—É–≥–∏ —É–∂–µ –Ω–∞ —Å–≤–æ–∏—Ö –º–µ—Å—Ç–∞—Ö")
        
        print(f"‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω–æ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ '–ú–∞—Å—Å–∞–∂–∏': {kept_count}")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        final_services = Service.query.filter_by(category_id=massage_category.id).all()
        print(f"\nüìã –ò—Ç–æ–≥–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ª—É–≥ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ '–ú–∞—Å—Å–∞–∂–∏': {len(final_services)}")
        for s in final_services:
            print(f"  - {s.name}")

if __name__ == '__main__':
    update_massage_category()










================================================================================
–§–ê–ô–õ: templates/index.html
================================================================================
{% extends "base.html" %}

{% block title %}–ú–∞—Å—Å–∞–∂–Ω—ã–π —Å–∞–ª–æ–Ω "–†–µ–ª–∞–∫—Å" - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∞–∂ –≤ –ê–ª—å–º–µ—Ç—å–µ–≤—Å–∫–µ - –û–Ω–ª–∞–π–Ω –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ{% endblock %}

{% block meta_description %}–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∞–∂–Ω—ã–π —Å–∞–ª–æ–Ω –≤ –ê–ª—å–º–µ—Ç—å–µ–≤—Å–∫–µ. –†–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–π, —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π, –ª–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂. –û–ø—ã—Ç–Ω—ã–µ –º–∞—Å—Ç–µ—Ä–∞, –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ –º–∞—Å–ª–∞. –ó–∞–ø–∏—Å—å –æ–Ω–ª–∞–π–Ω.{% endblock %}

{% block content %}
<!-- –ì–ª–∞–≤–Ω—ã–π –±–ª–æ–∫ -->
{% include 'partials/hero.html' %}

<!-- –û –Ω–∞—Å -->
{% include 'partials/about.html' %}

<!-- –£—Å–ª—É–≥–∏ -->
{% include 'partials/services.html' %}

<!-- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ -->
{% include 'partials/booking.html' %}

<!-- –û—Ç–∑—ã–≤—ã -->
{% include 'partials/reviews.html' %}

<!-- –ö–æ–Ω—Ç–∞–∫—Ç—ã -->
{% include 'partials/contacts.html' %}
{% endblock %}


================================================================================
–§–ê–ô–õ: templates/base.html
================================================================================
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{ site.seo.description }}">
    <meta name="keywords" content="{{ site.seo.keywords }}">
	<meta name="csrf-token" content="{{ session.get('_csrf_token', '') }}">

	    <!-- Favicon -->
	<link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='img/icons/favicon.png') }}">
	<link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='img/icons/favicon2.png') }}">
	<link rel="icon" type="image/png" sizes="96x96" href="{{ url_for('static', filename='img/icons/favicon3.png') }}">
	<link rel="shortcut icon" href="{{ url_for('static', filename='img/icons/favicon.png') }}">
    
    <title>{{ site.seo.title }}</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/variables.css') }}?v=3">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}?v=3">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/components/buttons.css') }}?v=3">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/components/cards.css') }}?v=3">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/components/forms.css') }}?v=3">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/components/modals.css') }}?v=3">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/sections/header.css') }}?v=3">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/sections/navbar.css') }}?v=3">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/sections/hero.css') }}?v=3">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/sections/about.css') }}?v=3">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/sections/services.css') }}?v=3">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/sections/reviews.css') }}?v=3">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/sections/contacts.css') }}?v=3">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/sections/booking.css') }}?v=3">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/sections/footer.css') }}?v=3">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/utils/responsive.css') }}?v=3">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/utils/helpers.css') }}?v=3">
    
    <!-- Bulma CSS (–ø–æ–¥–∫–ª—é—á–∞–µ–º –ø–æ—Å–ª–µ –≤—Å–µ—Ö –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å—Ç–∏–ª–µ–π) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    
    <!-- Bulma Dark Theme -->
    <link rel="stylesheet" href="https://jenil.github.io/bulmaswatch/darkly/bulmaswatch.min.css">
    
    <!-- Bulma JS (–¥–ª—è –º–æ–¥–∞–ª–æ–∫ –∏ –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤) -->
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
    
    <!-- Custom Bulma Dark Theme Overrides (–ø–æ—Å–ª–µ –≤—Å–µ—Ö —Å—Ç–∏–ª–µ–π –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞) -->
    <style>
        /* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Bulma */
        :root {
            --bulma-primary: #ff6b35;
            --bulma-primary-hover: #ff8555;
            --bulma-primary-light: #ffb399;
            --bulma-primary-dark: #e55a2b;
        }
        
        /* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è –≤—Å–µ–≥–æ —Å–∞–π—Ç–∞ */
        html {
            background-color: #1a1a1a !important;
            color: #e0e0e0 !important;
        }
        
        body {
            background-color: #1a1a1a !important;
            color: #e0e0e0 !important;
            min-height: 100vh;
        }
        
        /* –û—Ä–∞–Ω–∂–µ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ Bulma */
        .button.is-primary,
        .button.is-link,
        button.button.is-primary,
        button.button.is-link,
        input[type="submit"].button.is-primary,
        input[type="submit"].button.is-link,
        a.button.is-primary,
        a.button.is-link {
            background-color: #ff6b35 !important;
            border-color: #ff6b35 !important;
            color: #ffffff !important;
        }
        
        .button.is-primary:hover,
        .button.is-link:hover,
        button.button.is-primary:hover,
        button.button.is-link:hover,
        input[type="submit"].button.is-primary:hover,
        input[type="submit"].button.is-link:hover,
        a.button.is-primary:hover,
        a.button.is-link:hover {
            background-color: #ff8555 !important;
            border-color: #ff8555 !important;
        }
        
        .button.is-primary:active,
        .button.is-link:active,
        button.button.is-primary:active,
        button.button.is-link:active {
            background-color: #e55a2b !important;
            border-color: #e55a2b !important;
        }
        
        /* –û—Ä–∞–Ω–∂–µ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ */
        .btn-primary,
        .btn:not(.btn-secondary):not(.btn-outline),
        button.btn:not(.btn-secondary):not(.btn-outline),
        input[type="submit"].btn:not(.btn-secondary):not(.btn-outline) {
            background-color: #ff6b35 !important;
            border-color: #ff6b35 !important;
            color: #ffffff !important;
        }
        
        .btn-primary:hover,
        .btn:not(.btn-secondary):not(.btn-outline):hover,
        button.btn:not(.btn-secondary):not(.btn-outline):hover,
        input[type="submit"].btn:not(.btn-secondary):not(.btn-outline):hover {
            background-color: #ff8555 !important;
            border-color: #ff8555 !important;
        }
        
        /* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */

        
        /* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è —Ç–µ–∫—Å—Ç–∞ */
        h1, h2, h3, h4, h5, h6,
        .title,
        .subtitle,
        p, span, div, label {
            color: #e0e0e0 !important;
        }
        
        a {
            color: #ff6b35 !important;
        }
        
        a:hover {
            color: #ff8555 !important;
        }
        
        /* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è —Ñ–æ—Ä–º */
        .input,
        .textarea,
        .select select,
        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="date"],
        input[type="time"],
        input[type="number"],
        textarea,
        select {
            background-color: #3d3d3d !important;
            border-color: #4d4d4d !important;
            color: #e0e0e0 !important;
        }
        
        .input:focus,
        .textarea:focus,
        .select select:focus,
        input:focus,
        textarea:focus,
        select:focus {
            border-color: #ff6b35 !important;
            box-shadow: 0 0 0 0.125em rgba(255, 107, 53, 0.25) !important;
        }
        
        /* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è –Ω–∞–≤–±–∞—Ä–∞ */
        .navbar {
            background-color: #1a1a1a !important;
        }
        
        .navbar-item,
        .navbar-link {
            color: #e0e0e0 !important;
        }
        
        .navbar-item:hover,
        .navbar-link:hover {
            background-color: #2d2d2d !important;
            color: #ff6b35 !important;
        }
        
        /* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ —Å—Ç–∏–ª–∏ —Å–µ–∫—Ü–∏–π */
        .services-section,
        .booking-section,
        .contacts-section,
        .about-section,
        .reviews-section,
        .hero-section,
        .gallery-section {
            background-color: #1a1a1a !important;
            color: #e0e0e0 !important;
        }
        
        /* –§–æ–Ω –¥–ª—è —Ö–µ–¥–µ—Ä–∞ –∏ —Ñ—É—Ç–µ—Ä–∞ */
        .header,
        .footer {
            background-color: #2A2D2C !important;
            background: #2A2D2C !important;
        }
        
        /* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –≤—Å–µ –∫–Ω–æ–ø–∫–∏ –Ω–∞ —Å–∞–π—Ç–µ */
        button:not(.is-white):not(.is-light):not(.is-dark):not(.is-black):not(.is-text):not(.is-ghost):not(.is-danger):not(.is-success):not(.is-warning):not(.is-info),
        .btn:not(.btn-secondary):not(.btn-outline),
        .btn-primary,
        input[type="submit"]:not(.is-white):not(.is-light):not(.is-dark):not(.is-black):not(.is-text):not(.is-ghost):not(.is-danger):not(.is-success):not(.is-warning):not(.is-info),
        a.btn:not(.btn-secondary):not(.btn-outline),
        #submitBooking,
        .service-btn,
        .category-btn,
        .cta-consultation,
        .header-cta .btn-primary,
        .btn-booking,
        .footer-btn,
        .btn-call,
        .cta-button {
            background-color: #FF6C35 !important;
            border-color: #FF6C35 !important;
            color: #ffffff !important;
            box-shadow: 0 4px 15px rgba(255, 108, 53, 0.4) !important;
        }
        
        /* –û—Ç–∫–ª—é—á–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è */
        #submitBooking::before,
        #submitBooking.btn::before,
        #submitBooking.btn-primary::before,
        #submitBookingMain::before,
        #submitBookingMain.btn::before,
        #submitBookingMain.btn-primary::before,
        .booking-submit-btn::before,
        .booking-submit-btn.btn::before,
        .booking-submit-btn.btn-primary::before,
        button#submitBooking::before,
        button#submitBooking.btn::before,
        button#submitBooking.btn-primary::before,
        button.submitBooking::before,
        button.submitBooking.btn::before,
        button.submitBooking.btn-primary::before {
            display: none !important;
            content: none !important;
            background: none !important;
            opacity: 0 !important;
            visibility: hidden !important;
            pointer-events: none !important;
            left: -9999px !important;
            width: 0 !important;
            height: 0 !important;
        }
        
        button:not(.is-white):not(.is-light):not(.is-dark):not(.is-black):not(.is-text):not(.is-ghost):not(.is-danger):not(.is-success):not(.is-warning):not(.is-info):hover,
        .btn:not(.btn-secondary):not(.btn-outline):hover,
        .btn-primary:hover,
        input[type="submit"]:not(.is-white):not(.is-light):not(.is-dark):not(.is-black):not(.is-text):not(.is-ghost):not(.is-danger):not(.is-success):not(.is-warning):not(.is-info):hover,
        a.btn:not(.btn-secondary):not(.btn-outline):hover,
        #submitBooking:hover,
        .service-btn:hover,
        .category-btn:hover,
        .cta-consultation:hover,
        .header-cta .btn-primary:hover,
        .btn-booking:hover,
        .footer-btn:hover,
        .btn-call:hover,
        .cta-button:hover {
            background-color: #ff7a45 !important;
            border-color: #ff7a45 !important;
            box-shadow: 0 6px 25px rgba(255, 108, 53, 0.6) !important;
            transform: translateY(-1px) !important;
            cursor: pointer !important;
        }
        
        /* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ —Å—Ç–∏–ª–∏ —Å –±–µ–ª—ã–º —Ñ–æ–Ω–æ–º */
        .services-section,
        .booking-section,
        .contacts-section,
        .about-section,
        .reviews-section,
        .hero-section,
        .gallery-section,
        .services-container,
        .booking-container,
        .contacts-container,
        .about-container,
        .reviews-container,
        .hero-container {
            background-color: #1a1a1a !important;
            background: #1a1a1a !important;
        }
        
        /* –¢–µ–º–Ω—ã–π —Ñ–æ–Ω –¥–ª—è —Å–µ–∫—Ü–∏–∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ */
        .contacts,
        .contacts-section {
            background-color: #2A2D2C !important;
            background: #2A2D2C !important;
        }
        
        /* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã –Ω–∞ —Ç–µ–º–Ω—ã–µ */
        .services-section,
        .hero-section {
            background: #1a1a1a !important;
            background-color: #1a1a1a !important;
        }
        
        /* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏ */
        .service-card,
        .category-card,
        .review-card,
        .card {
            background-color: #2d2d2d !important;
            border-color: #4d4d4d !important;
        }
    </style>
    
    <!-- Extra CSS for specific pages -->
    {% block extra_css %}{% endblock %}

</head>
<body>
    <!-- Header -->
    {% include 'partials/header.html' %}
    
    <!-- Navigation -->
    {% include 'partials/navbar.html' %}
    
    <!-- Main Content -->
    <main>
        {% block content %}{% endblock %}
    </main>
    
    <!-- Footer -->
    {% include 'partials/footer.html' %}
    
    <!-- Bootstrap 5 JavaScript -->
    <!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>-->
    
    <!-- JavaScript -->
    <!-- JavaScript -->
	<!-- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ -->
	<!-- <script src="{{ url_for('static', filename='js/protection.js') }}"></script> -->
	<script src="{{ url_for('static', filename='js/utils/helpers.js') }}"></script>
	<script src="{{ url_for('static', filename='js/utils/api.js') }}"></script>
	<script src="{{ url_for('static', filename='js/components/smooth-scroll.js') }}"></script>
	<script src="{{ url_for('static', filename='js/components/modal.js') }}"></script>
	<script src="{{ url_for('static', filename='js/components/carousel.js') }}"></script>
	<script src="{{ url_for('static', filename='js/components/form-validation.js') }}"></script>
	<script src="{{ url_for('static', filename='js/sections/reviews.js') }}"></script>
	<script src="{{ url_for('static', filename='js/sections/services.js') }}"></script>
	<script src="{{ url_for('static', filename='js/multi-step-form.js') }}"></script>
	<script src="{{ url_for('static', filename='js/spam-protection.js') }}"></script>
	<!-- <script src="{{ url_for('static', filename='js/booking-form-handler.js') }}"></script> -->
	<script src="{{ url_for('static', filename='js/time-slots.js') }}"></script>
	<script src="{{ url_for('static', filename='js/simple-phone-input.js') }}"></script>
	<script src="{{ url_for('static', filename='js/price-calculator.js') }}"></script>
	<script src="{{ url_for('static', filename='js/main.js') }}"></script>
	<script src="{{ url_for('static', filename='js/test-button.js') }}"></script>
	<script src="{{ url_for('static', filename='js/fix-button.js') }}"></script>
	
	<!-- –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ -->
	<script>
	document.addEventListener('DOMContentLoaded', function() {
		const form = document.getElementById('bookingForm');
		if (!form) return;
		
		// –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
		const validationMessages = {
			'name': {
				valueMissing: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è',
				tooShort: '–ò–º—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞',
				patternMismatch: '–ò–º—è –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã, –ø—Ä–æ–±–µ–ª—ã –∏ –¥–µ—Ñ–∏—Å—ã'
			},
			'phone': {
				valueMissing: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞',
				patternMismatch: '–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ: +7 (999) 123-45-67'
			},
			'service_id': {
				valueMissing: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É'
			},
			'date': {
				valueMissing: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É',
				rangeUnderflow: '–ù–µ–ª—å–∑—è –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–æ—à–µ–¥—à—É—é –¥–∞—Ç—É',
				rangeOverflow: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: 60 –¥–Ω–µ–π –≤–ø–µ—Ä–µ–¥'
			},
			'time': {
				valueMissing: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è'
			}
		};
		
		// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è
		Object.keys(validationMessages).forEach(fieldName => {
			const field = form.querySelector(`[name="${fieldName}"]`);
			if (!field) return;
			
			field.addEventListener('invalid', function(e) {
				const fieldMessages = validationMessages[fieldName];
				let message = '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–æ –ø–æ–ª–µ';
				
				if (field.validity.valueMissing && fieldMessages.valueMissing) {
					message = fieldMessages.valueMissing;
				} else if (field.validity.tooShort && fieldMessages.tooShort) {
					message = fieldMessages.tooShort;
				} else if (field.validity.patternMismatch && fieldMessages.patternMismatch) {
					message = fieldMessages.patternMismatch;
				} else if (field.validity.rangeUnderflow && fieldMessages.rangeUnderflow) {
					message = fieldMessages.rangeUnderflow;
				} else if (field.validity.rangeOverflow && fieldMessages.rangeOverflow) {
					message = fieldMessages.rangeOverflow;
				}
				
				// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–∞—Å—Ç–æ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
				field.setCustomValidity(message);
				
				// –£–±–∏—Ä–∞–µ–º –∫–∞—Å—Ç–æ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—Å–ª–µ –≤–≤–æ–¥–∞, —á—Ç–æ–±—ã —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–ª–∞
				field.addEventListener('input', function() {
					field.setCustomValidity('');
				}, { once: true });
			});
		});
	});
	</script>
	
	<!-- Additional JavaScript for specific pages -->
	{% block additional_js %}{% endblock %}
	
	<!-- –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è -->
	<script>
	// –í–ê–ñ–ù–û: –î–ª—è type="submit" –∫–Ω–æ–ø–æ–∫ –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é - —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º
	// –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è type="button" –∫–Ω–æ–ø–æ–∫ (–µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å)
	if (typeof window.submitBookingForm === 'undefined') {
		window.submitBookingForm = function(event) {
			// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø –∫–Ω–æ–ø–∫–∏ - –µ—Å–ª–∏ submit, –ù–ï –±–ª–æ–∫–∏—Ä—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É
			const submitBtn = document.getElementById('submitBooking');
			if (submitBtn && submitBtn.type === 'submit') {
				console.log('‚úÖ –ö–Ω–æ–ø–∫–∞ type="submit" - –ù–ï –±–ª–æ–∫–∏—Ä—É–µ–º, —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º');
				// –í–ê–ñ–ù–û: –ù–ï –≤—ã–∑—ã–≤–∞–µ–º preventDefault() –∏ –ù–ï –≤–æ–∑–≤—Ä–∞—â–∞–µ–º false
				// –ü—Ä–æ—Å—Ç–æ –≤—ã—Ö–æ–¥–∏–º, –ø–æ–∑–≤–æ–ª—è—è –±—Ä–∞—É–∑–µ—Ä—É –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É
				return true; // –†–∞–∑—Ä–µ—à–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É
			}
			
			// –¢–æ–ª—å–∫–æ –¥–ª—è type="button" –±–ª–æ–∫–∏—Ä—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É
			if (event) {
				event.preventDefault();
				event.stopPropagation();
			}
			console.log('üîò –ö–Ω–æ–ø–∫–∞ –Ω–∞–∂–∞—Ç–∞! –§—É–Ω–∫—Ü–∏—è submitBookingForm –≤—ã–∑–≤–∞–Ω–∞');
			
			const form = document.getElementById('bookingForm');
			if (!form) {
				alert('–§–æ—Ä–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!');
				return false;
			}
			
			// –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
			const formData = new FormData(form);
			const data = {};
			
			for (let [key, value] of formData.entries()) {
				// –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –∏–º–µ–Ω–∞ –ø–æ–ª–µ–π –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º
				if (key === 'client_name' || key === 'name') {
					data['name'] = value;
				} else if (key === 'client_phone' || key === 'phone') {
					data['phone'] = value;
				} else if (key === 'booking_date' || key === 'date') {
					data['date'] = value;
				} else if (key === 'booking_time' || key === 'time') {
					data['time'] = value;
				} else {
					data[key] = value;
				}
			}
			
			// –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
			if (!data.name || !data.phone || !data.date || !data.time) {
				alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: –∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω, –¥–∞—Ç–∞, –≤—Ä–µ–º—è');
				return false;
			}
			
			// –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—ã–±–æ—Ä —É—Å–ª—É–≥–∏
			if (!data.service_id) {
				const serviceInput = document.querySelector('input[name="service_id"]:checked') || 
									document.querySelector('input[name="service_id"]') ||
									document.querySelector('select[name="service_id"]');
				if (serviceInput && serviceInput.value) {
					data['service_id'] = serviceInput.value;
				} else {
					const selectedService = document.querySelector('.service-selection .selected');
					if (selectedService && selectedService.dataset.serviceId) {
						data['service_id'] = selectedService.dataset.serviceId;
					}
				}
			}
			
			if (!data.service_id) {
				alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É');
				return false;
			}
			
			if (!data.session_duration) {
				data['session_duration'] = '60';
			}
			
			console.log('üìã –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ:', data);
			
			// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
			fetch('/booking', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/x-www-form-urlencoded',
					'Accept': 'application/json'
				},
				body: Object.keys(data).map(key => 
					encodeURIComponent(key) + '=' + encodeURIComponent(data[key])
				).join('&')
			})
			.then(response => {
				console.log('üì• –û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω:', response.status);
				const contentType = response.headers.get('content-type');
				
				// –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º JSON –æ—Ç–≤–µ—Ç—ã
				if (contentType && contentType.includes('application/json')) {
					return response.json().then(data => {
						if (response.ok && data.success) {
							// –£—Å–ø–µ—à–Ω–∞—è –∑–∞–ø–∏—Å—å
							if (data.redirect) {
								window.location.href = data.redirect;
							} else {
								alert('–ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞!');
								form.reset();
							}
						} else {
							// –û—à–∏–±–∫–∞
							alert('–û—à–∏–±–∫–∞: ' + (data.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'));
						}
					});
				} else {
					// –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º HTML –æ—Ç–≤–µ—Ç—ã
					if (response.ok) {
						// –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç - —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏
						window.location.href = '/thank-you';
					} else {
						// –û—à–∏–±–∫–∞ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
						return response.text().then(html => {
							alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
						});
					}
				}
			})
			.catch(error => {
				console.error('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã:', error);
				alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
			});
			
			return false;
		};
		
		// –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã - –ø—Ä–æ—Å—Ç–æ –∏ –Ω–∞–¥–µ–∂–Ω–æ
		function activateSubmitButton() {
			const btn = document.getElementById('submitBooking');
			if (btn) {
				btn.disabled = false;
				btn.removeAttribute('disabled');
				btn.style.pointerEvents = 'auto';
				btn.style.cursor = 'pointer';
				btn.style.opacity = '1';
				console.log('‚úÖ –ö–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞');
			}
		}
		
		// –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º —Å—Ä–∞–∑—É –∏ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
		if (document.readyState === 'loading') {
			document.addEventListener('DOMContentLoaded', activateSubmitButton);
		} else {
			activateSubmitButton();
		}
		
		// –¢–∞–∫–∂–µ –ø—Ä–æ–±—É–µ–º —á–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É
		setTimeout(activateSubmitButton, 100);
		setTimeout(activateSubmitButton, 500);
	}
	</script>
</body>
</html>


================================================================================
–§–ê–ô–õ: templates/booking.html
================================================================================
{% extends "base.html" %}

{% block title %}–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –º–∞—Å—Å–∞–∂ - –ú–∞—Å—Å–∞–∂–Ω—ã–π —Å–∞–ª–æ–Ω "–†–µ–ª–∞–∫—Å"{% endblock %}

{% block meta_description %}–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –º–∞—Å—Å–∞–∂ –≤ –ê–ª—å–º–µ—Ç—å–µ–≤—Å–∫–µ. –í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É, –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è. –û–Ω–ª–∞–π–Ω –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ.{% endblock %}

{% block content %}
<!-- Booking Section -->
{% include 'partials/booking.html' %}
{% endblock %}












================================================================================
–§–ê–ô–õ: templates/thank_you.html
================================================================================
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="–í–∞—à–∞ –∑–∞–ø–∏—Å—å –Ω–∞ –º–∞—Å—Å–∞–∂ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–≤–æ–∏ –∑–∞–ø–∏—Å–∏ –≤ Telegram –±–æ—Ç–µ.">
    <title>–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–ø–∏—Å—å! - –ú–∞—Å—Å–∞–∂–Ω—ã–π —Å–∞–ª–æ–Ω "–†–µ–ª–∞–∫—Å"</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='img/logo/logo.svg') }}">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
    .thank-you-page {
        min-height: 80vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 40px 20px;
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    }
    
    .thank-you-container {
        max-width: 700px;
        width: 100%;
        background: white;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        padding: 50px 40px;
        text-align: center;
        animation: fadeInUp 0.6s ease-out;
    }
    
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .thank-you-icon {
        font-size: 80px;
        margin-bottom: 20px;
        animation: bounce 1s ease-in-out;
    }
    
    @keyframes bounce {
        0%, 100% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-20px);
        }
    }
    
    .thank-you-title {
        font-size: 2.5rem;
        color: #056486;
        margin-bottom: 15px;
        font-weight: 700;
    }
    
    .thank-you-subtitle {
        font-size: 1.2rem;
        color: #666;
        margin-bottom: 40px;
        line-height: 1.6;
    }
    
    .booking-info {
        background: #f8f9fa;
        border-radius: 15px;
        padding: 30px;
        margin: 30px 0;
        text-align: left;
    }
    
    .booking-info-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 0;
        border-bottom: 1px solid #e9ecef;
    }
    
    .booking-info-item:last-child {
        border-bottom: none;
    }
    
    .booking-info-label {
        font-weight: 600;
        color: #333;
        font-size: 1rem;
    }
    
    .booking-info-value {
        color: #056486;
        font-size: 1rem;
        font-weight: 500;
    }
    
    .telegram-section {
        background: linear-gradient(135deg, #0d151a 0%, #0d0f11 100%);
        border-radius: 15px;
        padding: 30px;
        margin: 30px 0;
        color: white;
    }
    
    .telegram-icon {
        font-size: 50px;
        margin-bottom: 15px;
    }
    
    .telegram-section h3 {
        color: white;
        font-size: 1.5rem;
        margin-bottom: 15px;
        font-weight: 700;
    }
    
    .telegram-section p {
        color: rgba(255, 255, 255, 0.95);
        font-size: 1rem;
        line-height: 1.6;
        margin-bottom: 20px;
    }
    
    .btn-telegram {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        background: white;
        color: #c0ced5;
        padding: 15px 30px;
        border-radius: 10px;
        text-decoration: none;
        font-weight: 600;
        font-size: 1.1rem;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
    
    .btn-telegram:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        color: #006699;
    }
    
    .btn-telegram img {
        width: 24px;
        height: 24px;
    }
    
    .contact-info {
        margin-top: 30px;
        padding-top: 30px;
        border-top: 1px solid #e9ecef;
    }
    
    .contact-info p {
        color: #666;
        font-size: 0.95rem;
        margin: 10px 0;
    }
    
    .contact-info strong {
        color: #333;
    }
    
    .action-buttons {
        display: flex;
        gap: 15px;
        justify-content: center;
        margin-top: 30px;
        flex-wrap: wrap;
    }
    
    .btn-secondary {
        background: #6c757d;
        color: white;
        padding: 12px 30px;
        border-radius: 10px;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s ease;
    }
    
    .btn-secondary:hover {
        background: #5a6268;
        transform: translateY(-2px);
    }
    
    @media (max-width: 768px) {
        .thank-you-container {
            padding: 30px 20px;
        }
        
        .thank-you-title {
            font-size: 2rem;
        }
        
        .thank-you-subtitle {
            font-size: 1rem;
        }
        
        .booking-info {
            padding: 20px;
        }
        
        .telegram-section {
            padding: 20px;
        }
        
        .action-buttons {
            flex-direction: column;
        }
        
        .btn-telegram,
        .btn-secondary {
            width: 100%;
            justify-content: center;
        }
    }
    </style>
</head>
<body>
    <!-- –ß–∏—Ç–∞–µ–º flash-—Å–æ–æ–±—â–µ–Ω–∏—è, —á—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å –∏—Ö –∏–∑ —Å–µ—Å—Å–∏–∏ (–Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º, —Ç–∞–∫ –∫–∞–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —É–∂–µ –µ—Å—Ç—å –≤—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è) -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {# Flash-—Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–æ—á–∏—Ç–∞–Ω—ã –∏ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –∏–∑ —Å–µ—Å—Å–∏–∏ #}
        {% endif %}
    {% endwith %}
    
    <div class="thank-you-page">
    <div class="thank-you-container">
        <div class="thank-you-icon">üéâ</div>
        <h1 class="thank-you-title">–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–ø–∏—Å—å!</h1>
        <p class="thank-you-subtitle">
            –í–∞—à–∞ –∑–∞–ø–∏—Å—å –Ω–∞ –º–∞—Å—Å–∞–∂ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞.<br>
            –Ø —Å–≤—è–∂—É—Å—å —Å –≤–∞–º–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π.
        </p>
        
        <div class="booking-info">
            <div class="booking-info-item">
                <span class="booking-info-label">üë§ –ö–ª–∏–µ–Ω—Ç:</span>
                <span class="booking-info-value">{{ booking_data.name if booking_data else '–ù–µ —É–∫–∞–∑–∞–Ω–æ' }}</span>
            </div>
            <div class="booking-info-item">
                <span class="booking-info-label">üìÖ –î–∞—Ç–∞:</span>
                <span class="booking-info-value">{{ booking_data.date_formatted if booking_data else '–ù–µ —É–∫–∞–∑–∞–Ω–æ' }}</span>
            </div>
            <div class="booking-info-item">
                <span class="booking-info-label">‚è∞ –í—Ä–µ–º—è:</span>
                <span class="booking-info-value">{{ booking_data.time if booking_data else '–ù–µ —É–∫–∞–∑–∞–Ω–æ' }}</span>
            </div>
            <div class="booking-info-item">
                <span class="booking-info-label">üíÜ –£—Å–ª—É–≥–∞:</span>
                <span class="booking-info-value">{{ booking_data.service_name if booking_data else '–ù–µ —É–∫–∞–∑–∞–Ω–æ' }}</span>
            </div>
            {% if booking_data and booking_data.duration %}
            <div class="booking-info-item">
                <span class="booking-info-label">‚è±Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</span>
                <span class="booking-info-value">{{ booking_data.duration }} –º–∏–Ω—É—Ç</span>
            </div>
            {% endif %}
            {% if booking_data and booking_data.price is not none %}
            <div class="booking-info-item">
                <span class="booking-info-label">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å:</span>
                <span class="booking-info-value">{{ booking_data.price }} ‚ÇΩ</span>
            </div>
            {% endif %}
        </div>
        <div class="contact-info">
            <p><strong>üìç –ê–¥—Ä–µ—Å:</strong> {{ site.contact.address }}</p>
            <p><strong>üîëüîëüîë –ö–û–î –î–û–ú–û–§–û–ù–ê: 99 üîëüîëüîë</strong></p>
            <p><strong>üìû –¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è —Å–≤—è–∑–∏:</strong> {{ site.contact.phone }}</p>
        </div>
        <div class="telegram-section">
            <div class="telegram-icon">üì±</div>
            <h3>–ü—Ä–æ—Å–º–æ—Ç—Ä –≤–∞—à–∏—Ö –∑–∞–ø–∏—Å–µ–π –≤ Telegram</h3>
            <p>
                –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –±–æ—Ç–∞ <strong>@{{ telegram_bot_username or 'EnlivenSpaBot' }}</strong>, 
                —á—Ç–æ–±—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –≤–∞—à–∏ –∑–∞–ø–∏—Å–∏. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É <strong>"üìÖ –ú–æ–∏ –∑–∞–ø–∏—Å–∏"</strong>
            </p>
            <a href="https://t.me/{{ telegram_bot_username or 'EnlivenSpaBot' }}" target="_blank" class="btn-telegram">
                <img src="{{ url_for('static', filename='img/icons/telegram.svg') }}" alt="Telegram">
                –ü–µ—Ä–µ–π—Ç–∏ –≤ –±–æ—Ç @{{ telegram_bot_username or 'EnlivenSpaBot' }}
            </a>
        </div>
        
        
        <div class="action-buttons">
            <a href="{{ url_for('index') }}" class="btn-secondary">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
            <a href="{{ url_for('booking') }}" class="btn-secondary">–°–æ–∑–¥–∞—Ç—å –µ—â–µ –æ–¥–Ω—É –∑–∞–ø–∏—Å—å</a>
        </div>
    </div>
</body>
</html>




================================================================================
–§–ê–ô–õ: templates/admin/dashboard.html
================================================================================
{% extends "base.html" %}

{% block title %}–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å - –ú–∞—Å—Å–∞–∂–Ω—ã–π —Å–∞–ª–æ–Ω "–†–µ–ª–∞–∫—Å"{% endblock %}

{% block content %}
<div class="admin-dashboard">
    <div class="container">
        <h1 class="admin-title">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å</h1>
        
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">üìÖ</div>
                <div class="stat-content">
                    <div class="stat-number">{{ stats.total_bookings or 0 }}</div>
                    <div class="stat-label">–í—Å–µ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">‚è≥</div>
                <div class="stat-content">
                    <div class="stat-number">{{ stats.pending_bookings or 0 }}</div>
                    <div class="stat-label">–û–∂–∏–¥–∞—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">‚úÖ</div>
                <div class="stat-content">
                    <div class="stat-number">{{ stats.confirmed_bookings or 0 }}</div>
                    <div class="stat-label">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ</div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">üë®‚Äç‚öïÔ∏è</div>
                <div class="stat-content">
                    <div class="stat-number">{{ stats.total_masters or 0 }}</div>
                    <div class="stat-label">–ú–∞—Å—Ç–µ—Ä–æ–≤</div>
                </div>
            </div>
        </div>
        
        <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è -->
        <div class="admin-section">
            <h2 class="admin-section-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
            <div class="bookings-table">
                <table>
                    <thead>
                        <tr>
                            <th>–ö–ª–∏–µ–Ω—Ç</th>
                            <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                            <th>–î–∞—Ç–∞</th>
                            <th>–í—Ä–µ–º—è</th>
                            <th>–°—Ç–∞—Ç—É—Å</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for booking in recent_bookings %}
                        <tr>
                            <td>{{ booking.client_name }}</td>
                            <td>{{ booking.client_phone }}</td>
                            <td>{{ booking.booking_date.strftime('%d.%m.%Y') if booking.booking_date else '' }}</td>
                            <td>{{ booking.booking_time.strftime('%H:%M') if booking.booking_time else '' }}</td>
                            <td>
                                <span class="status-badge status-{{ booking.status }}">
                                    {{ booking.status }}
                                </span>
                            </td>
                            <td>
                                <button class="btn btn-sm btn-primary" onclick="updateBookingStatus({{ booking.id }}, 'confirmed')">
                                    –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
                                </button>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è -->
        <div class="admin-section">
            <h2 class="admin-section-title">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h2>
            <div class="today-bookings">
                {% for booking in today_bookings %}
                <div class="booking-card">
                    <div class="booking-info">
                        <h4>{{ booking.client_name }}</h4>
                        <p>{{ booking.booking_time.strftime('%H:%M') if booking.booking_time else '' }}</p>
                        <p>{{ booking.client_phone }}</p>
                    </div>
                    <div class="booking-actions">
                        <span class="status-badge status-{{ booking.status }}">
                            {{ booking.status }}
                        </span>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}










================================================================================
–§–ê–ô–õ: templates/admin/bookings.html
================================================================================
{% extends "base.html" %}

{% block title %}–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏ - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å{% endblock %}

{% block content %}
<div class="admin-bookings">
    <div class="container">
        <h1 class="admin-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏</h1>
        
        <!-- –§–∏–ª—å—Ç—Ä—ã -->
        <div class="filters">
            <div class="filter-group">
                <label for="statusFilter">–°—Ç–∞—Ç—É—Å:</label>
                <select id="statusFilter" onchange="filterBookings()">
                    <option value="all" {% if current_status == 'all' %}selected{% endif %}>–í—Å–µ</option>
                    <option value="pending" {% if current_status == 'pending' %}selected{% endif %}>–û–∂–∏–¥–∞—é—Ç</option>
                    <option value="confirmed" {% if current_status == 'confirmed' %}selected{% endif %}>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã</option>
                    <option value="cancelled" {% if current_status == 'cancelled' %}selected{% endif %}>–û—Ç–º–µ–Ω–µ–Ω—ã</option>
                    <option value="completed" {% if current_status == 'completed' %}selected{% endif %}>–ó–∞–≤–µ—Ä—à–µ–Ω—ã</option>
                </select>
            </div>
        </div>
        
        <!-- –¢–∞–±–ª–∏—Ü–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π -->
        <div class="bookings-table">
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>–ö–ª–∏–µ–Ω—Ç</th>
                        <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                        <th>Email</th>
                        <th>–£—Å–ª—É–≥–∞</th>
                        <th>–ú–∞—Å—Ç–µ—Ä</th>
                        <th>–î–∞—Ç–∞</th>
                        <th>–í—Ä–µ–º—è</th>
                        <th>–°—Ç–∞—Ç—É—Å</th>
                        <th>–°–æ–∑–¥–∞–Ω–æ</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    {% if bookings %}
                        {% for booking in bookings.items %}
                        <tr>
                            <td>{{ booking.id }}</td>
                            <td>{{ booking.client_name }}</td>
                            <td>{{ booking.client_phone }}</td>
                            <td>{{ booking.client_email or '-' }}</td>
                            <td>{{ booking.service_id }}</td>
                            <td>{{ booking.master.name if booking.master else '-' }}</td>
                            <td>{{ booking.booking_date.strftime('%d.%m.%Y') if booking.booking_date else '-' }}</td>
                            <td>{{ booking.booking_time.strftime('%H:%M') if booking.booking_time else '-' }}</td>
                            <td>
                                <span class="status-badge status-{{ booking.status }}">
                                    {{ booking.status }}
                                </span>
                            </td>
                            <td>{{ booking.created_at.strftime('%d.%m.%Y %H:%M') if booking.created_at else '-' }}</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="btn btn-sm btn-success" onclick="updateBookingStatus({{ booking.id }}, 'confirmed')">
                                        –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
                                    </button>
                                    <button class="btn btn-sm btn-warning" onclick="updateBookingStatus({{ booking.id }}, 'cancelled')">
                                        –û—Ç–º–µ–Ω–∏—Ç—å
                                    </button>
                                    <button class="btn btn-sm btn-info" onclick="viewBookingDetails({{ booking.id }})">
                                        –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                                    </button>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="11" class="text-center">–ù–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
        
        <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
        {% if bookings and bookings.pages > 1 %}
        <div class="pagination">
            {% if bookings.has_prev %}
                <a href="?page={{ bookings.prev_num }}&status={{ current_status }}" class="btn btn-outline">‚Äπ –ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
            {% endif %}
            
            <span class="pagination-info">
                –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ bookings.page }} –∏–∑ {{ bookings.pages }}
            </span>
            
            {% if bookings.has_next %}
                <a href="?page={{ bookings.next_num }}&status={{ current_status }}" class="btn btn-outline">–°–ª–µ–¥—É—é—â–∞—è ‚Ä∫</a>
            {% endif %}
        </div>
        {% endif %}
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è -->
<div id="bookingModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>–î–µ—Ç–∞–ª–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
        <div id="bookingDetails"></div>
    </div>
</div>
{% endblock %}










================================================================================
–§–ê–ô–õ: templates/admin/reviews.html
================================================================================
{% extends "base.html" %}

{% block title %}–ú–æ–¥–µ—Ä–∞—Ü–∏—è –æ—Ç–∑—ã–≤–æ–≤ - –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1>–ú–æ–¥–µ—Ä–∞—Ü–∏—è –æ—Ç–∑—ã–≤–æ–≤</h1>
    
    <!-- –§–∏–ª—å—Ç—Ä—ã -->
    <div class="mb-4">
        <a href="{{ url_for('admin.reviews', approved='all') }}" 
           class="btn btn-sm {{ 'btn-primary' if current_filter == 'all' else 'btn-outline-primary' }}">
            –í—Å–µ
        </a>
        <a href="{{ url_for('admin.reviews', approved='pending') }}" 
           class="btn btn-sm {{ 'btn-warning' if current_filter == 'pending' else 'btn-outline-warning' }}">
            –û–∂–∏–¥–∞—é—Ç –º–æ–¥–µ—Ä–∞—Ü–∏–∏
        </a>
        <a href="{{ url_for('admin.reviews', approved='approved') }}" 
           class="btn btn-sm {{ 'btn-success' if current_filter == 'approved' else 'btn-outline-success' }}">
            –û–¥–æ–±—Ä–µ–Ω–Ω—ã–µ
        </a>
    </div>
    
    <!-- –°–ø–∏—Å–æ–∫ –æ—Ç–∑—ã–≤–æ–≤ -->
    {% if reviews and reviews.items %}
    <div class="reviews-list">
        {% for review in reviews.items %}
        <div class="card mb-3 review-card" data-review-id="{{ review.id }}">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-start mb-2">
                    <div>
                        <h5 class="card-title">{{ review.client_name }}</h5>
                        <div class="text-muted small">
                            {{ review.created_at.strftime('%d.%m.%Y %H:%M') if review.created_at else '–î–∞—Ç–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞' }}
                        </div>
                    </div>
                    <div>
                        <span class="badge {{ 'bg-success' if review.is_approved else 'bg-warning' }}">
                            {{ '–û–¥–æ–±—Ä–µ–Ω' if review.is_approved else '–û–∂–∏–¥–∞–µ—Ç –º–æ–¥–µ—Ä–∞—Ü–∏–∏' }}
                        </span>
                        {% if review.is_featured %}
                        <span class="badge bg-info">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π</span>
                        {% endif %}
                    </div>
                </div>
                
                <div class="mb-2">
                    <strong>–û—Ü–µ–Ω–∫–∞:</strong> 
                    {% for i in range(1, 6) %}
                        {% if i <= review.rating %}
                            ‚≠ê
                        {% else %}
                            ‚òÜ
                        {% endif %}
                    {% endfor %}
                    ({{ review.rating }}/5)
                </div>
                
                <p class="card-text">{{ review.text }}</p>
                
                {% if not review.is_approved %}
                <div class="mt-3">
                    <button class="btn btn-success btn-sm approve-review" data-review-id="{{ review.id }}">
                        ‚úÖ –û–¥–æ–±—Ä–∏—Ç—å
                    </button>
                    <button class="btn btn-danger btn-sm reject-review" data-review-id="{{ review.id }}">
                        ‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å
                    </button>
                </div>
                {% else %}
                <div class="mt-3">
                    <button class="btn btn-secondary btn-sm toggle-feature" data-review-id="{{ review.id }}">
                        {% if review.is_featured %}
                            ‚≠ê –£–±—Ä–∞—Ç—å –∏–∑ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã—Ö
                        {% else %}
                            ‚≠ê –°–¥–µ–ª–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–º
                        {% endif %}
                    </button>
                    <button class="btn btn-danger btn-sm reject-review" data-review-id="{{ review.id }}">
                        ‚ùå –£–¥–∞–ª–∏—Ç—å
                    </button>
                </div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    
    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
    {% if reviews.pages > 1 %}
    <nav aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º">
        <ul class="pagination">
            {% if reviews.has_prev %}
            <li class="page-item">
                <a class="page-link" href="{{ url_for('admin.reviews', page=reviews.prev_num, approved=current_filter) }}">–ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
            </li>
            {% endif %}
            
            {% for page_num in reviews.iter_pages(left_edge=1, right_edge=1, left_current=2, right_current=2) %}
                {% if page_num %}
                    {% if page_num == reviews.page %}
                    <li class="page-item active">
                        <span class="page-link">{{ page_num }}</span>
                    </li>
                    {% else %}
                    <li class="page-item">
                        <a class="page-link" href="{{ url_for('admin.reviews', page=page_num, approved=current_filter) }}">{{ page_num }}</a>
                    </li>
                    {% endif %}
                {% else %}
                    <li class="page-item disabled"><span class="page-link">‚Ä¶</span></li>
                {% endif %}
            {% endfor %}
            
            {% if reviews.has_next %}
            <li class="page-item">
                <a class="page-link" href="{{ url_for('admin.reviews', page=reviews.next_num, approved=current_filter) }}">–°–ª–µ–¥—É—é—â–∞—è</a>
            </li>
            {% endif %}
        </ul>
    </nav>
    {% endif %}
    
    {% else %}
    <div class="alert alert-info">
        {% if current_filter == 'pending' %}
            –ù–µ—Ç –æ—Ç–∑—ã–≤–æ–≤, –æ–∂–∏–¥–∞—é—â–∏—Ö –º–æ–¥–µ—Ä–∞—Ü–∏–∏
        {% elif current_filter == 'approved' %}
            –ù–µ—Ç –æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤
        {% else %}
            –ù–µ—Ç –æ—Ç–∑—ã–≤–æ–≤
        {% endif %}
    </div>
    {% endif %}
</div>

<script>
// –û–¥–æ–±—Ä–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞
document.querySelectorAll('.approve-review').forEach(btn => {
    btn.addEventListener('click', async function() {
        const reviewId = this.dataset.reviewId;
        const reviewCard = this.closest('.review-card');
        
        if (!confirm('–û–¥–æ–±—Ä–∏—Ç—å —ç—Ç–æ—Ç –æ—Ç–∑—ã–≤?')) return;
        
        try {
            const response = await fetch(`/admin/reviews/${reviewId}/approve`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                }
            });
            
            const data = await response.json();
            
            if (data.success) {
                alert('–û—Ç–∑—ã–≤ –æ–¥–æ–±—Ä–µ–Ω!');
                reviewCard.remove();
            } else {
                alert('–û—à–∏–±–∫–∞: ' + data.message);
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞:', error);
            alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏ –æ—Ç–∑—ã–≤–∞');
        }
    });
});

// –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞
document.querySelectorAll('.reject-review').forEach(btn => {
    btn.addEventListener('click', async function() {
        const reviewId = this.dataset.reviewId;
        const reviewCard = this.closest('.review-card');
        
        if (!confirm('–û—Ç–∫–ª–æ–Ω–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –æ—Ç–∑—ã–≤?')) return;
        
        try {
            const response = await fetch(`/admin/reviews/${reviewId}/reject`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                }
            });
            
            const data = await response.json();
            
            if (data.success) {
                alert('–û—Ç–∑—ã–≤ –æ—Ç–∫–ª–æ–Ω–µ–Ω –∏ —É–¥–∞–ª–µ–Ω!');
                reviewCard.remove();
            } else {
                alert('–û—à–∏–±–∫–∞: ' + data.message);
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞:', error);
            alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –æ—Ç–∑—ã–≤–∞');
        }
    });
});

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ "—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π"
document.querySelectorAll('.toggle-feature').forEach(btn => {
    btn.addEventListener('click', async function() {
        const reviewId = this.dataset.reviewId;
        
        try {
            const response = await fetch(`/admin/reviews/${reviewId}/feature`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                }
            });
            
            const data = await response.json();
            
            if (data.success) {
                alert('–°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª–µ–Ω!');
                location.reload();
            } else {
                alert('–û—à–∏–±–∫–∞: ' + data.message);
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞:', error);
            alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞');
        }
    });
});
</script>

<style>
.review-card {
    border-left: 4px solid #007bff;
}

.review-card .badge {
    margin-left: 5px;
}

.btn-sm {
    margin-right: 5px;
}
</style>
{% endblock %}










================================================================================
–§–ê–ô–õ: templates/errors/500.html
================================================================================
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ - –ú–∞—Å—Å–∞–∂–Ω—ã–π —Å–∞–ª–æ–Ω "–†–µ–ª–∞–∫—Å"</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/variables.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/components/buttons.css') }}">
    <style>
        .error-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            padding: var(--spacing-xl);
        }
        
        .error-content {
            text-align: center;
            background: var(--bg-white);
            padding: var(--spacing-3xl);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            max-width: 600px;
            width: 100%;
        }
        
        .error-code {
            font-size: 8rem;
            font-weight: var(--font-weight-bold);
            color: var(--status-danger);
            margin-bottom: var(--spacing-lg);
            line-height: 1;
        }
        
        .error-title {
            font-size: var(--font-size-2xl);
            color: var(--text-dark);
            margin-bottom: var(--spacing-md);
        }
        
        .error-message {
            font-size: var(--font-size-lg);
            color: var(--text-medium);
            margin-bottom: var(--spacing-2xl);
            line-height: var(--line-height-relaxed);
        }
        
        .error-actions {
            display: flex;
            gap: var(--spacing-md);
            justify-content: center;
            flex-wrap: wrap;
        }
        
        @media (max-width: 768px) {
            .error-container {
                padding: var(--spacing-lg);
            }
            
            .error-content {
                padding: var(--spacing-2xl);
            }
            
            .error-code {
                font-size: 6rem;
            }
            
            .error-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="error-container">
        <div class="error-content">
            <div class="error-code">500</div>
            <h1 class="error-title">–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞</h1>
            <p class="error-message">
                –ü—Ä–æ–∏–∑–æ—à–ª–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞. –ú—ã —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞–¥ –µ—ë —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ–º. 
                –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ –∏–ª–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É.
            </p>
            <div class="error-actions">
                <a href="{{ url_for('index') }}" class="btn btn-primary">
                    üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é
                </a>
                <a href="tel:+79656102108" class="btn btn-secondary">
                    üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å –Ω–∞–º
                </a>
            </div>
        </div>
    </div>
</body>
</html>




================================================================================
–§–ê–ô–õ: templates/errors/404.html
================================================================================
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ - –ú–∞—Å—Å–∞–∂–Ω—ã–π —Å–∞–ª–æ–Ω "–†–µ–ª–∞–∫—Å"</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/variables.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/components/buttons.css') }}">
    <style>
        .error-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: var(--spacing-xl);
        }
        
        .error-content {
            text-align: center;
            background: var(--bg-white);
            padding: var(--spacing-3xl);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            max-width: 600px;
            width: 100%;
        }
        
        .error-code {
            font-size: 8rem;
            font-weight: var(--font-weight-bold);
            color: var(--primary-color);
            margin-bottom: var(--spacing-lg);
            line-height: 1;
        }
        
        .error-title {
            font-size: var(--font-size-2xl);
            color: var(--text-dark);
            margin-bottom: var(--spacing-md);
        }
        
        .error-message {
            font-size: var(--font-size-lg);
            color: var(--text-medium);
            margin-bottom: var(--spacing-2xl);
            line-height: var(--line-height-relaxed);
        }
        
        .error-actions {
            display: flex;
            gap: var(--spacing-md);
            justify-content: center;
            flex-wrap: wrap;
        }
        
        @media (max-width: 768px) {
            .error-container {
                padding: var(--spacing-lg);
            }
            
            .error-content {
                padding: var(--spacing-2xl);
            }
            
            .error-code {
                font-size: 6rem;
            }
            
            .error-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="error-container">
        <div class="error-content">
            <div class="error-code">404</div>
            <h1 class="error-title">–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</h1>
            <p class="error-message">
                –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –±—ã–ª–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞. 
                –í–æ–∑–º–æ–∂–Ω–æ, –≤—ã –ø–µ—Ä–µ—à–ª–∏ –ø–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ –∏–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞.
            </p>
            <div class="error-actions">
                <a href="{{ url_for('index') }}" class="btn btn-primary">
                    üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é
                </a>
                <a href="{{ url_for('index') }}#booking" class="btn btn-secondary">
                    üìÖ –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –º–∞—Å—Å–∞–∂
                </a>
            </div>
        </div>
    </div>
</body>
</html>




================================================================================
–§–ê–ô–õ: templates/partials/hero.html
================================================================================
<!-- Hero Section -->
<section class="hero" id="hero">
    <div class="container">
        <div class="hero-content">
            <div class="hero-text">
                <h1 class="hero-title">
                    <span class="hero-title-main">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å—Ç—É–¥–∏—é Enliven Spa!</span>
                    <span class="hero-title-accent">{{ site.texts.brend }}</span>
                </h1>
                <p class="hero-subtitle">
                    –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∞–∂ –≤ –ê–ª—å–º–µ—Ç—å–µ–≤—Å–∫–µ –¥–ª—è –≤–∞—à–µ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è –∏ –∫—Ä–∞—Å–æ—Ç—ã
                </p>
                <p class="hero-description">
                    –ù–∞—à —É—é—Ç–Ω—ã–π —Å–∞–ª–æ–Ω ‚Äî —ç—Ç–æ –∏–¥–µ–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥—É—à–∏ –∏ —Ç–µ–ª–∞. –ú—ã —Å–æ—á–µ—Ç–∞–µ–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ —Å –≤–Ω–∏–º–∞–Ω–∏–µ–º –∫ –∫–∞–∂–¥–æ–π –¥–µ—Ç–∞–ª–∏, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –¥–ª—è –≤–∞—Å –Ω–µ–ø—Ä–µ–≤–∑–æ–π–¥–µ–Ω–Ω—ã–π –æ–ø—ã—Ç —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏.
                </p>

                <div class="hero-features">
                    <div class="hero-feature">
                        <span class="feature-icon">‚≠ê</span>
                        <span class="feature-text">–û–ø—ã—Ç–Ω—ã–π –º–∞—Å—Ç–µ—Ä</span>
                    </div>
                    <div class="hero-feature">
                        <span class="feature-icon">üåø</span>
                        <span class="feature-text">–ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ –º–∞—Å–ª–∞</span>
                    </div>
                    <div class="hero-feature">
                        <span class="feature-icon">üèÜ</span>
                        <span class="feature-text">–í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ</span>
                    </div>
                </div>

                <div class="hero-actions">
                    <a href="{{ url_for('index') }}#booking" class="btn btn-primary btn-xl">
                        <span class="btn-icon">üìÖ</span>
                        –ë—ã—Å—Ç—Ä–∞—è –∑–∞–ø–∏—Å—å
                    </a>
                    <a href="{{ url_for('index') }}#services" class="btn btn-outline btn-xl">
                        <span class="btn-icon">üíÜ</span>
                        –ú–æ–∏ —É—Å–ª—É–≥–∏
                    </a>
                </div>
            </div>

            <div class="hero-image">
                <div class="hero-card">
                    <div class="hero-card-header">
                        <h3 class="hero-card-title">–ë—ã—Å—Ç—Ä–∞—è –∑–∞–ø–∏—Å—å</h3>
                        <p class="hero-card-subtitle">–ó–∞–ø–∏—à–∏—Ç–µ—Å—å –≤ —Å–∞–ª–æ–Ω –æ–Ω–ª–∞–π–Ω</p>
                    </div>
                    <div class="hero-card-content">
                        <div class="hero-card-item">
                            <span class="card-item-icon">üíÜ</span>
                            <span class="card-item-text">–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É</span>
                        </div>
                        <div class="hero-card-item">
                            <span class="card-item-icon">üìÖ</span>
                            <span class="card-item-text">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É</span>
                        </div>
                        <div class="hero-card-item">
                            <span class="card-item-icon">‚è∞</span>
                            <span class="card-item-text">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è</span>
                        </div>
                    </div>
                    <div class="hero-card-footer">
                        <a href="{{ url_for('index') }}#booking" class="btn btn-primary btn-sm">
                            –ó–∞–ø–∏—Å–∞—Ç—å—Å—è —Å–µ–π—á–∞—Å
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scroll Indicator -->
    <div class="hero-scroll">
        <div class="scroll-indicator">
            <!-- <span class="scroll-text">–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑</span>-->
            <div class="scroll-arrow">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7 10L12 15L17 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
        </div>
    </div>
</section>


================================================================================
–§–ê–ô–õ: templates/partials/contacts.html
================================================================================
<section class="contacts" id="contacts">
    <div class="container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="section-header">
            <h2 class="section-title">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
            <p class="section-subtitle-white">–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –¥–ª—è –∑–∞–ø–∏—Å–∏ –Ω–∞ –º–∞—Å—Å–∞–∂</p>
        </div>
        
        <div class="contacts-wrapper">
            <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ -->
            <div class="contacts-info">
                <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ -->
                <div class="contact-card">
                    <div class="contact-card-header">
                        <div class="contact-icon">
                            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M20 15.5c-1.2 0-2.4-.2-3.6-.6-.3-.1-.7 0-1 .2l-2.2 2.2c-2.8-1.5-5.2-3.8-6.6-6.6l2.2-2.2c.3-.3.4-.7.2-1-.3-1.1-.5-2.3-.5-3.5 0-.6-.4-1-1-1H4c-.6 0-1 .4-1 1 0 9.4 7.6 17 17 17 .6 0 1-.4 1-1v-3.5c0-.6-.4-1-1-1z" 
                                      fill="currentColor"/>
                            </svg>
                        </div>
                        <h3 class="contact-title">–¢–µ–ª–µ—Ñ–æ–Ω</h3>
                    </div>
                    <div class="contact-card-body">
                        <a href="tel:+79656102108" class="contact-link">{{ site.contact.phone }}</a>
                        <p class="contact-note">–ó–≤–æ–Ω–∫–∏ –ø—Ä–∏–Ω–∏–º–∞–µ–º –µ–∂–µ–¥–Ω–µ–≤–Ω–æ</p>
                    </div>
                </div>
                
                <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –∞–¥—Ä–µ—Å–∞ -->
                <div class="contact-card">
                    <div class="contact-card-header">
                        <div class="contact-icon">
                            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" 
                                      fill="currentColor"/>
                            </svg>
                        </div>
                        <h3 class="contact-title">–ê–¥—Ä–µ—Å</h3>
                    </div>
                    <div class="contact-card-body">
                        <p class="contact-text">{{ site.contact.address }}</p>
                        <p class="contact-note">–ù–∞ –≤—å–µ–∑–¥–µ –≤ –≥–æ—Ä–æ–¥, —É–¥–æ–±–Ω–∞—è –ø–∞—Ä–∫–æ–≤–∫–∞</p>
                    </div>
                </div>
                
                <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ -->
                <div class="contact-card">
                    <div class="contact-card-header">
                        <div class="contact-icon">
                            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z" 
                                      fill="currentColor"/>
                            </svg>
                        </div>
                        <h3 class="contact-title">–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã</h3>
                    </div>
                    <div class="contact-card-body">
                        <div class="work-hours">
                            <div class="hours-item">
                                <span class="days">{{ site.working_hours.weekdays }}</span>
                            </div>
                            <div class="hours-item">
                                <span class="days">{{ site.working_hours.weekend }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –Ø–Ω–¥–µ–∫—Å –∫–∞—Ä—Ç–∞ -->
            <div class="contacts-map">
                <!-- CTA –∫–Ω–æ–ø–∫–∏ –Ω–∞–¥ –∫–∞—Ä—Ç–æ–π -->
                <div class="contacts-cta">
                    <h3>–ë—ã—Å—Ç—Ä–∞—è –∑–∞–ø–∏—Å—å</h3>
                    <div class="cta-buttons">
                        <a href="tel:+79179225720" class="btn btn-call">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" style="margin-right: 8px;">
                                <path d="M20 15.5c-1.2 0-2.4-.2-3.6-.6-.3-.1-.7 0-1 .2l-2.2 2.2c-2.8-1.5-5.2-3.8-6.6-6.6l2.2-2.2c.3-.3.4-.7.2-1-.3-1.1-.5-2.3-.5-3.5 0-.6-.4-1-1-1H4c-.6 0-1 .4-1 1 0 9.4 7.6 17 17 17 .6 0 1-.4 1-1v-3.5c0-.6-.4-1-1-1z" 
                                      fill="currentColor"/>
                            </svg>
                            –ü–æ–∑–≤–æ–Ω–∏—Ç—å
                        </a>
                        <a href="#booking" class="btn btn-booking">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" style="margin-right: 8px;">
                                <path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z" 
                                      fill="currentColor"/>
                            </svg>
                            –û–Ω–ª–∞–π–Ω –∑–∞–ø–∏—Å—å
                        </a>
                    </div>
                </div>
                
                <div class="map-container">
                    <div id="yandex-map"></div>
                    <div class="map-overlay">
                        <h4>–ú—ã –Ω–∞—Ö–æ–¥–∏–º—Å—è –∑–¥–µ—Å—å</h4>
                        <p>{{ site.contact.address }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç–∞ JS -->
<!--<script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;apikey=–≤–∞—à_api_–∫–ª—é—á" type="text/javascript"></script> -->
<!-- –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç–∞ JS -->
<script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU"></script>
<script>
ymaps.ready(initMap);

function initMap() {
    console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã –¥–ª—è –ø–æ–¥—ä–µ–∑–¥–∞ 4...');
    
    try {
        // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è –≥. –ê–ª—å–º–µ—Ç—å–µ–≤—Å–∫, —É–ª. –®–µ–≤—á–µ–Ω–∫–æ, –¥. 170, –ø.4
        // –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è 4-–≥–æ –ø–æ–¥—ä–µ–∑–¥–∞
        var mapCenter = [54.902468, 52.252278];
        var placemarkCoords = [54.902468, 52.252278];
        
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ü–µ–Ω—Ç—Ä–∞
        var map = new ymaps.Map('yandex-map', {
            center: mapCenter,
            zoom: 18, // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∑—É–º –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏
            controls: ['zoomControl', 'fullscreenControl']
        });
        
        console.log('–ö–∞—Ä—Ç–∞ —Å–æ–∑–¥–∞–Ω–∞. –¶–µ–Ω—Ç—Ä:', mapCenter);
        
        // –ú–µ—Ç–∫–∞ –Ω–∞ 4-–π –ø–æ–¥—ä–µ–∑–¥
        var placemark = new ymaps.Placemark(placemarkCoords, {
            balloonContent: '<div style="padding: 10px;">' +
                          '<strong style="font-size: 16px; color: #056486;">–°—Ç—É–¥–∏—è –º–∞—Å—Å–∞–∂–∞ Enliven Spa</strong><br>' +
                          '<strong style="color: #000000!important;">—É–ª. –®–µ–≤—á–µ–Ω–∫–æ, –¥. 170, –ø.4</strong><br>' +
                          '<em style="color: #056486; font-weight: 600;">–ü–û–î–™–ï–ó–î 4</em><br>' +
                          '<span style="color: #000000!important;">–≥. –ê–ª—å–º–µ—Ç—å–µ–≤—Å–∫</span>' +
                          '</div>'
        }, {
            preset: 'islands#redIcon',
            iconColor: '#056486'
        });
        
        map.geoObjects.add(placemark);
        
        // –û—Ç–∫—Ä—ã–≤–∞–µ–º –±–∞–ª—É–Ω
        setTimeout(function() {
            placemark.balloon.open();
        }, 500);
        
        // –î–æ–±–∞–≤–ª—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–æ—Ç–∫—Ä—ã–≤–∞—Ç—å –±–∞–ª—É–Ω
        placemark.events.add('click', function() {
            placemark.balloon.open();
        });
        
        console.log('–ú–µ—Ç–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö:', placemarkCoords);
        console.log('–ê–¥—Ä–µ—Å: –≥. –ê–ª—å–º–µ—Ç—å–µ–≤—Å–∫, —É–ª. –®–µ–≤—á–µ–Ω–∫–æ, –¥. 170, –ø.4');
        
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç—ã:', error);
        
        // Fallback —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–æ–¥—ä–µ–∑–¥–∞
        var mapElement = document.getElementById('yandex-map');
        if (mapElement) {
            mapElement.innerHTML = 
                '<div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); height: 100%; display: flex; align-items: center; justify-content: center; color: white; border-radius: 16px; flex-direction: column; padding: 20px; text-align: center;">' +
                '<p style="font-size: 18px; margin-bottom: 10px;">–ö–∞—Ä—Ç–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞</p>' +
                '<p><strong>—É–ª. –®–µ–≤—á–µ–Ω–∫–æ, 170, –ü–û–î–™–ï–ó–î 4</strong></p>' +
                '<p>–ê–ª—å–º–µ—Ç—å–µ–≤—Å–∫</p>' +
                '<p>–¢–µ–ª–µ—Ñ–æ–Ω: +7 (965) 610-21-08</p>' +
                '</div>';
        }
    }
}

// –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –µ—Å–ª–∏ –∫–∞—Ä—Ç–∞ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è, –ø–æ–ø—Ä–æ–±—É–µ–º —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
setTimeout(function() {
    if (typeof ymaps !== 'undefined' && !document.getElementById('yandex-map').hasChildNodes()) {
        ymaps.ready(initMap);
    }
}, 1000);
</script>


================================================================================
–§–ê–ô–õ: templates/partials/navbar.html
================================================================================
<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
        <!-- –ì–∞–º–±—É—Ä–≥–µ—Ä –∫–Ω–æ–ø–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
        <button class="navbar-toggler" type="button" id="navbarToggler" aria-label="Toggle navigation" aria-expanded="false">
            <span class="navbar-toggler-icon">
                <span></span>
                <span></span>
                <span></span>
            </span>
        </button>
        
        <!-- –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–∞ -->
        <div class="navbar-overlay" id="navbarOverlay"></div>
        
        <!-- Navigation Menu -->
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav w-100 justify-content-center">
                <li class="nav-item">
                    <a href="{{ url_for('index') }}" class="nav-link active" aria-current="page">–ì–ª–∞–≤–Ω–∞—è</a>
                </li>
                <li class="nav-item">
                    <a href="{{ url_for('index') }}#about" class="nav-link">–û —Å–µ–±–µ</a>
                </li>
                <li class="nav-item">
                    <a href="{{ url_for('index') }}#services" class="nav-link">–£—Å–ª—É–≥–∏</a>
                </li>
                <li class="nav-item">
                    <a href="{{ url_for('index') }}#reviews" class="nav-link">–û—Ç–∑—ã–≤—ã</a>
                </li>
                <li class="nav-item">
                    <a href="{{ url_for('index') }}#contacts" class="nav-link">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
                </li>
                <li class="nav-item">
                    <a href="{{ url_for('index') }}#booking" class="nav-link nav-link-booking">
                        <span class="booking-icon">üìÖ</span>
                        –ó–∞–ø–∏—Å–∞—Ç—å—Å—è
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>


================================================================================
–§–ê–ô–õ: templates/partials/about.html
================================================================================
<section id="about" class="about-section">
    <div class="about-container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="about-header">
            <h2 class="about-title">–û —Å–µ–±–µ</h2>
            <div class="about-divider"></div>
            <p class="about-subtitle">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∞–∂ —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º –ø–æ–¥—Ö–æ–¥–æ–º</p>
        </div>

        <!-- –£–¢–ü –±–ª–æ–∫ -->
        <div class="about-utp">
            <div class="utp-content">
                <div class="utp-icon">üíÜ‚Äç‚ôÄÔ∏è</div>
                <h3 class="utp-title">–í–∞—à–µ –∑–¥–æ—Ä–æ–≤—å–µ –∏ –∫—Ä–∞—Å–æ—Ç–∞ ‚Äî –º–æ—è –ø—Ä–æ—Ñ–µ—Å—Å–∏—è</h3>
                <p class="utp-text">
                    –ö–∞–∂–¥—ã–π —Å–µ–∞–Ω—Å ‚Äî —ç—Ç–æ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –≤–∞—Å. 
                    –Ø –Ω–µ –ø—Ä–æ—Å—Ç–æ –¥–µ–ª–∞—é –º–∞—Å—Å–∞–∂, —è –ø–æ–º–æ–≥–∞—é –≤–∞–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å —Ç–µ–ª–∞ –∏ –¥—É—à–∏, 
                    —Å–Ω—è—Ç—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∏ –æ–±—Ä–µ—Å—Ç–∏ –≥–∞—Ä–º–æ–Ω–∏—é.
                </p>
            </div>
        </div>

        <div class="about-content">
            <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å - —Ç–µ–∫—Å—Ç -->
            <div class="about-text">
                <div class="about-highlight">
                    <div class="highlight-icon">‚ú®</div>
                    <h3>–û–ø—ã—Ç –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º</h3>
                </div>
                
                <p class="about-description">
                    –ú–µ–Ω—è –∑–æ–≤—É—Ç –ó—É–ª—å—Ñ–∏—è, –∏ —è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∞–∂–∏—Å—Ç —Å –º–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º —Ä–∞–±–æ—Ç—ã. 
                    –ú–æ—è –º–∏—Å—Å–∏—è ‚Äî –ø–æ–º–æ—á—å –∫–∞–∂–¥–æ–º—É –∫–ª–∏–µ–Ω—Ç—É –æ–±—Ä–µ—Å—Ç–∏ –∑–¥–æ—Ä–æ–≤—å–µ, –∫—Ä–∞—Å–æ—Ç—É –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –≥–∞—Ä–º–æ–Ω–∏—é 
                    —á–µ—Ä–µ–∑ –∏—Å–∫—É—Å—Å—Ç–≤–æ –º–∞—Å—Å–∞–∂–∞. –Ø —Å–æ—á–µ—Ç–∞—é –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏ —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ 
                    –º–µ—Ç–æ–¥–∏–∫–∞–º–∏, —Å–æ–∑–¥–∞–≤–∞—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞.
                </p>

                <div class="about-features">
                    <div class="feature-item">
                        <span class="feature-number">01</span>
                        <div class="feature-content">
                            <h4>–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥</h4>
                            <p>–ö–∞–∂–¥—ã–π —Å–µ–∞–Ω—Å –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ –≤–∞—à–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –æ—Ä–≥–∞–Ω–∏–∑–º–∞</p>
                        </div>
                    </div>
                    
                    <div class="feature-item">
                        <span class="feature-number">02</span>
                        <div class="feature-content">
                            <h4>–ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ –º–∞—Å–ª–∞</h4>
                            <p>–ò—Å–ø–æ–ª—å–∑—É—é —Ç–æ–ª—å–∫–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Å–ª–∞ –∏ –∫—Ä–µ–º—ã</p>
                        </div>
                    </div>
                    
                    <div class="feature-item">
                        <span class="feature-number">03</span>
                        <div class="feature-content">
                            <h4>–ö–æ–º—Ñ–æ—Ä—Ç–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞</h4>
                            <p>–£—é—Ç–Ω–∞—è —Å—Ç—É–¥–∏—è, –ø—Ä–∏—è—Ç–Ω–∞—è –º—É–∑—ã–∫–∞ –∏ –ø–æ–ª–Ω–æ–µ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ</p>
                        </div>
                    </div>
                    
                    <div class="feature-item">
                        <span class="feature-number">04</span>
                        <div class="feature-content">
                            <h4>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏</h4>
                            <p>–í–ª–∞–¥–µ—é —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –≤–∏–¥–∞–º–∏ –º–∞—Å—Å–∞–∂–∞: –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π, –ª–µ—á–µ–±–Ω—ã–π, —Ä–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–π</p>
                        </div>
                    </div>
                </div>

                <div class="about-stats">
                    <div class="stat-item">
                        <div class="stat-number" data-count="2000">200+</div>
                        <div class="stat-label">–î–æ–≤–æ–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" data-count="8">10+</div>
                        <div class="stat-label">–õ–µ—Ç –æ–ø—ã—Ç–∞</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" data-count="100">50+</div>
                        <div class="stat-label">–û—Ç–∑—ã–≤–æ–≤ 5‚≠ê</div>
                    </div>
                </div>
            </div>

            <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
            <div class="about-visual">
                <div class="image-container">
                    <img src="{{ url_for('static', filename='img/about/zuly.jpg') }}" 
                         alt="–ú–∞—Å—Ç–µ—Ä –ó—É–ª—å—Ñ–∏—è" 
                         class="about-image">
                    <div class="image-overlay"></div>
                </div>
                
                <div class="floating-card">
                    <div class="card-icon">üéì</div>
                    <h4>–°–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç</h4>
					<p>–Ø–≥—É–¥–∏–Ω–∞ –ó—É–ª—å—Ñ–∏—è –î–∞–º–∏—Ä–æ–≤–Ω–∞</p>
                    <p>–î–∏–ø–ª–æ–º—ã –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º —Ç–µ—Ö–Ω–∏–∫–∞–º –º–∞—Å—Å–∞–∂–∞</p>
                </div>
            </div>
        </div>

        <!-- CTA –±–ª–æ–∫ -->
        <div class="about-cta">
            <div class="cta-content">
                <h3>–ì–æ—Ç–æ–≤—ã –∫ —Å–µ–∞–Ω—Å—É —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏?</h3>
                <p>–ó–∞–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –º–∞—Å—Å–∞–∂ –∏ –ø–æ—á—É–≤—Å—Ç–≤—É–π—Ç–µ —Ä–∞–∑–Ω–∏—Ü—É —É–∂–µ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Å–µ–∞–Ω—Å–∞</p>
                <a href="#booking" class="cta-button">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Å–µ–∞–Ω—Å</a>
            </div>
        </div>
    </div>
</section>


================================================================================
–§–ê–ô–õ: templates/partials/booking.html
================================================================================
<!-- Booking Section -->
<section id="booking" class="section booking-section">
    <div class="booking-page">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="section-header text-center mb-5">
                        <h2 class="section-title">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –º–∞—Å—Å–∞–∂</h2>
                        <p class="section-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É –∏ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –∑–∞–ø–∏—Å–∏</p>
                    </div>

                    <div class="booking-form-wrapper">
                        <!-- Flash —Å–æ–æ–±—â–µ–Ω–∏—è -->
                        {% with messages = get_flashed_messages(with_categories=true) %}
                            {% if messages %}
                                <div class="flash-messages mb-4">
                                    {% for category, message in messages %}
                                        <div class="alert alert-{{ 'success' if category == 'success' else 'danger' }} alert-dismissible fade show" role="alert">
                                            {{ message }}
                                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                        </div>
                                    {% endfor %}
                                </div>
                            {% endif %}
                        {% endwith %}

                        <form method="POST" action="/booking" class="booking-form" id="bookingFormMain">
                            <!-- –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ -->
                            <div style="display: none !important; opacity: 0; position: absolute; left: -9999px;">
                                <input type="text" name="company" autocomplete="off" tabindex="-1">
                            </div>
                            
                            <!-- CSRF —Ç–æ–∫–µ–Ω -->
                            <input type="hidden" name="form_token" value="{{ session.form_token }}">

                            <!-- –õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ -->
                            <div class="form-section mb-4">
                                <h3 class="form-section-title">–õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="name" class="form-label">–ò–º—è *</label>
                                        <input type="text" 
                                               id="name" 
                                               name="name" 
                                               class="form-input" 
                                               required 
                                               minlength="2"
                                               maxlength="50"
                                               pattern="[A-Za-z–ê-–Ø–∞-—è–Å—ë\s\-]+"
                                               placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è">
                                    </div>
                                    
                                    <div class="col-md-6 mb-3">
                                        <label for="phone" class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
                                        <input type="tel" 
                                               id="phone" 
                                               name="phone" 
                                               class="form-input" 
                                               required 
                                               pattern="\+7\s?[\(]{0,1}9[0-9]{2}[\)]{0,1}\s?\d{3}[-]{0,1}\d{2}[-]{0,1}\d{2}"
                                               placeholder="+7 (999) 123-45-67">
                                    </div>
                                </div>
                            </div>

                            <!-- –í—ã–±–æ—Ä —É—Å–ª—É–≥–∏ -->
                            <div class="form-section mb-4">
                                <h3 class="form-section-title">–í—ã–±–æ—Ä —É—Å–ª—É–≥–∏</h3>
                                
                                <div class="row">
                                    <div class="col-md-12 mb-3">
                                        <label for="category" class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è *</label>
                                        <select id="category" name="category" class="form-select" required>
                                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                                            
                                            {% if categories and categories|length > 0 %}
                                                {% for category in categories %}
                                                    {% if category is mapping %}
                                                        <option value="{{ category.name }}" 
                                                                data-category-id="{{ category.id if category.id else loop.index }}">
                                                            {{ category.name }}
                                                </option>
                                                    {% elif category is string %}
                                                        <option value="{{ category }}">{{ category }}</option>
                                                    {% else %}
                                                        <option value="{{ category }}">{{ category }}</option>
                                                    {% endif %}
                                            {% endfor %}
                                            {% else %}
                                                <!-- –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–∏—à–ª–æ —Å —Å–µ—Ä–≤–µ—Ä–∞ -->
                                                <option value="–ú–∞—Å—Å–∞–∂–∏">–ú–∞—Å—Å–∞–∂–∏</option>
                                                <option value="–î–µ—Ç—Å–∫–∏–π –º–∞—Å—Å–∞–∂">–î–µ—Ç—Å–∫–∏–π –º–∞—Å—Å–∞–∂</option>
                                                <option value="–û–±—â–∏–π –º–∞—Å—Å–∞–∂">–û–±—â–∏–π –º–∞—Å—Å–∞–∂</option>
                                                <option value="–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã">–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã</option>
                                                <option value="–°–ü–ê-–ø—Ä–æ—Ü–µ–¥—É—Ä—ã">–°–ü–ê-–ø—Ä–æ—Ü–µ–¥—É—Ä—ã</option>
                                                <option value="–û–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏">–û–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏</option>
                                                <option value="–ö–æ–º–ø–ª–µ–∫—Å—ã">–ö–æ–º–ø–ª–µ–∫—Å—ã</option>
                                            {% endif %}
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-12 mb-3">
                                        <label for="service_id" class="form-label">–£—Å–ª—É–≥–∞ *</label>
                                        <select id="service_id" name="service_id" class="form-select" required disabled>
                                            <option value="">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                                    </select>
                                    </div>
                                </div>
                                
                                <!-- –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å -->
                                <div id="service-details-section" style="display: none;">
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="session_duration" class="form-label">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–∏–Ω—É—Ç)</label>
                                            <input type="number" 
                                                   id="session_duration" 
                                                   name="session_duration" 
                                                   class="form-input" 
                                                   readonly>
                                        </div>
                                    </div>
                                    
                                    <!-- –ë–ª–æ–∫ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ -->
                                    <div class="price-display-block">
                                        <div class="price-label">–°—Ç–æ–∏–º–æ—Å—Ç—å —Å–µ–∞–Ω—Å–∞:</div>
                                        <div class="price-value" id="service-price-display">-</div>
                                    </div>
                                </div>
                                
                                <!-- –°–æ—Å—Ç–∞–≤ –∫–æ–º–ø–ª–µ–∫—Å–∞ -->
                                <div id="complex-items" class="complex-items mt-3" style="display: none;">
                                    <strong>–°–æ—Å—Ç–∞–≤ –∫–æ–º–ø–ª–µ–∫—Å–∞:</strong>
                                    <ul id="complex-items-list" class="complex-items-list"></ul>
                                </div>
                            </div>

                            <!-- –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è -->
                            <div class="form-section mb-4">
                                <h3 class="form-section-title">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</h3>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="date" class="form-label">–î–∞—Ç–∞ *</label>
                                        <input type="date" 
                                               id="date" 
                                               name="date" 
                                               class="form-input" 
                                               required
                                               min="{{ today if today else '' }}"
                                               max="{{ max_booking_date if max_booking_date else '' }}">
                                    </div>
                                    
                                    <div class="col-md-6 mb-3">
                                        <label for="time" class="form-label">–í—Ä–µ–º—è *</label>
                                        <select id="time" name="time" class="form-select" required>
                                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è</option>
                                        </select>
                                        <div class="form-hint" id="timeSlotsHint">
                                            –í—Ä–µ–º—è –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                            <div class="form-section mb-4">
                                <h3 class="form-section-title">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                                
                                <div class="mb-3">
                                    <label for="contraindications" class="form-label">–ü—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è</label>
                                    <textarea id="contraindications" 
                                              name="contraindications" 
                                              class="form-textarea" 
                                              rows="3"
                                              maxlength="500"
                                              placeholder="–£–∫–∞–∂–∏—Ç–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è, –∞–ª–ª–µ—Ä–≥–∏–∏ –∏–ª–∏ –¥—Ä—É–≥–∏–µ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è"></textarea>
                                    <div class="form-hint">
                                        –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∂–∏—Ç–µ —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è, —Ç—Ä–∞–≤–º—ã, –∞–ª–ª–µ—Ä–≥–∏–∏
                                        <span class="char-counter">0/500</span>
                                    </div>
                                </div>
                                
                                <!-- –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ -->
                                <div class="mb-3 form-check">
                                    <input type="checkbox" class="form-check-input" id="privacy_agreement" name="privacy_agreement" required>
                                    <label class="form-check-label" for="privacy_agreement">
                                        –Ø —Å–æ–≥–ª–∞—à–∞—é—Å—å —Å <a href="javascript:void(0)" class="privacy-link" onclick="event.preventDefault(); event.stopPropagation(); var el = document.getElementById('privacy-policy-text'); el.style.display = el.style.display === 'none' ? 'block' : 'none'; return false;">–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a> 
                                        –∏ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö *
                                    </label>
                                    <div id="privacy-policy-text" class="privacy-policy-text" style="display: none; margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px; font-size: 0.9rem; line-height: 1.6; color: #555;">
                                        <strong>–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏:</strong><br><br>
                                        –ù–∞—Å—Ç–æ—è—â–∏–º —è –¥–∞—é —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –º–æ–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω) –≤ —Ü–µ–ª—è—Ö –∑–∞–ø–∏—Å–∏ –Ω–∞ –º–∞—Å—Å–∞–∂, —Å–≤—è–∑–∏ —Å–æ –º–Ω–æ–π –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ –∏ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ–± —É—Å–ª—É–≥–∞—Ö.<br><br>
                                        –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –§–µ–¥–µ—Ä–∞–ª—å–Ω—ã–º –∑–∞–∫–æ–Ω–æ–º ‚Ññ 152-–§–ó ¬´–û –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö¬ª. –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∑–∞—â–∏—â–µ–Ω–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º –±–µ–∑ –º–æ–µ–≥–æ —Å–æ–≥–ª–∞—Å–∏—è.
                                    </div>
                                </div>
                            </div>

                            <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
                            <div class="form-navigation text-center">
                                <button type="submit" 
                                        class="booking-submit-btn btn btn-primary" 
                                        id="submitBookingMain">
                                    <span class="me-2">üìÖ</span>
                                    –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Å–µ–∞–Ω—Å
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('bookingFormMain');
    const submitBtn = document.getElementById('submitBookingMain');
    const dateInput = document.getElementById('date');
    const timeSelect = document.getElementById('time');
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç–ª–µ–º–µ–Ω—Ç—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
    const categorySelect = document.getElementById('category');
    const serviceSelect = document.getElementById('service_id');
    const serviceDetailsSection = document.getElementById('service-details-section');
    const sessionDurationInput = document.getElementById('session_duration');
    const servicePriceDisplay = document.getElementById('service-price-display');
    const complexItems = document.getElementById('complex-items');
    const complexItemsList = document.getElementById('complex-items-list');
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    if (!categorySelect) {
        console.error('‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê: categorySelect –Ω–µ –Ω–∞–π–¥–µ–Ω!');
        return; // –ü—Ä–µ–∫—Ä–∞—â–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –µ—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
    }
    if (!serviceSelect) {
        console.error('‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê: serviceSelect –Ω–µ –Ω–∞–π–¥–µ–Ω!');
        return;
    }
    
    // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —É—Å–ª—É–≥ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏–∑ —à–∞–±–ª–æ–Ω–∞
    const servicesData = {{ services | tojson if services else '[]' }};
    const categoriesData = {{ categories | tojson if categories else '[]' }};
    
    // –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    console.log('=== DEBUG INFO ===');
    console.log('Services data type:', typeof servicesData);
    console.log('Services data is array:', Array.isArray(servicesData));
    console.log('Services data length:', servicesData ? servicesData.length : 0);
    console.log('Services data:', servicesData);
    console.log('Categories data type:', typeof categoriesData);
    console.log('Categories data is array:', Array.isArray(categoriesData));
    console.log('Categories data length:', categoriesData ? categoriesData.length : 0);
    console.log('Categories data:', categoriesData);
    console.log('categorySelect element:', categorySelect);
    console.log('serviceSelect element:', serviceSelect);
    
    // –°–†–ê–ó–£ –∑–∞–ø–æ–ª–Ω—è–µ–º select –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏–∑ categoriesData, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
    // –ù–ï –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º, –µ—Å–ª–∏ –≤ select —É–∂–µ –µ—Å—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ HTML
    if (categorySelect) {
        const currentOptions = Array.from(categorySelect.options).map(opt => opt.value).filter(v => v);
        console.log('–¢–µ–∫—É—â–∏–µ –æ–ø—Ü–∏–∏ –≤ select (–∏–∑ HTML):', currentOptions.length);
        
        if (categoriesData && Array.isArray(categoriesData) && categoriesData.length > 0) {
            // –ï—Å–ª–∏ –≤ select —Ç–æ–ª—å–∫–æ –ø—É—Å—Ç–∞—è –æ–ø—Ü–∏—è, –∑–∞–ø–æ–ª–Ω—è–µ–º –∏–∑ categoriesData
            if (currentOptions.length === 0) {
                console.log('üöÄ –°–†–ê–ó–£ –∑–∞–ø–æ–ª–Ω—è–µ–º select –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏–∑ categoriesData...');
                categorySelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>';
                categoriesData.forEach(function(cat) {
                    const catName = typeof cat === 'string' ? cat : (cat.name || cat);
                    if (catName) {
                        const option = document.createElement('option');
                        option.value = catName;
                        option.textContent = catName;
                        if (cat.id) {
                            option.setAttribute('data-category-id', cat.id);
                        }
                        categorySelect.appendChild(option);
                        console.log('‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –∏–∑ categoriesData:', catName);
                    }
                });
                console.log('‚úÖ Select –∑–∞–ø–æ–ª–Ω–µ–Ω –∏–∑ categoriesData! –û–ø—Ü–∏–π –≤ select:', categorySelect.options.length);
            } else {
                console.log('‚úÖ Select —É–∂–µ –∑–∞–ø–æ–ª–Ω–µ–Ω –∏–∑ HTML, –æ–ø—Ü–∏–π:', currentOptions.length);
            }
        }
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
    function normalizeCategory(cat) {
        const catLower = (cat || '').toLowerCase().trim();
        
        const categoryMap = {
            '–º–∞—Å—Å–∞–∂': '–ú–∞—Å—Å–∞–∂–∏',
            '–¥–µ—Ç—Å–∫': '–î–µ—Ç—Å–∫–∏–π –º–∞—Å—Å–∞–∂',
            '—Ä–µ–±–µ–Ω': '–î–µ—Ç—Å–∫–∏–π –º–∞—Å—Å–∞–∂',
            '–æ–±—â–∏–π': '–û–±—â–∏–π –º–∞—Å—Å–∞–∂',
            '–∞–ø–ø–∞—Ä–∞—Ç': '–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã',
            'lpg': '–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã',
            '–≤–∞–∫—É—É–º': '–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã',
            '—Å–ø–∞': '–°–ü–ê-–ø—Ä–æ—Ü–µ–¥—É—Ä—ã',
            '–±–æ—á–∫–∞': '–°–ü–ê-–ø—Ä–æ—Ü–µ–¥—É—Ä—ã',
            '–æ–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å': '–û–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏',
            '–∫–æ–º–ø–ª–µ–∫—Å': '–ö–æ–º–ø–ª–µ–∫—Å—ã'
        };
        
        for (const [key, value] of Object.entries(categoryMap)) {
            if (catLower.includes(key)) {
                return value;
            }
        }
        
        return '–ú–∞—Å—Å–∞–∂–∏'; // –î–µ—Ñ–æ–ª—Ç–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è
    // –í–ê–ñ–ù–û: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –¥–∞–Ω–Ω—ã—Ö —É—Å–ª—É–≥–∏
    function extractCategoryFromName(name) {
        if (!name) {
            return null; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º null, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
        }
        const nameLower = (name || '').toLowerCase();
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤ –ø–æ—Ä—è–¥–∫–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç–∏ (–æ—Ç –±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –∫ –º–µ–Ω–µ–µ)
        if (nameLower.includes('–∫–æ–º–ø–ª–µ–∫—Å') || nameLower.includes('–∫–∞–∫ –ø–æ—Å–ª–µ –æ—Ç–¥—ã—Ö–∞') || nameLower.includes('—É–¥–∞—Ä –ø–æ —Ü–µ–ª–ª—é–ª–∏—Ç—É')) {
            return '–ö–æ–º–ø–ª–µ–∫—Å—ã';
        } else if (nameLower.includes('–æ–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å') || nameLower.includes('–∏—Å—Ü–µ–ª—è—é—â') || nameLower.includes('–æ–º–æ–ª–æ–∂–µ–Ω') || nameLower.includes('–∫–æ—Ä—Ä–µ–∫—Ü') || nameLower.includes('–∂–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç') || nameLower.includes('—É—Å–ø–µ—à–Ω–æ—Å—Ç') || nameLower.includes('–∞–∫—Å–µ—Å—Å')) {
            return '–û–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏';
        } else if (nameLower.includes('–±–æ—á–∫–∞') || nameLower.includes('–ø–∏–ª–∏–Ω–≥') || nameLower.includes('–æ–±–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ') || nameLower.includes('–∫–µ–¥—Ä–æ–≤')) {
            return '–°–ü–ê-–ø—Ä–æ—Ü–µ–¥—É—Ä—ã';
        } else if (nameLower.includes('lpg') || nameLower.includes('–≤–∞–∫—É—É–º') || nameLower.includes('–∫–∞–≤–∏—Ç–∞—Ü') || nameLower.includes('rf') || nameLower.includes('–ª–∏—Ñ—Ç–∏–Ω–≥') || nameLower.includes('–≤–∏–±—Ä–æ–º–∞—Å—Å–∞–∂')) {
            // –ò—Å–∫–ª—é—á–∞–µ–º "–ú–∞—Å—Å–∞–∂ –ª–∏—Ü–∞ —Ä—É—á–Ω–æ–π + –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π" - –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ú–∞—Å—Å–∞–∂–∏"
            if (!nameLower.includes('–º–∞—Å—Å–∞–∂ –ª–∏—Ü–∞ —Ä—É—á–Ω–æ–π')) {
                return '–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã';
            }
        } else if (nameLower.includes('–¥–µ—Ç—Å–∫') || nameLower.includes('—Ä–µ–±–µ–Ω') || nameLower.includes('–º–ª–∞–¥–µ–Ω–µ—Ü') || nameLower.includes('1-12') || nameLower.includes('1-5') || nameLower.includes('6-12') || nameLower.includes('13-16')) {
            return '–î–µ—Ç—Å–∫–∏–π –º–∞—Å—Å–∞–∂';
        } else if (nameLower.includes('–æ–±—â–∏–π') && !nameLower.includes('–æ–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å')) {
            return '–û–±—â–∏–π –º–∞—Å—Å–∞–∂';
        }
        
        // –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–¥–æ—à–ª–æ, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º null (–±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –¥–µ—Ñ–æ–ª—Ç–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è)
        return null;
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞–∑–≤–∞–Ω–∏–π –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É –≤–∏–¥—É)
    function normalizeCategoryName(cat) {
        if (!cat) return '–ú–∞—Å—Å–∞–∂–∏';
        const catStr = String(cat).trim();
        
        // –ú–∞–ø–ø–∏–Ω–≥ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –Ω–∞–∑–≤–∞–Ω–∏–π –∫–∞—Ç–µ–≥–æ—Ä–∏–π
        const categoryMap = {
            // –í–µ—Ä—Ö–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä
            '–ú–ê–°–°–ê–ñ–ò': '–ú–∞—Å—Å–∞–∂–∏',
            '–î–ï–¢–°–ö–ò–ô –ú–ê–°–°–ê–ñ': '–î–µ—Ç—Å–∫–∏–π –º–∞—Å—Å–∞–∂',
            '–û–ë–©–ò–ô –ú–ê–°–°–ê–ñ': '–û–±—â–∏–π –º–∞—Å—Å–∞–∂',
            '–ê–ü–ü–ê–†–ê–¢–ù–´–ï –ü–†–û–¶–ï–î–£–†–´': '–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã',
            '–°–ü–ê-–ü–†–û–¶–ï–î–£–†–´': '–°–ü–ê-–ø—Ä–æ—Ü–µ–¥—É—Ä—ã',
            '–û–ó–î–û–†–û–í–ò–¢–ï–õ–¨–ù–´–ï –¢–ï–•–ù–ò–ö–ò': '–û–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏',
            '–ö–û–ú–ü–õ–ï–ö–°–´': '–ö–æ–º–ø–ª–µ–∫—Å—ã',
            // –ù–∏–∂–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä
            '–º–∞—Å—Å–∞–∂–∏': '–ú–∞—Å—Å–∞–∂–∏',
            '–¥–µ—Ç—Å–∫–∏–π –º–∞—Å—Å–∞–∂': '–î–µ—Ç—Å–∫–∏–π –º–∞—Å—Å–∞–∂',
            '–æ–±—â–∏–π –º–∞—Å—Å–∞–∂': '–û–±—â–∏–π –º–∞—Å—Å–∞–∂',
            '–∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã': '–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã',
            '—Å–ø–∞-–ø—Ä–æ—Ü–µ–¥—É—Ä—ã': '–°–ü–ê-–ø—Ä–æ—Ü–µ–¥—É—Ä—ã',
            '–æ–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏': '–û–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏',
            '–∫–æ–º–ø–ª–µ–∫—Å—ã': '–ö–æ–º–ø–ª–µ–∫—Å—ã',
            // –°—Ç–∞—Ä—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
            'massage': '–ú–∞—Å—Å–∞–∂–∏',
            '–ú–∞—Å—Å–∞–∂': '–ú–∞—Å—Å–∞–∂–∏',
            '–º–∞—Å—Å–∞–∂': '–ú–∞—Å—Å–∞–∂–∏'
        };
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
        if (categoryMap[catStr]) {
            return categoryMap[catStr];
        }
        
        // –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º normalizeCategory –¥–ª—è —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
        return normalizeCategory(catStr);
    }
    
    // –£–ª—É—á—à–µ–Ω–Ω–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —É—Å–ª—É–≥ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
    const servicesByCategory = {};
    if (servicesData && Array.isArray(servicesData) && servicesData.length > 0) {
        console.log('Processing', servicesData.length, 'services...');
        console.log('First service example:', servicesData[0]);
        console.log('First service keys:', servicesData[0] ? Object.keys(servicesData[0]) : 'no service');
        servicesData.forEach((service, index) => {
            // –ü—Ä–æ–±—É–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ –¥–∞–Ω–Ω—ã—Ö —É—Å–ª—É–≥–∏
            let category = service.category || 
                          service.Category || 
                          service.service_category || 
                          null;
            
            // –°–ü–ï–¶–ò–ê–õ–¨–ù–ê–Ø –û–ë–†–ê–ë–û–¢–ö–ê –¥–ª—è —É—Å–ª—É–≥–∏ "–ú–∞—Å—Å–∞–∂ –ª–∏—Ü–∞ —Ä—É—á–Ω–æ–π + –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π"
            // –≠—Ç–∞ —É—Å–ª—É–≥–∞ –í–°–ï–ì–î–ê –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ú–∞—Å—Å–∞–∂–∏", –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –Ω–∞–∑–≤–∞–Ω–∏—è
            const serviceName = (service.name || service.service_name || '').toLowerCase();
            if (serviceName.includes('–º–∞—Å—Å–∞–∂ –ª–∏—Ü–∞ —Ä—É—á–Ω–æ–π') && serviceName.includes('–∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π')) {
                // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é "–ú–∞—Å—Å–∞–∂–∏"
                category = '–ú–∞—Å—Å–∞–∂–∏';
                console.log(`üîß –°–ü–ï–¶–ò–ê–õ–¨–ù–ê–Ø –û–ë–†–ê–ë–û–¢–ö–ê: –£—Å–ª—É–≥–∞ "${service.name || service.service_name}" - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é "–ú–∞—Å—Å–∞–∂–∏"`);
            } else if (category) {
                // –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —É—Å–ª—É–≥: –µ—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –µ—Å—Ç—å –≤ –¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ—ë (–Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º)
                category = normalizeCategoryName(category);
            } else {
                // –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–æ–±—É–µ–º –∏–∑–≤–ª–µ—á—å –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è
                const extractedCategory = extractCategoryFromName(service.service_name || service.name || '');
                if (extractedCategory) {
                    category = extractedCategory;
                } else {
                    // –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –∏–∑–≤–ª–µ—á—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—É—é
                    category = '–ú–∞—Å—Å–∞–∂–∏';
                }
            }
            
            // –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ - –µ—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –≤—Å–µ –µ—â–µ –ø—É—Å—Ç–∞—è –∏–ª–∏ "–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"
            if (!category || category === '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏') {
                category = '–ú–∞—Å—Å–∞–∂–∏'; // –î–µ—Ñ–æ–ª—Ç–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
            }
            
            console.log(`Service ${index + 1}: "${service.name || service.service_name || 'No name'}" -> Category: "${category}" (–±—ã–ª–æ: "${service.category || 'N/A'}")`);
            
            if (!servicesByCategory[category]) {
                servicesByCategory[category] = [];
            }
            servicesByCategory[category].push(service);
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —É—Å–ª—É–≥–∏ "–ú–∞—Å—Å–∞–∂ –ª–∏—Ü–∞ —Ä—É—á–Ω–æ–π + –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π"
            if (service.name && service.name.includes('–ú–∞—Å—Å–∞–∂ –ª–∏—Ü–∞ —Ä—É—á–Ω–æ–π')) {
                console.log('üîç –û–¢–õ–ê–î–ö–ê: –ù–∞–π–¥–µ–Ω–∞ —É—Å–ª—É–≥–∞ "–ú–∞—Å—Å–∞–∂ –ª–∏—Ü–∞ —Ä—É—á–Ω–æ–π + –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π"');
                console.log('  - –ò—Å—Ö–æ–¥–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –∏–∑ –¥–∞–Ω–Ω—ã—Ö:', service.category);
                console.log('  - –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è:', category);
                console.log('  - –ö–ª—é—á –≤ servicesByCategory:', category);
                console.log('  - –£—Å–ª—É–≥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –º–∞—Å—Å–∏–≤:', servicesByCategory[category].length, '—É—Å–ª—É–≥');
                console.log('  - –ü—Ä–æ–≤–µ—Ä–∫–∞: servicesByCategory["–ú–∞—Å—Å–∞–∂–∏"] —Å—É—â–µ—Å—Ç–≤—É–µ—Ç?', !!servicesByCategory['–ú–∞—Å—Å–∞–∂–∏']);
                if (servicesByCategory['–ú–∞—Å—Å–∞–∂–∏']) {
                    console.log('  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ª—É–≥ –≤ "–ú–∞—Å—Å–∞–∂–∏":', servicesByCategory['–ú–∞—Å—Å–∞–∂–∏'].length);
                    const found = servicesByCategory['–ú–∞—Å—Å–∞–∂–∏'].find(s => s.name && s.name.includes('–ú–∞—Å—Å–∞–∂ –ª–∏—Ü–∞ —Ä—É—á–Ω–æ–π'));
                    console.log('  - –£—Å–ª—É–≥–∞ –Ω–∞–π–¥–µ–Ω–∞ –≤ "–ú–∞—Å—Å–∞–∂–∏"?', !!found);
                }
            }
        });
        
        console.log('=== –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —É—Å–ª—É–≥ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º ===');
        console.log('servicesByCategory:', servicesByCategory);
        console.log('–ö–ª—é—á–∏ categories:', Object.keys(servicesByCategory));
        Object.keys(servicesByCategory).forEach(cat => {
            console.log(`  ${cat}: ${servicesByCategory[cat].length} —É—Å–ª—É–≥`);
            // –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ú–∞—Å—Å–∞–∂–∏"
            if (cat === '–ú–∞—Å—Å–∞–∂–∏' || cat.toLowerCase().includes('–º–∞—Å—Å–∞–∂')) {
                console.log(`    üîç –£—Å–ª—É–≥–∏ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "${cat}":`);
                servicesByCategory[cat].forEach((s, idx) => {
                    const name = s.name || s.service_name || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è';
                    console.log(`      ${idx + 1}. ${name} (id: ${s.id || s._id || s.service_id || 'N/A'})`);
                    if (name.includes('–ú–∞—Å—Å–∞–∂ –ª–∏—Ü–∞ —Ä—É—á–Ω–æ–π')) {
                        console.log(`         ‚úÖ –ù–ê–ô–î–ï–ù–ê –£–°–õ–£–ì–ê "–ú–∞—Å—Å–∞–∂ –ª–∏—Ü–∞ —Ä—É—á–Ω–æ–π + –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π" –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "${cat}"`);
                    }
                });
            }
        });
        
        // –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ - –∏—â–µ–º —É—Å–ª—É–≥—É –≤–æ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö
        console.log('=== –§–ò–ù–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê: –ü–æ–∏—Å–∫ —É—Å–ª—É–≥–∏ "–ú–∞—Å—Å–∞–∂ –ª–∏—Ü–∞ —Ä—É—á–Ω–æ–π + –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π" ===');
        let foundInCategory = null;
        for (const catKey in servicesByCategory) {
            const found = servicesByCategory[catKey].find(s => {
                const name = s.name || s.service_name || '';
                return name.includes('–ú–∞—Å—Å–∞–∂ –ª–∏—Ü–∞ —Ä—É—á–Ω–æ–π');
            });
            if (found) {
                foundInCategory = catKey;
                console.log(`‚úÖ –£—Å–ª—É–≥–∞ –Ω–∞–π–¥–µ–Ω–∞ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: "${catKey}"`);
                break;
            }
        }
        if (!foundInCategory) {
            console.error('‚ùå –£—Å–ª—É–≥–∞ "–ú–∞—Å—Å–∞–∂ –ª–∏—Ü–∞ —Ä—É—á–Ω–æ–π + –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π" –ù–ï –ù–ê–ô–î–ï–ù–ê –Ω–∏ –≤ –æ–¥–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏!');
        }
    } else {
        console.warn('‚ö†Ô∏è No services data or not an array!');
    }
    
    console.log('=== Services by category ===');
    console.log('=== Services grouped by category ===');
    console.log('Services by category:', servicesByCategory);
    console.log('Category keys:', Object.keys(servicesByCategory));
    console.log('Number of categories:', Object.keys(servicesByCategory).length);
    const validCategories = Object.keys(servicesByCategory).filter(cat => cat !== '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏');
    console.log('Categories (excluding "–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"):', validCategories);
    
    // –¢–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ categoriesData, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
    let categoriesFromData = [];
    if (categoriesData && Array.isArray(categoriesData) && categoriesData.length > 0) {
        categoriesFromData = categoriesData.map(function(cat) {
            return typeof cat === 'string' ? cat : (cat.name || cat);
        });
        console.log('Categories from categoriesData:', categoriesFromData);
    }
    
    // –û–±—ä–µ–¥–∏–Ω—è–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ servicesByCategory –∏ categoriesData
    const allCategories = [...new Set([...validCategories, ...categoriesFromData])];
    console.log('All categories to add:', allCategories);
    
    // –ù–ï –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º select, –µ—Å–ª–∏ –æ–Ω —É–∂–µ –∑–∞–ø–æ–ª–Ω–µ–Ω –∏–∑ HTML
    // –¢–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    if (categorySelect) {
        const currentOptions = Array.from(categorySelect.options).map(opt => opt.value).filter(v => v);
        console.log('–û–ø—Ü–∏–∏ –≤ select –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π (–∏–∑ HTML):', currentOptions.length);
        console.log('–¢–µ–∫—É—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ select:', currentOptions);
        
        // –ï—Å–ª–∏ –≤ select —É–∂–µ –µ—Å—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–∏–∑ HTML), –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º
        if (currentOptions.length > 0) {
            console.log('‚úÖ Select —É–∂–µ –∑–∞–ø–æ–ª–Ω–µ–Ω –∏–∑ HTML, –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º. –û–ø—Ü–∏–π:', currentOptions.length);
            
            // –¢–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ allCategories
            if (allCategories.length > 0) {
                allCategories.forEach(function(catName) {
                    if (!currentOptions.includes(catName)) {
                        const option = document.createElement('option');
                        option.value = catName;
                        option.textContent = catName;
                        categorySelect.appendChild(option);
                        console.log('‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è:', catName);
                    }
                });
            }
        } else {
            // –ï—Å–ª–∏ select –ø—É—Å—Ç–æ–π, –∑–∞–ø–æ–ª–Ω—è–µ–º –∏–∑ allCategories –∏–ª–∏ validCategories
            if (allCategories.length > 0) {
                console.log('üöÄ –ó–∞–ø–æ–ª–Ω—è–µ–º –ø—É—Å—Ç–æ–π select –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏–∑ allCategories...');
                categorySelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>';
                allCategories.forEach(function(catName) {
                    const option = document.createElement('option');
                    option.value = catName;
                    option.textContent = catName;
                    categorySelect.appendChild(option);
                    console.log('‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è:', catName);
                });
                console.log('‚úÖ Select –∑–∞–ø–æ–ª–Ω–µ–Ω! –û–ø—Ü–∏–π –≤ select:', categorySelect.options.length);
            } else if (validCategories.length > 0) {
                console.log('üöÄ –ó–∞–ø–æ–ª–Ω—è–µ–º select –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏–∑ servicesByCategory...');
                categorySelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>';
                validCategories.forEach(function(catName) {
                    const option = document.createElement('option');
                    option.value = catName;
                    option.textContent = catName;
                    categorySelect.appendChild(option);
                    console.log('‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è:', catName);
                });
                console.log('‚úÖ Select –∑–∞–ø–æ–ª–Ω–µ–Ω! –û–ø—Ü–∏–π –≤ select:', categorySelect.options.length);
            } else {
                console.error('‚ùå –ù–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è!');
                console.error('validCategories:', validCategories);
                console.error('categoriesFromData:', categoriesFromData);
                console.error('servicesByCategory:', servicesByCategory);
            }
        }
    } else {
        console.error('‚ùå categorySelect –Ω–µ –Ω–∞–π–¥–µ–Ω!');
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ select —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –≤ servicesByCategory
    if (categorySelect) {
        const selectOptions = Array.from(categorySelect.options).map(opt => opt.value).filter(v => v);
        console.log('Categories in select:', selectOptions);
        console.log('Categories match:', selectOptions.every(cat => servicesByCategory.hasOwnProperty(cat)));
    }
    
    // –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –≤—Ä–µ–º—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
    let formFillStartTime = Date.now();
    const formFields = form.querySelectorAll('input, select, textarea');
    
    formFields.forEach(field => {
        field.addEventListener('input', function() {
            if (!window.formFillStartTime) {
                window.formFillStartTime = Date.now();
            }
        });
    });

    // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –Ω–∞–∂–∞—Ç–∏–π
    form.addEventListener('submit', function(e) {
        // –î–æ–±–∞–≤–ª—è–µ–º –≤—Ä–µ–º—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º—É
        const fillTime = Date.now() - (window.formFillStartTime || Date.now());
        const timeField = document.createElement('input');
        timeField.type = 'hidden';
        timeField.name = 'fill_time';
        timeField.value = fillTime;
        this.appendChild(timeField);
        
        // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
        submitBtn.disabled = true;
        submitBtn.innerHTML = '–û—Ç–ø—Ä–∞–≤–∫–∞... <span class="spinner-border spinner-border-sm ms-2"></span>';
    });

    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–∞—Ç—É - —Å–µ–≥–æ–¥–Ω—è –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –¥–∞—Ç—É +30 –¥–Ω–µ–π
    const todayDateObj = new Date();
    const today = todayDateObj.toISOString().split('T')[0];
    const maxDateObj = new Date();
    maxDateObj.setDate(maxDateObj.getDate() + 30);
    const maxDate = maxDateObj.toISOString().split('T')[0];
    if (dateInput) {
        dateInput.setAttribute('min', today);
        dateInput.setAttribute('max', maxDate);
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞—Ç—ã
        function validateDate(input) {
            const selectedDate = input.value;
            if (!selectedDate) return true;
            
            const todayDate = new Date(today);
            const selected = new Date(selectedDate);
            selected.setHours(0, 0, 0, 0);
            const maxAllowed = new Date(maxDate);
            
            if (selected < todayDate) {
                // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –ø—Ä–æ—à–µ–¥—à–∞—è –¥–∞—Ç–∞, —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
                input.value = today;
                input.setCustomValidity('–ù–µ–ª—å–∑—è –≤—ã–±—Ä–∞—Ç—å –ø—Ä–æ—à–µ–¥—à—É—é –¥–∞—Ç—É');
                input.reportValidity();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
                const errorMsg = document.createElement('div');
                errorMsg.className = 'date-error-message';
                errorMsg.style.cssText = 'color: #dc3545; font-size: 0.875rem; margin-top: 0.25rem;';
                errorMsg.textContent = '–ù–µ–ª—å–∑—è –≤—ã–±—Ä–∞—Ç—å –ø—Ä–æ—à–µ–¥—à—É—é –¥–∞—Ç—É. –í—ã–±—Ä–∞–Ω–∞ —Å–µ–≥–æ–¥–Ω—è—à–Ω—è—è –¥–∞—Ç–∞.';
                
                // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –µ—Å–ª–∏ –µ—Å—Ç—å
                const existingMsg = input.parentElement.querySelector('.date-error-message');
                if (existingMsg) {
                    existingMsg.remove();
                }
                
                input.parentElement.appendChild(errorMsg);
                
                // –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                setTimeout(() => {
                    if (errorMsg.parentElement) {
                        errorMsg.remove();
                    }
                }, 5000);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ª–æ—Ç—ã –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π –¥–∞—Ç—ã
                updateTimeSlots(today);
                return false;
            } else if (selected > maxAllowed) {
                // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –¥–∞—Ç–∞ –¥–∞–ª—å—à–µ 30 –¥–Ω–µ–π, –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º—É–º–æ–º
                input.value = maxDate;
                input.setCustomValidity('–î–æ—Å—Ç—É–ø–Ω–∞ –∑–∞–ø–∏—Å—å —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 30 –¥–Ω–µ–π.');
                input.reportValidity();
                
                const errorMsg = document.createElement('div');
                errorMsg.className = 'date-error-message';
                errorMsg.style.cssText = 'color: #dc3545; font-size: 0.875rem; margin-top: 0.25rem;';
                errorMsg.textContent = '–î–æ—Å—Ç—É–ø–Ω–∞ –∑–∞–ø–∏—Å—å —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 30 –¥–Ω–µ–π.';
                
                const existingMsg = input.parentElement.querySelector('.date-error-message');
                if (existingMsg) {
                    existingMsg.remove();
                }
                
                input.parentElement.appendChild(errorMsg);
                
                setTimeout(() => {
                    if (errorMsg.parentElement) {
                        errorMsg.remove();
                    }
                }, 5000);
                
                updateTimeSlots(maxDate);
                return false;
            } else {
                input.setCustomValidity('');
                const existingMsg = input.parentElement.querySelector('.date-error-message');
                if (existingMsg) {
                    existingMsg.remove();
                }
                return true;
            }
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∞—Ç—É –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
        dateInput.addEventListener('change', function() {
            if (validateDate(this)) {
                const serviceDuration = serviceSelect && serviceSelect.value ? 
                    parseInt(serviceSelect.options[serviceSelect.selectedIndex].getAttribute('data-duration')) || 60 : 60;
                updateTimeSlots(this.value, serviceDuration);
            }
        });
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∞—Ç—É –ø—Ä–∏ –≤–≤–æ–¥–µ (–¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
        dateInput.addEventListener('input', function() {
            validateDate(this);
        });
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∞—Ç—É –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Ñ–æ–∫—É—Å–∞
        dateInput.addEventListener('blur', function() {
            validateDate(this);
        });
        
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Ñ–æ—Ä–º—ã
        form.addEventListener('submit', function(e) {
            if (!validateDate(dateInput)) {
                e.preventDefault();
                dateInput.focus();
                return false;
            }
        });
    }
    
    function updateTimeSlots(selectedDate, serviceDuration = 60) {
        if (!timeSelect) return;
        
        const now = new Date();
        const isToday = selectedDate === today;
        
        // –ü–æ–ª—É—á–∞–µ–º –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É—Å–ª—É–≥–∏ –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —É—Å–ª—É–≥–∏, –µ—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω–∞
        if (!serviceDuration && serviceSelect && serviceSelect.value) {
            const selectedOption = serviceSelect.options[serviceSelect.selectedIndex];
            if (selectedOption) {
                serviceDuration = parseInt(selectedOption.getAttribute('data-duration')) || 60;
            }
        }
        
        // –û—á–∏—â–∞–µ–º —Ç–µ–∫—É—â–∏–µ –æ–ø—Ü–∏–∏
        const currentValue = timeSelect.value;
        timeSelect.innerHTML = '';
        
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–ø—Ü–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        const defaultOption = document.createElement('option');
        defaultOption.value = '';
        defaultOption.textContent = serviceSelect && serviceSelect.value ? '–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è' : '–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É';
        defaultOption.disabled = true;
        defaultOption.selected = true;
        timeSelect.appendChild(defaultOption);
        
        // –ï—Å–ª–∏ —É—Å–ª—É–≥–∞ –Ω–µ –≤—ã–±—Ä–∞–Ω–∞, –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–æ—Ç—ã –≤—Ä–µ–º–µ–Ω–∏
        if (!serviceSelect || !serviceSelect.value) {
            return;
        }
        
        // –†–∞–±–æ—á–∏–µ —á–∞—Å—ã: —Å 8:00 –¥–æ 20:00
        const workStartHour = 8;
        const workEndHour = 20;
        
        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã (—Å 8:00 –¥–æ 20:00)
        for (let hour = workStartHour; hour <= workEndHour; hour++) {
            for (let minute = 0; minute < 60; minute += 30) {
                // –î–ª—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —á–∞—Å–∞ (20:00) —Å–æ–∑–¥–∞–µ–º —Ç–æ–ª—å–∫–æ —Å–ª–æ—Ç 20:00, –Ω–µ 20:30
                if (hour === workEndHour && minute > 0) {
                    break;
                }
                
                const timeString = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;
                
                // –í—ã—á–∏—Å–ª—è–µ–º –≤—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å–µ–∞–Ω—Å–∞
                const startTime = new Date(`${selectedDate}T${timeString}:00`);
                const endTime = new Date(startTime.getTime() + serviceDuration * 60000);
                const endHour = endTime.getHours();
                const endMinute = endTime.getMinutes();
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–µ–∞–Ω—Å –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã
                if (endHour > workEndHour || (endHour === workEndHour && endMinute > 0)) {
                    continue; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–ª–æ—Ç, –µ—Å–ª–∏ —Å–µ–∞–Ω—Å –Ω–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è
                }
                
                const option = document.createElement('option');
                option.value = timeString;
                option.textContent = timeString;
                
                // –ë–ª–æ–∫–∏—Ä—É–µ–º –ø—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è —Å–µ–≥–æ–¥–Ω—è
                if (isToday) {
                    const slotTime = new Date();
                    slotTime.setHours(hour, minute, 0, 0);
                    
                    if (slotTime < now) {
                        option.disabled = true;
                        option.textContent += ' (–ø—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è)';
                    }
                }
                
                timeSelect.appendChild(option);
            }
        }
        
        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –µ—Å–ª–∏ –æ–Ω–æ –≤—Å–µ –µ—â–µ –¥–æ—Å—Ç—É–ø–Ω–æ
        if (currentValue) {
            const option = timeSelect.querySelector(`option[value="${currentValue}"]`);
            if (option && !option.disabled) {
            timeSelect.value = currentValue;
            }
        }
    }
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    if (categorySelect) {
        console.log('Setting up category change handler');
        
        // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫, –µ—Å–ª–∏ –µ—Å—Ç—å
        categorySelect.removeEventListener('change', handleCategoryChange);
        
        // –°–æ–∑–¥–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
        function handleCategoryChange(event) {
            console.log('=== handleCategoryChange called ===');
            console.log('Event:', event);
            console.log('Event target:', event.target);
            
            const selectedCategory = event.target ? event.target.value : (event.value || '');
            console.log('Category selected:', selectedCategory);
            console.log('Selected category length:', selectedCategory ? selectedCategory.length : 0);
            console.log('All categories in servicesByCategory:', Object.keys(servicesByCategory));
            console.log('servicesByCategory keys count:', Object.keys(servicesByCategory).length);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –≤—ã–±—Ä–∞–Ω–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –≤ servicesByCategory
            if (selectedCategory) {
                console.log('Checking if category exists in servicesByCategory:', servicesByCategory.hasOwnProperty(selectedCategory));
                console.log('Category services:', servicesByCategory[selectedCategory]);
            }
            
            // –°–±—Ä–æ—Å –≤—ã–±–æ—Ä–∞ —É—Å–ª—É–≥–∏
            if (serviceSelect) {
                serviceSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É</option>';
                serviceSelect.disabled = !selectedCategory;
            }
            
            if (complexItems) {
                complexItems.style.display = 'none';
            }
            
            // –°–∫—Ä—ã–≤–∞–µ–º –±–ª–æ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± —É—Å–ª—É–≥–µ
            if (serviceDetailsSection) {
                serviceDetailsSection.style.display = 'none';
            }
            
            // –û—á–∏—â–∞–µ–º –ø–æ–ª—è
            if (sessionDurationInput) {
                sessionDurationInput.value = '';
            }
            if (servicePriceDisplay) {
                servicePriceDisplay.textContent = '-';
            }
            
            // –ï—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –≤—ã–±—Ä–∞–Ω–∞
            if (selectedCategory && serviceSelect) {
                // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–ª—è –ø–æ–∏—Å–∫–∞
                const normalizedSelectedCategory = normalizeCategoryName(selectedCategory);
                console.log('Selected category:', selectedCategory);
                console.log('Normalized selected category:', normalizedSelectedCategory);
                console.log('Available categories in servicesByCategory:', Object.keys(servicesByCategory));
                
                // –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ú–∞—Å—Å–∞–∂–∏"
                if (selectedCategory === '–ú–∞—Å—Å–∞–∂–∏' || normalizedSelectedCategory === '–ú–∞—Å—Å–∞–∂–∏') {
                    console.log('üîç –û–¢–õ–ê–î–ö–ê: –í—ã–±—Ä–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è "–ú–∞—Å—Å–∞–∂–∏"');
                    console.log('  - selectedCategory:', selectedCategory);
                    console.log('  - normalizedSelectedCategory:', normalizedSelectedCategory);
                    console.log('  - servicesByCategory["–ú–∞—Å—Å–∞–∂–∏"]:', servicesByCategory['–ú–∞—Å—Å–∞–∂–∏']);
                    if (servicesByCategory['–ú–∞—Å—Å–∞–∂–∏']) {
                        console.log('  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ª—É–≥ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ú–∞—Å—Å–∞–∂–∏":', servicesByCategory['–ú–∞—Å—Å–∞–∂–∏'].length);
                        servicesByCategory['–ú–∞—Å—Å–∞–∂–∏'].forEach((s, idx) => {
                            console.log(`    ${idx + 1}. ${s.name || s.service_name || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è'}`);
                        });
                    }
                }
                
                // –ò—â–µ–º —É—Å–ª—É–≥–∏ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ø—Ä–æ–±—É–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)
                let categoryServices = null;
                
                // 1. –ü—Ä–æ–±—É–µ–º —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π
                if (servicesByCategory[selectedCategory]) {
                    categoryServices = servicesByCategory[selectedCategory];
                    console.log(`‚úÖ Found services by exact match: "${selectedCategory}"`);
                }
                // 2. –ü—Ä–æ–±—É–µ–º –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                else if (servicesByCategory[normalizedSelectedCategory]) {
                    categoryServices = servicesByCategory[normalizedSelectedCategory];
                    console.log(`‚úÖ Found services by normalized match: "${normalizedSelectedCategory}"`);
                }
                // 3. –ü—Ä–æ–±—É–µ–º –Ω–∞–π—Ç–∏ –ø–æ —á–∞—Å—Ç–∏—á–Ω–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é (–±–µ–∑ —É—á–µ—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞)
                else {
                    const selectedLower = selectedCategory.toLowerCase().trim();
                    const normalizedLower = normalizedSelectedCategory.toLowerCase().trim();
                    
                    for (const catKey in servicesByCategory) {
                        const catKeyLower = catKey.toLowerCase().trim();
                        if (catKeyLower === selectedLower || 
                            catKeyLower === normalizedLower ||
                            catKey.includes(selectedCategory) ||
                            selectedCategory.includes(catKey)) {
                            categoryServices = servicesByCategory[catKey];
                            console.log(`‚úÖ Found services by partial match: "${catKey}" (–∏—Å–∫–∞–ª–∏: "${selectedCategory}")`);
                            break;
                        }
                    }
                }
                
                // 4. –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –≤—ã–≤–æ–¥–∏–º –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
                if (!categoryServices) {
                    console.error('‚ùå –£—Å–ª—É–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã!');
                    console.error('  –ò—Å–∫–∞–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é:', selectedCategory);
                    console.error('  –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è:', normalizedSelectedCategory);
                    console.error('  –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ servicesByCategory:', Object.keys(servicesByCategory));
                    console.error('  –í—Å–µ –∫–ª—é—á–∏ servicesByCategory:', Object.keys(servicesByCategory).map(k => `"${k}"`).join(', '));
                }
                
                console.log('Found services for category:', categoryServices);
                console.log('Services count:', categoryServices ? categoryServices.length : 0);
                
                if (categoryServices && Array.isArray(categoryServices) && categoryServices.length > 0) {
                    categoryServices.forEach(function(service) {
                        const option = document.createElement('option');
                        option.value = service.id || service._id || service.service_id;
                        option.textContent = service.name || service.service_name || '–£—Å–ª—É–≥–∞ –±–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è';
                        option.setAttribute('data-duration', service.duration || service.duration_minutes || 60);
                        option.setAttribute('data-price', service.price || service.cost || 0);
                        option.setAttribute('data-is-complex', service.is_complex || false);
                        if (service.complex_items) {
                            option.setAttribute('data-complex-items', JSON.stringify(service.complex_items));
                        }
                        serviceSelect.appendChild(option);
                    });
                    serviceSelect.disabled = false;
                    console.log(`‚úÖ Added ${categoryServices.length} services`);
            } else {
                    console.warn('‚ö†Ô∏è No services found for this category');
                    const option = document.createElement('option');
                    option.value = '';
                    option.textContent = '–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —É—Å–ª—É–≥ –≤ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏';
                    option.disabled = true;
                    serviceSelect.appendChild(option);
                }
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ª–æ—Ç—ã –≤—Ä–µ–º–µ–Ω–∏
            if (dateInput && dateInput.value) {
                updateTimeSlots(dateInput.value);
            }
        }
        
        // –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ change
        categorySelect.addEventListener('change', function(e) {
            console.log('=== CHANGE EVENT TRIGGERED ===');
            console.log('Event:', e);
            console.log('Selected value:', this.value);
            console.log('Selected index:', this.selectedIndex);
            console.log('Selected option:', this.options[this.selectedIndex]);
            handleCategoryChange(e);
        });
        console.log('‚úÖ Category change handler attached');
        
        // –¢–∞–∫–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–ª–∏–∫ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
        categorySelect.addEventListener('click', function() {
            console.log('Category select clicked, current value:', this.value);
            console.log('Current selected index:', this.selectedIndex);
            const options = Array.from(this.options).map(opt => ({value: opt.value, text: opt.text, selected: opt.selected}));
            console.log('Available options:', options);
            console.log('Total options:', this.options.length);
        });
        
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ input –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
        categorySelect.addEventListener('input', function(e) {
            console.log('=== INPUT EVENT TRIGGERED ===');
            console.log('Event:', e);
            console.log('Selected value:', this.value);
            console.log('Selected index:', this.selectedIndex);
            handleCategoryChange(e);
        });
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π —á–µ—Ä–µ–∑ –¥—Ä—É–≥–∏–µ —Å–æ–±—ã—Ç–∏—è
        categorySelect.addEventListener('blur', function() {
            console.log('Category select blurred, value:', this.value);
            console.log('Selected index:', this.selectedIndex);
            if (this.value) {
                console.log('Calling handleCategoryChange from blur');
                handleCategoryChange({target: this});
            } else {
                console.log('No value selected, skipping handleCategoryChange');
            }
        });
        
        // –ü—Ä—è–º–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ setInterval (–≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ä–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
        let lastValue = categorySelect.value;
        let lastIndex = categorySelect.selectedIndex;
        const checkInterval = setInterval(function() {
            if (categorySelect.value !== lastValue || categorySelect.selectedIndex !== lastIndex) {
                console.log('=== VALUE CHANGED DETECTED (polling) ===');
                console.log('Old value:', lastValue);
                console.log('New value:', categorySelect.value);
                console.log('Old index:', lastIndex);
                console.log('New index:', categorySelect.selectedIndex);
                lastValue = categorySelect.value;
                lastIndex = categorySelect.selectedIndex;
                if (categorySelect.value) {
                    console.log('Calling handleCategoryChange from polling');
                    handleCategoryChange({target: categorySelect});
                }
            }
        }, 200);
        
        // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É —á–µ—Ä–µ–∑ 60 —Å–µ–∫—É–Ω–¥
        setTimeout(function() {
            clearInterval(checkInterval);
            console.log('Stopped value change monitoring (polling)');
        }, 60000);
        
        // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤—ã–∑—ã–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ MutationObserver
        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.type === 'attributes' && mutation.attributeName === 'value') {
                    console.log('Value attribute changed:', categorySelect.value);
                    handleCategoryChange({target: categorySelect});
                }
            });
        });
        
        // –ù–∞–±–ª—é–¥–∞–µ–º –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –≤ select
        observer.observe(categorySelect, {
            attributes: true,
            attributeFilter: ['value', 'selectedIndex']
        });
    } else {
        console.error('‚ùå categorySelect element not found!');
    }
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞ —É—Å–ª—É–≥–∏
    if (serviceSelect) {
        serviceSelect.addEventListener('change', function() {
            const selectedOption = this.options[this.selectedIndex];
            if (!selectedOption || !selectedOption.value) {
                // –°–∫—Ä—ã–≤–∞–µ–º –±–ª–æ–∫–∏, –µ—Å–ª–∏ —É—Å–ª—É–≥–∞ –Ω–µ –≤—ã–±—Ä–∞–Ω–∞
                if (serviceDetailsSection) {
                    serviceDetailsSection.style.display = 'none';
                }
                if (complexItems) {
                    complexItems.style.display = 'none';
                }
                return;
            }
            
            const duration = parseInt(selectedOption.getAttribute('data-duration')) || 60;
            const price = parseInt(selectedOption.getAttribute('data-price')) || 0;
            const isComplex = selectedOption.getAttribute('data-is-complex') === 'true';
            const complexItemsData = selectedOption.getAttribute('data-complex-items');
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            if (sessionDurationInput) {
                sessionDurationInput.value = duration;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –±–ª–æ–∫ —Å—Ç–æ–∏–º–æ—Å—Ç–∏
            if (servicePriceDisplay) {
                servicePriceDisplay.textContent = price.toLocaleString('ru-RU') + ' —Ä—É–±.';
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–æ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± —É—Å–ª—É–≥–µ
            if (serviceDetailsSection) {
                serviceDetailsSection.style.display = 'block';
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ—Å—Ç–∞–≤ –∫–æ–º–ø–ª–µ–∫—Å–∞, –µ—Å–ª–∏ —ç—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å
            if (isComplex && complexItemsData) {
                try {
                    const items = JSON.parse(complexItemsData);
                    complexItemsList.innerHTML = '';
                    items.forEach(item => {
                        const li = document.createElement('li');
                        li.textContent = item;
                        complexItemsList.appendChild(li);
                    });
                    complexItems.style.display = 'block';
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å–æ—Å—Ç–∞–≤–∞ –∫–æ–º–ø–ª–µ–∫—Å–∞:', e);
                    complexItems.style.display = 'none';
                }
            } else {
                complexItems.style.display = 'none';
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ª–æ—Ç—ã –≤—Ä–µ–º–µ–Ω–∏ —Å —É—á–µ—Ç–æ–º –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —É—Å–ª—É–≥–∏
            if (dateInput && dateInput.value) {
                updateTimeSlots(dateInput.value, duration);
            }
        });
    }
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–ª–æ—Ç—ã –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    if (dateInput && dateInput.value) {
        updateTimeSlots(dateInput.value);
    }
    
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã, –ø–æ–ø—Ä–æ–±—É–µ–º —Å–æ–∑–¥–∞—Ç—å –∏—Ö –∏–∑ —É—Å–ª—É–≥
    console.log('=== Checking categories ===');
    console.log('categoriesData:', categoriesData);
    console.log('categoriesData length:', categoriesData ? categoriesData.length : 0);
    console.log('servicesData length:', servicesData ? servicesData.length : 0);
    
    // –ü–û–í–¢–û–†–ù–û –∑–∞–ø–æ–ª–Ω—è–µ–º select –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ (–Ω–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ –ø–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞)
    console.log('=== Filling category select (second attempt) ===');
    if (categorySelect) {
        const uniqueCategories = Object.keys(servicesByCategory).filter(cat => cat !== '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏');
        const currentOptions = Array.from(categorySelect.options).map(opt => opt.value).filter(v => v);
        
        if (uniqueCategories.length > 0 && currentOptions.length <= 1) {
            console.log('üöÄ –ü–û–í–¢–û–†–ù–û –∑–∞–ø–æ–ª–Ω—è–µ–º select –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏...');
            categorySelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>';
            uniqueCategories.forEach(function(catName) {
                const option = document.createElement('option');
                option.value = catName;
                option.textContent = catName;
                categorySelect.appendChild(option);
            });
            console.log('‚úÖ Select –∑–∞–ø–æ–ª–Ω–µ–Ω –ø–æ–≤—Ç–æ—Ä–Ω–æ! –û–ø—Ü–∏–π:', categorySelect.options.length);
        }
    }
    
    // –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
    console.log('=== Final check ===');
    console.log('categorySelect exists:', !!categorySelect);
    console.log('serviceSelect exists:', !!serviceSelect);
    console.log('servicesByCategory keys:', Object.keys(servicesByCategory));
    console.log('Total services:', servicesData ? servicesData.length : 0);
    console.log('Total categories in select:', categorySelect ? categorySelect.options.length : 0);
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ select —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –≤ servicesByCategory
    if (categorySelect) {
        const selectCategories = Array.from(categorySelect.options)
            .map(opt => ({value: opt.value, text: opt.text, disabled: opt.disabled}))
            .filter(opt => opt.value && opt.value !== '');
        console.log('Categories in select:', selectCategories);
        console.log('Categories in servicesByCategory:', Object.keys(servicesByCategory));
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
        const selectValues = selectCategories.map(opt => opt.value);
        const missingInSelect = Object.keys(servicesByCategory).filter(cat => !selectValues.includes(cat));
        const missingInData = selectValues.filter(cat => !servicesByCategory.hasOwnProperty(cat));
        
        if (missingInSelect.length > 0) {
            console.warn('‚ö†Ô∏è –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –µ—Å—Ç—å –≤ –¥–∞–Ω–Ω—ã—Ö, –Ω–æ –Ω–µ—Ç –≤ select:', missingInSelect);
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            missingInSelect.forEach(function(catName) {
                if (catName !== '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏') {  // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º "–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"
                    const option = document.createElement('option');
                    option.value = catName;
                    option.textContent = catName;
                    categorySelect.appendChild(option);
                    console.log('‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è:', catName);
                }
            });
        }
        if (missingInData.length > 0) {
            console.warn('‚ö†Ô∏è –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –µ—Å—Ç—å –≤ select, –Ω–æ –Ω–µ—Ç –≤ –¥–∞–Ω–Ω—ã—Ö:', missingInData);
        }
        
        if (missingInSelect.length === 0 && missingInData.length === 0 && selectValues.length > 0) {
            console.log('‚úÖ –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç!');
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ select –Ω–µ disabled
        console.log('categorySelect disabled:', categorySelect.disabled);
        console.log('categorySelect required:', categorySelect.required);
    }
    
    // –§–ò–ù–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –ò –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û–ï –ó–ê–ü–û–õ–ù–ï–ù–ò–ï —á–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É
    setTimeout(function() {
        console.log('=== FINAL CHECK AND FILL ===');
        const finalCategorySelect = document.getElementById('category');
        if (finalCategorySelect) {
            const finalOptions = Array.from(finalCategorySelect.options).map(opt => opt.value).filter(v => v);
            const finalValidCategories = Object.keys(servicesByCategory).filter(cat => cat !== '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏');
            
            console.log('Final options in select:', finalOptions.length);
            console.log('Final valid categories:', finalValidCategories.length);
            
            if (finalValidCategories.length > 0 && finalOptions.length <= 1) {
                console.log('üöÄ –§–ò–ù–ê–õ–¨–ù–û–ï –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û–ï –ó–ê–ü–û–õ–ù–ï–ù–ò–ï SELECT!');
                finalCategorySelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>';
                finalValidCategories.forEach(function(catName) {
                    const option = document.createElement('option');
                    option.value = catName;
                    option.textContent = catName;
                    finalCategorySelect.appendChild(option);
                    console.log('‚úÖ –§–ò–ù–ê–õ–¨–ù–û –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è:', catName);
                });
                console.log('‚úÖ –§–ò–ù–ê–õ–¨–ù–û Select –∑–∞–ø–æ–ª–Ω–µ–Ω! –û–ø—Ü–∏–π:', finalCategorySelect.options.length);
            } else if (finalOptions.length > 1) {
                console.log('‚úÖ Select —É–∂–µ –∑–∞–ø–æ–ª–Ω–µ–Ω, –æ–ø—Ü–∏–π:', finalOptions.length);
            } else {
                console.error('‚ùå –§–ò–ù–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê: –ù–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è!');
                console.error('servicesByCategory:', servicesByCategory);
                console.error('servicesData:', servicesData);
            }
        } else {
            console.error('‚ùå –§–ò–ù–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê: categorySelect –Ω–µ –Ω–∞–π–¥–µ–Ω!');
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
        const debugCategoriesCount = document.getElementById('debugCategoriesCount');
        const debugServicesCount = document.getElementById('debugServicesCount');
        if (debugCategoriesCount && typeof categoriesData !== 'undefined') {
            debugCategoriesCount.textContent = categoriesData ? categoriesData.length : 0;
        }
        if (debugServicesCount && typeof servicesData !== 'undefined') {
            debugServicesCount.textContent = servicesData ? servicesData.length : 0;
        }
    }, 500);
});
</script>


================================================================================
–§–ê–ô–õ: templates/partials/masters.html
================================================================================
<section id="masters" class="masters-section">
    <div class="masters-container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="masters-header">
            <h2 class="masters-title">–ù–∞—à–∏ –º–∞—Å—Ç–µ—Ä–∞</h2>
            <div class="masters-divider"></div>
            <p class="masters-subtitle">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—ã —Å –±–æ–ª—å—à–∏–º –æ–ø—ã—Ç–æ–º –∏ –ª—é–±–æ–≤—å—é –∫ —Å–≤–æ–µ–º—É –¥–µ–ª—É</p>
        </div>

        <!-- –§–∏–ª—å—Ç—Ä—ã —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ -->
        <div class="masters-filters">
            <button class="master-filter-btn active" data-filter="all">–í—Å–µ –º–∞—Å—Ç–µ—Ä–∞</button>
            <button class="master-filter-btn" data-filter="massage">–ú–∞—Å—Å–∞–∂–∏—Å—Ç—ã</button>
            <button class="master-filter-btn" data-filter="spa">SPA-—Ç–µ—Ä–∞–ø–µ–≤—Ç—ã</button>
            <button class="master-filter-btn" data-filter="wellness">–í–µ–ª–Ω–µ—Å-–∫–æ—É—á–∏</button>
            <button class="master-filter-btn" data-filter="reiki">–†–µ–π–∫–∏-–º–∞—Å—Ç–µ—Ä–∞</button>
        </div>

        <!-- –°–µ—Ç–∫–∞ –º–∞—Å—Ç–µ—Ä–æ–≤ -->
        <div class="masters-grid">
            <!-- –ú–∞—Å—Ç–µ—Ä 1 -->
            <div class="master-card" data-category="massage" data-experience="8">
                <div class="master-image">
                    <img src="{{ url_for('static', filename='img/masters/master1.jpg') }}" 
                         alt="–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞" 
                         class="master-photo">
                    <div class="master-overlay">
                        <button class="master-quick-view" data-master="1">–ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä</button>
                    </div>
                    <div class="master-badge master-badge-senior">–°—Ç–∞—Ä—à–∏–π –º–∞—Å—Ç–µ—Ä</div>
                </div>
                
                <div class="master-content">
                    <div class="master-info">
                        <h3 class="master-name">–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞</h3>
                        <p class="master-specialization">–ú–∞—Å—Å–∞–∂–∏—Å—Ç ‚Ä¢ SPA-—Ç–µ—Ä–∞–ø–µ–≤—Ç</p>
                        <div class="master-rating">
                            <span class="rating-value">–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç —É—Ä–æ–≤–Ω—è ¬´–°—Ç–∞—Ä—à–∏–π –º–∞—Å—Ç–µ—Ä¬ª</span>
                        </div>
                    </div>

                    <div class="master-details">
                        <div class="detail-item">
                            <span class="detail-icon">üéì</span>
                            <span class="detail-text">8 –ª–µ—Ç –æ–ø—ã—Ç–∞</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">‚ö°</span>
                            <span class="detail-text">–ë–æ–ª–µ–µ 2000 –ø—Ä–æ—Ü–µ–¥—É—Ä</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">üèÜ</span>
                            <span class="detail-text">–°–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç</span>
                        </div>
                    </div>

                    <div class="master-skills">
                        <h4>–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:</h4>
                        <div class="skills-tags">
                            <span class="skill-tag">–¢–∞–π—Å–∫–∏–π –º–∞—Å—Å–∞–∂</span>
                            <span class="skill-tag">–õ–∏–º—Ñ–æ–¥—Ä–µ–Ω–∞–∂</span>
                            <span class="skill-tag">–ê—Ä–æ–º–∞—Ç–µ—Ä–∞–ø–∏—è</span>
                        </div>
                    </div>

                    <div class="master-actions">
                        <button class="master-btn master-btn-primary" data-master="–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞">
                            –ó–∞–ø–∏—Å–∞—Ç—å—Å—è
                        </button>
                        <button class="master-btn master-btn-secondary master-detail-btn" data-master="1">
                            –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                        </button>
                    </div>
                </div>
            </div>

            <!-- –ú–∞—Å—Ç–µ—Ä 2 -->
            <div class="master-card" data-category="spa" data-experience="6">
                <div class="master-image">
                    <img src="{{ url_for('static', filename='img/masters/master2.jpg') }}" 
                         alt="–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞" 
                         class="master-photo">
                    <div class="master-overlay">
                        <button class="master-quick-view" data-master="2">–ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä</button>
                    </div>
                    <div class="master-badge master-badge-featured">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º</div>
                </div>
                
                <div class="master-content">
                    <div class="master-info">
                        <h3 class="master-name">–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞</h3>
                        <p class="master-specialization">SPA-—Ç–µ—Ä–∞–ø–µ–≤—Ç ‚Ä¢ –ö–æ—Å–º–µ—Ç–æ–ª–æ–≥</p>
                        <div class="master-rating">
                            <span class="rating-value">–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç —É—Ä–æ–≤–Ω—è ¬´–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º¬ª</span>
                        </div>
                    </div>

                    <div class="master-details">
                        <div class="detail-item">
                            <span class="detail-icon">üéì</span>
                            <span class="detail-text">6 –ª–µ—Ç –æ–ø—ã—Ç–∞</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">‚ö°</span>
                            <span class="detail-text">–ë–æ–ª–µ–µ 1500 –ø—Ä–æ—Ü–µ–¥—É—Ä</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">üåø</span>
                            <span class="detail-text">–ù–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è –∫–æ—Å–º–µ—Ç–∏–∫–∞</span>
                        </div>
                    </div>

                    <div class="master-skills">
                        <h4>–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:</h4>
                        <div class="skills-tags">
                            <span class="skill-tag">–û–±–µ—Ä—Ç—ã–≤–∞–Ω–∏—è</span>
                            <span class="skill-tag">–£—Ö–æ–¥ –∑–∞ –ª–∏—Ü–æ–º</span>
                            <span class="skill-tag">–ê–Ω—Ç–∏—Ü–µ–ª–ª—é–ª–∏—Ç–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã</span>
                        </div>
                    </div>

                    <div class="master-actions">
                        <button class="master-btn master-btn-primary" data-master="–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞">
                            –ó–∞–ø–∏—Å–∞—Ç—å—Å—è
                        </button>
                        <button class="master-btn master-btn-secondary master-detail-btn" data-master="2">
                            –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                        </button>
                    </div>
                </div>
            </div>

            <!-- –ú–∞—Å—Ç–µ—Ä 3 -->
            <div class="master-card" data-category="wellness" data-experience="10">
                <div class="master-image">
                    <img src="{{ url_for('static', filename='img/masters/master3.jpg') }}" 
                         alt="–î–º–∏—Ç—Ä–∏–π –°–æ–∫–æ–ª–æ–≤" 
                         class="master-photo">
                    <div class="master-overlay">
                        <button class="master-quick-view" data-master="3">–ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä</button>
                    </div>
                    <div class="master-badge master-badge-expert">–≠–∫—Å–ø–µ—Ä—Ç</div>
                </div>
                
                <div class="master-content">
                    <div class="master-info">
                        <h3 class="master-name">–î–º–∏—Ç—Ä–∏–π –°–æ–∫–æ–ª–æ–≤</h3>
                        <p class="master-specialization">–í–µ–ª–Ω–µ—Å-–∫–æ—É—á ‚Ä¢ –†–µ–∞–±–∏–ª–∏—Ç–æ–ª–æ–≥</p>
                        <div class="master-rating">
                            <span class="rating-value">–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç —É—Ä–æ–≤–Ω—è ¬´–≠–∫—Å–ø–µ—Ä—Ç¬ª</span>
                        </div>
                    </div>

                    <div class="master-details">
                        <div class="detail-item">
                            <span class="detail-icon">üéì</span>
                            <span class="detail-text">10 –ª–µ—Ç –æ–ø—ã—Ç–∞</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">‚ö°</span>
                            <span class="detail-text">–ë–æ–ª–µ–µ 3000 –ø—Ä–æ—Ü–µ–¥—É—Ä</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">üìö</span>
                            <span class="detail-text">–ê–≤—Ç–æ—Ä –º–µ—Ç–æ–¥–∏–∫</span>
                        </div>
                    </div>

                    <div class="master-skills">
                        <h4>–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:</h4>
                        <div class="skills-tags">
                            <span class="skill-tag">–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∞–∂</span>
                            <span class="skill-tag">–†–µ–∞–±–∏–ª–∏—Ç–∞—Ü–∏—è</span>
                            <span class="skill-tag">–ü–æ—Å—Ç—Ç—Ä–∞–≤–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ</span>
                        </div>
                    </div>

                    <div class="master-actions">
                        <button class="master-btn master-btn-primary" data-master="–î–º–∏—Ç—Ä–∏–π –°–æ–∫–æ–ª–æ–≤">
                            –ó–∞–ø–∏—Å–∞—Ç—å—Å—è
                        </button>
                        <button class="master-btn master-btn-secondary master-detail-btn" data-master="3">
                            –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                        </button>
                    </div>
                </div>
            </div>

            <!-- –ú–∞—Å—Ç–µ—Ä 4 -->
            <div class="master-card" data-category="reiki" data-experience="7">
                <div class="master-image">
                    <img src="{{ url_for('static', filename='img/masters/master4.jpg') }}" 
                         alt="–û–ª—å–≥–∞ –ö–æ–≤–∞–ª–µ–≤–∞" 
                         class="master-photo">
                    <div class="master-overlay">
                        <button class="master-quick-view" data-master="4">–ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä</button>
                    </div>
                </div>
                
                <div class="master-content">
                    <div class="master-info">
                        <h3 class="master-name">–û–ª—å–≥–∞ –ö–æ–≤–∞–ª–µ–≤–∞</h3>
                        <p class="master-specialization">–†–µ–π–∫–∏-–º–∞—Å—Ç–µ—Ä ‚Ä¢ –ú–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω—ã–π –∫–æ—É—á</p>
                        <div class="master-rating">
                            <span class="rating-value">–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç —É—Ä–æ–≤–Ω—è ¬´–ü—Ä–µ–º–∏—É–º¬ª</span>
                        </div>
                    </div>

                    <div class="master-details">
                        <div class="detail-item">
                            <span class="detail-icon">üéì</span>
                            <span class="detail-text">7 –ª–µ—Ç –æ–ø—ã—Ç–∞</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">‚ö°</span>
                            <span class="detail-text">–ë–æ–ª–µ–µ 1200 —Å–µ–∞–Ω—Å–æ–≤</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">üßò‚Äç‚ôÄÔ∏è</span>
                            <span class="detail-text">–ú–∞—Å—Ç–µ—Ä –º–µ–¥–∏—Ç–∞—Ü–∏–∏</span>
                        </div>
                    </div>

                    <div class="master-skills">
                        <h4>–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:</h4>
                        <div class="skills-tags">
                            <span class="skill-tag">–≠–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏</span>
                            <span class="skill-tag">–ú–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∞–∂</span>
                            <span class="skill-tag">–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ —á–∞–∫—Ä</span>
                        </div>
                    </div>

                    <div class="master-actions">
                        <button class="master-btn master-btn-primary" data-master="–û–ª—å–≥–∞ –ö–æ–≤–∞–ª–µ–≤–∞">
                            –ó–∞–ø–∏—Å–∞—Ç—å—Å—è
                        </button>
                        <button class="master-btn master-btn-secondary master-detail-btn" data-master="4">
                            –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- CTA –±–ª–æ–∫ -->
        <div class="masters-cta">
            <div class="cta-content">
                <div class="cta-text">
                    <h3>–ü–æ–¥–±–µ—Ä–µ–º –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞ –¥–ª—è –≤–∞—Å</h3>
                    <p>–ü—Ä–æ–π–¥–∏—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –∏ —É–∑–Ω–∞–π—Ç–µ, –∫–∞–∫–æ–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ª—É—á—à–µ –≤—Å–µ–≥–æ –ø–æ–¥–æ–π–¥–µ—Ç –¥–ª—è –≤–∞—à–∏—Ö —Ü–µ–ª–µ–π</p>
                </div>
                <div class="cta-actions">
                    <button class="cta-btn cta-btn-primary consultation-btn">–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è</button>
                    <button class="cta-btn cta-btn-secondary find-master-btn">–ü–æ–¥–æ–±—Ä–∞—Ç—å –º–∞—Å—Ç–µ—Ä–∞</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–µ—Ç–∞–ª–µ–π –º–∞—Å—Ç–µ—Ä–∞ -->
    <div id="masterModal" class="master-modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <div class="modal-body">
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è JavaScript -->
            </div>
        </div>
    </div>
</section>


================================================================================
–§–ê–ô–õ: templates/partials/gallery.html
================================================================================
<section id="gallery" class="gallery-section">
    <div class="gallery-container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="gallery-header">
            <h2 class="gallery-title">–ù–∞—à–∞ –≥–∞–ª–µ—Ä–µ—è</h2>
            <div class="gallery-divider"></div>
            <p class="gallery-subtitle">–ü–æ–≥—Ä—É–∑–∏—Ç–µ—Å—å –≤ –∞—Ç–º–æ—Å—Ñ–µ—Ä—É —É—é—Ç–∞ –∏ —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏ –Ω–∞—à–µ–≥–æ —Å–ø–∞-—Å–∞–ª–æ–Ω–∞</p>
        </div>

        <!-- –§–∏–ª—å—Ç—Ä—ã –≥–∞–ª–µ—Ä–µ–∏ -->
        <div class="gallery-filters">
            <button class="gallery-filter-btn active" data-filter="all">–í—Å–µ —Ñ–æ—Ç–æ</button>
            <button class="gallery-filter-btn" data-filter="interior">–ò–Ω—Ç–µ—Ä—å–µ—Ä</button>
            <button class="gallery-filter-btn" data-filter="procedures">–ü—Ä–æ—Ü–µ–¥—É—Ä—ã</button>
            <button class="gallery-filter-btn" data-filter="masters">–ú–∞—Å—Ç–µ—Ä–∞ –∑–∞ —Ä–∞–±–æ—Ç–æ–π</button>
            <button class="gallery-filter-btn" data-filter="spa">SPA-–∑–æ–Ω—ã</button>
            <button class="gallery-filter-btn" data-filter="details">–î–µ—Ç–∞–ª–∏</button>
        </div>

        <!-- –°–µ—Ç–∫–∞ –≥–∞–ª–µ—Ä–µ–∏ -->
        <div class="gallery-grid">
            <!-- –§–æ—Ç–æ 1 -->
            <div class="gallery-item" data-category="interior" data-index="1">
                <div class="gallery-image">
                    <img src="{{ url_for('static', filename='img/gallery/interior1.jpg') }}" 
                         alt="–ì–ª–∞–≤–Ω—ã–π –∑–∞–ª —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏" 
                         class="gallery-img">
                    <div class="gallery-overlay">
                        <div class="gallery-actions">
                            <button class="gallery-action-btn view-btn" title="–ü—Ä–æ—Å–º–æ—Ç—Ä">
                                üëÅÔ∏è
                            </button>
                            <button class="gallery-action-btn zoom-btn" title="–£–≤–µ–ª–∏—á–∏—Ç—å">
                                üîç
                            </button>
                        </div>
                    </div>
                </div>
                <div class="gallery-info">
                    <h3 class="gallery-item-title">–ì–ª–∞–≤–Ω—ã–π –∑–∞–ª —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏</h3>
                    <p class="gallery-item-desc">–ü—Ä–æ—Å—Ç–æ—Ä–Ω—ã–π –∑–∞–ª —Å –º—è–≥–∫–∏–º –æ—Å–≤–µ—â–µ–Ω–∏–µ–º –∏ —É—é—Ç–Ω–æ–π –∞—Ç–º–æ—Å—Ñ–µ—Ä–æ–π</p>
                </div>
            </div>

            <!-- –§–æ—Ç–æ 2 -->
            <div class="gallery-item" data-category="procedures" data-index="2">
                <div class="gallery-image">
                    <img src="{{ url_for('static', filename='img/gallery/massage1.jpg') }}" 
                         alt="–°–µ–∞–Ω—Å –∞—Ä–æ–º–∞—Ç–µ—Ä–∞–ø–∏–∏" 
                         class="gallery-img">
                    <div class="gallery-overlay">
                        <div class="gallery-actions">
                            <button class="gallery-action-btn view-btn" title="–ü—Ä–æ—Å–º–æ—Ç—Ä">
                                üëÅÔ∏è
                            </button>
                            <button class="gallery-action-btn zoom-btn" title="–£–≤–µ–ª–∏—á–∏—Ç—å">
                                üîç
                            </button>
                        </div>
                    </div>
                </div>
                <div class="gallery-info">
                    <h3 class="gallery-item-title">–°–µ–∞–Ω—Å –∞—Ä–æ–º–∞—Ç–µ—Ä–∞–ø–∏–∏</h3>
                    <p class="gallery-item-desc">–†–∞—Å—Å–ª–∞–±–ª—è—é—â–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ —Å —ç—Ñ–∏—Ä–Ω—ã–º–∏ –º–∞—Å–ª–∞–º–∏</p>
                </div>
            </div>

            <!-- –§–æ—Ç–æ 3 -->
            <div class="gallery-item" data-category="masters" data-index="3">
                <div class="gallery-image">
                    <img src="{{ url_for('static', filename='img/gallery/master-work1.jpg') }}" 
                         alt="–†–∞–±–æ—Ç–∞ –º–∞—Å—Ç–µ—Ä–∞" 
                         class="gallery-img">
                    <div class="gallery-overlay">
                        <div class="gallery-actions">
                            <button class="gallery-action-btn view-btn" title="–ü—Ä–æ—Å–º–æ—Ç—Ä">
                                üëÅÔ∏è
                            </button>
                            <button class="gallery-action-btn zoom-btn" title="–£–≤–µ–ª–∏—á–∏—Ç—å">
                                üîç
                            </button>
                        </div>
                    </div>
                </div>
                <div class="gallery-info">
                    <h3 class="gallery-item-title">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥</h3>
                    <p class="gallery-item-desc">–ù–∞—à–∏ –º–∞—Å—Ç–µ—Ä–∞ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã –∫ –∫–∞–∂–¥–æ–π –¥–µ—Ç–∞–ª–∏</p>
                </div>
            </div>

            <!-- –§–æ—Ç–æ 4 -->
            <div class="gallery-item" data-category="spa" data-index="4">
                <div class="gallery-image">
                    <img src="{{ url_for('static', filename='img/gallery/spa-zone1.jpg') }}" 
                         alt="SPA-–∑–æ–Ω–∞ —Å –¥–∂–∞–∫—É–∑–∏" 
                         class="gallery-img">
                    <div class="gallery-overlay">
                        <div class="gallery-actions">
                            <button class="gallery-action-btn view-btn" title="–ü—Ä–æ—Å–º–æ—Ç—Ä">
                                üëÅÔ∏è
                            </button>
                            <button class="gallery-action-btn zoom-btn" title="–£–≤–µ–ª–∏—á–∏—Ç—å">
                                üîç
                            </button>
                        </div>
                    </div>
                </div>
                <div class="gallery-info">
                    <h3 class="gallery-item-title">–ó–æ–Ω–∞ –≥–∏–¥—Ä–æ–º–∞—Å—Å–∞–∂–∞</h3>
                    <p class="gallery-item-desc">–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –¥–∂–∞–∫—É–∑–∏ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π</p>
                </div>
            </div>

            <!-- –§–æ—Ç–æ 5 -->
            <div class="gallery-item" data-category="interior" data-index="5">
                <div class="gallery-image">
                    <img src="{{ url_for('static', filename='img/gallery/interior2.jpg') }}" 
                         alt="–†–µ—Å–µ–ø—à–µ–Ω" 
                         class="gallery-img">
                    <div class="gallery-overlay">
                        <div class="gallery-actions">
                            <button class="gallery-action-btn view-btn" title="–ü—Ä–æ—Å–º–æ—Ç—Ä">
                                üëÅÔ∏è
                            </button>
                            <button class="gallery-action-btn zoom-btn" title="–£–≤–µ–ª–∏—á–∏—Ç—å">
                                üîç
                            </button>
                        </div>
                    </div>
                </div>
                <div class="gallery-info">
                    <h3 class="gallery-item-title">–ó–æ–Ω–∞ —Ä–µ—Å–µ–ø—à–µ–Ω–∞</h3>
                    <p class="gallery-item-desc">–°—Ç–∏–ª—å–Ω–æ–µ –∏ —É–¥–æ–±–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è –≥–æ—Å—Ç–µ–π</p>
                </div>
            </div>

            <!-- –§–æ—Ç–æ 6 -->
            <div class="gallery-item" data-category="details" data-index="6">
                <div class="gallery-image">
                    <img src="{{ url_for('static', filename='img/gallery/details1.jpg') }}" 
                         alt="–î–µ—Ç–∞–ª–∏ –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞" 
                         class="gallery-img">
                    <div class="gallery-overlay">
                        <div class="gallery-actions">
                            <button class="gallery-action-btn view-btn" title="–ü—Ä–æ—Å–º–æ—Ç—Ä">
                                üëÅÔ∏è
                            </button>
                            <button class="gallery-action-btn zoom-btn" title="–£–≤–µ–ª–∏—á–∏—Ç—å">
                                üîç
                            </button>
                        </div>
                    </div>
                </div>
                <div class="gallery-info">
                    <h3 class="gallery-item-title">–í–æ—Å—Ç–æ—á–Ω—ã–µ –∞–∫—Ü–µ–Ω—Ç—ã</h3>
                    <p class="gallery-item-desc">–≠–ª–µ–º–µ–Ω—Ç—ã –¥–µ–∫–æ—Ä–∞ –≤ –∞–∑–∏–∞—Ç—Å–∫–æ–º —Å—Ç–∏–ª–µ</p>
                </div>
            </div>

            <!-- –§–æ—Ç–æ 7 -->
            <div class="gallery-item" data-category="procedures" data-index="7">
                <div class="gallery-image">
                    <img src="{{ url_for('static', filename='img/gallery/massage2.jpg') }}" 
                         alt="–¢–∞–π—Å–∫–∏–π –º–∞—Å—Å–∞–∂" 
                         class="gallery-img">
                    <div class="gallery-overlay">
                        <div class="gallery-actions">
                            <button class="gallery-action-btn view-btn" title="–ü—Ä–æ—Å–º–æ—Ç—Ä">
                                üëÅÔ∏è
                            </button>
                            <button class="gallery-action-btn zoom-btn" title="–£–≤–µ–ª–∏—á–∏—Ç—å">
                                üîç
                            </button>
                        </div>
                    </div>
                </div>
                <div class="gallery-info">
                    <h3 class="gallery-item-title">–¢–∞–π—Å–∫–∏–π –º–∞—Å—Å–∞–∂</h3>
                    <p class="gallery-item-desc">–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ —Ä–∞—Å—Ç—è–∂–∫–∏</p>
                </div>
            </div>

            <!-- –§–æ—Ç–æ 8 -->
            <div class="gallery-item" data-category="spa" data-index="8">
                <div class="gallery-image">
                    <img src="{{ url_for('static', filename='img/gallery/spa-zone2.jpg') }}" 
                         alt="–°–∞—É–Ω–∞" 
                         class="gallery-img">
                    <div class="gallery-overlay">
                        <div class="gallery-actions">
                            <button class="gallery-action-btn view-btn" title="–ü—Ä–æ—Å–º–æ—Ç—Ä">
                                üëÅÔ∏è
                            </button>
                            <button class="gallery-action-btn zoom-btn" title="–£–≤–µ–ª–∏—á–∏—Ç—å">
                                üîç
                            </button>
                        </div>
                    </div>
                </div>
                <div class="gallery-info">
                    <h3 class="gallery-item-title">–§–∏–Ω—Å–∫–∞—è —Å–∞—É–Ω–∞</h3>
                    <p class="gallery-item-desc">–î–µ—Ä–µ–≤—è–Ω–Ω–∞—è —Å–∞—É–Ω–∞ —Å –∞—Ä–æ–º–∞—Ç–∞–º–∏ —Ö–≤–æ–∏</p>
                </div>
            </div>

            <!-- –§–æ—Ç–æ 9 -->
            <div class="gallery-item featured" data-category="masters" data-index="9">
                <div class="gallery-badge">–ù–æ–≤–æ–µ</div>
                <div class="gallery-image">
                    <img src="{{ url_for('static', filename='img/gallery/master-work2.jpg') }}" 
                         alt="–ù–æ–≤–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞" 
                         class="gallery-img">
                    <div class="gallery-overlay">
                        <div class="gallery-actions">
                            <button class="gallery-action-btn view-btn" title="–ü—Ä–æ—Å–º–æ—Ç—Ä">
                                üëÅÔ∏è
                            </button>
                            <button class="gallery-action-btn zoom-btn" title="–£–≤–µ–ª–∏—á–∏—Ç—å">
                                üîç
                            </button>
                        </div>
                    </div>
                </div>
                <div class="gallery-info">
                    <h3 class="gallery-item-title">–ì–æ—Ä—è—á–∏–µ –∫–∞–º–Ω–∏</h3>
                    <p class="gallery-item-desc">–ù–æ–≤–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ —Å –≤—É–ª–∫–∞–Ω–∏—á–µ—Å–∫–∏–º–∏ –∫–∞–º–Ω—è–º–∏</p>
                </div>
            </div>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –µ—â–µ -->
        <div class="gallery-load-more">
            <button class="load-more-btn" id="loadMore">
                <span class="btn-text">–ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ</span>
                <span class="btn-loader" style="display: none;">‚è≥</span>
            </button>
        </div>

        <!-- CTA –±–ª–æ–∫ -->
        <div class="gallery-cta">
            <div class="cta-content">
                <div class="cta-text">
                    <h3>–•–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –æ –º–æ–µ–π —Ä–∞–±–æ—Ç–µ?</h3>
                    <p>–ü—Ä–∏—Ö–æ–¥–∏—Ç–µ –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –∏ –ø–æ–ª—É—á–∏—Ç–µ —Å–∫–∏–¥–∫—É 15% –Ω–∞ –ø–µ—Ä–≤—É—é –ø—Ä–æ—Ü–µ–¥—É—Ä—É. –Ø —Ä–∞—Å—Å–∫–∞–∂—É –æ —Ç–µ—Ö–Ω–∏–∫–∞—Ö –º–∞—Å—Å–∞–∂–∞ –∏ –ø–æ–¥–±–µ—Ä—É –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É –¥–ª—è –≤–∞—Å</p>
                </div>
                <div class="cta-actions">
                    <a href="#booking" class="cta-btn cta-btn-primary" id="bookTour">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é</a>
                    <button class="cta-btn cta-btn-secondary" id="virtualTour">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≥–∞–ª–µ—Ä–µ—é</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ -->
    <div id="galleryModal" class="gallery-modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <button class="modal-nav modal-prev">‚Äπ</button>
            <button class="modal-nav modal-next">‚Ä∫</button>
            
            <div class="modal-image-container">
                <img id="modalImage" src="" alt="" class="modal-image">
                <div class="modal-loader">üîÑ</div>
            </div>
            
            <div class="modal-info">
                <h3 id="modalTitle"></h3>
                <p id="modalDescription"></p>
                <div class="modal-meta">
                    <span id="modalCategory" class="modal-category"></span>
                    <span id="modalIndex" class="modal-index"></span>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–∏–Ω–∏–∞—Ç—é—Ä—ã –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
    <div id="galleryThumbnails" class="gallery-thumbnails">
        <div class="thumbnails-container">
            <!-- –ú–∏–Ω–∏–∞—Ç—é—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ JavaScript -->
        </div>
    </div>
</section>


================================================================================
–§–ê–ô–õ: templates/partials/navbar2.html
================================================================================
<nav class="navbar navbar-light navbar-expand-md navbar-fixed-top navigation-clean-button" 
     style="background: rgb(34, 34, 34); border-radius: 20px; border: none; padding: 0 0 10px 0;">
    
    <div class="container">
        
        <!-- –ö–Ω–æ–ø–∫–∞ –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö -->
        <button class="navbar-toggler" 
                data-bs-toggle="collapse" 
                data-bs-target="#navbarCollapse" 
                aria-controls="navbarCollapse" 
                aria-expanded="false" 
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        
        <!-- –õ–æ–≥–æ—Ç–∏–ø -->
        <a class="navbar-brand" href="index.html" style="color: rgba(224,217,217,0.9);">
            <span>Creativarian</span>
        </a>
        
        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –º–µ–Ω—é -->
        <div id="navbarCollapse" class="collapse navbar-collapse">
            
            <!-- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏ -->
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link active" href="index.html" style="color: rgba(224,217,217,0.9);">
                        Home
                    </a>
                </li>
                
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" 
                       href="#" 
                       id="servicesDropdown" 
                       role="button" 
                       data-bs-toggle="dropdown" 
                       aria-expanded="false"
                       style="color: rgba(224,217,217,0.9);">
                        Services
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="servicesDropdown">
                        <li><a class="dropdown-item" href="services.html">Price Packages</a></li>
                        <li><a class="dropdown-item" href="order.html">Order Services</a></li>
                        <li><a class="dropdown-item" href="custom.html">Custom Request</a></li>
                    </ul>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="about.html" style="color: rgba(224,217,217,0.9);">
                        About
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="faq.html" style="color: rgba(224,217,217,0.9);">
                        FAQ
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="contact.html" style="color: rgba(224,217,217,0.9);">
                        Contact
                    </a>
                </li>
            </ul>
            
            <!-- –ö–Ω–æ–ø–∫–∏ –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
            <div class="d-flex navbar-actions">
                <a class="nav-link login-link me-3" href="login.html" style="color: rgba(224,217,217,0.9);">
                    Log In
                </a>
                <a class="btn btn-light signup-btn" 
                   href="signup.html" 
                   role="button"
                   style="background: #e9ecef; 
                          color: #000; 
                          border-radius: 10px; 
                          border: 2px solid #000;
                          font-size: 16px; 
                          padding: 5px 16px;
                          transition: all 0.3s ease;">
                    Sign Up
                </a>
            </div>
            
        </div>
    </div>
</nav>



================================================================================
–§–ê–ô–õ: templates/partials/footer.html
================================================================================
<!-- Footer -->
<footer class="footer">
    <div class="container">
        <div class="footer-content">
            <!-- –ö–æ–ª–æ–Ω–∫–∞ 1: –û —Å–∞–ª–æ–Ω–µ -->
            <div class="footer-column">
                <h3 class="footer-title">{{ site.texts.footer_title }}</h3>
                <p class="footer-description">
                    {{ site.texts.footer_description }}
                </p>
                <div class="footer-social">
                    <a href="{{ site.social.telegram }}" class="social-link">Telegram</a>
                    <a href="{{ site.social.vk }}" class="social-link">–í–ö–æ–Ω—Ç–∞–∫—Ç–µ</a>
                    <a href="{{ site.social.Instagram }}" class="social-link">Instagram</a>
                </div>
            </div>
            
            <!-- –ö–æ–ª–æ–Ω–∫–∞ 2: –ö–Ω–æ–ø–∫–∞ –∑–∞–ø–∏—Å–∏ -->
            <div class="footer-column footer-column--btn">
                <a href="{{ url_for('index') }}#booking" class="footer-btn">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –æ–Ω–ª–∞–π–Ω</a>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>{{ site.texts.footer }}</p>
        </div>
        <p class="razrabotka">
            <a href="https://www.biz-page.ru" target="_blank" rel="noopener noreferrer">
                –°–∞–π—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –∑–¥–µ—Å—å
            </a>
        </p>
    </div>
</footer>


================================================================================
–§–ê–ô–õ: templates/partials/services.html
================================================================================
<section id="services" class="services-section">
    <div class="services-container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="services-header">
            <h2 class="services-title">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</h2>
            <div class="services-divider"></div>
            <p class="services-subtitle">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∞–∂ –æ—Ç –º–∞—Å—Ç–µ—Ä–∞ –ó—É–ª—å—Ñ–∏–∏</p>
        </div>

        <!-- –°–µ—Ç–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
        <div class="categories-grid">
            {% if categories_with_stats %}
                {% for category in categories_with_stats %}
                <div class="category-card" data-category="{{ category.name }}">
                    <div class="category-image">
                        {% set image_map = {
                            'massage-icon': 'img/services/lico.jpg',
                            'child-massage-icon': 'img/services/detski.jpg',
                            'full-massage-icon': 'img/services/obshyi.jpg',
                            'apparatus-icon': 'img/services/lpg.jpg',
                            'spa-icon': 'img/services/kedr.jpg',
                            'wellness-icon': 'img/services/iscelenie.jpg',
                            'complex-icon': 'img/services/relax2.jpg'
                        } %}
                        {% set category_image = image_map.get(category.icon, 'img/services/classic-massage.jpg') %}
                        {% set fallback_image = url_for('static', filename='img/services/classic-massage.jpg') %}
                        <img src="{{ url_for('static', filename=category_image) }}" 
                             alt="{{ category.name }}"
                             class="category-img"
                             onerror="this.src='{{ fallback_image }}'">
                    </div>
                    <div class="category-content">
                        <h3 class="category-name">{{ category.name }}</h3>
                        <p class="category-description">{{ category.description }}</p>
                        <div class="category-stats">
                            <span class="category-count">{{ category.services_count }} —É—Å–ª—É–≥</span>
                            <span class="category-price">–æ—Ç {{ category.min_price|int }} ‚ÇΩ</span>
                        </div>
                        <button class="category-btn" 
                                data-category-name="{{ category.name }}"
                                onclick="scrollToBookingAndSelectCategory('{{ category.name }}')">
                            –ó–∞–ø–∏—Å–∞—Ç—å—Å—è
                        </button>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p class="no-services">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.</p>
            {% endif %}
        </div>

        <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –∫–æ–º–ø–ª–µ–∫—Å–æ–≤ -->
        <div class="complexes-section">
            <h3 class="complexes-title">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–æ–º–ø–ª–µ–∫—Å—ã</h3>
            <div class="categories-grid">
                <!-- –ö–æ–º–ø–ª–µ–∫—Å 1: –°–ü–ê –∫–æ–º–ø–ª–µ–∫—Å -->
                <div class="category-card complex-card" data-category="–ö–æ–º–ø–ª–µ–∫—Å—ã">
                    <div class="category-image">
                        <img src="{{ url_for('static', filename='img/services/relax2.jpg') }}" 
                             alt="–°–ü–ê –∫–æ–º–ø–ª–µ–∫—Å"
                             class="category-img"
                             onerror="this.src='{{ url_for('static', filename='img/services/classic-massage.jpg') }}'">
                    </div>
                    <div class="category-content">
                        <h3 class="category-name">–°–ü–ê –∫–æ–º–ø–ª–µ–∫—Å</h3>
                        <div class="complex-duration">150 –º–∏–Ω</div>
                        <div class="complex-price">5 500 ‚ÇΩ</div>
                        <ul class="complex-items-list">
                            <li>–†–∞—Å–ø–∞—Ä–∏–≤–∞–Ω–∏–µ –≤ –∫–µ–¥—Ä–æ–≤–æ–π –±–æ—á–∫–µ</li>
                            <li>–ü–∏–ª–∏–Ω–≥ —Ç–µ–ª–∞</li>
                            <li>–û–±—â–∏–π –º–∞—Å—Å–∞–∂ –Ω–∞ –≤—Å–µ —Ç–µ–ª–æ</li>
                            <li>–û–±–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ</li>
                            <li>–¢—Ä–∞–≤—è–Ω–æ–π —á–∞–π</li>
                        </ul>
                        <button class="category-btn" 
                                onclick="scrollToBookingAndSelectCategory('–ö–æ–º–ø–ª–µ–∫—Å—ã')">
                            –ó–∞–ø–∏—Å–∞—Ç—å—Å—è
                        </button>
                    </div>
                </div>

                <!-- –ö–æ–º–ø–ª–µ–∫—Å 2: –ö–∞–∫ –ø–æ—Å–ª–µ –æ—Ç–¥—ã—Ö–∞ –Ω–∞ –º–æ—Ä–µ -->
                <div class="category-card complex-card" data-category="–ö–æ–º–ø–ª–µ–∫—Å—ã">
                    <div class="category-image">
                        <img src="{{ url_for('static', filename='img/services/otdyx.jpg') }}" 
                             alt="–ö–∞–∫ –ø–æ—Å–ª–µ –æ—Ç–¥—ã—Ö–∞ –Ω–∞ –º–æ—Ä–µ"
                             class="category-img"
                             onerror="this.src='{{ url_for('static', filename='img/services/classic-massage.jpg') }}'">
                    </div>
                    <div class="category-content">
                        <h3 class="category-name">–ö–∞–∫ –ø–æ—Å–ª–µ –æ—Ç–¥—ã—Ö–∞ –Ω–∞ –º–æ—Ä–µ</h3>
                        <div class="complex-duration">120 –º–∏–Ω</div>
                        <div class="complex-price">7 000 ‚ÇΩ</div>
                        <ul class="complex-items-list">
                            <li>–û–±—â–∏–π –º–∞—Å—Å–∞–∂ –Ω–∞ –≤—Å–µ —Ç–µ–ª–æ</li>
                            <li>–ê–∫—Å–µ—Å—Å –±–∞—Ä—Å</li>
                        </ul>
                        <button class="category-btn" 
                                onclick="scrollToBookingAndSelectCategory('–ö–æ–º–ø–ª–µ–∫—Å—ã')">
                            –ó–∞–ø–∏—Å–∞—Ç—å—Å—è
                        </button>
                    </div>
                </div>

                <!-- –ö–æ–º–ø–ª–µ–∫—Å 3: –£–¥–∞—Ä –ø–æ —Ü–µ–ª–ª—é–ª–∏—Ç—É -->
                <div class="category-card complex-card" data-category="–ö–æ–º–ø–ª–µ–∫—Å—ã">
                    <div class="category-image">
                        <img src="{{ url_for('static', filename='img/services/celulit.jpg') }}" 
                             alt="–£–¥–∞—Ä –ø–æ —Ü–µ–ª–ª—é–ª–∏—Ç—É"
                             class="category-img"
                             onerror="this.src='{{ url_for('static', filename='img/services/classic-massage.jpg') }}'">
                    </div>
                    <div class="category-content">
                        <h3 class="category-name">–£–¥–∞—Ä –ø–æ —Ü–µ–ª–ª—é–ª–∏—Ç—É</h3>
                        <div class="complex-duration">15 –¥–Ω–µ–π</div>
                        <div class="complex-price">17 900 ‚ÇΩ</div>
                        <ul class="complex-items-list">
                            <li>–ö–µ–¥—Ä–æ–≤–∞—è –±–æ—á–∫–∞ - 5 —Å–µ–∞–Ω—Å–æ–≤</li>
                            <li>LPG –º–∞—Å—Å–∞–∂ - 5 —Å–µ–∞–Ω—Å–æ–≤</li>
                            <li>–í–∞–∫—É—É–º–Ω—ã–π –º–∞—Å—Å–∞–∂ - 5 —Å–µ–∞–Ω—Å–æ–≤</li>
                            <li>–£–ó –∫–∞–≤–∏—Ç–∞—Ü–∏—è - 3 —Å–µ–∞–Ω—Å–∞</li>
                            <li>–ê–Ω—Ç–∏—Ü–µ–ª–ª—é–ª–∏—Ç–Ω–æ–µ –æ–±–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ - 3 —Å–µ–∞–Ω—Å–∞</li>
                        </ul>
                        <button class="category-btn" 
                                onclick="scrollToBookingAndSelectCategory('–ö–æ–º–ø–ª–µ–∫—Å—ã')">
                            –ó–∞–ø–∏—Å–∞—Ç—å—Å—è
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- CTA –±–ª–æ–∫ -->
        <div class="services-cta">
            <div class="cta-content">
                <div class="cta-text">
                    <h3>–ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ —É—Å–ª—É–≥–∞–º?</h3>
                    <p>–°–≤—è–∂–∏—Ç–µ—Å—å —Å–æ –º–Ω–æ–π –¥–ª—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –∏ –ø–æ–¥–±–æ—Ä–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä</p>
                </div>
                <div class="cta-actions">
                    <a href="#booking" class="cta-consultation">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é</a>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–ª–∞–≤–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –∫ —Ñ–æ—Ä–º–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
function scrollToBookingAndSelectCategory(categoryName) {
    // –ù–∞—Ö–æ–¥–∏–º —Ñ–æ—Ä–º—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    const bookingSection = document.getElementById('booking') || 
                          document.querySelector('.booking-section') ||
                          document.querySelector('section[id*="booking"]');
    
    if (bookingSection) {
        // –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ —Ñ–æ—Ä–º–µ
        bookingSection.scrollIntoView({ 
            behavior: 'smooth', 
            block: 'start' 
        });
        
        // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
        setTimeout(function() {
            // –ù–∞—Ö–æ–¥–∏–º select –∫–∞—Ç–µ–≥–æ—Ä–∏–π
            const categorySelect = document.getElementById('category');
            if (categorySelect) {
                // –ò—â–µ–º –æ–ø—Ü–∏—é —Å –Ω—É–∂–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π (–ø—Ä–æ–±—É–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)
                const options = Array.from(categorySelect.options);
                let found = false;
                
                for (let i = 0; i < options.length; i++) {
                    const optionValue = options[i].value.trim();
                    const optionText = options[i].textContent.trim();
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
                    if (optionValue === categoryName || optionText === categoryName) {
                        categorySelect.selectedIndex = i;
                        found = true;
                        break;
                    }
                }
                
                // –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ, –ø—Ä–æ–±—É–µ–º —á–∞—Å—Ç–∏—á–Ω–æ–µ
                if (!found) {
                    for (let i = 0; i < options.length; i++) {
                        const optionText = options[i].textContent.trim().toLowerCase();
                        if (optionText.includes(categoryName.toLowerCase()) || 
                            categoryName.toLowerCase().includes(optionText)) {
                            categorySelect.selectedIndex = i;
                            found = true;
                            break;
                        }
                    }
                }
                
                // –¢—Ä–∏–≥–≥–µ—Ä–∏–º —Å–æ–±—ã—Ç–∏–µ change –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —É—Å–ª—É–≥
                if (found) {
                    const changeEvent = new Event('change', { bubbles: true });
                    categorySelect.dispatchEvent(changeEvent);
                    
                    // –¢–∞–∫–∂–µ –ø—Ä–æ–±—É–µ–º input –∏ blur —Å–æ–±—ã—Ç–∏—è –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
                    categorySelect.dispatchEvent(new Event('input', { bubbles: true }));
                    categorySelect.dispatchEvent(new Event('blur', { bubbles: true }));
                }
            }
        }, 600); // –ó–∞–¥–µ—Ä–∂–∫–∞ 600ms –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
    } else {
        // –ï—Å–ª–∏ —Å–µ–∫—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ —è–∫–æ—Ä—é #booking
        window.location.href = '#booking';
    }
}
</script>



================================================================================
–§–ê–ô–õ: templates/partials/reviews.html
================================================================================
<section class="reviews-section" id="reviews">
    <div class="container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="reviews-header">
            <h2 class="section-title">‚ú® –û—Ç–∑—ã–≤—ã –∫–ª–∏–µ–Ω—Ç–æ–≤</h2>
            <p class="section-subtitle">–ë–æ–ª–µ–µ 200 –¥–æ–≤–æ–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –¥–æ–≤–µ—Ä–∏–ª–∏ –º–Ω–µ —Å–≤–æ—ë –∑–¥–æ—Ä–æ–≤—å–µ</p>
        </div>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="reviews-stats">
            <div class="stat-item">
                <div class="stat-number">4.9</div>
                <div class="stat-stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                <div class="stat-label">–°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">200+</div>
                <div class="stat-label">–î–æ–≤–æ–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">98%</div>
                <div class="stat-label">–†–µ–∫–æ–º–µ–Ω–¥—É—é—Ç –¥—Ä—É–∑—å—è–º</div>
            </div>
        </div>

        <!-- –ö–∞—Ä—É—Å–µ–ª—å –æ—Ç–∑—ã–≤–æ–≤ -->
        <div class="reviews-carousel-wrapper">
            <button class="carousel-btn carousel-btn-prev" id="prevReview" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∏–π –æ—Ç–∑—ã–≤">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            
            <div class="reviews-carousel" id="reviewsCarousel">
                <div class="reviews-carousel-track" id="reviewsCarouselTrack">
                    {% for review in reviews %}
                    <div class="review-card" data-review-id="{{ review.id }}" aria-label="–û—Ç–∑—ã–≤ –æ—Ç {{ review.client_name or '–ê–Ω–æ–Ω–∏–º' }}">
                        <div class="review-header">
                            <div class="reviewer-avatar">
                                {% if review.client_photo %}
                                <img src="{{ url_for('static', filename='img/reviews/' + review.client_photo) }}" 
                                     alt="{{ review.client_name }}" 
                                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <span class="avatar-fallback" style="display: none;">{{ review.client_name[0] if review.client_name else '–ê' }}</span>
                                {% else %}
                                <span class="avatar-fallback">{{ review.client_name[0] if review.client_name else '–ê' }}</span>
                                {% endif %}
                            </div>
                            <div class="reviewer-info">
                                <h4 class="reviewer-name">{{ review.client_name }}</h4>
                                {% if review.title %}
                                <h5 class="review-title">{{ review.title }}</h5>
                                {% endif %}
                                <time class="review-date" datetime="{% if review.created_at %}{% if review.created_at is string %}{{ review.created_at }}{% else %}{{ review.created_at.isoformat() }}{% endif %}{% endif %}">
                                    {% if review.created_at %}
                                        {% if review.created_at is string %}
                                            {{ review.created_at[:10] }}
                                        {% else %}
                                            {{ review.created_at.strftime('%d.%m.%Y') }}
                                        {% endif %}
                                    {% else %}
                                        –ù–µ–¥–∞–≤–Ω–æ
                                    {% endif %}
                                </time>
                            </div>
                            <div class="review-rating" aria-label="–û—Ü–µ–Ω–∫–∞: {{ review.rating }} –∏–∑ 5">
                                {% for i in range(review.rating) %}‚≠ê{% endfor %}
                                {% for i in range(5 - review.rating) %}‚òÜ{% endfor %}
                            </div>
                        </div>
                        <p class="review-text">{{ review.text or '–ë–µ–∑ —Ç–µ–∫—Å—Ç–∞' }}</p>
                    </div>
                    {% else %}
                    <p class="no-reviews">–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!</p>
                    {% endfor %}
                </div>
            </div>
            
            <button class="carousel-btn carousel-btn-next" id="nextReview" aria-label="–°–ª–µ–¥—É—é—â–∏–π –æ—Ç–∑—ã–≤">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            
            <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã -->
            <div class="carousel-indicators" id="carouselIndicators">
                {% for review in reviews %}
                <button class="carousel-indicator" data-index="{{ loop.index0 }}" aria-label="–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ç–∑—ã–≤—É {{ loop.index }}"></button>
                {% endfor %}
            </div>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ—Ç–∑—ã–≤–∞ -->
        <div class="reviews-actions">
			<a href="https://t.me/{{ telegram_bot_username or 'EnlivenSpaBot' }}" 
				class="btn btn-primary" 
				target="_blank"
				rel="noopener noreferrer">
				<span>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</span>
		 	</a>
            <a href="#booking" class="btn btn-outline">
                üíÜ –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Å–µ–∞–Ω—Å
            </a>
        </div>
    </div>
</section>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –æ—Ç–∑—ã–≤–∞ -->
<div id="reviewModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="modalTitle">
    <div class="modal-content">
        <button class="close-btn" type="button" onclick="closeReviewModal()" aria-label="–ó–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ">
            &times;
        </button>
        <form id="reviewForm" novalidate>
            <div class="form-group">
                <label for="reviewName">–í–∞—à–µ –∏–º—è</label>
                <input type="text" id="reviewName" name="name" required placeholder="–ö–∞–∫ –∫ –≤–∞–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è?" aria-required="true">
            </div>
            <div class="form-group">
                <label>–í–∞—à–∞ –æ—Ü–µ–Ω–∫–∞</label>
                <div class="rating-stars" role="group" aria-label="–û—Ü–µ–Ω–∏—Ç–µ –Ω–∞—à —Å–µ—Ä–≤–∏—Å –æ—Ç 1 –¥–æ 5 –∑–≤—ë–∑–¥">
                    <span data-value="1" class="star" aria-label="1 –∑–≤–µ–∑–¥–∞">‚≠ê</span>
                    <span data-value="2" class="star" aria-label="2 –∑–≤–µ–∑–¥—ã">‚≠ê</span>
                    <span data-value="3" class="star" aria-label="3 –∑–≤–µ–∑–¥—ã">‚≠ê</span>
                    <span data-value="4" class="star" aria-label="4 –∑–≤–µ–∑–¥—ã">‚≠ê</span>
                    <span data-value="5" class="star" aria-label="5 –∑–≤—ë–∑–¥">‚≠ê</span>
                </div>
                <input type="hidden" id="reviewRating" name="rating" required>
                <p class="rating-hint">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–≤—ë–∑–¥—ã, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å –æ—Ü–µ–Ω–∫—É</p>
            </div>
            <div class="form-group">
                <label for="reviewMessage">–í–∞—à –æ—Ç–∑—ã–≤</label>
                <textarea id="reviewMessage" name="message" rows="5" required 
                          placeholder="–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –≤–∞—à–∏–º–∏ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è–º–∏..." 
                          aria-required="true"
                          style="color: #2c3e50; background-color: #fff; width: 100%; padding: 1rem; border: 1px solid #ddd; border-radius: 12px; font-size: 1rem; min-height: 120px; resize: vertical; font-family: inherit; line-height: 1.5;"></textarea>
            </div>
            <a href="https://t.me/{{ telegram_bot_username or 'EnlivenSpaBot' }}" 
				class="btn btn-primary" 
				target="_blank"
				rel="noopener noreferrer">
				<span>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</span>
			</a>
        </form>
    </div>
</div>


================================================================================
–§–ê–ô–õ: templates/partials/header.html
================================================================================
<!-- Header -->
<header class="header navbar navbar-expand-lg">
    <div class="container">
        <div class="header-content">
            <!-- Logo -->
            <div class="header-logo">
                <a href="{{ url_for('index') }}" class="logo-link navbar-brand">
                    <img src="{{ site.logo.path }}" alt="{{ site.logo.alt }}" class="logo-icon">
                    <div class="logo-text">
                        <span class="logo-name">{{ site.logo.name }}</span>
                        <span class="logo-tagline">{{ site.logo.title }}</span>
                    </div>
                </a>
            </div>

            <!-- Contact Info -->
            <div class="header-contact d-none d-md-flex">
                <div class="contact-item">
                    <span class="contact-icon">üìû</span>
                    <div class="contact-details">
                        <a href="tel:+79656102108" class="contact-phone">{{ site.contact.phone }}</a>
                        <span class="contact-label">–ó–≤–æ–Ω–∫–∏ –ø—Ä–∏–Ω–∏–º–∞–µ–º</span>
                    </div>
                </div>

                <div class="contact-item">
                    <span class="contact-icon">üïí</span>
                    <div class="contact-details">
                        <span class="contact-time">{{ site.working_hours.weekdays }}</span>
						<span class="contact-time">{{ site.working_hours.weekend }}</span>
                        <span class="contact-label">–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã</span>
                    </div>
                </div>
            </div>

            <!-- CTA Button -->
            <div class="header-cta">
                <a href="{{ url_for('index') }}#booking" class="btn btn-primary btn-booking">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –æ–Ω–ª–∞–π–Ω</a>
            </div>
        </div>
    </div>
</header>


================================================================================
–§–ê–ô–õ: templates/partials/faq.html
================================================================================
<!-- FAQ Section -->
<section class="faq" id="faq">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã</h2>
            <p class="section-subtitle">
                –û—Ç–≤–µ—Ç—ã –Ω–∞ —Å–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –æ –º–∞—Å—Å–∞–∂–µ –∏ –Ω–∞—à–µ–º —Å–∞–ª–æ–Ω–µ
            </p>
        </div>
        
        <div class="faq-content">
            <div class="faq-categories">
                <button class="faq-category-btn active" data-category="general">–û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã</button>
                <button class="faq-category-btn" data-category="services">–£—Å–ª—É–≥–∏</button>
                <button class="faq-category-btn" data-category="booking">–ó–∞–ø–∏—Å—å</button>
                <button class="faq-category-btn" data-category="preparation">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞</button>
            </div>
            
            <div class="faq-list" id="faqList">
                <div class="faq-item" data-category="general">
                    <div class="faq-question">
                        <h3>–ö–∞–∫–∏–µ –≤–∏–¥—ã –º–∞—Å—Å–∞–∂–∞ –≤—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç–µ?</h3>
                        <span class="faq-icon">+</span>
                    </div>
                    <div class="faq-answer">
                        <p>–ú—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º —à–∏—Ä–æ–∫–∏–π —Å–ø–µ–∫—Ç—Ä –º–∞—Å—Å–∞–∂–Ω—ã—Ö —É—Å–ª—É–≥: –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π, –ª–µ—á–µ–±–Ω—ã–π, —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π, —Ä–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–π, –∞–Ω—Ç–∏—Ü–µ–ª–ª—é–ª–∏—Ç–Ω—ã–π, —Ç–∞–π—Å–∫–∏–π –º–∞—Å—Å–∞–∂, –º–∞—Å—Å–∞–∂ –≥–æ—Ä—è—á–∏–º–∏ –∫–∞–º–Ω—è–º–∏, –ª–∏–º—Ñ–æ–¥—Ä–µ–Ω–∞–∂–Ω—ã–π, –º–∞—Å—Å–∞–∂ –ª–∏—Ü–∞ –∏ –º–∞–Ω—É–∞–ª—å–Ω—É—é —Ç–µ—Ä–∞–ø–∏—é. –ö–∞–∂–¥—ã–π –≤–∏–¥ –º–∞—Å—Å–∞–∂–∞ –∏–º–µ–µ—Ç —Å–≤–æ–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –ø–æ–∫–∞–∑–∞–Ω–∏—è.</p>
                    </div>
                </div>
                
                <div class="faq-item" data-category="general">
                    <div class="faq-question">
                        <h3>–°–∫–æ–ª—å–∫–æ –¥–ª–∏—Ç—Å—è —Å–µ–∞–Ω—Å –º–∞—Å—Å–∞–∂–∞?</h3>
                        <span class="faq-icon">+</span>
                    </div>
                    <div class="faq-answer">
                        <p>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ–∞–Ω—Å–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–π —É—Å–ª—É–≥–∏: –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∞–∂ - 60 –º–∏–Ω—É—Ç, –ª–µ—á–µ–±–Ω—ã–π - 45 –º–∏–Ω—É—Ç, —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π - 50 –º–∏–Ω—É—Ç, —Ä–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–π - 75 –º–∏–Ω—É—Ç, —Ç–∞–π—Å–∫–∏–π –º–∞—Å—Å–∞–∂ - 90 –º–∏–Ω—É—Ç. –¢–æ—á–Ω–æ–µ –≤—Ä–µ–º—è —É–∫–∞–∑–∞–Ω–æ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ –∫–∞–∂–¥–æ–π —É—Å–ª—É–≥–∏.</p>
                    </div>
                </div>
                
                <div class="faq-item" data-category="services">
                    <div class="faq-question">
                        <h3>–ï—Å—Ç—å –ª–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è –∫ –º–∞—Å—Å–∞–∂—É?</h3>
                        <span class="faq-icon">+</span>
                    </div>
                    <div class="faq-answer">
                        <p>–î–∞, –µ—Å—Ç—å –æ–±—â–∏–µ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è: –æ—Å—Ç—Ä—ã–µ –≤–æ—Å–ø–∞–ª–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã, –≤—ã—Å–æ–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Ç–µ–ª–∞, –∫–æ–∂–Ω—ã–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è –≤ –æ—Å—Ç—Ä–æ–π —Ñ–∞–∑–µ, –æ–Ω–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è, –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å (–ø–µ—Ä–≤—ã–π —Ç—Ä–∏–º–µ—Å—Ç—Ä), –≤–∞—Ä–∏–∫–æ–∑–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤–µ–Ω, —Ç—Ä–æ–º–±–æ—Ñ–ª–µ–±–∏—Ç. –ü–µ—Ä–µ–¥ –ø—Ä–æ—Ü–µ–¥—É—Ä–æ–π –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–æ–æ–±—â–∏—Ç–µ –º–∞—Å—Ç–µ—Ä—É –æ —Å–≤–æ–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∑–¥–æ—Ä–æ–≤—å—è.</p>
                    </div>
                </div>
                
                <div class="faq-item" data-category="services">
                    <div class="faq-question">
                        <h3>–ö–∞–∫–∏–µ –º–∞—Å–ª–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –º–∞—Å—Å–∞–∂–∞?</h3>
                        <span class="faq-icon">+</span>
                    </div>
                    <div class="faq-answer">
                        <p>–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ –º–∞—Å–ª–∞ –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞: –º–∏–Ω–¥–∞–ª—å–Ω–æ–µ, –∂–æ–∂–æ–±–∞, –∫–æ–∫–æ—Å–æ–≤–æ–µ, –∞—Ä–≥–∞–Ω–æ–≤–æ–µ –º–∞—Å–ª–æ. –î–ª—è –∞—Ä–æ–º–∞—Ç–µ—Ä–∞–ø–∏–∏ –ø—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ–∏—Ä–Ω—ã–µ –º–∞—Å–ª–∞ –ª–∞–≤–∞–Ω–¥—ã, —ç–≤–∫–∞–ª–∏–ø—Ç–∞, –º—è—Ç—ã, —Ä–æ–∑–º–∞—Ä–∏–Ω–∞. –ü—Ä–∏ –∞–ª–ª–µ—Ä–≥–∏–∏ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –º–∞—Å–ª–∞ —Å–æ–æ–±—â–∏—Ç–µ –º–∞—Å—Ç–µ—Ä—É –∑–∞—Ä–∞–Ω–µ–µ.</p>
                    </div>
                </div>
                
                <div class="faq-item" data-category="booking">
                    <div class="faq-question">
                        <h3>–ö–∞–∫ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –º–∞—Å—Å–∞–∂?</h3>
                        <span class="faq-icon">+</span>
                    </div>
                    <div class="faq-answer">
                        <p>–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏: —á–µ—Ä–µ–∑ –æ–Ω–ª–∞–π–Ω-—Ñ–æ—Ä–º—É –Ω–∞ —Å–∞–π—Ç–µ, –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É +7 (965) 610-21-08, –∏–ª–∏ –ª–∏—á–Ω–æ –≤ —Å–∞–ª–æ–Ω–µ. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –∑–∞—Ä–∞–Ω–µ–µ, –æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã–µ –¥–Ω–∏.</p>
                    </div>
                </div>
                
                <div class="faq-item" data-category="booking">
                    <div class="faq-question">
                        <h3>–ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–º–µ–Ω–∏—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∑–∞–ø–∏—Å—å?</h3>
                        <span class="faq-icon">+</span>
                    </div>
                    <div class="faq-answer">
                        <p>–î–∞, –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∑–∞–ø–∏—Å—å. –ü—Ä–æ—Å–∏–º —Å–æ–æ–±—â–∏—Ç—å –æ–± —ç—Ç–æ–º –Ω–µ –º–µ–Ω–µ–µ —á–µ–º –∑–∞ 2 —á–∞—Å–∞ –¥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. –ü—Ä–∏ –æ—Ç–º–µ–Ω–µ –º–µ–Ω–µ–µ —á–µ–º –∑–∞ 2 —á–∞—Å–∞ –º–æ–∂–µ—Ç –≤–∑–∏–º–∞—Ç—å—Å—è —à—Ç—Ä–∞—Ñ –≤ —Ä–∞–∑–º–µ—Ä–µ 50% –æ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —É—Å–ª—É–≥–∏.</p>
                    </div>
                </div>
                
                <div class="faq-item" data-category="preparation">
                    <div class="faq-question">
                        <h3>–ö–∞–∫ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –º–∞—Å—Å–∞–∂—É?</h3>
                        <span class="faq-icon">+</span>
                    </div>
                    <div class="faq-answer">
                        <p>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø–∏—â—É –∑–∞ 1-2 —á–∞—Å–∞ –¥–æ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã, –ø—Ä–∏–Ω—è—Ç—å –¥—É—à –ø–µ—Ä–µ–¥ —Å–µ–∞–Ω—Å–æ–º, —Å–Ω—è—Ç—å —É–∫—Ä–∞—à–µ–Ω–∏—è –∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –ª–∏–Ω–∑—ã, —Å–æ–æ–±—â–∏—Ç—å –º–∞—Å—Ç–µ—Ä—É –æ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è—Ö. –î–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –≤–∏–¥–æ–≤ –º–∞—Å—Å–∞–∂–∞ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞.</p>
                    </div>
                </div>
                
                <div class="faq-item" data-category="preparation">
                    <div class="faq-question">
                        <h3>–ß—Ç–æ –Ω—É–∂–Ω–æ –≤–∑—è—Ç—å —Å —Å–æ–±–æ–π?</h3>
                        <span class="faq-icon">+</span>
                    </div>
                    <div class="faq-answer">
                        <p>–ú—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ: –ø–æ–ª–æ—Ç–µ–Ω—Ü–∞, –ø—Ä–æ—Å—Ç—ã–Ω–∏, –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–µ –±–µ–ª—å–µ. –í–∞–º –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏–π—Ç–∏ –≤ —É–¥–æ–±–Ω–æ–π –æ–¥–µ–∂–¥–µ. –î–ª—è –¥—É—à–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º —à–∞–º–ø—É–Ω—å, –≥–µ–ª—å –¥–ª—è –¥—É—à–∞ –∏ —Ñ–µ–Ω.</p>
                    </div>
                </div>
                
                <div class="faq-item" data-category="general">
                    <div class="faq-question">
                        <h3>–ï—Å—Ç—å –ª–∏ –ø–∞—Ä–∫–æ–≤–∫–∞ —Ä—è–¥–æ–º —Å —Å–∞–ª–æ–Ω–æ–º?</h3>
                        <span class="faq-icon">+</span>
                    </div>
                    <div class="faq-answer">
                        <p>–î–∞, —Ä—è–¥–æ–º —Å —Å–∞–ª–æ–Ω–æ–º –µ—Å—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ø–∞—Ä–∫–æ–≤–∫–∞. –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –ø—Ä–∏–ø–∞—Ä–∫–æ–≤–∞—Ç—å—Å—è –Ω–∞ —É–ª–∏—Ü–µ –õ–µ–Ω–∏–Ω–∞. –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å –ø–∞—Ä–∫–æ–≤–∫–æ–π, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É - –º—ã –ø–æ–º–æ–∂–µ–º –Ω–∞–π—Ç–∏ –º–µ—Å—Ç–æ.</p>
                    </div>
                </div>
                
                <div class="faq-item" data-category="services">
                    <div class="faq-question">
                        <h3>–ú–æ–∂–Ω–æ –ª–∏ –≤—ã–±—Ä–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞?</h3>
                        <span class="faq-icon">+</span>
                    </div>
                    <div class="faq-answer">
                        <p>–ö–æ–Ω–µ—á–Ω–æ! –ü—Ä–∏ –∑–∞–ø–∏—Å–∏ –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –ø–æ–Ω—Ä–∞–≤–∏–≤—à–µ–≥–æ—Å—è –º–∞—Å—Ç–µ—Ä–∞. –£ –∫–∞–∂–¥–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞ –µ—Å—Ç—å —Å–≤–æ—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã. –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è, —Å–æ–æ–±—â–∏—Ç–µ –æ–± —ç—Ç–æ–º –ø—Ä–∏ –∑–∞–ø–∏—Å–∏.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="faq-cta">
            <div class="cta-content">
                <h3 class="cta-title">–ù–µ –Ω–∞—à–ª–∏ –æ—Ç–≤–µ—Ç –Ω–∞ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å?</h3>
                <p class="cta-description">
                    –°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏, –∏ –º—ã —Å —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ–º –æ—Ç–≤–µ—Ç–∏–º –Ω–∞ –≤—Å–µ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã
                </p>
                <div class="cta-actions">
                    <a href="tel:+79656102108" class="btn btn-outline">
                        <span class="btn-icon">üìû</span>
                        –ü–æ–∑–≤–æ–Ω–∏—Ç—å
                    </a>
                    <a href="{{ url_for('index') }}#contacts" class="btn btn-primary">
                        <span class="btn-icon">üí¨</span>
                        –ù–∞–ø–∏—Å–∞—Ç—å –Ω–∞–º
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>


================================================================================
–§–ê–ô–õ: data/site_config.py
================================================================================
# data/site.py
"""
–í–°–ï –¥–∞–Ω–Ω—ã–µ —Å–∞–π—Ç–∞ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
"""

# üìå –û–°–ù–û–í–ù–´–ï –î–ê–ù–ù–´–ï –°–ê–ô–¢–ê
SITE = {
    # 1. –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –°–ê–ô–¢–ï
    "name": "–°—Ç—É–¥–∏—è –º–∞—Å—Å–∞–∂–∞ '–†–µ–ª–∞–∫—Å'",
    "short_name": "'–æ–æ–æ'",
    "tagline": "–í–∞—à–µ –∑–¥–æ—Ä–æ–≤—å–µ ‚Äî –Ω–∞—à–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è",
    "description": "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä —Å –ø–µ—Ä–µ–¥–æ–≤—ã–º –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º.",
    
    # 2. SEO –ò –ú–ï–¢–ê-–î–ê–ù–ù–´–ï
    "seo": {
        "title": "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∞–∂ –≤ –ê–ª—å–º–µ—Ç—å–µ–≤—Å–∫–µ | –û–Ω–ª–∞–π–Ω –∑–∞–ø–∏—Å—å", #{{ site.seo.title }}
        "keywords": "–º–∞—Å—Å–∞–∂, –º–∞—Å—Å–∞–∂–Ω—ã–π —Å–∞–ª–æ–Ω, –ê–ª—å–º–µ—Ç—å–µ–≤—Å–∫, —Ä–µ–ª–∞–∫—Å, –ª–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂", #{{ site.seo.keywords }}
        "description": "–†–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–π, –∏—Å—Ü–µ–ª—è—é—â–∏–π, –ª–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂. –û–ø—ã—Ç–Ω—ã–π –º–∞—Å—Ç–µ—Ä, –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ –º–∞—Å–ª–∞. –ó–∞–ø–∏—Å—å –æ–Ω–ª–∞–π–Ω." #{{ site.seo.description }}
    },
    
    # 3. –õ–û–ì–û–¢–ò–ü
    "logo": {
        "path": "/static/img/logo/logo.png", #<link rel="icon" href="{{ site.logo.path }}   "">         # –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –ª–æ–≥–æ—Ç–∏–ø–∞
        "alt": "–°—Ç—É–¥–∏—è –º–∞—Å—Å–∞–∂–∞",    #alt="{{ site.logo.alt }} –¢–µ–∫—Å—Ç –¥–ª—è —Å–ª–∞–±–æ–≤–∏–¥—è—â–∏—Ö
        "width": 180,                            #width="{{ site.logo.width }} –®–∏—Ä–∏–Ω–∞ –≤ –ø–∏–∫—Å–µ–ª—è—Ö
        "height": 60,                             #height="{{ site.logo.height }}–í—ã—Å–æ—Ç–∞ –≤ –ø–∏–∫—Å–µ–ª—è—Ö
        "name": "Enliven Spa", #{{ site.logo.name }}
        "title": "–°—Ç—É–¥–∏—è –º–∞—Å—Å–∞–∂–∞", #{{ site.logo.title }}
    },
    
    # 4. –ö–û–ù–¢–ê–ö–¢–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
    "contact": {
        "phone": "+7 (917) 922-57-20",           #{{ site.contact.phone }} –¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
        "phone_raw": "+79179225720",             #{{ site.contact.phone_raw }} –¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è —Å—Å—ã–ª–∫–∏ (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤)
        "email": "test@test.ru", #{{ site.contact.email }}
        "address": "–≥. –ê–ª—å–º–µ—Ç—å–µ–≤—Å–∫, —É–ª. –®–µ–≤—á–µ–Ω–∫–æ, –¥. 170, –ø.4",#{{ site.contact.address }}
        "city": "–≥.–ê–ª—å–º–µ—Ç—å–µ–≤—Å–∫", #{{ site.contact.city }}
        "street": "—É–ª. –®–µ–≤—á–µ–Ω–∫–æ, –¥. 170, –ø.4", #{{ site.contact.street }}
        "house": "170" #{{ site.contact.house }}
    },
    
    # 5. –†–ï–ñ–ò–ú –†–ê–ë–û–¢–´
    "working_hours": {
        "weekdays": "–ü–Ω-–ü—Ç: 08:00 - 20:00", # {{ site.working_hours.weekdays }}
        "weekend": "–°–±-–í—Å: 08:00 - 20:00", # {{ site.working_hours.weekend }}
        "lunch": "–±–µ–∑ –ø–µ—Ä–µ—Ä—ã–≤–∞", # {{ site.working_hours.lunch }}
        "holidays": "–í –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–µ –¥–Ω–∏ —Ä–∞–±–æ—Ç–∞–µ–º –ø–æ –æ—Å–æ–±–æ–º—É –≥—Ä–∞—Ñ–∏–∫—É" # {{ site.working_hours.holidays }}
    },
    
    # 6. –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –¢–ï–ö–°–¢–´
    "texts": {
        "welcome": "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å—Ç—É–¥–∏—è Enliven Spa!",#{{ site.texts.welcome }}
        "footer_title": "–°—Ç—É–¥–∏—è –º–∞—Å—Å–∞–∂–∞ Enliven Spa",#{{ site.texts.footer_title }}
        "footer_description": "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∞–∂ –≤ –ê–ª—å–º–µ—Ç—å–µ–≤—Å–∫–µ. –û–ø—ã—Ç–Ω—ã–π –º–∞—Å—Ç–µ—Ä, –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ –º–∞—Å–ª–∞, –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –∫–∞–∂–¥–æ–º—É –∫–ª–∏–µ–Ω—Ç—É.",#{{ site.texts.footer_description }}
        "about": "–ú—ã —Ä–∞–±–æ—Ç–∞–µ–º —Å 2010 –≥–æ–¥–∞ –∏ –ø–æ–º–æ–≥–ª–∏ —Ç—ã—Å—è—á–∞–º –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤.",#{{ site.about }}
        "services": "–®–∏—Ä–æ–∫–∏–π —Å–ø–µ–∫—Ç—Ä –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö —É—Å–ª—É–≥",#{{ site.texts.services }}
        "footer": "¬© 2025 –°—Ç—É–¥–∏—è –º–∞—Å—Å–∞–∂–∞ Enliven Spa. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã."#{{ site.texts.footer }}
    },
    
    "bot": {
        "telegram_bot": "EnlivenSpaBot",#{{ site.bot.telegram_bot}}
    },
    
    # 7. –°–û–¶–ò–ê–õ–¨–ù–´–ï –°–ï–¢–ò (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    "social": {
        "vk": "https://vk.com/enlivenspa", #<a href="{{ site.social.vk }}" target="_blank">VK</a>
        "telegram": "https://t.me/enlivenspa", #<a href="{{ site.social.telegram }}" target="_blank">Telegram</a>
        "Instagram": "https://www.instagram.com/enliven_spa?igsh=MzRlODBiNWFlZA=="#<a href="{{ site.social.Instagram }}" target="_blank">Instagram</a> 
    }
}

# üõ†Ô∏è –§–£–ù–ö–¶–ò–ò-–ü–û–ú–û–©–ù–ò–ö–ò (–¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞)
def get_phone_link():
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ –¥–ª—è —Å—Å—ã–ª–∫–∏ <a href='tel:...'>"""
    return SITE["contact"]["phone_raw"]

def get_working_hours_full():
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã"""
    wh = SITE["working_hours"]
    return f"{wh['weekdays']}, {wh['weekend']}"

def get_address_short():
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä–æ—Ç–∫–∏–π –∞–¥—Ä–µ—Å (–≥–æ—Ä–æ–¥, —É–ª–∏—Ü–∞)"""
    return f"{SITE['contact']['city']}, {SITE['contact']['street']}"



================================================================================
–§–ê–ô–õ: routes/booking.py
================================================================================
# routes/booking.py
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–ú–∞—Ä—à—Ä—É—Ç—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –º–∞—Å—Å–∞–∂–Ω–æ–≥–æ —Å–∞–ª–æ–Ω–∞.
–ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å –ª–æ–≥–∏–∫–æ–π –∏–∑ app.py.
"""

import time
import os
import json
from flask import Blueprint, render_template, request, redirect, url_for, jsonify, session, flash
from datetime import datetime, timedelta
from models import Service, Client, Booking, Review, Category, db
from sqlalchemy.exc import SQLAlchemyError
from notify.vk_bot import send_vk_notification

# –ò–º–ø–æ—Ä—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Ñ—É–Ω–∫—Ü–∏–π –∏–∑ app.py
from app import (
    validate_booking_form,
    validate_phone,
    check_time_conflict,
    create_booking_from_form,
    create_calendar_booking,
    logger,
    TELEGRAM_AVAILABLE,
    TELEGRAM_BOT_TOKEN,
    TELEGRAM_CHAT_ID,
    CALENDAR_AVAILABLE,
    DATABASE_AVAILABLE
)

# –ò–º–ø–æ—Ä—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
try:
    from telegram_bot import send_booking_notification_sync, send_booking_notification_to_client_sync
except ImportError:
    def send_booking_notification_sync(*args, **kwargs):
        logger.warning("Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ")
        return False
    def send_booking_notification_to_client_sync(*args, **kwargs):
        logger.warning("Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ")
        return False

booking_bp = Blueprint('booking', __name__, url_prefix='/booking')


def validate_future_date(date_string: str) -> tuple:
    """–í–∞–ª–∏–¥–∞—Ü–∏—è —á—Ç–æ –¥–∞—Ç–∞ –Ω–µ –≤ –ø—Ä–æ—à–ª–æ–º"""
    try:
        selected_date = datetime.strptime(date_string, '%Y-%m-%d').date()
        today = datetime.now().date()
        if selected_date < today:
            return False, "–î–∞—Ç–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ø—Ä–æ—à–ª–æ–º"
        return True, None
    except ValueError:
        return False, "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ì–ì–ì–ì-–ú–ú-–î–î"


def validate_future_time(date_string: str, time_string: str) -> tuple:
    """–í–∞–ª–∏–¥–∞—Ü–∏—è —á—Ç–æ –≤—Ä–µ–º—è –Ω–µ –≤ –ø—Ä–æ—à–ª–æ–º (–¥–ª—è —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π –¥–∞—Ç—ã)"""
    try:
        selected_date = datetime.strptime(date_string, '%Y-%m-%d').date()
        selected_time = datetime.strptime(time_string, '%H:%M').time()
        now = datetime.now()
        if selected_date == now.date():
            selected_datetime = datetime.combine(selected_date, selected_time)
            if selected_datetime < now:
                return False, "–í—Ä–µ–º—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ø—Ä–æ—à–ª–æ–º –¥–ª—è —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π –¥–∞—Ç—ã"
        return True, None
    except ValueError:
        return False, "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ß–ß:–ú–ú"


def get_client_ip():
    """–ü–æ–ª—É—á–µ–Ω–∏–µ IP –∫–ª–∏–µ–Ω—Ç–∞"""
    return request.headers.get('X-Forwarded-For', request.remote_addr).split(',')[0]


@booking_bp.route('/', methods=['GET', 'POST'])
def booking_form():
    """–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è."""

    if request.method == 'GET':
        session['form_start_time'] = time.time()
        session['form_token'] = os.urandom(16).hex()

    if request.method == 'POST':
        logger.info("‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ù–û–í–´–ô –º–∞—Ä—à—Ä—É—Ç: routes/booking.py")
        client_ip = get_client_ip()

        # === 1. –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ ===
        form_start = session.get('form_start_time')
        if not form_start or time.time() - form_start < 3:
            return jsonify({'success': False, 'message': '–ó–∞–ø–æ–ª–Ω—è–π—Ç–µ —Ñ–æ—Ä–º—É –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–µ–µ'}), 400

        form_token = request.form.get('form_token')
        if not form_token or form_token != session.get('form_token'):
            return jsonify({'success': False, 'message': '–û—à–∏–±–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏'}), 400

        if request.form.get('company'):
            logger.warning(f"üö´ –°–ø–∞–º –æ–±–Ω–∞—Ä—É–∂–µ–Ω (honeypot): {client_ip}")
            return jsonify({'success': False, 'message': '–û–±–Ω–∞—Ä—É–∂–µ–Ω —Å–ø–∞–º'}), 400

        fill_time = request.form.get('fill_time')
        if fill_time and int(fill_time) < 2000:
            logger.warning(f"üö´ –°–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ: {client_ip} - {fill_time}ms")
            return jsonify({'success': False, 'message': '–ó–∞–ø–æ–ª–Ω—è–π—Ç–µ —Ñ–æ—Ä–º—É –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–µ–µ'}), 400

        recent_count = 0
        if DATABASE_AVAILABLE:
            try:
                one_hour_ago = datetime.now() - timedelta(hours=1)
                recent_bookings = Booking.query.filter(
                    Booking.client_ip == client_ip,
                    Booking.created_at >= one_hour_ago
                ).all()
                recent_count = len(recent_bookings)
                logger.info(f"üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–∞—Å—Ç–æ—Ç—ã: IP {client_ip}, –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ —á–∞—Å: {recent_count}")

                phone = request.form.get('phone', '').strip()
                if phone:
                    recent_by_phone = Booking.query.filter(
                        Booking.client_phone == phone,
                        Booking.created_at >= one_hour_ago
                    ).count()
                    logger.info(f"üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É: {phone}, –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ —á–∞—Å: {recent_by_phone}")
                    recent_count = max(recent_count, recent_by_phone)
            except Exception as e:
                logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤: {e}")

        if recent_count >= 5:
            logger.warning(f"üö´ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ —á–∞—Å—Ç–æ—Ç–µ: IP {client_ip}, {recent_count} –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ —á–∞—Å")
            return jsonify({
                'success': False,
                'message': f'–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤ ({recent_count} –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å). –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.'
            }), 429

        # === 2. –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö ===
        service_id = request.form.get('service_id')
        session_duration = request.form.get('session_duration', '60')
        
        # –ü–æ–ª—É—á–∞–µ–º –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É—Å–ª—É–≥–∏ –∏–∑ –¥–∞–Ω–Ω—ã—Ö —É—Å–ª—É–≥–∏
        if service_id:
            try:
                # –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ JSON
                json_path = os.path.join(os.path.dirname(os.path.dirname(__file__)), 'data', 'services.json')
                if os.path.exists(json_path):
                    with open(json_path, 'r', encoding='utf-8') as f:
                        services_data = json.load(f)
                        service = next((s for s in services_data.get('services', []) if str(s.get('id')) == str(service_id)), None)
                        if service and service.get('duration'):
                            session_duration = str(service.get('duration'))
            except Exception as e:
                logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —É—Å–ª—É–≥–∏: {e}")
        
        form_data = {
            'name': request.form.get('name', '').strip(),
            'phone': request.form.get('phone', '').strip(),
            'service_id': service_id,
            'session_duration': session_duration,
            'date': request.form.get('date'),
            'time': request.form.get('time'),
            'contraindications': request.form.get('contraindications', '').strip(),
            'preferences': request.form.get('preferences', '').strip(),
            'client_ip': client_ip
        }
        logger.info(f"INFO –ü–æ–ª—É—á–µ–Ω–∞ –∑–∞—è–≤–∫–∞ –æ—Ç: {form_data['name']}, —É—Å–ª—É–≥–∞ ID: {service_id}, –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {session_duration} –º–∏–Ω")

        # === 3. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏ ===
        is_valid_date, date_error = validate_future_date(form_data['date'])
        if not is_valid_date:
            is_ajax = 'application/json' in request.headers.get('Accept', '')
            if is_ajax:
                return jsonify({'success': False, 'message': date_error}), 400
            flash(date_error, 'error')
            return redirect(url_for('booking.booking_form'))

        is_valid_time, time_error = validate_future_time(form_data['date'], form_data['time'])
        if not is_valid_time:
            is_ajax = 'application/json' in request.headers.get('Accept', '')
            if is_ajax:
                return jsonify({'success': False, 'message': time_error}), 400
            flash(time_error, 'error')
            return redirect(url_for('booking.booking_form'))

        # === 4. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã ===
        is_valid, error_message = validate_booking_form(form_data)
        if not is_valid:
            is_ajax = 'application/json' in request.headers.get('Accept', '')
            if is_ajax:
                return jsonify({'success': False, 'message': error_message}), 400
            flash(error_message, 'error')
            return redirect(url_for('booking.booking_form'))

        # === 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ ===
        has_conflict, conflict_message = check_time_conflict(
            form_data['date'],
            form_data['time'],
            form_data.get('session_duration') or '60'
        )
        if has_conflict:
            error_msg = f'–û—à–∏–±–∫–∞: {conflict_message}. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è.'
            logger.warning(f"WARNING –ö–æ–Ω—Ñ–ª–∏–∫—Ç –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è {form_data['name']}: {conflict_message}")
            is_ajax = 'application/json' in request.headers.get('Accept', '')
            if is_ajax:
                return jsonify({'success': False, 'message': error_msg}), 409
            flash(error_msg, 'error')
            return redirect(url_for('booking.booking_form'))

        # === 6. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î ===
        booking = None
        if DATABASE_AVAILABLE:
            try:
                booking = create_booking_from_form(form_data)
                if booking:
                    logger.info(f"SUCCESS –ó–∞–ø–∏—Å—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –ë–î: ID {booking.id}")
                    # –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—ä–µ–∫—Ç booking, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞
                    db.session.refresh(booking)
            except SQLAlchemyError as e:
                logger.error(f"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –ë–î: {e}")
                db.session.rollback()

        # === 7. –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∏ —Ü–µ–Ω—ã —É—Å–ª—É–≥–∏ (–¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ thank-you) ===
        service_name = '–ù–µ —É–∫–∞–∑–∞–Ω–æ'
        service_price = None
        try:
            service_id = int(form_data['service_id'])
            if DATABASE_AVAILABLE:
                service = Service.query.get(service_id)
                if service:
                    service_name = service.name
                    # –ë–µ—Ä–µ–º —Ü–µ–Ω—É –∏–∑ duration_prices, –µ—Å–ª–∏ –µ—Å—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
                    try:
                        duration_key = str(form_data.get('session_duration') or service.base_duration or service.duration_minutes or 60)
                        if getattr(service, 'duration_prices', None) and isinstance(service.duration_prices, dict):
                            service_price = service.duration_prices.get(duration_key) or service.duration_prices.get(str(service.base_duration))
                        if not service_price and getattr(service, 'price', None):
                            service_price = service.price
                    except Exception:
                        service_price = getattr(service, 'price', None)
            # Fallback: –∏—â–µ–º –≤ JSON-—Ñ–∞–π–ª–µ, –µ—Å–ª–∏ —Ü–µ–Ω–∞ –Ω–µ –ø–æ–ª—É—á–µ–Ω–∞
            if service_price is None:
                possible_paths = [
                    os.path.join(os.path.dirname(os.path.dirname(__file__)), 'data', 'services.json'),
                    os.path.join(os.path.dirname(__file__), '..', 'data', 'services.json'),
                    'data/services.json',
                    os.path.abspath('data/services.json')
                ]
                json_path = next((p for p in possible_paths if os.path.exists(p)), None)
                if json_path:
                    try:
                        with open(json_path, 'r', encoding='utf-8') as f:
                            services_data = json.load(f).get('services', [])
                            for s in services_data:
                                if (s.get('id') == service_id) or (s.get('name') == service_name):
                                    dur_key = str(form_data.get('session_duration') or s.get('duration') or s.get('base_duration') or 60)
                                    duration_prices = s.get('duration_prices') or {}
                                    service_price = duration_prices.get(dur_key) or s.get('price')
                                    break
                    except Exception:
                        pass
        except (ValueError, TypeError):
            pass
        if service_price is None:
            service_price = 0

        # === 8. –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π ===
        # --- Telegram (–∞–¥–º–∏–Ω—É) ---
        if TELEGRAM_AVAILABLE and TELEGRAM_BOT_TOKEN and TELEGRAM_CHAT_ID:
            try:
                services_list = []
                if DATABASE_AVAILABLE:
                    services_list = [s.to_dict() for s in Service.query.filter_by(is_active=True).all()]

                success = send_booking_notification_sync(
                    {
                        'name': form_data['name'],
                        'phone': form_data['phone'],
                        'service_id': form_data['service_id'],
                        'date': form_data['date'],
                        'time': form_data['time'],
                        'session_duration': form_data.get('session_duration') or '60',
                        'contraindications': form_data.get('contraindications', ''),
                        'preferences': form_data.get('preferences', ''),
                    },
                    [],
                    services_list,
                    bot_token=TELEGRAM_BOT_TOKEN,
                    chat_id=str(TELEGRAM_CHAT_ID)
                )
                if success:
                    logger.info(f"‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω—É –≤ Telegram –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –¥–ª—è {form_data['name']}")
            except Exception as e:
                logger.error(f"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram –∞–¥–º–∏–Ω—É: {e}")

        # --- Telegram (–∫–ª–∏–µ–Ω—Ç—É) ---
        if TELEGRAM_AVAILABLE and TELEGRAM_BOT_TOKEN and booking and DATABASE_AVAILABLE:
            try:
                # –ü–æ–ª—É—á–∞–µ–º –∫–ª–∏–µ–Ω—Ç–∞ –∏–∑ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
                client = booking.client if hasattr(booking, 'client') else None
                
                # –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –Ω–∞–π–¥–µ–Ω –∏ —É –Ω–µ–≥–æ –µ—Å—Ç—å telegram_chat_id
                if client and hasattr(client, 'telegram_chat_id') and client.telegram_chat_id:
                    services_list = []
                    if DATABASE_AVAILABLE:
                        services_list = [s.to_dict() for s in Service.query.filter_by(is_active=True).all()]

                    success = send_booking_notification_to_client_sync(
                        {
                            'name': form_data['name'],
                            'phone': form_data['phone'],
                            'service_id': form_data['service_id'],
                            'date': form_data['date'],
                            'time': form_data['time'],
                            'session_duration': form_data.get('session_duration') or '60',
                            'contraindications': form_data.get('contraindications', ''),
                            'preferences': form_data.get('preferences', ''),
                        },
                        str(client.telegram_chat_id),
                        services_list,
                        bot_token=TELEGRAM_BOT_TOKEN,
                        booking_id=booking.id if booking else None
                    )
                    if success:
                        logger.info(f"‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É –≤ Telegram –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: chat_id={client.telegram_chat_id}")
                    else:
                        logger.warning(f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É: chat_id={client.telegram_chat_id}")
                else:
                    logger.info(f"‚ÑπÔ∏è –£ –∫–ª–∏–µ–Ω—Ç–∞ {form_data['name']} –Ω–µ—Ç telegram_chat_id, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ")
            except Exception as e:
                logger.error(f"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram –∫–ª–∏–µ–Ω—Ç—É: {e}")
                import traceback
                logger.error(traceback.format_exc())

        # --- VK ---
        try:
            # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∞—Ç—É –¥–ª—è VK
            vk_date = form_data.get('date', '')
            try:
                from datetime import datetime
                date_obj = datetime.strptime(vk_date, '%Y-%m-%d')
                vk_date_formatted = date_obj.strftime('%d.%m.%Y')
            except:
                vk_date_formatted = vk_date
            send_vk_notification(
                f"üÜï –ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å!\n"
                f"–ò–º—è: {form_data['name']}\n"
                f"–¢–µ–ª–µ—Ñ–æ–Ω: {form_data['phone']}\n"
                f"–£—Å–ª—É–≥–∞: {service_name}\n"
                f"–î–∞—Ç–∞: {vk_date_formatted} | –í—Ä–µ–º—è: {form_data['time']}"
            )
        except Exception as e:
            print("‚ùó VK ERROR:", e)
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ VK-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: {e}")

        # === 9. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Calendar ===
        calendar_result = None
        if CALENDAR_AVAILABLE and booking:
            # –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ –≤ form_data –¥–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è
            form_data_with_service = form_data.copy()
            form_data_with_service['service_name'] = service_name
            success, result = create_calendar_booking(form_data_with_service)
            if success:
                try:
                    booking.calendar_link = result
                    db.session.commit()
                    logger.info(f"‚úÖ –°—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞: {result}")
                except Exception as e:
                    logger.error(f"‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—å: {e}")

        # === 10. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è thank-you ===
        date_formatted = form_data.get('date', '')
        try:
            date_obj = datetime.strptime(date_formatted, '%Y-%m-%d')
            date_formatted = date_obj.strftime('%d.%m.%Y')
        except Exception:
            pass

        session['booking_success'] = {
            'name': form_data.get('name', ''),
            'phone': form_data.get('phone', ''),
            'date': form_data.get('date', ''),
            'date_formatted': date_formatted,
            'time': form_data.get('time', ''),
            'service_name': service_name,
            'duration': form_data.get('session_duration', '60'),
            'price': service_price,
            'telegram_bot_username': 'EnlivenSpaBot'
        }

        # –û—á–∏—Å—Ç–∫–∞ –∑–∞—â–∏—Ç—ã
        session.pop('form_start_time', None)
        session.pop('form_token', None)

        # === 11. –û—Ç–≤–µ—Ç –∫–ª–∏–µ–Ω—Ç—É ===
        is_ajax = 'application/json' in request.headers.get('Accept', '')
        if is_ajax:
            return jsonify({'success': True, 'redirect': url_for('booking.thank_you')})
        return redirect(url_for('booking.thank_you'))

    # === GET –∑–∞–ø—Ä–æ—Å ===
    today = datetime.now().strftime('%Y-%m-%d')
    max_date = (datetime.now() + timedelta(days=60)).strftime('%Y-%m-%d')

    services = []
    categories = []
    
    # –í–°–ï–ì–î–ê –∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ JSON —Ñ–∞–π–ª–∞ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç JSON –Ω–∞–¥ –ë–î)
    # –ü—Ä–æ–±—É–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—É—Ç–µ–π –∫ JSON —Ñ–∞–π–ª—É
    possible_paths = [
        os.path.join(os.path.dirname(os.path.dirname(__file__)), 'data', 'services.json'),
        os.path.join(os.path.dirname(__file__), '..', 'data', 'services.json'),
        'data/services.json',
        os.path.abspath('data/services.json')
    ]
    
    json_path = None
    json_loaded = False
    
    for path in possible_paths:
        if os.path.exists(path):
            json_path = path
            logger.info(f"‚úÖ –ù–∞–π–¥–µ–Ω JSON —Ñ–∞–π–ª: {json_path}")
            break
    
    if json_path:
        try:
            with open(json_path, 'r', encoding='utf-8') as f:
                services_data = json.load(f)
                services = services_data.get('services', [])
                categories = services_data.get('categories', [])
                if services and len(services) > 0:
                    json_loaded = True
                    logger.info(f"‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑ JSON: {len(services)} —É—Å–ª—É–≥, {len(categories)} –∫–∞—Ç–µ–≥–æ—Ä–∏–π")
                    logger.info(f"–ü—Ä–∏–º–µ—Ä —É—Å–ª—É–≥–∏ –∏–∑ JSON: {services[0].get('name', 'N/A')}, –∫–∞—Ç–µ–≥–æ—Ä–∏—è: {services[0].get('category', 'N/A')}")
                    logger.info(f"–ö–ª—é—á–∏ –ø–µ—Ä–≤–æ–π —É—Å–ª—É–≥–∏: {list(services[0].keys())}")
                    # –°–æ—Ä—Ç–∏—Ä—É–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ –ø–æ—Ä—è–¥–∫—É
                    if categories:
                        categories = sorted(categories, key=lambda x: x.get('order', 999))
                        # –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –Ω–∞–∑–≤–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–ú–ê–°–°–ê–ñ–ò -> –ú–∞—Å—Å–∞–∂–∏)
                        for cat in categories:
                            if isinstance(cat, dict) and 'name' in cat:
                                cat_name = cat['name']
                                if cat_name == '–ú–ê–°–°–ê–ñ–ò':
                                    cat['name'] = '–ú–∞—Å—Å–∞–∂–∏'
                                elif cat_name == '–î–ï–¢–°–ö–ò–ô –ú–ê–°–°–ê–ñ':
                                    cat['name'] = '–î–µ—Ç—Å–∫–∏–π –º–∞—Å—Å–∞–∂'
                                elif cat_name == '–û–ë–©–ò–ô –ú–ê–°–°–ê–ñ':
                                    cat['name'] = '–û–±—â–∏–π –º–∞—Å—Å–∞–∂'
                                elif cat_name == '–ê–ü–ü–ê–†–ê–¢–ù–´–ï –ü–†–û–¶–ï–î–£–†–´':
                                    cat['name'] = '–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã'
                                elif cat_name == '–°–ü–ê-–ü–†–û–¶–ï–î–£–†–´':
                                    cat['name'] = '–°–ü–ê-–ø—Ä–æ—Ü–µ–¥—É—Ä—ã'
                                elif cat_name == '–û–ó–î–û–†–û–í–ò–¢–ï–õ–¨–ù–´–ï –¢–ï–•–ù–ò–ö–ò':
                                    cat['name'] = '–û–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏'
                                elif cat_name == '–ö–û–ú–ü–õ–ï–ö–°–´':
                                    cat['name'] = '–ö–æ–º–ø–ª–µ–∫—Å—ã'
                else:
                    logger.warning("‚ö†Ô∏è JSON —Ñ–∞–π–ª –ø—É—Å—Ç–æ–π –∏–ª–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —É—Å–ª—É–≥")
                    services = []
                    categories = []
        except Exception as e:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON: {e}")
            import traceback
            logger.error(traceback.format_exc())
    else:
        logger.warning(f"‚ö†Ô∏è –§–∞–π–ª JSON –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –ø—É—Ç–∏: {possible_paths}")
    
    # –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑ JSON –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å, –ø—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ë–î
    logger.info(f"–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: json_loaded={json_loaded}, services count={len(services) if services else 0}, DATABASE_AVAILABLE={DATABASE_AVAILABLE}")
    if not json_loaded and DATABASE_AVAILABLE:
        try:
            # –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ –ë–î
            db_categories = Category.query.order_by(Category.order).all()
            if db_categories:
                categories = [cat.to_dict() for cat in db_categories]
                logger.info(f"‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏–∑ –ë–î: {len(categories)}")
            
            # –ó–∞–≥—Ä—É–∂–∞–µ–º —É—Å–ª—É–≥–∏ –∏–∑ –ë–î
            db_services = Service.query.filter_by(is_active=True).all()
            services = []
            for s in db_services:
                service_dict = s.to_dict()
                # –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –ø–æ–ª–µ category –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
                if 'category' not in service_dict or not service_dict['category']:
                    # –ï—Å–ª–∏ –µ—Å—Ç—å category_id, –ø–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–∑ —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
                    if service_dict.get('category_id') and s.category_obj:
                        service_dict['category'] = s.category_obj.name
                    else:
                        service_dict['category'] = '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏'
                services.append(service_dict)
            logger.info(f"‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑ –ë–î: {len(services)} —É—Å–ª—É–≥")
            if services:
                logger.info(f"–ü—Ä–∏–º–µ—Ä —É—Å–ª—É–≥–∏ –∏–∑ –ë–î: {services[0].get('name', 'N/A')}, –∫–∞—Ç–µ–≥–æ—Ä–∏—è: {services[0].get('category', 'N/A')}, category_id: {services[0].get('category_id', 'N/A')}")
            
            # –ï—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –Ω–µ—Ç, —Å–æ–∑–¥–∞–µ–º –∏—Ö –∏–∑ —É—Å–ª—É–≥
            if not categories:
                category_names = set(s.get('category', '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏') for s in services if s.get('category'))
                categories = [{'name': name, 'description': '', 'icon': ''} for name in sorted(category_names)]
                logger.info(f"–°–æ–∑–¥–∞–Ω–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏–∑ –ë–î: {len(categories)}")
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —É—Å–ª—É–≥ –∏–∑ –ë–î: {e}")
            import traceback
            logger.error(traceback.format_exc())
            from app import SERVICES
            services = SERVICES
    
    # –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ
    if not services:
        from app import SERVICES
        services = SERVICES

    # –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è —É—Å–ª—É–≥–∏
    def extract_category_from_service(service_name):
        """–ò–∑–≤–ª–µ–∫–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è —É—Å–ª—É–≥–∏"""
        if not service_name:
            return '–ú–∞—Å—Å–∞–∂–∏'
        service_name_lower = service_name.lower()
        
        if any(word in service_name_lower for word in ['–¥–µ—Ç—Å–∫', '—Ä–µ–±–µ–Ω–æ–∫', '–º–ª–∞–¥–µ–Ω–µ—Ü', '1-12', '1-5', '6-12', '13-16']):
            return "–î–µ—Ç—Å–∫–∏–π –º–∞—Å—Å–∞–∂"
        elif any(word in service_name_lower for word in ['–æ–±—â–∏–π', '–ª–µ—á–µ–±–Ω—ã–π', '—Ä–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–π', '–ª–∏–º—Ñ–æ–¥—Ä–µ–Ω–∞–∂–Ω—ã–π', '—Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π']):
            return "–û–±—â–∏–π –º–∞—Å—Å–∞–∂"
        elif any(word in service_name_lower for word in ['–∞–ø–ø–∞—Ä–∞—Ç', 'lpg', '–∫–∞–≤–∏—Ç–∞—Ü', 'rf', '–≤–∞–∫—É—É–º', '–≤–∏–±—Ä–æ–º–∞—Å—Å–∞–∂']):
            return "–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã"
        elif any(word in service_name_lower for word in ['—Å–ø–∞', '–±–æ—á–∫–∞', '–ø–∏–ª–∏–Ω–≥', '–æ–±–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ', '–∫–µ–¥—Ä–æ–≤']):
            return "–°–ü–ê-–ø—Ä–æ—Ü–µ–¥—É—Ä—ã"
        elif any(word in service_name_lower for word in ['–æ–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å', '–∏—Å—Ü–µ–ª—è—é—â', '–æ–º–æ–ª–æ–∂–µ–Ω', '–∫–æ—Ä—Ä–µ–∫—Ü', '–∂–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç', '—É—Å–ø–µ—à–Ω–æ—Å—Ç', '–∞–∫—Å–µ—Å—Å']):
            return "–û–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏"
        elif '–∫–æ–º–ø–ª–µ–∫—Å' in service_name_lower:
            return "–ö–æ–º–ø–ª–µ–∫—Å—ã"
        else:
            return "–ú–∞—Å—Å–∞–∂–∏"
    
    # –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –≤—Å–µ —É—Å–ª—É–≥–∏ –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–ª–µ category
    # –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ú–ê–°–°–ê–ñ–ò -> –ú–∞—Å—Å–∞–∂–∏ –∏ —Ç.–¥.)
    category_mapping = {
        '–ú–ê–°–°–ê–ñ–ò': '–ú–∞—Å—Å–∞–∂–∏',
        '–î–ï–¢–°–ö–ò–ô –ú–ê–°–°–ê–ñ': '–î–µ—Ç—Å–∫–∏–π –º–∞—Å—Å–∞–∂',
        '–û–ë–©–ò–ô –ú–ê–°–°–ê–ñ': '–û–±—â–∏–π –º–∞—Å—Å–∞–∂',
        '–ê–ü–ü–ê–†–ê–¢–ù–´–ï –ü–†–û–¶–ï–î–£–†–´': '–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã',
        '–°–ü–ê-–ü–†–û–¶–ï–î–£–†–´': '–°–ü–ê-–ø—Ä–æ—Ü–µ–¥—É—Ä—ã',
        '–û–ó–î–û–†–û–í–ò–¢–ï–õ–¨–ù–´–ï –¢–ï–•–ù–ò–ö–ò': '–û–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏',
        '–ö–û–ú–ü–õ–ï–ö–°–´': '–ö–æ–º–ø–ª–µ–∫—Å—ã'
    }
    
    for service in services:
        # –ï—Å–ª–∏ service - —Å–ª–æ–≤–∞—Ä—å
        if isinstance(service, dict):
            current_category = service.get('category', '')
            # –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é, –µ—Å–ª–∏ –æ–Ω–∞ –≤ –≤–µ—Ä—Ö–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ
            if current_category in category_mapping:
                service['category'] = category_mapping[current_category]
                logger.info(f"–£—Å–ª—É–≥–∞ '{service.get('name', 'Unknown')}' - –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è: '{current_category}' -> '{service['category']}'")
            # –ï—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –ø—É—Å—Ç–∞—è, –∏–ª–∏ —Ä–∞–≤–Ω–∞ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é 'massage', –∏–∑–≤–ª–µ–∫–∞–µ–º –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è
            elif not current_category or current_category == '' or current_category.lower() == 'massage':
                # –ò–∑–≤–ª–µ–∫–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è —É—Å–ª—É–≥–∏
                service_name = service.get('name') or service.get('service_name') or ''
                new_category = extract_category_from_service(service_name)
                service['category'] = new_category
                logger.info(f"–£—Å–ª—É–≥–∞ '{service.get('name', 'Unknown')}' –ø–æ–ª—É—á–∏–ª–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é '{new_category}' (–±—ã–ª–æ: '{current_category}')")
        # –ï—Å–ª–∏ service - –æ–±—ä–µ–∫—Ç –º–æ–¥–µ–ª–∏
        elif hasattr(service, 'category'):
            if service.category in category_mapping:
                service.category = category_mapping[service.category]
            elif not service.category or service.category == 'massage':
                service_name = getattr(service, 'name', '') or getattr(service, 'service_name', '')
                new_category = extract_category_from_service(service_name)
                service.category = new_category
                logger.info(f"–£—Å–ª—É–≥–∞ '{service_name}' –ø–æ–ª—É—á–∏–ª–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é '{new_category}' (–±—ã–ª–æ: '{service.category}')")
    
    # –ï—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ JSON –∏–ª–∏ –ë–î, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫
    if not categories:
        categories = [
            {'id': 1, 'name': '–ú–∞—Å—Å–∞–∂–∏', 'order': 1},
            {'id': 2, 'name': '–î–µ—Ç—Å–∫–∏–π –º–∞—Å—Å–∞–∂', 'order': 2},
            {'id': 3, 'name': '–û–±—â–∏–π –º–∞—Å—Å–∞–∂', 'order': 3},
            {'id': 4, 'name': '–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã', 'order': 4},
            {'id': 5, 'name': '–°–ü–ê-–ø—Ä–æ—Ü–µ–¥—É—Ä—ã', 'order': 5},
            {'id': 6, 'name': '–û–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏', 'order': 6},
            {'id': 7, 'name': '–ö–æ–º–ø–ª–µ–∫—Å—ã', 'order': 7}
        ]
        logger.info(f"‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: {len(categories)}")
    else:
        logger.info(f"‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (JSON/–ë–î): {len(categories)}")
    logger.info(f"‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: {[c.get('name', c) if isinstance(c, dict) else c for c in categories]}")
    
    # –û—Ç–ª–∞–¥–∫–∞: –∫–∞–∫–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –º—ã –ø–µ—Ä–µ–¥–∞–µ–º
    logger.info(f"DEBUG: –ü–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: {categories}")
    logger.info(f"DEBUG: –¢–∏–ø categories: {type(categories)}")
    logger.info(f"DEBUG: –î–ª–∏–Ω–∞ categories: {len(categories) if categories else 0}")
    
    # –û—Ç–ª–∞–¥–∫–∞: –∫–∞–∫–∏–µ —É—Å–ª—É–≥–∏
    logger.info(f"DEBUG: –£—Å–ª—É–≥ –∑–∞–≥—Ä—É–∂–µ–Ω–æ: {len(services) if services else 0}")
    if services and len(services) > 0:
        logger.info(f"DEBUG: –ö–∞—Ç–µ–≥–æ—Ä–∏—è –ø–µ—Ä–≤–æ–π —É—Å–ª—É–≥–∏: {services[0].get('category')}")
    
    # –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ categories - —ç—Ç–æ —Å–ø–∏—Å–æ–∫, –∞ –Ω–µ None
    if not categories:
        categories = []
    
    # –õ–æ–≥–∏—Ä—É–µ–º –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
    logger.info(f"–ü–µ—Ä–µ–¥–∞–µ–º –≤ —à–∞–±–ª–æ–Ω: {len(services)} —É—Å–ª—É–≥, {len(categories)} –∫–∞—Ç–µ–≥–æ—Ä–∏–π")
    if categories:
        logger.info(f"–ö–∞—Ç–µ–≥–æ—Ä–∏–∏: {[c.get('name', 'N/A') if isinstance(c, dict) else str(c) for c in categories]}")
    if services:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ —É—Å–ª—É–≥–∞—Ö
        service_categories = set()
        for s in services:
            if isinstance(s, dict):
                cat = s.get('category', '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏')
                if cat and cat != '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏':
                    service_categories.add(cat)
        logger.info(f"–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ —É—Å–ª—É–≥–∞—Ö: {sorted(service_categories)}")
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–≤—É—é —É—Å–ª—É–≥—É
        if services and isinstance(services[0], dict):
            first_service = services[0]
            logger.info(f"–ü–µ—Ä–≤–∞—è —É—Å–ª—É–≥–∞: name='{first_service.get('name', 'N/A')}', category='{first_service.get('category', 'N/A')}'")
            logger.info(f"–ö–ª—é—á–∏ –ø–µ—Ä–≤–æ–π —É—Å–ª—É–≥–∏: {list(first_service.keys())}")
    
    # –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø–µ—Ä–µ–¥–∞–π—Ç–µ categories –≤ render_template
    try:
        return render_template(
            'booking.html',
            services=services,
            categories=categories,  # –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —ç—Ç–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è!
            today=today,
            max_date=max_date,
            calendar_available=CALENDAR_AVAILABLE,
            database_available=DATABASE_AVAILABLE,
            telegram_bot_username='EnlivenSpaBot'
        )
    except Exception as e:
        logger.error(f"ERROR –≤ booking(): {e}")
        import traceback
        logger.error(traceback.format_exc())
        flash("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è", "error")
        return render_template('booking.html', 
                             services=[], 
                             categories=categories,
                             today=today,
                             max_date=max_date,
                             calendar_available=CALENDAR_AVAILABLE,
                             database_available=DATABASE_AVAILABLE,
                             telegram_bot_username='EnlivenSpaBot')


@booking_bp.route('/thank-you')
def thank_you():
    """–°—Ç—Ä–∞–Ω–∏—Ü–∞ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏."""
    booking_data = session.get('booking_success')
    if not booking_data:
        flash('–î–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã', 'warning')
        return redirect(url_for('index'))

    telegram_bot_username = booking_data.get('telegram_bot_username', 'EnlivenSpaBot')
    session.pop('booking_success', None)

    return render_template('thank_you.html', booking_data=booking_data, telegram_bot_username=telegram_bot_username)


@booking_bp.route('/api/available-slots')
def available_slots():
    """API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤."""
    date = request.args.get('date')
    duration = request.args.get('duration', 60, type=int)

    if not date:
        return jsonify({'error': '–î–∞—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞'}), 400

    is_valid_date, date_error = validate_future_date(date)
    if not is_valid_date:
        return jsonify({'error': date_error}), 400

    try:
        from app import get_available_time_slots
        slots = get_available_time_slots(date, duration)
        return jsonify({'slots': slots})
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª–æ—Ç–æ–≤: {e}")
        return jsonify({'error': '–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞'}), 500


================================================================================
–§–ê–ô–õ: routes/__init__.py
================================================================================
# -*- coding: utf-8 -*-
"""
–ú–∞—Ä—à—Ä—É—Ç—ã Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
"""









================================================================================
–§–ê–ô–õ: routes/admin.py
================================================================================
# -*- coding: utf-8 -*-
"""
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
"""

from flask import Blueprint, render_template, request, jsonify, flash, redirect, url_for
from models import db, Booking, Master, Review
from datetime import datetime, timedelta
import json

admin_bp = Blueprint('admin', __name__, url_prefix='/admin')

@admin_bp.route('/')
def dashboard():
    """–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å"""
    try:
        # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        total_bookings = Booking.query.count()
        pending_bookings = Booking.query.filter_by(status='pending').count()
        confirmed_bookings = Booking.query.filter_by(status='confirmed').count()
        total_masters = Master.query.filter_by(is_active=True).count()
        total_reviews = Review.query.filter_by(is_approved=True).count()
        
        # –ü–æ—Å–ª–µ–¥–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
        recent_bookings = Booking.query.order_by(Booking.created_at.desc()).limit(10).all()
        
        # –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
        today = datetime.now().date()
        today_bookings = Booking.query.filter_by(booking_date=today).all()
        
        stats = {
            'total_bookings': total_bookings,
            'pending_bookings': pending_bookings,
            'confirmed_bookings': confirmed_bookings,
            'total_masters': total_masters,
            'total_reviews': total_reviews
        }
        
        return render_template('admin/dashboard.html',
                             stats=stats,
                             recent_bookings=recent_bookings,
                             today_bookings=today_bookings)
    except Exception as e:
        flash(f'–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö: {str(e)}', 'error')
        return render_template('admin/dashboard.html',
                             stats={},
                             recent_bookings=[],
                             today_bookings=[])

@admin_bp.route('/bookings')
def bookings():
    """–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏"""
    try:
        page = request.args.get('page', 1, type=int)
        status = request.args.get('status', 'all')
        
        query = Booking.query
        
        if status != 'all':
            query = query.filter_by(status=status)
        
        bookings = query.order_by(Booking.created_at.desc()).paginate(
            page=page, per_page=20, error_out=False
        )
        
        return render_template('admin/bookings.html',
                             bookings=bookings,
                             current_status=status)
    except Exception as e:
        flash(f'–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π: {str(e)}', 'error')
        return render_template('admin/bookings.html',
                             bookings=None,
                             current_status='all')

@admin_bp.route('/bookings/<int:booking_id>/status', methods=['POST'])
def update_booking_status(booking_id):
    """–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è"""
    try:
        booking = Booking.query.get_or_404(booking_id)
        new_status = request.json.get('status')
        
        if new_status not in ['pending', 'confirmed', 'cancelled', 'completed']:
            return jsonify({'success': False, 'message': '–ù–µ–≤–µ—Ä–Ω—ã–π —Å—Ç–∞—Ç—É—Å'}), 400
        
        booking.status = new_status
        db.session.commit()
        
        return jsonify({
            'success': True,
            'message': '–°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª–µ–Ω'
        })
    except Exception as e:
        return jsonify({
            'success': False,
            'message': f'–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: {str(e)}'
        }), 500

@admin_bp.route('/masters')
def masters():
    """–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–∞–º–∏"""
    try:
        masters = Master.query.order_by(Master.order).all()
        return render_template('admin/masters.html', masters=masters)
    except Exception as e:
        flash(f'–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–∞—Å—Ç–µ—Ä–æ–≤: {str(e)}', 'error')
        return render_template('admin/masters.html', masters=[])

@admin_bp.route('/masters', methods=['POST'])
def create_master():
    """–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞"""
    try:
        data = request.form.to_dict()
        
        master = Master(
            name=data['name'],
            position=data['position'],
            experience=data['experience'],
            specialization=data['specialization'],
            bio=data.get('bio', ''),
            education=data.get('education', ''),
            is_active=True
        )
        
        db.session.add(master)
        db.session.commit()
        
        flash('–ú–∞—Å—Ç–µ—Ä —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω', 'success')
        return redirect(url_for('admin.masters'))
    except Exception as e:
        flash(f'–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Å—Ç–µ—Ä–∞: {str(e)}', 'error')
        return redirect(url_for('admin.masters'))

@admin_bp.route('/reviews')
def reviews():
    """–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞–º–∏"""
    try:
        page = request.args.get('page', 1, type=int)
        approved = request.args.get('approved', 'all')
        
        query = Review.query
        
        if approved == 'pending':
            query = query.filter_by(is_approved=False)
        elif approved == 'approved':
            query = query.filter_by(is_approved=True)
        
        reviews = query.order_by(Review.created_at.desc()).paginate(
            page=page, per_page=20, error_out=False
        )
        
        return render_template('admin/reviews.html',
                             reviews=reviews,
                             current_filter=approved)
    except Exception as e:
        flash(f'–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç–∑—ã–≤–æ–≤: {str(e)}', 'error')
        return render_template('admin/reviews.html',
                             reviews=None,
                             current_filter='all')

@admin_bp.route('/reviews/<int:review_id>/approve', methods=['POST'])
def approve_review(review_id):
    """–û–¥–æ–±—Ä–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞"""
    try:
        review = Review.query.get_or_404(review_id)
        review.is_approved = True
        db.session.commit()
        
        return jsonify({
            'success': True,
            'message': '–û—Ç–∑—ã–≤ –æ–¥–æ–±—Ä–µ–Ω'
        })
    except Exception as e:
        db.session.rollback()
        return jsonify({
            'success': False,
            'message': f'–û—à–∏–±–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∏—è: {str(e)}'
        }), 500

@admin_bp.route('/reviews/<int:review_id>/reject', methods=['POST'])
def reject_review(review_id):
    """–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞"""
    try:
        review = Review.query.get_or_404(review_id)
        db.session.delete(review)
        db.session.commit()
        
        return jsonify({
            'success': True,
            'message': '–û—Ç–∑—ã–≤ –æ—Ç–∫–ª–æ–Ω–µ–Ω –∏ —É–¥–∞–ª–µ–Ω'
        })
    except Exception as e:
        db.session.rollback()
        return jsonify({
            'success': False,
            'message': f'–û—à–∏–±–∫–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è: {str(e)}'
        }), 500

@admin_bp.route('/reviews/<int:review_id>/feature', methods=['POST'])
def toggle_feature_review(review_id):
    """–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ "—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π" –¥–ª—è –æ—Ç–∑—ã–≤–∞"""
    try:
        review = Review.query.get_or_404(review_id)
        review.is_featured = not review.is_featured
        db.session.commit()
        
        return jsonify({
            'success': True,
            'message': '–°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª–µ–Ω',
            'is_featured': review.is_featured
        })
    except Exception as e:
        db.session.rollback()
        return jsonify({
            'success': False,
            'message': f'–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: {str(e)}'
        }), 500










================================================================================
–§–ê–ô–õ: routes/main.py
================================================================================
# -*- coding: utf-8 -*-
"""
–û—Å–Ω–æ–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
"""

from flask import Blueprint, render_template, request, flash, redirect, url_for
from flask_sqlalchemy import SQLAlchemy
from models import Master, Review
import json
import os

main_bp = Blueprint('main', __name__)
db = SQLAlchemy()

# –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON —Ñ–∞–π–ª–æ–≤
def load_data_from_json(filename):
    """–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON —Ñ–∞–π–ª–∞"""
    try:
        with open(f'data/{filename}', 'r', encoding='utf-8') as f:
            return json.load(f)
    except FileNotFoundError:
        return {}

# –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
SERVICES_DATA = load_data_from_json('services.json')
CONTACT_INFO = {
    'phone': '+7 (965) 610-21-08',
    'email': 'info@relax-salon.ru',
    'address': '—É–ª. –õ–µ–Ω–∏–Ω–∞, –≥.–ê–ª—å–º–µ—Ç—å–µ–≤—Å–∫',
    'working_hours': '–ï–∂–µ–¥–Ω–µ–≤–Ω–æ 8:00 - 20:00'
}

@main_bp.route('/')
def index():
    """–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞"""
    # –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ
    try:
        masters = Master.query.filter_by(is_active=True).order_by(Master.order).all()
        reviews = Review.query.filter_by(is_approved=True).order_by(Review.created_at.desc()).limit(6).all()
    except:
        masters = []
        reviews = []
    
    return render_template('index.html',
                         services=SERVICES_DATA,
                         masters=masters,
                         reviews=reviews,
                         contact=CONTACT_INFO)

@main_bp.route('/services')
def services():
    """–°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Å–ª—É–≥"""
    return render_template('index.html',
                         services=SERVICES_DATA,
                         contact=CONTACT_INFO)

@main_bp.route('/masters')
def masters():
    """–°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–∞—Å—Ç–µ—Ä–æ–≤"""
    try:
        masters = Master.query.filter_by(is_active=True).order_by(Master.order).all()
    except:
        masters = []
    
    return render_template('index.html',
                         masters=masters,
                         contact=CONTACT_INFO)

@main_bp.route('/gallery')
def gallery():
    """–°—Ç—Ä–∞–Ω–∏—Ü–∞ –≥–∞–ª–µ—Ä–µ–∏"""
    return render_template('index.html',
                         contact=CONTACT_INFO)

@main_bp.route('/contacts')
def contacts():
    """–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤"""
    return render_template('index.html',
                         contact=CONTACT_INFO)

@main_bp.route('/booking')
def booking():
    """–°—Ç—Ä–∞–Ω–∏—Ü–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è"""
    return render_template('booking.html',
                         contact=CONTACT_INFO)




================================================================================
–§–ê–ô–õ: routes/calendar_api.py
================================================================================
"""
API endpoints –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Google Calendar
"""

from flask import Blueprint, request, jsonify
from datetime import datetime, timedelta
import logging

from utils.calendar_service import calendar_service

# –°–æ–∑–¥–∞–µ–º Blueprint –¥–ª—è API –∫–∞–ª–µ–Ω–¥–∞—Ä—è
calendar_bp = Blueprint('calendar_api', __name__, url_prefix='/api/calendar')

logger = logging.getLogger(__name__)


@calendar_bp.route('/health', methods=['GET'])
def health_check():
    """
    –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ Google Calendar API
    
    Returns:
        JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å—Ç–∞—Ç—É—Å–µ API
    """
    try:
        result = calendar_service.check_health()
        status_code = 200 if result["success"] else 500
        return jsonify(result), status_code
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è API: {e}")
        return jsonify({
            "success": False,
            "message": f"–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: {e}",
            "timestamp": datetime.now().isoformat()
        }), 500


@calendar_bp.route('/busy-slots', methods=['GET'])
def get_busy_slots():
    """
    –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–Ω—è—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –¥–∞—Ç—É
    
    Query Parameters:
        date: –î–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
        
    Returns:
        JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∑–∞–Ω—è—Ç—ã—Ö —Å–ª–æ—Ç–∞—Ö
    """
    try:
        date = request.args.get('date')
        
        if not date:
            return jsonify({
                "success": False,
                "message": "–ü–∞—Ä–∞–º–µ—Ç—Ä 'date' –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω",
                "error": "missing_date_parameter"
            }), 400
        
        # –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞—Ç—ã
        try:
            datetime.strptime(date, '%Y-%m-%d')
        except ValueError:
            return jsonify({
                "success": False,
                "message": "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ YYYY-MM-DD",
                "error": "invalid_date_format"
            }), 400
        
        result = calendar_service.get_busy_slots(date)
        status_code = 200 if result["success"] else 500
        return jsonify(result), status_code
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–Ω—è—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤: {e}")
        return jsonify({
            "success": False,
            "message": f"–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: {e}",
            "timestamp": datetime.now().isoformat()
        }), 500


@calendar_bp.route('/check-slot', methods=['GET'])
def check_slot_availability():
    """
    –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å–ª–æ—Ç–∞
    
    Query Parameters:
        datetime: –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DDTHH:MM:SS (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
        duration: –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∏–Ω—É—Ç–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 60)
        
    Returns:
        JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ª–æ—Ç–∞
    """
    try:
        datetime_str = request.args.get('datetime')
        duration = request.args.get('duration', 60, type=int)
        
        if not datetime_str:
            return jsonify({
                "success": False,
                "message": "–ü–∞—Ä–∞–º–µ—Ç—Ä 'datetime' –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω",
                "error": "missing_datetime_parameter"
            }), 400
        
        # –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ datetime
        try:
            datetime.fromisoformat(datetime_str.replace('Z', ''))
        except ValueError:
            return jsonify({
                "success": False,
                "message": "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç datetime. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ YYYY-MM-DDTHH:MM:SS",
                "error": "invalid_datetime_format"
            }), 400
        
        result = calendar_service.check_slot_availability(datetime_str, duration)
        status_code = 200 if result["success"] else 500
        return jsonify(result), status_code
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ª–æ—Ç–∞: {e}")
        return jsonify({
            "success": False,
            "message": f"–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: {e}",
            "timestamp": datetime.now().isoformat()
        }), 500


@calendar_bp.route('/debug-busy-slots', methods=['GET'])
def debug_busy_slots():
    """–û—Ç–ª–∞–¥–æ—á–Ω—ã–π endpoint –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–Ω—è—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤"""
    try:
        date = request.args.get('date', '2025-10-23')
        
        if not calendar_service.is_available():
            return jsonify({
                'success': False,
                'message': 'Google Calendar API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω'
            }), 503
        
        # –ü–æ–ª—É—á–∞–µ–º –∑–∞–Ω—è—Ç—ã–µ —Å–ª–æ—Ç—ã –Ω–∞–ø—Ä—è–º—É—é
        busy_result = calendar_service.get_busy_slots(date)
        
        return jsonify({
            'success': True,
            'date': date,
            'calendar_id': calendar_service.calendar_id,
            'busy_result': busy_result,
            'available_slots': calendar_service.get_available_time_slots(date, (8, 20))
        }), 200
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –æ—Ç–ª–∞–¥–∫–∏ –∑–∞–Ω—è—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤: {e}")
        return jsonify({
            'success': False,
            'message': f'–û—à–∏–±–∫–∞: {str(e)}'
        }), 500


@calendar_bp.route('/available-slots', methods=['GET'])
def get_available_slots():
    """
    –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –Ω–∞ –¥–∞—Ç—É –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞
    
    Query Parameters:
        date: –î–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
        master_id: ID –º–∞—Å—Ç–µ—Ä–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
        start_hour: –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 9)
        end_hour: –ö–æ–Ω–µ—Ü —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 21)
        
    Returns:
        JSON —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Å–ª–æ—Ç–∞–º–∏ –¥–ª—è –º–∞—Å—Ç–µ—Ä–∞
    """
    try:
        date = request.args.get('date')
        master_id = request.args.get('master_id')
        start_hour = request.args.get('start_hour', 9, type=int)
        end_hour = request.args.get('end_hour', 21, type=int)
        
        if not date:
            return jsonify({
                "success": False,
                "message": "–ü–∞—Ä–∞–º–µ—Ç—Ä 'date' –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω",
                "error": "missing_date_parameter"
            }), 400
            
        if not master_id:
            return jsonify({
                "success": False,
                "message": "–ü–∞—Ä–∞–º–µ—Ç—Ä 'master_id' –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω",
                "error": "missing_master_id_parameter"
            }), 400
        
        # –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞—Ç—ã
        try:
            datetime.strptime(date, '%Y-%m-%d')
        except ValueError:
            return jsonify({
                "success": False,
                "message": "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ YYYY-MM-DD",
                "error": "invalid_date_format"
            }), 400
        
        # –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤
        if not (0 <= start_hour <= 23 and 0 <= end_hour <= 23 and start_hour < end_hour):
            return jsonify({
                "success": False,
                "message": "–ù–µ–≤–µ—Ä–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã",
                "error": "invalid_working_hours"
            }), 400
        
        # NOTE: –ü–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞
        available_slots = calendar_service.get_available_time_slots(
            date, 
            master_id,
            (start_hour, end_hour)
        )
        
        return jsonify({
            "success": True,
            "date": date,
            "master_id": master_id,
            "available_slots": available_slots,
            "count": len(available_slots),
            "working_hours": {
                "start": start_hour,
                "end": end_hour
            }
        }), 200
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤: {e}")
        return jsonify({
            "success": False,
            "message": f"–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: {e}",
            "timestamp": datetime.now().isoformat()
        }), 500


@calendar_bp.route('/create-event', methods=['POST'])
def create_event():
    """
    –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ
    
    JSON Body:
        summary: –ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
        start_datetime: –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DDTHH:MM:SS (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
        end_datetime: –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DDTHH:MM:SS (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
        description: –û–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
        client_name: –ò–º—è –∫–ª–∏–µ–Ω—Ç–∞
        client_phone: –¢–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞
        master_name: –ò–º—è –º–∞—Å—Ç–µ—Ä–∞
        service_name: –ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏
        
    Returns:
        JSON —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è
    """
    try:
        data = request.get_json()
        
        if not data:
            return jsonify({
                "success": False,
                "message": "JSON –¥–∞–Ω–Ω—ã–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã",
                "error": "missing_json_data"
            }), 400
        
        # –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
        required_fields = ['summary', 'start_datetime', 'end_datetime']
        for field in required_fields:
            if field not in data:
                return jsonify({
                    "success": False,
                    "message": f"–ü–æ–ª–µ '{field}' –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ",
                    "error": f"missing_{field}"
                }), 400
        
        # –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ datetime
        try:
            datetime.fromisoformat(data['start_datetime'].replace('Z', ''))
            datetime.fromisoformat(data['end_datetime'].replace('Z', ''))
        except ValueError:
            return jsonify({
                "success": False,
                "message": "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç datetime. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ YYYY-MM-DDTHH:MM:SS",
                "error": "invalid_datetime_format"
            }), 400
        
        result = calendar_service.create_event(
            summary=data['summary'],
            start_datetime=data['start_datetime'],
            end_datetime=data['end_datetime'],
            description=data.get('description', ''),
            client_name=data.get('client_name', ''),
            client_phone=data.get('client_phone', ''),
            master_name=data.get('master_name', ''),
            service_name=data.get('service_name', '')
        )
        
        status_code = 201 if result["success"] else 500
        return jsonify(result), status_code
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è: {e}")
        return jsonify({
            "success": False,
            "message": f"–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: {e}",
            "timestamp": datetime.now().isoformat()
        }), 500


@calendar_bp.route('/delete-event/<event_id>', methods=['DELETE'])
def delete_event(event_id):
    """
    –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –∏–∑ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
    
    Path Parameters:
        event_id: ID —Å–æ–±—ã—Ç–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
        
    Returns:
        JSON —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —É–¥–∞–ª–µ–Ω–∏—è
    """
    try:
        if not event_id:
            return jsonify({
                "success": False,
                "message": "ID —Å–æ–±—ã—Ç–∏—è –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω",
                "error": "missing_event_id"
            }), 400
        
        result = calendar_service.delete_event(event_id)
        status_code = 200 if result["success"] else 500
        return jsonify(result), status_code
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è: {e}")
        return jsonify({
            "success": False,
            "message": f"–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: {e}",
            "timestamp": datetime.now().isoformat()
        }), 500


@calendar_bp.route('/add-editor', methods=['POST'])
def add_calendar_editor():
    """–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–∞–∫ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è"""
    try:
        if not calendar_service.is_available():
            return jsonify({
                'success': False,
                'message': 'Google Calendar API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω'
            }), 503
        
        data = request.get_json()
        user_email = data.get('email')
        
        if not user_email:
            return jsonify({
                'success': False,
                'message': '–ù–µ —É–∫–∞–∑–∞–Ω email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è'
            }), 400
        
        # –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–∞–∫ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
        acl_rule = {
            'scope': {
                'type': 'user',
                'value': user_email
            },
            'role': 'writer'
        }
        
        calendar_service.service.acl().insert(
            calendarId=calendar_service.calendar_id,
            body=acl_rule
        ).execute()
        
        return jsonify({
            'success': True,
            'message': f'–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user_email} –¥–æ–±–∞–≤–ª–µ–Ω –∫–∞–∫ —Ä–µ–¥–∞–∫—Ç–æ—Ä –∫–∞–ª–µ–Ω–¥–∞—Ä—è',
            'calendar_id': calendar_service.calendar_id,
            'calendar_url': f'https://calendar.google.com/calendar/embed?src={calendar_service.calendar_id}'
        }), 200
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞: {e}")
        return jsonify({
            'success': False,
            'message': f'–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞: {str(e)}'
        }), 500

@calendar_bp.route('/switch-calendar', methods=['POST'])
def switch_calendar():
    """–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å"""
    try:
        if not calendar_service.is_available():
            return jsonify({
                'success': False,
                'message': 'Google Calendar API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω'
            }), 503
        
        data = request.get_json()
        new_calendar_id = data.get('calendar_id')
        
        if not new_calendar_id:
            return jsonify({
                'success': False,
                'message': '–ù–µ —É–∫–∞–∑–∞–Ω ID –∫–∞–ª–µ–Ω–¥–∞—Ä—è'
            }), 400
        
        # –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å
        old_calendar_id = calendar_service.calendar_id
        calendar_service.calendar_id = new_calendar_id
        
        return jsonify({
            'success': True,
            'message': f'–ü–µ—Ä–µ–∫–ª—é—á–∏–ª–∏—Å—å –Ω–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—å {new_calendar_id}',
            'old_calendar_id': old_calendar_id,
            'new_calendar_id': calendar_service.calendar_id,
            'calendar_url': f'https://calendar.google.com/calendar/embed?src={calendar_service.calendar_id}'
        }), 200
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è: {e}")
        return jsonify({
            'success': False,
            'message': f'–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è: {str(e)}'
        }), 500

@calendar_bp.route('/setup-permissions', methods=['POST'])
def setup_calendar_permissions():
    """–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–ª–µ–Ω–¥–∞—Ä—é"""
    try:
        if not calendar_service.is_available():
            return jsonify({
                'success': False,
                'message': 'Google Calendar API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω'
            }), 503
        
        # –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
        calendar_service._setup_calendar_permissions()
        
        return jsonify({
            'success': True,
            'message': '–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–ª–µ–Ω–¥–∞—Ä—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã',
            'calendar_id': calendar_service.calendar_id,
            'calendar_url': f'https://calendar.google.com/calendar/embed?src={calendar_service.calendar_id}'
        }), 200
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞: {e}")
        return jsonify({
            'success': False,
            'message': f'–û—à–∏–±–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞: {str(e)}'
        }), 500

@calendar_bp.route('/test-integration', methods=['GET'])
def test_integration():
    """
    –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Google Calendar
    
    Returns:
        JSON —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Ç–µ—Å—Ç–æ–≤
    """
    try:
        test_results = {
            "timestamp": datetime.now().isoformat(),
            "tests": []
        }
        
        # –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è API
        health_result = calendar_service.check_health()
        test_results["tests"].append({
            "name": "API Health Check",
            "success": health_result["success"],
            "message": health_result["message"]
        })
        
        # –¢–µ—Å—Ç 2: –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–Ω—è—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤ (—Å–µ–≥–æ–¥–Ω—è)
        today = datetime.now().strftime('%Y-%m-%d')
        busy_result = calendar_service.get_busy_slots(today)
        test_results["tests"].append({
            "name": "Get Busy Slots",
            "success": busy_result["success"],
            "message": f"–ù–∞–π–¥–µ–Ω–æ {busy_result.get('count', 0)} –∑–∞–Ω—è—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤"
        })
        
        # –¢–µ—Å—Ç 3: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤
        available_slots = calendar_service.get_available_time_slots(today)
        test_results["tests"].append({
            "name": "Get Available Slots",
            "success": True,
            "message": f"–ù–∞–π–¥–µ–Ω–æ {len(available_slots)} –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤"
        })
        
        # –û–±—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        all_tests_passed = all(test["success"] for test in test_results["tests"])
        test_results["overall_success"] = all_tests_passed
        
        status_code = 200 if all_tests_passed else 500
        return jsonify(test_results), status_code
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: {e}")
        return jsonify({
            "success": False,
            "message": f"–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: {e}",
            "timestamp": datetime.now().isoformat()
        }), 500


@calendar_bp.route('/events-by-time', methods=['GET'])
def get_events_by_time():
    """
    –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–ø–∏—Å–µ–π –º–∞—Å—Ç–µ—Ä–æ–≤
    
    Query Parameters:
        date: –î–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
        time: –í—Ä–µ–º—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ HH:MM (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
        
    Returns:
        JSON —Å —Å–æ–±—ã—Ç–∏—è–º–∏ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
    """
    try:
        date = request.args.get('date')
        time = request.args.get('time')
        
        if not date or not time:
            return jsonify({
                "success": False,
                "message": "–ü–∞—Ä–∞–º–µ—Ç—Ä—ã 'date' –∏ 'time' –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã",
                "error": "missing_parameters"
            }), 400
        
        # NOTE: –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —Å–æ–±—ã—Ç–∏—è –Ω–∞ –¥–∞—Ç—É
        busy_result = calendar_service.get_busy_slots(date)
        if not busy_result["success"]:
            return jsonify({
                "success": False,
                "message": "–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π",
                "error": "calendar_error"
            }), 500
        
        # NOTE: –§–∏–ª—å—Ç—Ä—É–µ–º —Å–æ–±—ã—Ç–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏
        target_time = f"{date}T{time}:00"
        events_at_time = []
        
        for event in busy_result["busy_slots"]:
            event_start = event['start'].replace('Z', '').replace('+03:00', '')
            if '+' in event_start:
                event_start = event_start.split('+')[0]
            
            # NOTE: –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º –≤—Ä–µ–º—è (–±–µ–∑ —É—á–µ—Ç–∞ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞)
            if target_time in event_start or event_start.startswith(target_time):
                # NOTE: –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–∞—Å—Ç–µ—Ä–µ –∏–∑ –æ–ø–∏—Å–∞–Ω–∏—è
                description = event.get('description', '')
                master_name = "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –º–∞—Å—Ç–µ—Ä"
                
                if "üë®‚Äç‚öïÔ∏è –ú–∞—Å—Ç–µ—Ä:" in description:
                    master_line = [line for line in description.split('\n') if "üë®‚Äç‚öïÔ∏è –ú–∞—Å—Ç–µ—Ä:" in line]
                    if master_line:
                        master_name = master_line[0].replace("üë®‚Äç‚öïÔ∏è –ú–∞—Å—Ç–µ—Ä:", "").strip()
                elif "–ú–∞—Å—Ç–µ—Ä:" in description:
                    master_line = [line for line in description.split('\n') if "–ú–∞—Å—Ç–µ—Ä:" in line]
                    if master_line:
                        master_name = master_line[0].replace("–ú–∞—Å—Ç–µ—Ä:", "").strip()
                
                events_at_time.append({
                    'event_id': event.get('event_id'),
                    'summary': event.get('summary'),
                    'master_name': master_name,
                    'start_time': event_start,
                    'end_time': event['end'].replace('Z', '').replace('+03:00', ''),
                    'description': description
                })
        
        return jsonify({
            "success": True,
            "date": date,
            "time": time,
            "events": events_at_time,
            "count": len(events_at_time),
            "message": f"–ù–∞–π–¥–µ–Ω–æ {len(events_at_time)} –∑–∞–ø–∏—Å–µ–π –Ω–∞ {time}"
        }), 200
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏: {e}")
        return jsonify({
            "success": False,
            "message": f"–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: {e}",
            "timestamp": datetime.now().isoformat()
        }), 500


